{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://web-sequencer/./node_modules/autobind-decorator/lib/index.js","webpack://web-sequencer/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://web-sequencer/./node_modules/prop-types/index.js","webpack://web-sequencer/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/index.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/default-class-names.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/input-range.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/key-codes.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/label.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/range-prop-type.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/slider.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/track.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/value-prop-type.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/value-transformer.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/captialize.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/clamp.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/distance-to.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/index.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/is-defined.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/is-number.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/is-object.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/length.js","webpack://web-sequencer/./node_modules/symbol-observable/es/index.js","webpack://web-sequencer/./node_modules/symbol-observable/es/ponyfill.js","webpack://web-sequencer/external var \"React\"","webpack://web-sequencer/webpack/bootstrap","webpack://web-sequencer/webpack/runtime/compat get default export","webpack://web-sequencer/webpack/runtime/define property getters","webpack://web-sequencer/webpack/runtime/global","webpack://web-sequencer/webpack/runtime/harmony module decorator","webpack://web-sequencer/webpack/runtime/hasOwnProperty shorthand","webpack://web-sequencer/external var \"ReactDOM\"","webpack://web-sequencer/external var \"PIXI\"","webpack://web-sequencer/./build/HelperModules/SortedArray.js","webpack://web-sequencer/./build/HelperModules/NoteHelper.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/rng.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/regex.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/validate.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/v4.js","webpack://web-sequencer/./build/HelperModules/SimpleEvent.js","webpack://web-sequencer/./build/Model/Notation/SongEvents.js","webpack://web-sequencer/./build/Model/SongManagement/SongMetadata.js","webpack://web-sequencer/./build/Model/Nodes/OscillatorInstrument.js","webpack://web-sequencer/./build/Model/Notation/EventTimeline.js","webpack://web-sequencer/./build/Model/Tracks/BaseTrack.js","webpack://web-sequencer/./build/Model/Tracks/OscillatorTrack.js","webpack://web-sequencer/./build/Model/Nodes/SoundFileInstrument.js","webpack://web-sequencer/./build/Model/Tracks/SoundFileTrack.js","webpack://web-sequencer/./dependencies/tuna.js","webpack://web-sequencer/./build/Model/Nodes/EffectsChain.js","webpack://web-sequencer/./build/Model/SongManagement/ConnectionManager.js","webpack://web-sequencer/./build/Model/SongManagement/SongManager.js","webpack://web-sequencer/./build/View/Shared/NavigationView.js","webpack://web-sequencer/./build/View/Settings/UITheme.js","webpack://web-sequencer/./build/View/Shared/UITrack.js","webpack://web-sequencer/./build/View/Settings/Enums.js","webpack://web-sequencer/./build/View/Shared/InteractiveContainer.js","webpack://web-sequencer/./build/HelperModules/PointHelper.js","webpack://web-sequencer/./build/HelperModules/ObjectPool.js","webpack://web-sequencer/./build/View/SharedReact/BasicElements.js","webpack://web-sequencer/./build/View/SharedReact/Modal.js","webpack://web-sequencer/./build/View/Shared/MetadataEditBox.js","webpack://web-sequencer/./build/View/Shared/MetadataTimelineEvent.js","webpack://web-sequencer/./build/View/Shared/ScrollableBarHeader.js","webpack://web-sequencer/./build/View/Shared/ScrollableBar.js","webpack://web-sequencer/./build/View/Shared/TimelineMarker.js","webpack://web-sequencer/./build/View/Settings/EditType.js","webpack://web-sequencer/./build/View/Shared/ScrollableTimeline.js","webpack://web-sequencer/./build/View/Sequencer/NoteGroupMarker.js","webpack://web-sequencer/./build/View/Shared/MouseState.js","webpack://web-sequencer/./build/View/Sequencer/SequencerTimeline.js","webpack://web-sequencer/./build/View/Shared/TrackTimelineEvent.js","webpack://web-sequencer/./node_modules/redux/es/redux.js","webpack://web-sequencer/./build/View/ReactUI/UITrackStore.js","webpack://web-sequencer/./build/View/Timeline/SongTimeline.js","webpack://web-sequencer/./build/View/Timeline/TrackList.js","webpack://web-sequencer/./build/View/Shared/VerticalScrollView.js","webpack://web-sequencer/./build/View/Sequencer/SequencerView.js","webpack://web-sequencer/./build/View/Timeline/TimelineView.js","webpack://web-sequencer/./build/View/ReactUI/EditPanel.js","webpack://web-sequencer/./build/View/ReactUI/PlaybackPanel.js","webpack://web-sequencer/external var \"ReactBeautifulDnd\"","webpack://web-sequencer/./build/View/ReactUI/EffectsChainPanel.js","webpack://web-sequencer/./build/View/ReactUI/SerialisePanel.js","webpack://web-sequencer/./build/View/ReactUI/SequencerApp.js","webpack://web-sequencer/./build/app.js"],"sourcesContent":["/**\n * @copyright 2015, Andrey Popp <8mayday@gmail.com>\n *\n * The decorator may be used on classes or methods\n * ```\n * @autobind\n * class FullBound {}\n *\n * class PartBound {\n *   @autobind\n *   method () {}\n * }\n * ```\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = autobind;\n\nfunction autobind() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (args.length === 1) {\n    return boundClass.apply(undefined, args);\n  } else {\n    return boundMethod.apply(undefined, args);\n  }\n}\n\n/**\n * Use boundMethod to bind all methods on the target.prototype\n */\nfunction boundClass(target) {\n  // (Using reflect to get all keys including symbols)\n  var keys = undefined;\n  // Use Reflect if exists\n  if (typeof Reflect !== 'undefined' && typeof Reflect.ownKeys === 'function') {\n    keys = Reflect.ownKeys(target.prototype);\n  } else {\n    keys = Object.getOwnPropertyNames(target.prototype);\n    // use symbols if support is provided\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      keys = keys.concat(Object.getOwnPropertySymbols(target.prototype));\n    }\n  }\n\n  keys.forEach(function (key) {\n    // Ignore special case target method\n    if (key === 'constructor') {\n      return;\n    }\n\n    var descriptor = Object.getOwnPropertyDescriptor(target.prototype, key);\n\n    // Only methods need binding\n    if (typeof descriptor.value === 'function') {\n      Object.defineProperty(target.prototype, key, boundMethod(target, key, descriptor));\n    }\n  });\n  return target;\n}\n\n/**\n * Return a descriptor removing the value and returning a getter\n * The getter will return a .bind version of the function\n * and memoize the result against a symbol on the instance\n */\nfunction boundMethod(target, key, descriptor) {\n  var fn = descriptor.value;\n\n  if (typeof fn !== 'function') {\n    throw new Error('@autobind decorator can only be applied to methods not: ' + typeof fn);\n  }\n\n  // In IE11 calling Object.defineProperty has a side-effect of evaluating the\n  // getter for the property which is being replaced. This causes infinite\n  // recursion and an \"Out of stack space\" error.\n  var definingProperty = false;\n\n  return {\n    configurable: true,\n    get: function get() {\n      if (definingProperty || this === target.prototype || this.hasOwnProperty(key)) {\n        return fn;\n      }\n\n      var boundFn = fn.bind(this);\n      definingProperty = true;\n      Object.defineProperty(this, key, {\n        value: boundFn,\n        configurable: true,\n        writable: true\n      });\n      definingProperty = false;\n      return boundFn;\n    }\n  };\n}\nmodule.exports = exports['default'];\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inputRange = require('./input-range/input-range');\n\nvar _inputRange2 = _interopRequireDefault(_inputRange);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @ignore\n * @typedef {Object} ClientRect\n * @property {number} height\n * @property {number} left\n * @property {number} top\n * @property {number} width\n */\n\n/**\n * @typedef {Object} InputRangeClassNames\n * @property {string} activeTrack\n * @property {string} disabledInputRange\n * @property {string} inputRange\n * @property {string} labelContainer\n * @property {string} maxLabel\n * @property {string} minLabel\n * @property {string} slider\n * @property {string} sliderContainer\n * @property {string} track\n * @property {string} valueLabel\n */\n\n/**\n * @typedef {Function} LabelFormatter\n * @param {number} value\n * @param {string} type\n * @return {string}\n */\n\n/**\n * @ignore\n * @typedef {Object} Point\n * @property {number} x\n * @property {number} y\n */\n\n/**\n * @typedef {Object} Range\n * @property {number} min - Min value\n * @property {number} max - Max value\n */\n\nexports.default = _inputRange2.default;\nmodule.exports = exports['default'];\n//# sourceMappingURL=index.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Default CSS class names\n * @ignore\n * @type {InputRangeClassNames}\n */\nvar DEFAULT_CLASS_NAMES = {\n  activeTrack: 'input-range__track input-range__track--active',\n  disabledInputRange: 'input-range input-range--disabled',\n  inputRange: 'input-range',\n  labelContainer: 'input-range__label-container',\n  maxLabel: 'input-range__label input-range__label--max',\n  minLabel: 'input-range__label input-range__label--min',\n  slider: 'input-range__slider',\n  sliderContainer: 'input-range__slider-container',\n  track: 'input-range__track input-range__track--background',\n  valueLabel: 'input-range__label input-range__label--value'\n};\n\nexports.default = DEFAULT_CLASS_NAMES;\nmodule.exports = exports['default'];\n//# sourceMappingURL=default-class-names.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _desc, _value, _class;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nvar _valueTransformer = require('./value-transformer');\n\nvar valueTransformer = _interopRequireWildcard(_valueTransformer);\n\nvar _defaultClassNames = require('./default-class-names');\n\nvar _defaultClassNames2 = _interopRequireDefault(_defaultClassNames);\n\nvar _label = require('./label');\n\nvar _label2 = _interopRequireDefault(_label);\n\nvar _rangePropType = require('./range-prop-type');\n\nvar _rangePropType2 = _interopRequireDefault(_rangePropType);\n\nvar _valuePropType = require('./value-prop-type');\n\nvar _valuePropType2 = _interopRequireDefault(_valuePropType);\n\nvar _slider = require('./slider');\n\nvar _slider2 = _interopRequireDefault(_slider);\n\nvar _track = require('./track');\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _utils = require('../utils');\n\nvar _keyCodes = require('./key-codes');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n/**\n * A React component that allows users to input numeric values within a range\n * by dragging its sliders.\n */\nvar InputRange = (_class = function (_React$Component) {\n  _inherits(InputRange, _React$Component);\n\n  _createClass(InputRange, null, [{\n    key: 'propTypes',\n\n    /**\n     * @ignore\n     * @override\n     * @return {Object}\n     */\n    get: function get() {\n      return {\n        allowSameValues: _propTypes2.default.bool,\n        ariaLabelledby: _propTypes2.default.string,\n        ariaControls: _propTypes2.default.string,\n        classNames: _propTypes2.default.objectOf(_propTypes2.default.string),\n        disabled: _propTypes2.default.bool,\n        draggableTrack: _propTypes2.default.bool,\n        formatLabel: _propTypes2.default.func,\n        maxValue: _rangePropType2.default,\n        minValue: _rangePropType2.default,\n        name: _propTypes2.default.string,\n        onChangeStart: _propTypes2.default.func,\n        onChange: _propTypes2.default.func.isRequired,\n        onChangeComplete: _propTypes2.default.func,\n        step: _propTypes2.default.number,\n        value: _valuePropType2.default\n      };\n    }\n\n    /**\n     * @ignore\n     * @override\n     * @return {Object}\n     */\n\n  }, {\n    key: 'defaultProps',\n    get: function get() {\n      return {\n        allowSameValues: false,\n        classNames: _defaultClassNames2.default,\n        disabled: false,\n        maxValue: 10,\n        minValue: 0,\n        step: 1\n      };\n    }\n\n    /**\n     * @param {Object} props\n     * @param {boolean} [props.allowSameValues]\n     * @param {string} [props.ariaLabelledby]\n     * @param {string} [props.ariaControls]\n     * @param {InputRangeClassNames} [props.classNames]\n     * @param {boolean} [props.disabled = false]\n     * @param {Function} [props.formatLabel]\n     * @param {number|Range} [props.maxValue = 10]\n     * @param {number|Range} [props.minValue = 0]\n     * @param {string} [props.name]\n     * @param {string} props.onChange\n     * @param {Function} [props.onChangeComplete]\n     * @param {Function} [props.onChangeStart]\n     * @param {number} [props.step = 1]\n     * @param {number|Range} props.value\n     */\n\n  }]);\n\n  function InputRange(props) {\n    _classCallCheck(this, InputRange);\n\n    /**\n     * @private\n     * @type {?number}\n     */\n    var _this = _possibleConstructorReturn(this, (InputRange.__proto__ || Object.getPrototypeOf(InputRange)).call(this, props));\n\n    _this.startValue = null;\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    _this.node = null;\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    _this.trackNode = null;\n\n    /**\n     * @private\n     * @type {bool}\n     */\n    _this.isSliderDragging = false;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    _this.lastKeyMoved = null;\n    return _this;\n  }\n\n  /**\n   * @ignore\n   * @override\n   * @return {void}\n   */\n\n\n  _createClass(InputRange, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.removeDocumentMouseUpListener();\n      this.removeDocumentTouchEndListener();\n    }\n\n    /**\n     * Return the CSS class name of the component\n     * @private\n     * @return {string}\n     */\n\n  }, {\n    key: 'getComponentClassName',\n    value: function getComponentClassName() {\n      if (!this.props.disabled) {\n        return this.props.classNames.inputRange;\n      }\n\n      return this.props.classNames.disabledInputRange;\n    }\n\n    /**\n     * Return the bounding rect of the track\n     * @private\n     * @return {ClientRect}\n     */\n\n  }, {\n    key: 'getTrackClientRect',\n    value: function getTrackClientRect() {\n      return this.trackNode.getClientRect();\n    }\n\n    /**\n     * Return the slider key closest to a point\n     * @private\n     * @param {Point} position\n     * @return {string}\n     */\n\n  }, {\n    key: 'getKeyByPosition',\n    value: function getKeyByPosition(position) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var positions = valueTransformer.getPositionsFromValues(values, this.props.minValue, this.props.maxValue, this.getTrackClientRect());\n\n      if (this.isMultiValue()) {\n        var distanceToMin = (0, _utils.distanceTo)(position, positions.min);\n        var distanceToMax = (0, _utils.distanceTo)(position, positions.max);\n\n        if (distanceToMin < distanceToMax) {\n          return 'min';\n        }\n      }\n\n      return 'max';\n    }\n\n    /**\n     * Return all the slider keys\n     * @private\n     * @return {string[]}\n     */\n\n  }, {\n    key: 'getKeys',\n    value: function getKeys() {\n      if (this.isMultiValue()) {\n        return ['min', 'max'];\n      }\n\n      return ['max'];\n    }\n\n    /**\n     * Return true if the difference between the new and the current value is\n     * greater or equal to the step amount of the component\n     * @private\n     * @param {Range} values\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'hasStepDifference',\n    value: function hasStepDifference(values) {\n      var currentValues = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n\n      return (0, _utils.length)(values.min, currentValues.min) >= this.props.step || (0, _utils.length)(values.max, currentValues.max) >= this.props.step;\n    }\n\n    /**\n     * Return true if the component accepts a min and max value\n     * @private\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'isMultiValue',\n    value: function isMultiValue() {\n      return (0, _utils.isObject)(this.props.value);\n    }\n\n    /**\n     * Return true if the range is within the max and min value of the component\n     * @private\n     * @param {Range} values\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'isWithinRange',\n    value: function isWithinRange(values) {\n      if (this.isMultiValue()) {\n        return values.min >= this.props.minValue && values.max <= this.props.maxValue && this.props.allowSameValues ? values.min <= values.max : values.min < values.max;\n      }\n\n      return values.max >= this.props.minValue && values.max <= this.props.maxValue;\n    }\n\n    /**\n     * Return true if the new value should trigger a render\n     * @private\n     * @param {Range} values\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'shouldUpdate',\n    value: function shouldUpdate(values) {\n      return this.isWithinRange(values) && this.hasStepDifference(values);\n    }\n\n    /**\n     * Update the position of a slider\n     * @private\n     * @param {string} key\n     * @param {Point} position\n     * @return {void}\n     */\n\n  }, {\n    key: 'updatePosition',\n    value: function updatePosition(key, position) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var positions = valueTransformer.getPositionsFromValues(values, this.props.minValue, this.props.maxValue, this.getTrackClientRect());\n\n      positions[key] = position;\n      this.lastKeyMoved = key;\n\n      this.updatePositions(positions);\n    }\n\n    /**\n     * Update the positions of multiple sliders\n     * @private\n     * @param {Object} positions\n     * @param {Point} positions.min\n     * @param {Point} positions.max\n     * @return {void}\n     */\n\n  }, {\n    key: 'updatePositions',\n    value: function updatePositions(positions) {\n      var values = {\n        min: valueTransformer.getValueFromPosition(positions.min, this.props.minValue, this.props.maxValue, this.getTrackClientRect()),\n        max: valueTransformer.getValueFromPosition(positions.max, this.props.minValue, this.props.maxValue, this.getTrackClientRect())\n      };\n\n      var transformedValues = {\n        min: valueTransformer.getStepValueFromValue(values.min, this.props.step),\n        max: valueTransformer.getStepValueFromValue(values.max, this.props.step)\n      };\n\n      this.updateValues(transformedValues);\n    }\n\n    /**\n     * Update the value of a slider\n     * @private\n     * @param {string} key\n     * @param {number} value\n     * @return {void}\n     */\n\n  }, {\n    key: 'updateValue',\n    value: function updateValue(key, value) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n\n      values[key] = value;\n\n      this.updateValues(values);\n    }\n\n    /**\n     * Update the values of multiple sliders\n     * @private\n     * @param {Range|number} values\n     * @return {void}\n     */\n\n  }, {\n    key: 'updateValues',\n    value: function updateValues(values) {\n      if (!this.shouldUpdate(values)) {\n        return;\n      }\n\n      this.props.onChange(this.isMultiValue() ? values : values.max);\n    }\n\n    /**\n     * Increment the value of a slider by key name\n     * @private\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'incrementValue',\n    value: function incrementValue(key) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var value = values[key] + this.props.step;\n\n      this.updateValue(key, value);\n    }\n\n    /**\n     * Decrement the value of a slider by key name\n     * @private\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'decrementValue',\n    value: function decrementValue(key) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var value = values[key] - this.props.step;\n\n      this.updateValue(key, value);\n    }\n\n    /**\n     * Listen to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseUpListener',\n    value: function addDocumentMouseUpListener() {\n      this.removeDocumentMouseUpListener();\n      this.node.ownerDocument.addEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * Listen to touchend event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentTouchEndListener',\n    value: function addDocumentTouchEndListener() {\n      this.removeDocumentTouchEndListener();\n      this.node.ownerDocument.addEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * Stop listening to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseUpListener',\n    value: function removeDocumentMouseUpListener() {\n      this.node.ownerDocument.removeEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * Stop listening to touchend event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentTouchEndListener',\n    value: function removeDocumentTouchEndListener() {\n      this.node.ownerDocument.removeEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * Handle any \"mousemove\" event received by the slider\n     * @private\n     * @param {SyntheticEvent} event\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleSliderDrag',\n    value: function handleSliderDrag(event, key) {\n      var _this2 = this;\n\n      if (this.props.disabled) {\n        return;\n      }\n\n      var position = valueTransformer.getPositionFromEvent(event, this.getTrackClientRect());\n      this.isSliderDragging = true;\n      requestAnimationFrame(function () {\n        return _this2.updatePosition(key, position);\n      });\n    }\n\n    /**\n     * Handle any \"mousemove\" event received by the track\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTrackDrag',\n    value: function handleTrackDrag(event, prevEvent) {\n      if (this.props.disabled || !this.props.draggableTrack || this.isSliderDragging) {\n        return;\n      }\n\n      var _props = this.props,\n          maxValue = _props.maxValue,\n          minValue = _props.minValue,\n          _props$value = _props.value,\n          max = _props$value.max,\n          min = _props$value.min;\n\n\n      var position = valueTransformer.getPositionFromEvent(event, this.getTrackClientRect());\n      var value = valueTransformer.getValueFromPosition(position, minValue, maxValue, this.getTrackClientRect());\n      var stepValue = valueTransformer.getStepValueFromValue(value, this.props.step);\n\n      var prevPosition = valueTransformer.getPositionFromEvent(prevEvent, this.getTrackClientRect());\n      var prevValue = valueTransformer.getValueFromPosition(prevPosition, minValue, maxValue, this.getTrackClientRect());\n      var prevStepValue = valueTransformer.getStepValueFromValue(prevValue, this.props.step);\n\n      var offset = prevStepValue - stepValue;\n\n      var transformedValues = {\n        min: min - offset,\n        max: max - offset\n      };\n\n      this.updateValues(transformedValues);\n    }\n\n    /**\n     * Handle any \"keydown\" event received by the slider\n     * @private\n     * @param {SyntheticEvent} event\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleSliderKeyDown',\n    value: function handleSliderKeyDown(event, key) {\n      if (this.props.disabled) {\n        return;\n      }\n\n      switch (event.keyCode) {\n        case _keyCodes.LEFT_ARROW:\n        case _keyCodes.DOWN_ARROW:\n          event.preventDefault();\n          this.decrementValue(key);\n          break;\n\n        case _keyCodes.RIGHT_ARROW:\n        case _keyCodes.UP_ARROW:\n          event.preventDefault();\n          this.incrementValue(key);\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    /**\n     * Handle any \"mousedown\" event received by the track\n     * @private\n     * @param {SyntheticEvent} event\n     * @param {Point} position\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTrackMouseDown',\n    value: function handleTrackMouseDown(event, position) {\n      if (this.props.disabled) {\n        return;\n      }\n\n      var _props2 = this.props,\n          maxValue = _props2.maxValue,\n          minValue = _props2.minValue,\n          _props2$value = _props2.value,\n          max = _props2$value.max,\n          min = _props2$value.min;\n\n\n      event.preventDefault();\n\n      var value = valueTransformer.getValueFromPosition(position, minValue, maxValue, this.getTrackClientRect());\n      var stepValue = valueTransformer.getStepValueFromValue(value, this.props.step);\n\n      if (!this.props.draggableTrack || stepValue > max || stepValue < min) {\n        this.updatePosition(this.getKeyByPosition(position), position);\n      }\n    }\n\n    /**\n     * Handle the start of any mouse/touch event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleInteractionStart',\n    value: function handleInteractionStart() {\n      if (this.props.onChangeStart) {\n        this.props.onChangeStart(this.props.value);\n      }\n\n      if (this.props.onChangeComplete && !(0, _utils.isDefined)(this.startValue)) {\n        this.startValue = this.props.value;\n      }\n    }\n\n    /**\n     * Handle the end of any mouse/touch event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleInteractionEnd',\n    value: function handleInteractionEnd() {\n      if (this.isSliderDragging) {\n        this.isSliderDragging = false;\n      }\n\n      if (!this.props.onChangeComplete || !(0, _utils.isDefined)(this.startValue)) {\n        return;\n      }\n\n      if (this.startValue !== this.props.value) {\n        this.props.onChangeComplete(this.props.value);\n      }\n\n      this.startValue = null;\n    }\n\n    /**\n     * Handle any \"keydown\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(event) {\n      this.handleInteractionStart(event);\n    }\n\n    /**\n     * Handle any \"keyup\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleKeyUp',\n    value: function handleKeyUp(event) {\n      this.handleInteractionEnd(event);\n    }\n\n    /**\n     * Handle any \"mousedown\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown(event) {\n      this.handleInteractionStart(event);\n      this.addDocumentMouseUpListener();\n    }\n\n    /**\n     * Handle any \"mouseup\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     */\n\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp(event) {\n      this.handleInteractionEnd(event);\n      this.removeDocumentMouseUpListener();\n    }\n\n    /**\n     * Handle any \"touchstart\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart(event) {\n      this.handleInteractionStart(event);\n      this.addDocumentTouchEndListener();\n    }\n\n    /**\n     * Handle any \"touchend\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     */\n\n  }, {\n    key: 'handleTouchEnd',\n    value: function handleTouchEnd(event) {\n      this.handleInteractionEnd(event);\n      this.removeDocumentTouchEndListener();\n    }\n\n    /**\n     * Return JSX of sliders\n     * @private\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'renderSliders',\n    value: function renderSliders() {\n      var _this3 = this;\n\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var percentages = valueTransformer.getPercentagesFromValues(values, this.props.minValue, this.props.maxValue);\n      var keys = this.props.allowSameValues && this.lastKeyMoved === 'min' ? this.getKeys().reverse() : this.getKeys();\n\n      return keys.map(function (key) {\n        var value = values[key];\n        var percentage = percentages[key];\n\n        var _props3 = _this3.props,\n            maxValue = _props3.maxValue,\n            minValue = _props3.minValue;\n\n\n        if (key === 'min') {\n          maxValue = values.max;\n        } else {\n          minValue = values.min;\n        }\n\n        var slider = _react2.default.createElement(_slider2.default, {\n          ariaLabelledby: _this3.props.ariaLabelledby,\n          ariaControls: _this3.props.ariaControls,\n          classNames: _this3.props.classNames,\n          formatLabel: _this3.props.formatLabel,\n          key: key,\n          maxValue: maxValue,\n          minValue: minValue,\n          onSliderDrag: _this3.handleSliderDrag,\n          onSliderKeyDown: _this3.handleSliderKeyDown,\n          percentage: percentage,\n          type: key,\n          value: value });\n\n        return slider;\n      });\n    }\n\n    /**\n     * Return JSX of hidden inputs\n     * @private\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'renderHiddenInputs',\n    value: function renderHiddenInputs() {\n      var _this4 = this;\n\n      if (!this.props.name) {\n        return [];\n      }\n\n      var isMultiValue = this.isMultiValue();\n      var values = valueTransformer.getValueFromProps(this.props, isMultiValue);\n\n      return this.getKeys().map(function (key) {\n        var value = values[key];\n        var name = isMultiValue ? '' + _this4.props.name + (0, _utils.captialize)(key) : _this4.props.name;\n\n        return _react2.default.createElement('input', { key: key, type: 'hidden', name: name, value: value });\n      });\n    }\n\n    /**\n     * @ignore\n     * @override\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var componentClassName = this.getComponentClassName();\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var percentages = valueTransformer.getPercentagesFromValues(values, this.props.minValue, this.props.maxValue);\n\n      return _react2.default.createElement(\n        'div',\n        {\n          'aria-disabled': this.props.disabled,\n          ref: function ref(node) {\n            _this5.node = node;\n          },\n          className: componentClassName,\n          onKeyDown: this.handleKeyDown,\n          onKeyUp: this.handleKeyUp,\n          onMouseDown: this.handleMouseDown,\n          onTouchStart: this.handleTouchStart },\n        _react2.default.createElement(\n          _label2.default,\n          {\n            classNames: this.props.classNames,\n            formatLabel: this.props.formatLabel,\n            type: 'min' },\n          this.props.minValue\n        ),\n        _react2.default.createElement(\n          _track2.default,\n          {\n            classNames: this.props.classNames,\n            draggableTrack: this.props.draggableTrack,\n            ref: function ref(trackNode) {\n              _this5.trackNode = trackNode;\n            },\n            percentages: percentages,\n            onTrackDrag: this.handleTrackDrag,\n            onTrackMouseDown: this.handleTrackMouseDown },\n          this.renderSliders()\n        ),\n        _react2.default.createElement(\n          _label2.default,\n          {\n            classNames: this.props.classNames,\n            formatLabel: this.props.formatLabel,\n            type: 'max' },\n          this.props.maxValue\n        ),\n        this.renderHiddenInputs()\n      );\n    }\n  }]);\n\n  return InputRange;\n}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, 'handleSliderDrag', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleSliderDrag'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTrackDrag', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTrackDrag'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleSliderKeyDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleSliderKeyDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTrackMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTrackMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleInteractionStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleInteractionStart'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleInteractionEnd', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleInteractionEnd'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleKeyDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleKeyDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleKeyUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleKeyUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchStart'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchEnd', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchEnd'), _class.prototype)), _class);\nexports.default = InputRange;\nmodule.exports = exports['default'];\n//# sourceMappingURL=input-range.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/** @ignore */\nvar DOWN_ARROW = exports.DOWN_ARROW = 40;\n\n/** @ignore */\nvar LEFT_ARROW = exports.LEFT_ARROW = 37;\n\n/** @ignore */\nvar RIGHT_ARROW = exports.RIGHT_ARROW = 39;\n\n/** @ignore */\nvar UP_ARROW = exports.UP_ARROW = 38;\n//# sourceMappingURL=key-codes.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Label;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @ignore\n * @param {Object} props\n * @param {InputRangeClassNames} props.classNames\n * @param {Function} props.formatLabel\n * @param {string} props.type\n */\nfunction Label(props) {\n  var labelValue = props.formatLabel ? props.formatLabel(props.children, props.type) : props.children;\n\n  return _react2.default.createElement(\n    'span',\n    { className: props.classNames[props.type + 'Label'] },\n    _react2.default.createElement(\n      'span',\n      { className: props.classNames.labelContainer },\n      labelValue\n    )\n  );\n}\n\n/**\n * @type {Object}\n * @property {Function} children\n * @property {Function} classNames\n * @property {Function} formatLabel\n * @property {Function} type\n */\nLabel.propTypes = {\n  children: _propTypes2.default.node.isRequired,\n  classNames: _propTypes2.default.objectOf(_propTypes2.default.string).isRequired,\n  formatLabel: _propTypes2.default.func,\n  type: _propTypes2.default.string.isRequired\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=label.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rangePropType;\n\nvar _utils = require('../utils');\n\n/**\n * @ignore\n * @param {Object} props - React component props\n * @return {?Error} Return Error if validation fails\n */\nfunction rangePropType(props) {\n  var maxValue = props.maxValue,\n      minValue = props.minValue;\n\n\n  if (!(0, _utils.isNumber)(minValue) || !(0, _utils.isNumber)(maxValue)) {\n    return new Error('\"minValue\" and \"maxValue\" must be a number');\n  }\n\n  if (minValue >= maxValue) {\n    return new Error('\"minValue\" must be smaller than \"maxValue\"');\n  }\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=range-prop-type.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _desc, _value, _class;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nvar _label = require('./label');\n\nvar _label2 = _interopRequireDefault(_label);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n/**\n * @ignore\n */\nvar Slider = (_class = function (_React$Component) {\n  _inherits(Slider, _React$Component);\n\n  _createClass(Slider, null, [{\n    key: 'propTypes',\n\n    /**\n     * Accepted propTypes of Slider\n     * @override\n     * @return {Object}\n     * @property {Function} ariaLabelledby\n     * @property {Function} ariaControls\n     * @property {Function} className\n     * @property {Function} formatLabel\n     * @property {Function} maxValue\n     * @property {Function} minValue\n     * @property {Function} onSliderDrag\n     * @property {Function} onSliderKeyDown\n     * @property {Function} percentage\n     * @property {Function} type\n     * @property {Function} value\n     */\n    get: function get() {\n      return {\n        ariaLabelledby: _propTypes2.default.string,\n        ariaControls: _propTypes2.default.string,\n        classNames: _propTypes2.default.objectOf(_propTypes2.default.string).isRequired,\n        formatLabel: _propTypes2.default.func,\n        maxValue: _propTypes2.default.number,\n        minValue: _propTypes2.default.number,\n        onSliderDrag: _propTypes2.default.func.isRequired,\n        onSliderKeyDown: _propTypes2.default.func.isRequired,\n        percentage: _propTypes2.default.number.isRequired,\n        type: _propTypes2.default.string.isRequired,\n        value: _propTypes2.default.number.isRequired\n      };\n    }\n\n    /**\n     * @param {Object} props\n     * @param {string} [props.ariaLabelledby]\n     * @param {string} [props.ariaControls]\n     * @param {InputRangeClassNames} props.classNames\n     * @param {Function} [props.formatLabel]\n     * @param {number} [props.maxValue]\n     * @param {number} [props.minValue]\n     * @param {Function} props.onSliderKeyDown\n     * @param {Function} props.onSliderDrag\n     * @param {number} props.percentage\n     * @param {number} props.type\n     * @param {number} props.value\n     */\n\n  }]);\n\n  function Slider(props) {\n    _classCallCheck(this, Slider);\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    var _this = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this, props));\n\n    _this.node = null;\n    return _this;\n  }\n\n  /**\n   * @ignore\n   * @override\n   * @return {void}\n   */\n\n\n  _createClass(Slider, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.removeDocumentMouseMoveListener();\n      this.removeDocumentMouseUpListener();\n      this.removeDocumentTouchEndListener();\n      this.removeDocumentTouchMoveListener();\n    }\n\n    /**\n     * @private\n     * @return {Object}\n     */\n\n  }, {\n    key: 'getStyle',\n    value: function getStyle() {\n      var perc = (this.props.percentage || 0) * 100;\n      var style = {\n        position: 'absolute',\n        left: perc + '%'\n      };\n\n      return style;\n    }\n\n    /**\n     * Listen to mousemove event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseMoveListener',\n    value: function addDocumentMouseMoveListener() {\n      this.removeDocumentMouseMoveListener();\n      this.node.ownerDocument.addEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * Listen to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseUpListener',\n    value: function addDocumentMouseUpListener() {\n      this.removeDocumentMouseUpListener();\n      this.node.ownerDocument.addEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * Listen to touchmove event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentTouchMoveListener',\n    value: function addDocumentTouchMoveListener() {\n      this.removeDocumentTouchMoveListener();\n      this.node.ownerDocument.addEventListener('touchmove', this.handleTouchMove);\n    }\n\n    /**\n     * Listen to touchend event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentTouchEndListener',\n    value: function addDocumentTouchEndListener() {\n      this.removeDocumentTouchEndListener();\n      this.node.ownerDocument.addEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseMoveListener',\n    value: function removeDocumentMouseMoveListener() {\n      this.node.ownerDocument.removeEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseUpListener',\n    value: function removeDocumentMouseUpListener() {\n      this.node.ownerDocument.removeEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentTouchMoveListener',\n    value: function removeDocumentTouchMoveListener() {\n      this.node.ownerDocument.removeEventListener('touchmove', this.handleTouchMove);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentTouchEndListener',\n    value: function removeDocumentTouchEndListener() {\n      this.node.ownerDocument.removeEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown() {\n      this.addDocumentMouseMoveListener();\n      this.addDocumentMouseUpListener();\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp() {\n      this.removeDocumentMouseMoveListener();\n      this.removeDocumentMouseUpListener();\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseMove',\n    value: function handleMouseMove(event) {\n      this.props.onSliderDrag(event, this.props.type);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart() {\n      this.addDocumentTouchEndListener();\n      this.addDocumentTouchMoveListener();\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchMove',\n    value: function handleTouchMove(event) {\n      this.props.onSliderDrag(event, this.props.type);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchEnd',\n    value: function handleTouchEnd() {\n      this.removeDocumentTouchMoveListener();\n      this.removeDocumentTouchEndListener();\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(event) {\n      this.props.onSliderKeyDown(event, this.props.type);\n    }\n\n    /**\n     * @override\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var style = this.getStyle();\n\n      return _react2.default.createElement(\n        'span',\n        {\n          className: this.props.classNames.sliderContainer,\n          ref: function ref(node) {\n            _this2.node = node;\n          },\n          style: style },\n        _react2.default.createElement(\n          _label2.default,\n          {\n            classNames: this.props.classNames,\n            formatLabel: this.props.formatLabel,\n            type: 'value' },\n          this.props.value\n        ),\n        _react2.default.createElement('div', {\n          'aria-labelledby': this.props.ariaLabelledby,\n          'aria-controls': this.props.ariaControls,\n          'aria-valuemax': this.props.maxValue,\n          'aria-valuemin': this.props.minValue,\n          'aria-valuenow': this.props.value,\n          className: this.props.classNames.slider,\n          draggable: 'false',\n          onKeyDown: this.handleKeyDown,\n          onMouseDown: this.handleMouseDown,\n          onTouchStart: this.handleTouchStart,\n          role: 'slider',\n          tabIndex: '0' })\n      );\n    }\n  }]);\n\n  return Slider;\n}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, 'handleMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseMove', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseMove'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchStart'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchMove', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchMove'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchEnd', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchEnd'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleKeyDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleKeyDown'), _class.prototype)), _class);\nexports.default = Slider;\nmodule.exports = exports['default'];\n//# sourceMappingURL=slider.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _desc, _value, _class;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n/**\n * @ignore\n */\nvar Track = (_class = function (_React$Component) {\n  _inherits(Track, _React$Component);\n\n  _createClass(Track, null, [{\n    key: 'propTypes',\n\n    /**\n     * @override\n     * @return {Object}\n     * @property {Function} children\n     * @property {Function} classNames\n     * @property {Boolean} draggableTrack\n     * @property {Function} onTrackDrag\n     * @property {Function} onTrackMouseDown\n     * @property {Function} percentages\n     */\n    get: function get() {\n      return {\n        children: _propTypes2.default.node.isRequired,\n        classNames: _propTypes2.default.objectOf(_propTypes2.default.string).isRequired,\n        draggableTrack: _propTypes2.default.bool,\n        onTrackDrag: _propTypes2.default.func,\n        onTrackMouseDown: _propTypes2.default.func.isRequired,\n        percentages: _propTypes2.default.objectOf(_propTypes2.default.number).isRequired\n      };\n    }\n\n    /**\n     * @param {Object} props\n     * @param {InputRangeClassNames} props.classNames\n     * @param {Boolean} props.draggableTrack\n     * @param {Function} props.onTrackDrag\n     * @param {Function} props.onTrackMouseDown\n     * @param {number} props.percentages\n     */\n\n  }]);\n\n  function Track(props) {\n    _classCallCheck(this, Track);\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    var _this = _possibleConstructorReturn(this, (Track.__proto__ || Object.getPrototypeOf(Track)).call(this, props));\n\n    _this.node = null;\n    _this.trackDragEvent = null;\n    return _this;\n  }\n\n  /**\n   * @private\n   * @return {ClientRect}\n   */\n\n\n  _createClass(Track, [{\n    key: 'getClientRect',\n    value: function getClientRect() {\n      return this.node.getBoundingClientRect();\n    }\n\n    /**\n     * @private\n     * @return {Object} CSS styles\n     */\n\n  }, {\n    key: 'getActiveTrackStyle',\n    value: function getActiveTrackStyle() {\n      var width = (this.props.percentages.max - this.props.percentages.min) * 100 + '%';\n      var left = this.props.percentages.min * 100 + '%';\n\n      return { left: left, width: width };\n    }\n\n    /**\n     * Listen to mousemove event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseMoveListener',\n    value: function addDocumentMouseMoveListener() {\n      this.removeDocumentMouseMoveListener();\n      this.node.ownerDocument.addEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * Listen to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseUpListener',\n    value: function addDocumentMouseUpListener() {\n      this.removeDocumentMouseUpListener();\n      this.node.ownerDocument.addEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseMoveListener',\n    value: function removeDocumentMouseMoveListener() {\n      this.node.ownerDocument.removeEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseUpListener',\n    value: function removeDocumentMouseUpListener() {\n      this.node.ownerDocument.removeEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseMove',\n    value: function handleMouseMove(event) {\n      if (!this.props.draggableTrack) {\n        return;\n      }\n\n      if (this.trackDragEvent !== null) {\n        this.props.onTrackDrag(event, this.trackDragEvent);\n      }\n\n      this.trackDragEvent = event;\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp() {\n      if (!this.props.draggableTrack) {\n        return;\n      }\n\n      this.removeDocumentMouseMoveListener();\n      this.removeDocumentMouseUpListener();\n      this.trackDragEvent = null;\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event - User event\n     */\n\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown(event) {\n      var clientX = event.touches ? event.touches[0].clientX : event.clientX;\n      var trackClientRect = this.getClientRect();\n      var position = {\n        x: clientX - trackClientRect.left,\n        y: 0\n      };\n\n      this.props.onTrackMouseDown(event, position);\n\n      if (this.props.draggableTrack) {\n        this.addDocumentMouseMoveListener();\n        this.addDocumentMouseUpListener();\n      }\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event - User event\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart(event) {\n      event.preventDefault();\n\n      this.handleMouseDown(event);\n    }\n\n    /**\n     * @override\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var activeTrackStyle = this.getActiveTrackStyle();\n\n      return _react2.default.createElement(\n        'div',\n        {\n          className: this.props.classNames.track,\n          onMouseDown: this.handleMouseDown,\n          onTouchStart: this.handleTouchStart,\n          ref: function ref(node) {\n            _this2.node = node;\n          } },\n        _react2.default.createElement('div', {\n          style: activeTrackStyle,\n          className: this.props.classNames.activeTrack }),\n        this.props.children\n      );\n    }\n  }]);\n\n  return Track;\n}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, 'handleMouseMove', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseMove'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchStart'), _class.prototype)), _class);\nexports.default = Track;\nmodule.exports = exports['default'];\n//# sourceMappingURL=track.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = valuePropType;\n\nvar _utils = require('../utils');\n\n/**\n * @ignore\n * @param {Object} props\n * @return {?Error} Return Error if validation fails\n */\nfunction valuePropType(props, propName) {\n  var maxValue = props.maxValue,\n      minValue = props.minValue;\n\n  var value = props[propName];\n\n  if (!(0, _utils.isNumber)(value) && (!(0, _utils.isObject)(value) || !(0, _utils.isNumber)(value.min) || !(0, _utils.isNumber)(value.max))) {\n    return new Error('\"' + propName + '\" must be a number or a range object');\n  }\n\n  if ((0, _utils.isNumber)(value) && (value < minValue || value > maxValue)) {\n    return new Error('\"' + propName + '\" must be in between \"minValue\" and \"maxValue\"');\n  }\n\n  if ((0, _utils.isObject)(value) && (value.min < minValue || value.min > maxValue || value.max < minValue || value.max > maxValue)) {\n    return new Error('\"' + propName + '\" must be in between \"minValue\" and \"maxValue\"');\n  }\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=value-prop-type.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.getPercentageFromPosition = getPercentageFromPosition;\nexports.getValueFromPosition = getValueFromPosition;\nexports.getValueFromProps = getValueFromProps;\nexports.getPercentageFromValue = getPercentageFromValue;\nexports.getPercentagesFromValues = getPercentagesFromValues;\nexports.getPositionFromValue = getPositionFromValue;\nexports.getPositionsFromValues = getPositionsFromValues;\nexports.getPositionFromEvent = getPositionFromEvent;\nexports.getStepValueFromValue = getStepValueFromValue;\n\nvar _utils = require('../utils');\n\n/**\n * Convert a point into a percentage value\n * @ignore\n * @param {Point} position\n * @param {ClientRect} clientRect\n * @return {number} Percentage value\n */\nfunction getPercentageFromPosition(position, clientRect) {\n  var length = clientRect.width;\n  var sizePerc = position.x / length;\n\n  return sizePerc || 0;\n}\n\n/**\n * Convert a point into a model value\n * @ignore\n * @param {Point} position\n * @param {number} minValue\n * @param {number} maxValue\n * @param {ClientRect} clientRect\n * @return {number}\n */\nfunction getValueFromPosition(position, minValue, maxValue, clientRect) {\n  var sizePerc = getPercentageFromPosition(position, clientRect);\n  var valueDiff = maxValue - minValue;\n\n  return minValue + valueDiff * sizePerc;\n}\n\n/**\n * Convert props into a range value\n * @ignore\n * @param {Object} props\n * @param {boolean} isMultiValue\n * @return {Range}\n */\nfunction getValueFromProps(props, isMultiValue) {\n  if (isMultiValue) {\n    return _extends({}, props.value);\n  }\n\n  return {\n    min: props.minValue,\n    max: props.value\n  };\n}\n\n/**\n * Convert a model value into a percentage value\n * @ignore\n * @param {number} value\n * @param {number} minValue\n * @param {number} maxValue\n * @return {number}\n */\nfunction getPercentageFromValue(value, minValue, maxValue) {\n  var validValue = (0, _utils.clamp)(value, minValue, maxValue);\n  var valueDiff = maxValue - minValue;\n  var valuePerc = (validValue - minValue) / valueDiff;\n\n  return valuePerc || 0;\n}\n\n/**\n * Convert model values into percentage values\n * @ignore\n * @param {Range} values\n * @param {number} minValue\n * @param {number} maxValue\n * @return {Range}\n */\nfunction getPercentagesFromValues(values, minValue, maxValue) {\n  return {\n    min: getPercentageFromValue(values.min, minValue, maxValue),\n    max: getPercentageFromValue(values.max, minValue, maxValue)\n  };\n}\n\n/**\n * Convert a value into a point\n * @ignore\n * @param {number} value\n * @param {number} minValue\n * @param {number} maxValue\n * @param {ClientRect} clientRect\n * @return {Point} Position\n */\nfunction getPositionFromValue(value, minValue, maxValue, clientRect) {\n  var length = clientRect.width;\n  var valuePerc = getPercentageFromValue(value, minValue, maxValue);\n  var positionValue = valuePerc * length;\n\n  return {\n    x: positionValue,\n    y: 0\n  };\n}\n\n/**\n * Convert a range of values into points\n * @ignore\n * @param {Range} values\n * @param {number} minValue\n * @param {number} maxValue\n * @param {ClientRect} clientRect\n * @return {Range}\n */\nfunction getPositionsFromValues(values, minValue, maxValue, clientRect) {\n  return {\n    min: getPositionFromValue(values.min, minValue, maxValue, clientRect),\n    max: getPositionFromValue(values.max, minValue, maxValue, clientRect)\n  };\n}\n\n/**\n * Convert an event into a point\n * @ignore\n * @param {Event} event\n * @param {ClientRect} clientRect\n * @return {Point}\n */\nfunction getPositionFromEvent(event, clientRect) {\n  var length = clientRect.width;\n\n  var _ref = event.touches ? event.touches[0] : event,\n      clientX = _ref.clientX;\n\n  return {\n    x: (0, _utils.clamp)(clientX - clientRect.left, 0, length),\n    y: 0\n  };\n}\n\n/**\n * Convert a value into a step value\n * @ignore\n * @param {number} value\n * @param {number} valuePerStep\n * @return {number}\n */\nfunction getStepValueFromValue(value, valuePerStep) {\n  return Math.round(value / valuePerStep) * valuePerStep;\n}\n//# sourceMappingURL=value-transformer.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = captialize;\n/**\n * Captialize a string\n * @ignore\n * @param {string} string\n * @return {string}\n */\nfunction captialize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=captialize.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = clamp;\n/**\n * Clamp a value between a min and max value\n * @ignore\n * @param {number} value\n * @param {number} min\n * @param {number} max\n * @return {number}\n */\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=clamp.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = distanceTo;\n/**\n * Calculate the distance between pointA and pointB\n * @ignore\n * @param {Point} pointA\n * @param {Point} pointB\n * @return {number} Distance\n */\nfunction distanceTo(pointA, pointB) {\n  var xDiff = Math.pow(pointB.x - pointA.x, 2);\n  var yDiff = Math.pow(pointB.y - pointA.y, 2);\n\n  return Math.sqrt(xDiff + yDiff);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=distance-to.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _captialize = require('./captialize');\n\nObject.defineProperty(exports, 'captialize', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_captialize).default;\n  }\n});\n\nvar _clamp = require('./clamp');\n\nObject.defineProperty(exports, 'clamp', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_clamp).default;\n  }\n});\n\nvar _distanceTo = require('./distance-to');\n\nObject.defineProperty(exports, 'distanceTo', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_distanceTo).default;\n  }\n});\n\nvar _isDefined = require('./is-defined');\n\nObject.defineProperty(exports, 'isDefined', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_isDefined).default;\n  }\n});\n\nvar _isNumber = require('./is-number');\n\nObject.defineProperty(exports, 'isNumber', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_isNumber).default;\n  }\n});\n\nvar _isObject = require('./is-object');\n\nObject.defineProperty(exports, 'isObject', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_isObject).default;\n  }\n});\n\nvar _length = require('./length');\n\nObject.defineProperty(exports, 'length', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_length).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isDefined;\n/**\n * Check if a value is defined\n * @ignore\n * @param {*} value\n * @return {boolean}\n */\nfunction isDefined(value) {\n  return value !== undefined && value !== null;\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=is-defined.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isNumber;\n/**\n * Check if a value is a number\n * @ignore\n * @param {*} value\n * @return {boolean}\n */\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=is-number.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = isObject;\n/**\n * Check if a value is an object\n * @ignore\n * @param {*} value\n * @return {boolean}\n */\nfunction isObject(value) {\n  return value !== null && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object';\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=is-object.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = length;\n/**\n * Calculate the absolute difference between two numbers\n * @ignore\n * @param {number} numA\n * @param {number} numB\n * @return {number}\n */\nfunction length(numA, numB) {\n  return Math.abs(numA - numB);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=length.js.map","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","module.exports = React;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = ReactDOM;","const __WEBPACK_NAMESPACE_OBJECT__ = PIXI;","export default class SortedArray extends Array {\r\n    constructor(comparator = (a, b) => a - b) {\r\n        super();\r\n        this._comparator = comparator;\r\n    }\r\n    insert(value) {\r\n        let left = 0;\r\n        let right = this.length - 1;\r\n        let mid = 0;\r\n        while (left <= right) {\r\n            mid = Math.floor((left + right) / 2);\r\n            if (value === this[mid]) {\r\n                this.splice(mid, 0, value);\r\n                return mid;\r\n            }\r\n            else if (this._comparator(value, this[mid]) > 0) {\r\n                left = mid + 1;\r\n            }\r\n            else {\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        this.splice(left, 0, value);\r\n        return left;\r\n    }\r\n    remove(value) {\r\n        let index = this.indexOf(value);\r\n        if (index === -1) {\r\n            throw new Error(\"Element doesn't exist\");\r\n        }\r\n        else {\r\n            this.splice(index, 1);\r\n            return index;\r\n        }\r\n    }\r\n    removeAt(index) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new RangeError(\"Index out of range.\");\r\n        }\r\n        let elementRemoved = this[index];\r\n        this.splice(index, 1);\r\n        return elementRemoved;\r\n    }\r\n    exists(value) {\r\n        let index = this.binarySearch(value);\r\n        if (index === -1) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    binarySearch(value, closest = false) {\r\n        let left = 0;\r\n        let right = this.length - 1;\r\n        let mid = 0;\r\n        if (this.length == 0) {\r\n            return -1;\r\n        }\r\n        if (closest && this._comparator(value, this[right]) > 0) {\r\n            return right;\r\n        }\r\n        while (left <= right) {\r\n            mid = Math.floor((left + right) / 2);\r\n            if (this._comparator(value, this[mid]) === 0) {\r\n                while (mid > 0 && this._comparator(this[mid], this[mid - 1]) === 0) {\r\n                    mid = mid - 1;\r\n                }\r\n                return mid;\r\n            }\r\n            else if (this._comparator(value, this[mid]) > 0) {\r\n                left = mid + 1;\r\n            }\r\n            else {\r\n                if (closest && this._comparator(value, this[mid - 1])) {\r\n                    return mid - 1;\r\n                }\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        if (closest) {\r\n            return left;\r\n        }\r\n        else {\r\n            return -1;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SortedArray.js.map","export default class NoteHelper {\r\n    static noteStringToFrequency(value) {\r\n        let octave = NoteHelper.extractOctave(value);\r\n        let noteNumber = NoteHelper.notes.indexOf(value.slice(0, -1)) + 3;\r\n        noteNumber = noteNumber + ((octave - 1) * 12) + 1;\r\n        return 440 * Math.pow(2, (noteNumber - 49) / 12);\r\n    }\r\n    static distanceBetweenNotes(note1, note2) {\r\n        let notePosition1 = NoteHelper.noteStringToNoteNumber(note1);\r\n        let notePosition2 = NoteHelper.noteStringToNoteNumber(note2);\r\n        return notePosition1 - notePosition2;\r\n    }\r\n    static noteNumberToNoteString(value) {\r\n        if (value < 0) {\r\n            throw new RangeError(\"Note value cannot be less than 0\");\r\n        }\r\n        let note = NoteHelper.notes[value % 12];\r\n        let octave = Math.floor(value / 12);\r\n        return note + octave.toString();\r\n    }\r\n    static noteStringToNoteNumber(value) {\r\n        return (NoteHelper.extractOctave(value) * 12) + NoteHelper.notes.indexOf(value.slice(0, -1));\r\n    }\r\n    static extractOctave(note) {\r\n        if (note.length == 2) {\r\n            return parseInt(note.charAt(1));\r\n        }\r\n        else if (note.length === 3) {\r\n            return parseInt(note.charAt(2));\r\n        }\r\n        else {\r\n            throw new RangeError(\"String is invalid (incorrect length): \" + note);\r\n        }\r\n    }\r\n}\r\nNoteHelper.notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\r\n//# sourceMappingURL=NoteHelper.js.map","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","export class SimpleEvent {\r\n    constructor() {\r\n        this._callbacks = [];\r\n    }\r\n    get callbacks() {\r\n        return this._callbacks;\r\n    }\r\n    addListener(callback) {\r\n        this._callbacks.push(callback);\r\n    }\r\n    removeListener(callback) {\r\n        let index = this._callbacks.indexOf(callback);\r\n        if (index != -1) {\r\n            this._callbacks.splice(index, 1);\r\n        }\r\n    }\r\n    hasListener(callback) {\r\n        let index = this._callbacks.indexOf(callback);\r\n        if (index == -1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    removeAt(index) {\r\n        this._callbacks.splice(index, 1);\r\n    }\r\n    removeAllListeners() {\r\n        this._callbacks = [];\r\n    }\r\n    emit(...args) {\r\n        this._callbacks.forEach(element => {\r\n            element(...args);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=SimpleEvent.js.map","import NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nexport class BaseEvent {\r\n    constructor(startPosition, duration) {\r\n        this._duration = 0;\r\n        this.startPosition = startPosition;\r\n        if (duration != undefined) {\r\n            this.duration = duration;\r\n        }\r\n        this.id = uuid();\r\n        this.removed = new SimpleEvent();\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(value) {\r\n        this._duration = value;\r\n    }\r\n    get endPosition() {\r\n        return this.startPosition + this.duration;\r\n    }\r\n    eventRemoved() {\r\n        this.removed.emit();\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"eventType\": \"BaseEvent\",\r\n            \"startPosition\": this.startPosition,\r\n            \"duration\": this.duration\r\n        };\r\n    }\r\n    static comparator(a, b) {\r\n        if (a.startPosition > b.startPosition)\r\n            return 1;\r\n        if (a.startPosition < b.startPosition)\r\n            return -1;\r\n        if (a.duration > b.duration)\r\n            return 1;\r\n        if (a.duration < b.duration)\r\n            return -1;\r\n        return 0;\r\n    }\r\n}\r\nexport class SecondsBaseEvent extends BaseEvent {\r\n    constructor(startPosition, metadata, secondsDuration = 0) {\r\n        super(startPosition);\r\n        this._metadata = metadata;\r\n        this.secondsDuration = secondsDuration;\r\n    }\r\n    get duration() {\r\n        return this._metadata.positionSecondsToQuarterNote(this._duration);\r\n    }\r\n    set duration(value) {\r\n        this._duration = this._metadata.positionQuarterNoteToSeconds(value);\r\n    }\r\n    get secondsDuration() {\r\n        return this._duration;\r\n    }\r\n    set secondsDuration(value) {\r\n        this._duration = value;\r\n    }\r\n    serialise() {\r\n        let obj = super.serialise();\r\n        obj.eventType = \"SecondsBaseEvent\";\r\n        obj.duration = this._duration;\r\n        return obj;\r\n    }\r\n}\r\nexport class NoteEvent extends BaseEvent {\r\n    constructor(startPosition, pitch, duration) {\r\n        super(startPosition);\r\n        this.pitchString = pitch;\r\n        if (typeof (duration) === \"string\") {\r\n            this.duration = this._parseQuarterNoteLength(duration);\r\n        }\r\n        else {\r\n            this.duration = duration;\r\n        }\r\n    }\r\n    get pitchString() {\r\n        return this._pitchString;\r\n    }\r\n    set pitchString(value) {\r\n        this._pitchString = value;\r\n        this.pitch = NoteHelper.noteStringToFrequency(value);\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(value) {\r\n        if (value < 0) {\r\n            throw new Error(\"Invalid duration value\");\r\n        }\r\n        this._duration = value;\r\n    }\r\n    setDurationString(value) {\r\n        if (!NoteEvent.durationPattern.test(value)) {\r\n            throw new Error(\"Invalid duration value\");\r\n        }\r\n        this._duration = this._parseQuarterNoteLength(value);\r\n    }\r\n    serialise() {\r\n        let obj = super.serialise();\r\n        obj.eventType = \"NoteEvent\";\r\n        obj[\"pitch\"] = this.pitch;\r\n        obj[\"pitchString\"] = this.pitchString;\r\n        return obj;\r\n    }\r\n    _parseQuarterNoteLength(note) {\r\n        let noteLength = parseInt(note.slice(0, note.length - 1));\r\n        switch (note.charAt(note.length - 1)) {\r\n            case \"n\":\r\n                return (4 / noteLength);\r\n            case \".\":\r\n                return ((4 / noteLength) * 1.5);\r\n            case \"t\":\r\n                return ((4 / noteLength) / 1.5);\r\n            default:\r\n                throw new Error(\"Invalid note.\");\r\n        }\r\n    }\r\n    toString() {\r\n        return \"(NoteEvent: Duration: \" + this.duration + \" Pitch: \" + this.pitch + \" startPosition: \" + this.startPosition + \")\\n\";\r\n    }\r\n}\r\nNoteEvent.durationPattern = new RegExp(\"^(1|2|4|8|16|32|64)(t|n|\\\\.)$\");\r\nexport class MetadataEvent {\r\n    constructor(startPosition, bpm, timeSignature) {\r\n        this.startPosition = startPosition;\r\n        this.originalStartPosition = startPosition;\r\n        this.bpm = bpm;\r\n        this.timeSignature = timeSignature;\r\n    }\r\n    get bpm() {\r\n        return this._bpm;\r\n    }\r\n    set bpm(value) {\r\n        if (value < 0) {\r\n            throw new Error(\"Invalid BPM: cannot be negative.\");\r\n        }\r\n        this._bpm = value;\r\n        this._secondsPerBeat = 60 / this._bpm;\r\n    }\r\n    get secondsPerBeat() {\r\n        return this._secondsPerBeat;\r\n    }\r\n    get timeSignature() {\r\n        return this._timeSignature;\r\n    }\r\n    set timeSignature(value) {\r\n        if (value.length != 2) {\r\n            throw new RangeError(\"Incorrect number of values in array.\");\r\n        }\r\n        else if (value[0] < 0 || value[1] < 0) {\r\n            throw new RangeError(\"Numbers must be greater than 0.\");\r\n        }\r\n        if (value[1] % 2 != 0) {\r\n            throw new RangeError(\"Second number must be a power of two.\");\r\n        }\r\n        this._timeSignature = value;\r\n        this._quarterNoteMultiplier = this._timeSignature[1] / 4;\r\n    }\r\n    get quarterNoteMultiplier() {\r\n        return this._quarterNoteMultiplier;\r\n    }\r\n    static comparator(a, b) {\r\n        if (typeof (a) === \"number\") {\r\n            return a - b.startPosition;\r\n        }\r\n        else {\r\n            return a.startPosition - b.startPosition;\r\n        }\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"eventType\": \"MetadataEvent\",\r\n            \"startPosition\": this.startPosition,\r\n            \"bpm\": this.bpm,\r\n            \"timeSignature\": this.timeSignature,\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=SongEvents.js.map","import SortedArray from \"../../HelperModules/SortedArray.js\";\r\nimport { MetadataEvent } from \"../Notation/SongEvents.js\";\r\nexport default class SongMetadata {\r\n    constructor(bpm = 60, timeSignature = [4, 4]) {\r\n        this._metaEvents = new SortedArray(MetadataEvent.comparator);\r\n        this._metaEventSecondLengths = [];\r\n        this._metaEventBarLengths = [];\r\n        this._metaEventBeatLengths = [];\r\n        this.addMetadataEvent(0, bpm, timeSignature);\r\n    }\r\n    get events() {\r\n        return this._metaEvents;\r\n    }\r\n    getBPM(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].bpm;\r\n    }\r\n    getSecondsPerBeat(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].secondsPerBeat;\r\n    }\r\n    getTimeSignature(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].timeSignature;\r\n    }\r\n    getQuarterNoteMultiplier(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].quarterNoteMultiplier;\r\n    }\r\n    positionQuarterNoteToSeconds(time) {\r\n        if (time === undefined || time < 0) {\r\n            throw new RangeError(\"Time is invalid\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time, true);\r\n        if (index == 0) {\r\n            return time * this._metaEvents[index].quarterNoteMultiplier * this._metaEvents[index].secondsPerBeat;\r\n        }\r\n        else {\r\n            return this._metaEventSecondLengths[index] + (time - this._metaEvents[index].startPosition) * this._metaEvents[index].quarterNoteMultiplier * this._metaEvents[index].secondsPerBeat;\r\n        }\r\n    }\r\n    positionSecondsToQuarterNote(time) {\r\n        for (let i = this._metaEventSecondLengths.length - 1; i >= 0; i--) {\r\n            if (time >= this._metaEventSecondLengths[i]) {\r\n                return this._metaEvents[i].startPosition + (((time - this._metaEventSecondLengths[i]) / this._metaEvents[i].secondsPerBeat) / this._metaEvents[i].quarterNoteMultiplier);\r\n            }\r\n        }\r\n    }\r\n    positionQuarterNoteToBars(time) {\r\n        if (time === undefined || time < 0) {\r\n            throw new RangeError(\"Time is invalid\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time, true);\r\n        if (index == 0) {\r\n            return (time * this._metaEvents[index].quarterNoteMultiplier) / this._metaEvents[index].timeSignature[0];\r\n        }\r\n        else {\r\n            return this._metaEventBarLengths[index] + (((time - this._metaEvents[index].startPosition) * this._metaEvents[index].quarterNoteMultiplier) / this._metaEvents[index].timeSignature[0]);\r\n        }\r\n    }\r\n    positionBarsToQuarterNote(time) {\r\n        for (let i = this._metaEventBarLengths.length - 1; i >= 0; i--) {\r\n            if (time >= this._metaEventBarLengths[i]) {\r\n                return this._metaEvents[i].startPosition + (((time - this._metaEventBarLengths[i]) * this._metaEvents[i].timeSignature[0]) / this._metaEvents[i].quarterNoteMultiplier);\r\n            }\r\n        }\r\n    }\r\n    positionQuarterNoteToBeats(time) {\r\n        if (time === undefined || time < 0) {\r\n            throw new RangeError(\"Time is invalid\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time, true);\r\n        if (index == 0) {\r\n            return (time * this._metaEvents[index].quarterNoteMultiplier);\r\n        }\r\n        else {\r\n            return this._metaEventBeatLengths[index] + ((time - this._metaEvents[index].startPosition) * this._metaEvents[index].quarterNoteMultiplier);\r\n        }\r\n    }\r\n    positionBeatsToQuarterNote(time) {\r\n        for (let i = this._metaEventBeatLengths.length - 1; i >= 0; i--) {\r\n            if (time >= this._metaEventBeatLengths[i]) {\r\n                return this._metaEvents[i].startPosition + ((time - this._metaEventBeatLengths[i]) / this._metaEvents[i].quarterNoteMultiplier);\r\n            }\r\n        }\r\n    }\r\n    addMetadataEvent(time, bpm, timeSignature) {\r\n        let index = this._metaEvents.binarySearch(time);\r\n        if (index === -1) {\r\n            index = this._metaEvents.insert(new MetadataEvent(time, bpm, timeSignature));\r\n        }\r\n        else {\r\n            this._metaEvents[index].originalStartPosition = time;\r\n            this._metaEvents[index].bpm = bpm,\r\n                this._metaEvents[index].timeSignature = timeSignature;\r\n        }\r\n        this.precalculateLengths();\r\n        let indicesToRemove = [];\r\n        for (let i = index + 1; i < this._metaEvents.length; i++) {\r\n            let prevEvent = this._metaEvents[i - 1];\r\n            let roundedBarPosition = Math.round(((this._metaEvents[i].originalStartPosition - prevEvent.startPosition) * prevEvent.quarterNoteMultiplier) / prevEvent.timeSignature[0]);\r\n            let newPosition = prevEvent.startPosition + ((roundedBarPosition) * prevEvent.timeSignature[0]) / prevEvent.quarterNoteMultiplier;\r\n            if (newPosition != this._metaEvents[i].startPosition && this._metaEvents.binarySearch(newPosition) != -1) {\r\n                indicesToRemove.push(i);\r\n            }\r\n            else {\r\n                this._metaEvents[i].startPosition = newPosition;\r\n                this.precalculateLengths();\r\n            }\r\n        }\r\n        if (indicesToRemove.length > 0) {\r\n            indicesToRemove.forEach(index => { this._metaEvents.removeAt(index); });\r\n            this.precalculateLengths();\r\n        }\r\n        return this._metaEvents[index];\r\n    }\r\n    removeMetadataEvent(time) {\r\n        if (time == 0) {\r\n            throw new RangeError(\"Cannot remove initial event.\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time);\r\n        if (index == -1) {\r\n            throw new RangeError(\"Event does not exist at this time.\");\r\n        }\r\n        this._metaEvents.removeAt(index);\r\n        this.precalculateLengths();\r\n    }\r\n    precalculateLengths() {\r\n        this._metaEventSecondLengths = [0];\r\n        this._metaEventBarLengths = [0];\r\n        this._metaEventBeatLengths = [0];\r\n        let totalSecondsDuration = 0;\r\n        let totalBarsDuration = 0;\r\n        let totalBeatsDuration = 0;\r\n        for (let i = 1; i < this._metaEvents.length; i++) {\r\n            let quarterNoteDuration = this._metaEvents[i].startPosition - this._metaEvents[i - 1].startPosition;\r\n            totalSecondsDuration += quarterNoteDuration * this._metaEvents[i - 1].quarterNoteMultiplier * this._metaEvents[i - 1].secondsPerBeat;\r\n            this._metaEventSecondLengths.push(totalSecondsDuration);\r\n            totalBarsDuration += (quarterNoteDuration * this._metaEvents[i - 1].quarterNoteMultiplier) / this._metaEvents[i - 1].timeSignature[0];\r\n            this._metaEventBarLengths.push(totalBarsDuration);\r\n            totalBeatsDuration += (quarterNoteDuration * this._metaEvents[i - 1].quarterNoteMultiplier);\r\n            this._metaEventBeatLengths.push(totalBeatsDuration);\r\n        }\r\n    }\r\n    serialise() {\r\n        let serialisedEvents = [];\r\n        this._metaEvents.forEach(metaEvent => {\r\n            serialisedEvents.push(metaEvent.serialise());\r\n        });\r\n        return serialisedEvents;\r\n    }\r\n    deserialise(metaEvents) {\r\n        this._metaEvents = new SortedArray();\r\n        this.addMetadataEvent(0, 60, [4, 4]);\r\n        metaEvents.forEach(metaEvent => {\r\n            if (metaEvent.eventType === \"MetadataEvent\") {\r\n                this.addMetadataEvent(metaEvent.startPosition, metaEvent.bpm, metaEvent.timeSignature);\r\n            }\r\n            else {\r\n                console.log(\"SongMetadata does not support this event type.\");\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=SongMetadata.js.map","import { v4 as uuid } from \"uuid\";\r\nexport class OscillatorInstrument {\r\n    constructor(context, settings = OscillatorInstrument.createDefaults()) {\r\n        this._settings = settings;\r\n        this.id = uuid();\r\n        this._context = context;\r\n        this._masterGain = context.createGain();\r\n        this._masterGain.gain.value = this._settings.gain;\r\n        this._sources = [OscillatorInstrument.newOscillator(context, settings, this._masterGain)];\r\n    }\r\n    get oscillatorType() {\r\n        return this._sources[0].oscillator.type;\r\n    }\r\n    set oscillatorType(value) {\r\n        if ([\"sine\", \"square\", \"sawtooth\", \"triangle\"].indexOf(value) == -1) {\r\n            throw new Error(\"Invalid oscillator type\");\r\n        }\r\n        this._settings.oscillatorType = value;\r\n        for (let i = 0; i < this._sources.length; i++) {\r\n            this._sources[i].oscillator.type = value;\r\n        }\r\n    }\r\n    get masterGain() {\r\n        return this._masterGain.gain.value;\r\n    }\r\n    set masterGain(value) {\r\n        if (!(value >= 0 && value <= 1)) {\r\n            throw new RangeError(\"Invalid Gain Value\");\r\n        }\r\n        this._settings.gain = value;\r\n        this._masterGain.gain.setValueAtTime(value, this._context.currentTime);\r\n    }\r\n    get envelopeEnabled() {\r\n        return this._settings.envelopeEnabled;\r\n    }\r\n    set envelopeEnabled(value) {\r\n        this._settings.envelopeEnabled = value;\r\n    }\r\n    get envelope() {\r\n        return this._settings.envelope;\r\n    }\r\n    set envelope(value) {\r\n        this._settings.envelope = value;\r\n    }\r\n    connect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.connect(node);\r\n        }\r\n        else {\r\n            this._masterGain.connect(node.input);\r\n        }\r\n    }\r\n    disconnect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.disconnect(node);\r\n        }\r\n        else {\r\n            this._masterGain.disconnect(node.input);\r\n        }\r\n    }\r\n    disconnectAll() {\r\n        this._masterGain.disconnect();\r\n    }\r\n    playNote(start, end, frequency) {\r\n        let sourceToUse = null;\r\n        for (let i = 0; i < this._sources.length; i++) {\r\n            let sourceAvailable = true;\r\n            let currentSource = this._sources[i];\r\n            for (let j = currentSource.usage.length - 1; j >= 0; j--) {\r\n                let noteDuration = currentSource.usage[j];\r\n                if (this._context.currentTime > noteDuration[1]) {\r\n                    currentSource.usage.splice(j, 1);\r\n                    continue;\r\n                }\r\n                else if (start <= noteDuration[1]) {\r\n                    sourceAvailable = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (sourceAvailable) {\r\n                sourceToUse = currentSource;\r\n                break;\r\n            }\r\n        }\r\n        ;\r\n        if (sourceToUse === null) {\r\n            sourceToUse = OscillatorInstrument.newOscillator(this._context, this._settings, this._masterGain);\r\n            sourceToUse.oscillator.frequency.setValueAtTime(frequency, 0);\r\n            this._sources.push(sourceToUse);\r\n        }\r\n        sourceToUse.usage.push([start, end]);\r\n        this.scheduleNote(start, frequency, end, sourceToUse.oscillator, sourceToUse.gain);\r\n    }\r\n    scheduleNote(startTime, frequency, endTime, source, sourceGain, volume = 0.999) {\r\n        if (startTime < this._context.currentTime) {\r\n            startTime = this._context.currentTime;\r\n        }\r\n        source.frequency.setValueAtTime(frequency, startTime);\r\n        let attackEnd = startTime + 0.001;\r\n        let releaseStart = endTime - 0.001;\r\n        if (this._settings.envelopeEnabled) {\r\n            releaseStart = endTime - this._settings.envelope.release;\r\n            attackEnd = startTime + this._settings.envelope.attack;\r\n        }\r\n        releaseStart = Math.max(endTime - this._settings.envelope.release, startTime);\r\n        attackEnd = Math.min(startTime + this._settings.envelope.attack, endTime);\r\n        if (attackEnd > releaseStart) {\r\n            attackEnd = releaseStart;\r\n        }\r\n        sourceGain.gain.cancelScheduledValues(startTime);\r\n        sourceGain.gain.setTargetAtTime(0.0001, startTime, 0.01);\r\n        sourceGain.gain.linearRampToValueAtTime(volume, attackEnd);\r\n        sourceGain.gain.cancelScheduledValues(releaseStart);\r\n        sourceGain.gain.setValueAtTime(volume, releaseStart);\r\n        sourceGain.gain.exponentialRampToValueAtTime(0.00001, endTime);\r\n    }\r\n    stop() {\r\n        this._sources.forEach(element => {\r\n            element.gain.gain.cancelScheduledValues(this._context.currentTime);\r\n            element.gain.gain.setTargetAtTime(0.0001, this._context.currentTime, 0.03);\r\n        });\r\n    }\r\n    serialise() {\r\n        return this._settings;\r\n    }\r\n    destroy() {\r\n        this._masterGain = null;\r\n        this._sources = [];\r\n    }\r\n    static newOscillator(context, settings, destination) {\r\n        let source = context.createOscillator();\r\n        source.start();\r\n        source.type = settings.oscillatorType;\r\n        let sourceGain = context.createGain();\r\n        sourceGain.gain.value = 0;\r\n        source.connect(sourceGain);\r\n        sourceGain.connect(destination);\r\n        return { oscillator: source, gain: sourceGain, usage: [] };\r\n    }\r\n    static createDefaults() {\r\n        return {\r\n            \"type\": \"oscillator\",\r\n            \"oscillatorType\": \"sine\",\r\n            \"gain\": 0.5,\r\n            \"envelopeEnabled\": true,\r\n            \"envelope\": {\r\n                \"attack\": 0.1,\r\n                \"release\": 0.1\r\n            }\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=OscillatorInstrument.js.map","import SortedArray from \"../../HelperModules/SortedArray.js\";\r\nimport { BaseEvent, NoteEvent, SecondsBaseEvent } from \"./SongEvents.js\";\r\nexport class EventTimeline {\r\n    constructor() {\r\n        this._events = new SortedArray(BaseEvent.comparator);\r\n        this._eventPosition = 0;\r\n        this.longestEventIndex = null;\r\n        this.longestEventValue = 0;\r\n    }\r\n    get events() {\r\n        return this._events;\r\n    }\r\n    get playbackTime() {\r\n        if (this._events.length > 0) {\r\n            let event = this._events[this.longestEventIndex];\r\n            return event.startPosition + event.duration;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    updatePlaybackTime() {\r\n        this.longestEventIndex = null;\r\n        this.longestEventValue = 0;\r\n        for (let i = 0; i < this._events.length; i++) {\r\n            if ((this._events[i].startPosition + this._events[i].duration) > this.longestEventValue) {\r\n                this.longestEventIndex = i;\r\n            }\r\n        }\r\n    }\r\n    addEvent(event) {\r\n        let index = this._events.insert(event);\r\n        if (this.longestEventIndex != null && (event.startPosition + event.duration) > this.longestEventValue) {\r\n            this.longestEventIndex = index;\r\n        }\r\n        else {\r\n            this.longestEventIndex = 0;\r\n        }\r\n        return index;\r\n    }\r\n    editEvent(index, startPosition, duration) {\r\n        let event = this.events[index];\r\n        event.startPosition = startPosition;\r\n        if (duration != undefined) {\r\n            event.duration = duration;\r\n        }\r\n        this.removeAt(index);\r\n        return this.addEvent(event);\r\n    }\r\n    removeEvent(event) {\r\n        let index = this.getIndexOfEvent(event);\r\n        if (index == -1) {\r\n            throw new Error(\"Event doesn't exist.\");\r\n        }\r\n        this.removeAt(index);\r\n    }\r\n    removeAt(index) {\r\n        this._events.splice(index, 1);\r\n        if (index === this.longestEventIndex) {\r\n            if (this._events.length > 0) {\r\n                this.updatePlaybackTime();\r\n            }\r\n            else {\r\n                this.longestEventIndex = null;\r\n            }\r\n        }\r\n        else if (index < this.longestEventIndex) {\r\n            this.longestEventIndex -= 1;\r\n        }\r\n    }\r\n    getIndexOfEvent(event) {\r\n        return this.events.map(function (x) { return x.id; }).indexOf(event.id);\r\n    }\r\n    start(time) {\r\n        for (let i = 0; i < this._events.length; i++) {\r\n            if ((this._events[i].startPosition + this._events[i].duration) > time) {\r\n                this._eventPosition = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    getEventsUntilTime(time) {\r\n        let eventsToSchedule = [];\r\n        while (this._eventPosition < this._events.length && this._events[this._eventPosition].startPosition < time) {\r\n            eventsToSchedule.push(this._events[this._eventPosition]);\r\n            this._eventPosition += 1;\r\n        }\r\n        return eventsToSchedule;\r\n    }\r\n    getEventsBetweenTimes(startTime, endTime) {\r\n        let index = 0;\r\n        let foundEvents = [];\r\n        while (index < this._events.length && this._events[index].endPosition <= startTime) {\r\n            index++;\r\n        }\r\n        while (index < this._events.length && this._events[index].startPosition < endTime) {\r\n            if (this._events[index].startPosition < endTime && this._events[index].endPosition > startTime) {\r\n                foundEvents.push(this._events[index]);\r\n            }\r\n            index++;\r\n        }\r\n        return foundEvents;\r\n    }\r\n    serialise() {\r\n        let serialisedEvents = [];\r\n        for (let i = 0; i < this.events.length; i++) {\r\n            serialisedEvents.push(this.events[i].serialise());\r\n        }\r\n        return serialisedEvents;\r\n    }\r\n    deserialise(songEvents, metadata) {\r\n        for (let i = 0; i < songEvents.length; i++) {\r\n            switch (songEvents[i].eventType) {\r\n                case \"BaseEvent\":\r\n                    this._events.push(new BaseEvent(songEvents[i].startPosition, songEvents[i].duration));\r\n                    break;\r\n                case \"NoteEvent\":\r\n                    this._events.push(new NoteEvent(songEvents[i].startPosition, songEvents[i].pitchString, songEvents[i].duration));\r\n                    break;\r\n                case \"SecondsBaseEvent\":\r\n                    this._events.push(new SecondsBaseEvent(songEvents[i].startPosition, metadata, songEvents[i].duration));\r\n                    break;\r\n            }\r\n        }\r\n        this.updatePlaybackTime();\r\n    }\r\n}\r\n//# sourceMappingURL=EventTimeline.js.map","import { EventTimeline } from \"../Notation/EventTimeline.js\";\r\nimport { v4 as uuid } from \"uuid\";\r\nexport class BaseTrack {\r\n    constructor(metadata, context, scheduleEvent, audioSource, connectionManager, settings) {\r\n        this._startTime = 0;\r\n        this._playing = false;\r\n        this._timeline = new EventTimeline();\r\n        this._context = context;\r\n        this._metadata = metadata;\r\n        this._scheduleEvent = scheduleEvent;\r\n        this._connectionManager = connectionManager;\r\n        this._scheduleEventFunc = function (quarterNotePosition) { this.scheduleSongEvents(quarterNotePosition); }.bind(this);\r\n        this._scheduleEvent.addListener(this._scheduleEventFunc);\r\n        this.audioSource = audioSource;\r\n        if (settings != undefined) {\r\n            this.id = settings.id;\r\n            this._timeline.deserialise(settings.events, this._metadata);\r\n            this._connectionManager.createConnections(this.audioSource, settings.connections);\r\n        }\r\n        else {\r\n            this.id = uuid();\r\n            this._connectionManager.createConnections(this.audioSource, [\"Context\"]);\r\n        }\r\n    }\r\n    get timeline() {\r\n        return this._timeline;\r\n    }\r\n    get connection() {\r\n        return this._connectionManager.getConnections(this.audioSource)[0];\r\n    }\r\n    get possibleConnections() {\r\n        return this._connectionManager.possibleConnectionStrings;\r\n    }\r\n    start(startPosition) {\r\n        this.stop();\r\n        if (startPosition == 0) {\r\n            this._startTime = this._context.currentTime;\r\n        }\r\n        else {\r\n            this._startTime = this._context.currentTime - this._metadata.positionQuarterNoteToSeconds(startPosition);\r\n        }\r\n        this._playing = true;\r\n        this._timeline.start(startPosition);\r\n    }\r\n    stop() {\r\n        this.audioSource.stop();\r\n        this._playing = false;\r\n    }\r\n    scheduleSongEvents(quarterNoteTime) {\r\n        if (this._playing) {\r\n            let events = this._timeline.getEventsUntilTime(quarterNoteTime);\r\n            events.forEach(event => {\r\n                this.songEventHandler(event);\r\n            });\r\n        }\r\n    }\r\n    scheduleAllEvents() {\r\n        this._startTime = this._context.currentTime;\r\n        for (let i = 0; i < this._timeline.events.length; i++) {\r\n            this.songEventHandler(this._timeline.events[i]);\r\n        }\r\n    }\r\n    connectTo(connectionString) {\r\n        if (connectionString in this._connectionManager.possibleConnections) {\r\n            this._connectionManager.removeAllConnections(this.audioSource);\r\n            this._connectionManager.addConnection(this.audioSource, connectionString);\r\n        }\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"id\": this.id,\r\n            \"source\": this.audioSource.serialise(),\r\n            \"events\": this.timeline.serialise(),\r\n            \"connections\": this._connectionManager.getConnections(this.audioSource),\r\n        };\r\n    }\r\n    destroy() {\r\n        this.stop();\r\n        this.audioSource.destroy();\r\n        this._scheduleEvent.removeListener(this._scheduleEventFunc);\r\n        this.audioSource = null;\r\n    }\r\n}\r\n//# sourceMappingURL=BaseTrack.js.map","import { OscillatorInstrument } from \"../Nodes/OscillatorInstrument.js\";\r\nimport { NoteEvent } from \"../Notation/SongEvents.js\";\r\nimport { BaseTrack } from \"./BaseTrack.js\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nexport class OscillatorTrack extends BaseTrack {\r\n    constructor(metadata, context, scheduleEvent, connectionManager, settings) {\r\n        let instrument = new OscillatorInstrument(context, settings ? settings.source : undefined);\r\n        super(metadata, context, scheduleEvent, instrument, connectionManager, settings);\r\n        this._pitchStrings = {};\r\n        if (settings) {\r\n            settings.events.forEach(event => {\r\n                if (event.pitchString in this._pitchStrings) {\r\n                    this._pitchStrings[event.pitchString] += 1;\r\n                }\r\n                else {\r\n                    this._pitchStrings[event.pitchString] = 1;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    get highestPitch() {\r\n        let highest = \"C0\";\r\n        Object.keys(this._pitchStrings).forEach(pitchString => {\r\n            if (NoteHelper.distanceBetweenNotes(pitchString, highest) > 0) {\r\n                highest = pitchString;\r\n            }\r\n        });\r\n        return highest;\r\n    }\r\n    get lowestPitch() {\r\n        let lowest = \"B9\";\r\n        Object.keys(this._pitchStrings).forEach(pitchString => {\r\n            if (NoteHelper.distanceBetweenNotes(pitchString, lowest) < 0) {\r\n                lowest = pitchString;\r\n            }\r\n        });\r\n        return lowest;\r\n    }\r\n    addNote(startPosition, pitch, duration) {\r\n        let event = new NoteEvent(startPosition, pitch, duration);\r\n        this._timeline.addEvent(event);\r\n        if (pitch in this._pitchStrings) {\r\n            this._pitchStrings[pitch] += 1;\r\n        }\r\n        else {\r\n            this._pitchStrings[pitch] = 1;\r\n        }\r\n        return event;\r\n    }\r\n    removeNote(event) {\r\n        this.timeline.removeEvent(event);\r\n        if (event.pitchString in this._pitchStrings) {\r\n            this._pitchStrings[event.pitchString] -= 1;\r\n            if (this._pitchStrings[event.pitchString] < 1) {\r\n                delete this._pitchStrings[event.pitchString];\r\n            }\r\n        }\r\n    }\r\n    removeNoteByIndex(index) {\r\n        this._timeline.events.removeAt(index);\r\n    }\r\n    songEventHandler(event) {\r\n        if (event instanceof NoteEvent) {\r\n            let eventStart = this._startTime + this._metadata.positionQuarterNoteToSeconds(event.startPosition);\r\n            let eventEnd = this._startTime + this._metadata.positionQuarterNoteToSeconds(event.startPosition + event.duration);\r\n            this.audioSource.playNote(eventStart, eventEnd, event.pitch);\r\n        }\r\n        else {\r\n            throw new Error(\"OscillatorTrack cannot handle this event type:\" + event.constructor.name);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=OscillatorTrack.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { v4 as uuid } from 'uuid';\r\nexport class SoundFileInstrument {\r\n    static create(context, settings = SoundFileInstrument.createDefaults()) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const o = new SoundFileInstrument(context, settings);\r\n            yield o.initialise();\r\n            return o;\r\n        });\r\n    }\r\n    constructor(context, settings = SoundFileInstrument.createDefaults()) {\r\n        this._settings = settings;\r\n        this.id = uuid();\r\n        this._context = context;\r\n        this._playingNodes = [];\r\n        this._masterGain = context.createGain();\r\n        this._masterGain.gain.value = this._settings.gain;\r\n    }\r\n    initialise() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._settings.soundData != \"\") {\r\n                this._audioBuffer = yield this._context.decodeAudioData(yield SoundFileInstrument.getBlobFromBase64(this._settings.soundData).arrayBuffer());\r\n            }\r\n        });\r\n    }\r\n    get duration() {\r\n        if (this._audioBuffer != null) {\r\n            return this._audioBuffer.duration;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    get masterGain() {\r\n        return this._masterGain.gain.value;\r\n    }\r\n    set masterGain(value) {\r\n        if (!(value >= 0 && value <= 1)) {\r\n            throw new RangeError(\"Invalid Gain Value\");\r\n        }\r\n        this._settings.gain = value;\r\n        this._masterGain.gain.setValueAtTime(value, this._context.currentTime);\r\n    }\r\n    connect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.connect(node);\r\n        }\r\n        else {\r\n            this._masterGain.connect(node.input);\r\n        }\r\n    }\r\n    disconnect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.disconnect(node);\r\n        }\r\n        else {\r\n            this._masterGain.disconnect(node.input);\r\n        }\r\n    }\r\n    disconnectAll() {\r\n        this._masterGain.disconnect();\r\n    }\r\n    playOneShot(startTime, offset, volume = 1) {\r\n        let bufferSource = SoundFileInstrument.createBufferSource(this._context, this._audioBuffer);\r\n        this._playingNodes.push(bufferSource);\r\n        if (volume != 1) {\r\n            let volumeGain = this._context.createGain();\r\n            volumeGain.gain.value = volume;\r\n            bufferSource.connect(volumeGain);\r\n            volumeGain.connect(this._masterGain);\r\n        }\r\n        else {\r\n            bufferSource.connect(this._masterGain);\r\n        }\r\n        if (offset < 0) {\r\n            offset = 0;\r\n        }\r\n        startTime = Math.max(0, startTime);\r\n        bufferSource.start(startTime, offset);\r\n    }\r\n    stop() {\r\n        this._playingNodes.forEach(bufferSource => {\r\n            bufferSource.stop();\r\n        });\r\n        this._playingNodes = [];\r\n    }\r\n    setSoundFile(file) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            SoundFileInstrument.getBase64FromBlob(file, base64 => {\r\n                this._settings.soundData = base64;\r\n            });\r\n            this._audioBuffer = yield this._context.decodeAudioData(yield file.arrayBuffer());\r\n        });\r\n    }\r\n    serialise() {\r\n        return this._settings;\r\n    }\r\n    destroy() {\r\n        this._masterGain = null;\r\n        this._playingNodes = [];\r\n        this._audioBuffer = null;\r\n    }\r\n    static createBufferSource(context, buffer) {\r\n        let bufferSource = context.createBufferSource();\r\n        bufferSource.buffer = buffer;\r\n        return bufferSource;\r\n    }\r\n    static getBase64FromBlob(file, callback) {\r\n        let reader = new FileReader();\r\n        reader.onload = function () {\r\n            callback(reader.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n    static getBlobFromBase64(base64blob) {\r\n        var byteString = atob(base64blob.split(',')[1]);\r\n        var ab = new ArrayBuffer(byteString.length);\r\n        var ia = new Uint8Array(ab);\r\n        for (var i = 0; i < byteString.length; i++) {\r\n            ia[i] = byteString.charCodeAt(i);\r\n        }\r\n        return new Blob([ab], { type: base64blob.split(\":\").pop().split(\";\")[0] });\r\n    }\r\n    static createDefaults() {\r\n        return {\r\n            \"type\": \"soundFile\",\r\n            \"gain\": 1,\r\n            \"soundData\": \"\"\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=SoundFileInstrument.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { BaseTrack } from \"./BaseTrack.js\";\r\nimport { SoundFileInstrument } from \"../Nodes/SoundFileInstrument.js\";\r\nimport { SecondsBaseEvent } from \"../Notation/SongEvents.js\";\r\nexport class SoundFileTrack extends BaseTrack {\r\n    static create(metadata, context, scheduleEvent, connectionManager, settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const o = new SoundFileTrack(metadata, context, scheduleEvent, connectionManager, settings);\r\n            yield o.initialise();\r\n            return o;\r\n        });\r\n    }\r\n    get soundFileDuration() {\r\n        return this._metadata.positionSecondsToQuarterNote(this.audioSource.duration);\r\n    }\r\n    constructor(metadata, context, scheduleEvent, connectionManager, settings) {\r\n        super(metadata, context, scheduleEvent, new SoundFileInstrument(context, settings ? settings.source : undefined), connectionManager, settings);\r\n        this.allowOverlaps = false;\r\n        if (settings) {\r\n            this.allowOverlaps = settings.allowOverlaps;\r\n        }\r\n    }\r\n    initialise() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.audioSource.initialise();\r\n        });\r\n    }\r\n    addOneShot(startPosition) {\r\n        if (!this.allowOverlaps && this._timeline.getEventsBetweenTimes(startPosition, startPosition + this._metadata.positionSecondsToQuarterNote(this.audioSource.duration)).length > 0) {\r\n            throw new RangeError(\"Invalid location: a playback event already occurs in the duration of the new event. Disable allowOverlaps to suppress this error.\");\r\n        }\r\n        let event = new SecondsBaseEvent(startPosition, this._metadata, this.audioSource.duration);\r\n        this._timeline.addEvent(event);\r\n        return event;\r\n    }\r\n    removeOneShot(event) {\r\n        this._timeline.removeEvent(event);\r\n    }\r\n    setSoundFile(file) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.audioSource.setSoundFile(file);\r\n            this._timeline.events.forEach(event => {\r\n                event.secondsDuration = this.audioSource.duration;\r\n            });\r\n            if (!this.allowOverlaps) {\r\n                let index = 0;\r\n                while (index < this._timeline.events.length) {\r\n                    let event = this._timeline.events[index];\r\n                    let overlappingEvents = this._timeline.getEventsBetweenTimes(event.startPosition, event.endPosition);\r\n                    overlappingEvents.forEach(overlapEvent => {\r\n                        if (overlapEvent != event) {\r\n                            this._timeline.removeEvent(overlapEvent);\r\n                        }\r\n                    });\r\n                    index++;\r\n                }\r\n            }\r\n            this._timeline.updatePlaybackTime();\r\n        });\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"id\": this.id,\r\n            \"source\": this.audioSource.serialise(),\r\n            \"events\": this.timeline.serialise(),\r\n            \"connections\": this._connectionManager.getConnections(this.audioSource),\r\n            \"allowOverlaps\": this.allowOverlaps\r\n        };\r\n    }\r\n    songEventHandler(event) {\r\n        if (event instanceof SecondsBaseEvent) {\r\n            let startPositionSeconds = this._startTime + this._metadata.positionQuarterNoteToSeconds(event.startPosition);\r\n            this.audioSource.playOneShot(startPositionSeconds, this._context.currentTime - startPositionSeconds);\r\n        }\r\n        else {\r\n            throw new Error(\"SoundFileTrack cannot handle this event type: \" + event.constructor.name);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SoundFileTrack.js.map","/*\r\nCopyright (c) 2012 DinahMoe AB & Oskar Eriksson\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\r\nfiles (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\r\nmodify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\r\nis furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\nDAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\r\nOR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\nvar userContext,\r\n    userInstance,\r\n    pipe = function(param, val) {\r\n        param.value = val;\r\n    },\r\n    Super = Object.create(null, {\r\n        activate: {\r\n            writable: true,\r\n            value: function(doActivate) {\r\n                if (doActivate) {\r\n                    this.input.disconnect();\r\n                    this.input.connect(this.activateNode);\r\n                    if (this.activateCallback) {\r\n                        this.activateCallback(doActivate);\r\n                    }\r\n                } else {\r\n                    this.input.disconnect();\r\n                    this.input.connect(this.output);\r\n                }\r\n            }\r\n        },\r\n        bypass: {\r\n            get: function() {\r\n                return this._bypass;\r\n            },\r\n            set: function(value) {\r\n                if (this._lastBypassValue === value) {\r\n                    return;\r\n                }\r\n                this._bypass = value;\r\n                this.activate(!value);\r\n                this._lastBypassValue = value;\r\n            }\r\n        },\r\n        connect: {\r\n            value: function(target) {\r\n                this.output.connect(target);\r\n            }\r\n        },\r\n        disconnect: {\r\n            value: function(target) {\r\n                this.output.disconnect(target);\r\n            }\r\n        },\r\n        connectInOrder: {\r\n            value: function(nodeArray) {\r\n                var i = nodeArray.length - 1;\r\n                while (i--) {\r\n                    if (!nodeArray[i].connect) {\r\n                        return console.error(\"AudioNode.connectInOrder: TypeError: Not an AudioNode.\", nodeArray[i]);\r\n                    }\r\n                    if (nodeArray[i + 1].input) {\r\n                        nodeArray[i].connect(nodeArray[i + 1].input);\r\n                    } else {\r\n                        nodeArray[i].connect(nodeArray[i + 1]);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        getDefaults: {\r\n            value: function() {\r\n                var result = {};\r\n                for (var key in this.defaults) {\r\n                    result[key] = this.defaults[key].value;\r\n                }\r\n                return result;\r\n            }\r\n        },\r\n        automate: {\r\n            value: function(property, value, duration, startTime) {\r\n                var start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\r\n                    dur = duration ? ~~(duration / 1000) : 0,\r\n                    _is = this.defaults[property],\r\n                    param = this[property],\r\n                    method;\r\n\r\n                if (param) {\r\n                    if (_is.automatable) {\r\n                        if (!duration) {\r\n                            method = \"setValueAtTime\";\r\n                        } else {\r\n                            method = \"linearRampToValueAtTime\";\r\n                            param.cancelScheduledValues(start);\r\n                            param.setValueAtTime(param.value, start);\r\n                        }\r\n                        param[method](value, dur + start);\r\n                    } else {\r\n                        param = value;\r\n                    }\r\n                } else {\r\n                    console.error(\"Invalid Property for \" + this.name);\r\n                }\r\n            }\r\n        }\r\n    }),\r\n    FLOAT = \"float\",\r\n    BOOLEAN = \"boolean\",\r\n    STRING = \"string\",\r\n    INT = \"int\";\r\n\r\nfunction definition() {\r\n    return Tuna;\r\n}\r\n\r\nexport function Tuna(context) {\r\n    if (!(this instanceof Tuna)) {\r\n        return new Tuna(context);\r\n    }\r\n\r\n    var _window = typeof window === \"undefined\" ? {} : window;\r\n\r\n    if (!_window.AudioContext) {\r\n        _window.AudioContext = _window.webkitAudioContext;\r\n    }\r\n    if (!context) {\r\n        console.log(\"tuna.js: Missing audio context! Creating a new context for you.\");\r\n        context = _window.AudioContext && (new _window.AudioContext());\r\n    }\r\n    if (!context) {\r\n        throw new Error(\"Tuna cannot initialize because this environment does not support web audio.\");\r\n    }\r\n    connectify(context);\r\n    userContext = context;\r\n    userInstance = this;\r\n}\r\n\r\n// Modified code from source to allow the global context variable to be changed.\r\nexport function setContext(context) {\r\n    userContext = context;\r\n}\r\n\r\nfunction connectify(context) {\r\n    if (context.__connectified__ === true) return;\r\n\r\n    var gain = context.createGain(),\r\n        proto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\r\n        oconnect = proto.connect;\r\n\r\n    proto.connect = shimConnect;\r\n    context.__connectified__ = true; // Prevent overriding connect more than once\r\n\r\n    function shimConnect() {\r\n        var node = arguments[0];\r\n        arguments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node);\r\n        oconnect.apply(this, arguments);\r\n        return node;\r\n    }\r\n}\r\n\r\nfunction dbToWAVolume(db) {\r\n    return Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100);\r\n}\r\n\r\nfunction fmod(x, y) {\r\n    // http://kevin.vanzonneveld.net\r\n    // *     example 1: fmod(5.7, 1.3);\r\n    // *     returns 1: 0.5\r\n    var tmp, tmp2, p = 0,\r\n        pY = 0,\r\n        l = 0.0,\r\n        l2 = 0.0;\r\n\r\n    tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/);\r\n    p = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\r\n    tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/);\r\n    pY = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\r\n\r\n    if (pY > p) {\r\n        p = pY;\r\n    }\r\n\r\n    tmp2 = (x % y);\r\n\r\n    if (p < -100 || p > 20) {\r\n        // toFixed will give an out of bound error so we fix it like this:\r\n        l = Math.round(Math.log(tmp2) / Math.log(10));\r\n        l2 = Math.pow(10, l);\r\n\r\n        return (tmp2 / l2).toFixed(l - p) * l2;\r\n    } else {\r\n        return parseFloat(tmp2.toFixed(-p));\r\n    }\r\n}\r\n\r\nfunction sign(x) {\r\n    if (x === 0) {\r\n        return 1;\r\n    } else {\r\n        return Math.abs(x) / x;\r\n    }\r\n}\r\n\r\nfunction tanh(n) {\r\n    return (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n));\r\n}\r\n\r\nfunction initValue(userVal, defaultVal) {\r\n    return userVal === undefined ? defaultVal : userVal;\r\n}\r\n\r\nTuna.prototype.Bitcrusher = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.processor);\r\n    this.processor.connect(this.output);\r\n\r\n    var phaser = 0,\r\n        last = 0,\r\n        input, output, step, i, length;\r\n    this.processor.onaudioprocess = function(e) {\r\n        input = e.inputBuffer.getChannelData(0),\r\n        output = e.outputBuffer.getChannelData(0),\r\n        step = Math.pow(1 / 2, this.bits);\r\n        length = input.length;\r\n        for (i = 0; i < length; i++) {\r\n            phaser += this.normfreq;\r\n            if (phaser >= 1.0) {\r\n                phaser -= 1.0;\r\n                last = step * Math.floor(input[i] / step + 0.5);\r\n            }\r\n            output[i] = last;\r\n        }\r\n    };\r\n\r\n    this.bits = properties.bits || this.defaults.bits.value;\r\n    this.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Bitcrusher\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bits: {\r\n                value: 4,\r\n                min: 1,\r\n                max: 16,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bufferSize: {\r\n                value: 4096,\r\n                min: 256,\r\n                max: 16384,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            normfreq: {\r\n                value: 0.1,\r\n                min: 0.0001,\r\n                max: 1.0,\r\n                automatable: false,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    bits: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.processor.bits;\r\n        },\r\n        set: function(value) {\r\n            this.processor.bits = value;\r\n        }\r\n    },\r\n    normfreq: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.processor.normfreq;\r\n        },\r\n        set: function(value) {\r\n            this.processor.normfreq = value;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Cabinet = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.convolver = this.newConvolver(properties.impulsePath || \"../impulses/impulse_guitar.wav\");\r\n    this.makeupNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.convolver.input);\r\n    this.convolver.output.connect(this.makeupNode);\r\n    this.makeupNode.connect(this.output);\r\n    //don't use makeupGain setter at init to avoid smoothing\r\n    this.makeupNode.gain.value = initValue(properties.makeupGain, this.defaults.makeupGain.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Cabinet\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            makeupGain: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 20,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    makeupGain: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.makeupNode.gain;\r\n        },\r\n        set: function(value) {\r\n            this.makeupNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    newConvolver: {\r\n        value: function(impulsePath) {\r\n            return new userInstance.Convolver({\r\n                impulse: impulsePath,\r\n                dryLevel: 0,\r\n                wetLevel: 1\r\n            });\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Chorus = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.attenuator = this.activateNode = userContext.createGain();\r\n    this.splitter = userContext.createChannelSplitter(2);\r\n    this.delayL = userContext.createDelay();\r\n    this.delayR = userContext.createDelay();\r\n    this.feedbackGainNodeLR = userContext.createGain();\r\n    this.feedbackGainNodeRL = userContext.createGain();\r\n    this.merger = userContext.createChannelMerger(2);\r\n    this.output = userContext.createGain();\r\n\r\n    this.lfoL = new userInstance.LFO({\r\n        target: this.delayL.delayTime,\r\n        callback: pipe\r\n    });\r\n    this.lfoR = new userInstance.LFO({\r\n        target: this.delayR.delayTime,\r\n        callback: pipe\r\n    });\r\n\r\n    this.input.connect(this.attenuator);\r\n    this.attenuator.connect(this.output);\r\n    this.attenuator.connect(this.splitter);\r\n    this.splitter.connect(this.delayL, 0);\r\n    this.splitter.connect(this.delayR, 1);\r\n    this.delayL.connect(this.feedbackGainNodeLR);\r\n    this.delayR.connect(this.feedbackGainNodeRL);\r\n    this.feedbackGainNodeLR.connect(this.delayR);\r\n    this.feedbackGainNodeRL.connect(this.delayL);\r\n    this.delayL.connect(this.merger, 0, 0);\r\n    this.delayR.connect(this.merger, 0, 1);\r\n    this.merger.connect(this.output);\r\n\r\n    this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\r\n    this.rate = initValue(properties.rate, this.defaults.rate.value);\r\n    this.delay = initValue(properties.delay, this.defaults.delay.value);\r\n    this.depth = initValue(properties.depth, this.defaults.depth.value);\r\n    this.lfoR.phase = Math.PI / 2;\r\n    this.attenuator.gain.value = 0.6934; // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\r\n    this.lfoL.activate(true);\r\n    this.lfoR.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Chorus.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Chorus\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            feedback: {\r\n                value: 0.4,\r\n                min: 0,\r\n                max: 0.95,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            delay: {\r\n                value: 0.0045,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            depth: {\r\n                value: 0.7,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            rate: {\r\n                value: 1.5,\r\n                min: 0,\r\n                max: 8,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    delay: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._delay;\r\n        },\r\n        set: function(value) {\r\n            this._delay = 0.0002 * (Math.pow(10, value) * 2);\r\n            this.lfoL.offset = this._delay;\r\n            this.lfoR.offset = this._delay;\r\n            this._depth = this._depth;\r\n        }\r\n    },\r\n    depth: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._depth;\r\n        },\r\n        set: function(value) {\r\n            this._depth = value;\r\n            this.lfoL.oscillation = this._depth * this._delay;\r\n            this.lfoR.oscillation = this._depth * this._delay;\r\n        }\r\n    },\r\n    feedback: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._feedback;\r\n        },\r\n        set: function(value) {\r\n            this._feedback = value;\r\n            this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n            this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    rate: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._rate;\r\n        },\r\n        set: function(value) {\r\n            this._rate = value;\r\n            this.lfoL.frequency = this._rate;\r\n            this.lfoR.frequency = this._rate;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Compressor = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.compNode = this.activateNode = userContext.createDynamicsCompressor();\r\n    this.makeupNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.compNode.connect(this.makeupNode);\r\n    this.makeupNode.connect(this.output);\r\n\r\n    this.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value);\r\n\r\n    //don't use makeupGain setter at initialization to avoid smoothing\r\n    if (this.automakeup) {\r\n        this.makeupNode.gain.value = dbToWAVolume(this.computeMakeup());\r\n    } else {\r\n        this.makeupNode.gain.value = dbToWAVolume(initValue(properties.makeupGain, this.defaults.makeupGain.value));\r\n    }\r\n    this.threshold = initValue(properties.threshold, this.defaults.threshold.value);\r\n    this.release = initValue(properties.release, this.defaults.release.value);\r\n    this.attack = initValue(properties.attack, this.defaults.attack.value);\r\n    this.ratio = properties.ratio || this.defaults.ratio.value;\r\n    this.knee = initValue(properties.knee, this.defaults.knee.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Compressor.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Compressor\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            threshold: {\r\n                value: -20,\r\n                min: -60,\r\n                max: 0,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            release: {\r\n                value: 250,\r\n                min: 10,\r\n                max: 2000,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            makeupGain: {\r\n                value: 1,\r\n                min: 1,\r\n                max: 100,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            attack: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1000,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            ratio: {\r\n                value: 4,\r\n                min: 1,\r\n                max: 50,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            knee: {\r\n                value: 5,\r\n                min: 0,\r\n                max: 40,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            automakeup: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    computeMakeup: {\r\n        value: function() {\r\n            var magicCoefficient = 4, // raise me if the output is too hot\r\n                c = this.compNode;\r\n            return -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient;\r\n        }\r\n    },\r\n    automakeup: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._automakeup;\r\n        },\r\n        set: function(value) {\r\n            this._automakeup = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    threshold: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.compNode.threshold;\r\n        },\r\n        set: function(value) {\r\n            this.compNode.threshold.value = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    ratio: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.compNode.ratio;\r\n        },\r\n        set: function(value) {\r\n            this.compNode.ratio.value = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    knee: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.compNode.knee;\r\n        },\r\n        set: function(value) {\r\n            this.compNode.knee.value = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    attack: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.compNode.attack;\r\n        },\r\n        set: function(value) {\r\n            this.compNode.attack.value = value / 1000;\r\n        }\r\n    },\r\n    release: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.compNode.release;\r\n        },\r\n        set: function(value) {\r\n            this.compNode.release.value = value / 1000;\r\n        }\r\n    },\r\n    makeupGain: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.makeupNode.gain;\r\n        },\r\n        set: function(value) {\r\n            this.makeupNode.gain.setTargetAtTime(dbToWAVolume(value), userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Convolver = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.convolver = userContext.createConvolver();\r\n    this.dry = userContext.createGain();\r\n    this.filterLow = userContext.createBiquadFilter();\r\n    this.filterHigh = userContext.createBiquadFilter();\r\n    this.wet = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.filterLow);\r\n    this.activateNode.connect(this.dry);\r\n    this.filterLow.connect(this.filterHigh);\r\n    this.filterHigh.connect(this.convolver);\r\n    this.convolver.connect(this.wet);\r\n    this.wet.connect(this.output);\r\n    this.dry.connect(this.output);\r\n\r\n    //don't use setters at init to avoid smoothing\r\n    this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\r\n    this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\r\n    this.filterHigh.frequency.value = properties.highCut || this.defaults.highCut.value;\r\n    this.filterLow.frequency.value = properties.lowCut || this.defaults.lowCut.value;\r\n    this.output.gain.value = initValue(properties.level, this.defaults.level.value);\r\n    this.filterHigh.type = \"lowpass\";\r\n    this.filterLow.type = \"highpass\";\r\n    this.buffer = properties.impulse || \"../impulses/ir_rev_short.wav\";\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Convolver.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Convolver\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            highCut: {\r\n                value: 22050,\r\n                min: 20,\r\n                max: 22050,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            lowCut: {\r\n                value: 20,\r\n                min: 20,\r\n                max: 22050,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            dryLevel: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            wetLevel: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            level: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    lowCut: {\r\n        get: function() {\r\n            return this.filterLow.frequency;\r\n        },\r\n        set: function(value) {\r\n            this.filterLow.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    highCut: {\r\n        get: function() {\r\n            return this.filterHigh.frequency;\r\n        },\r\n        set: function(value) {\r\n            this.filterHigh.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    level: {\r\n        get: function() {\r\n            return this.output.gain;\r\n        },\r\n        set: function(value) {\r\n            this.output.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    dryLevel: {\r\n        get: function() {\r\n            return this.dry.gain;\r\n        },\r\n        set: function(value) {\r\n            this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    wetLevel: {\r\n        get: function() {\r\n            return this.wet.gain;\r\n        },\r\n        set: function(value) {\r\n            this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    buffer: {\r\n        enumerable: false,\r\n        get: function() {\r\n            return this.convolver.buffer;\r\n        },\r\n        set: function(impulse) {\r\n            var convolver = this.convolver,\r\n                xhr = new XMLHttpRequest();\r\n            if (!impulse) {\r\n                console.log(\"Tuna.Convolver.setBuffer: Missing impulse path!\");\r\n                return;\r\n            }\r\n            xhr.open(\"GET\", impulse, true);\r\n            xhr.responseType = \"arraybuffer\";\r\n            xhr.onreadystatechange = function() {\r\n                if (xhr.readyState === 4) {\r\n                    if (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\r\n                        userContext.decodeAudioData(xhr.response, function(buffer) {\r\n                            convolver.buffer = buffer;\r\n                        }, function(e) {\r\n                            if (e) console.log(\"Tuna.Convolver.setBuffer: Error decoding data\" + e);\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            xhr.send(null);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Delay = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.dry = userContext.createGain();\r\n    this.wet = userContext.createGain();\r\n    this.filter = userContext.createBiquadFilter();\r\n    this.delay = userContext.createDelay(10);\r\n    this.feedbackNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.delay);\r\n    this.activateNode.connect(this.dry);\r\n    this.delay.connect(this.filter);\r\n    this.filter.connect(this.feedbackNode);\r\n    this.feedbackNode.connect(this.delay);\r\n    this.feedbackNode.connect(this.wet);\r\n    this.wet.connect(this.output);\r\n    this.dry.connect(this.output);\r\n\r\n    this.delayTime = properties.delayTime || this.defaults.delayTime.value;\r\n    //don't use setters at init to avoid smoothing\r\n    this.feedbackNode.gain.value = initValue(properties.feedback, this.defaults.feedback.value);\r\n    this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\r\n    this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\r\n    this.filter.frequency.value = properties.cutoff || this.defaults.cutoff.value;\r\n    this.filter.type = \"lowpass\";\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Delay.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Delay\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            delayTime: {\r\n                value: 100,\r\n                min: 20,\r\n                max: 1000,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            feedback: {\r\n                value: 0.45,\r\n                min: 0,\r\n                max: 0.9,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            cutoff: {\r\n                value: 20000,\r\n                min: 20,\r\n                max: 20000,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            wetLevel: {\r\n                value: 0.5,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            dryLevel: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    delayTime: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.delay.delayTime;\r\n        },\r\n        set: function(value) {\r\n            this.delay.delayTime.value = value / 1000;\r\n        }\r\n    },\r\n    wetLevel: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.wet.gain;\r\n        },\r\n        set: function(value) {\r\n            this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    dryLevel: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.dry.gain;\r\n        },\r\n        set: function(value) {\r\n            this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    feedback: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.feedbackNode.gain;\r\n        },\r\n        set: function(value) {\r\n            this.feedbackNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    cutoff: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.filter.frequency;\r\n        },\r\n        set: function(value) {\r\n            this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Filter = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.filter = userContext.createBiquadFilter();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.filter);\r\n    this.filter.connect(this.output);\r\n\r\n    //don't use setters for freq and gain at init to avoid smoothing\r\n    this.filter.frequency.value = properties.frequency || this.defaults.frequency.value;\r\n    this.Q = properties.resonance || this.defaults.Q.value;\r\n    this.filterType = initValue(properties.filterType, this.defaults.filterType.value);\r\n    this.filter.gain.value = initValue(properties.gain, this.defaults.gain.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Filter.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Filter\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            frequency: {\r\n                value: 800,\r\n                min: 20,\r\n                max: 22050,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            Q: {\r\n                value: 1,\r\n                min: 0.001,\r\n                max: 100,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            gain: {\r\n                value: 0,\r\n                min: -40,\r\n                max: 40,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            filterType: {\r\n                value: \"lowpass\",\r\n                automatable: false,\r\n                type: STRING\r\n            }\r\n        }\r\n    },\r\n    filterType: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.filter.type;\r\n        },\r\n        set: function(value) {\r\n            this.filter.type = value;\r\n        }\r\n    },\r\n    Q: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.filter.Q;\r\n        },\r\n        set: function(value) {\r\n            this.filter.Q.value = value;\r\n        }\r\n    },\r\n    gain: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.filter.gain;\r\n        },\r\n        set: function(value) {\r\n            this.filter.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    frequency: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.filter.frequency;\r\n        },\r\n        set: function(value) {\r\n            this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Gain = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.gainNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.gainNode);\r\n    this.gainNode.connect(this.output);\r\n\r\n    //don't use setter at init to avoid smoothing\r\n    this.gainNode.gain.value = initValue(properties.gain, this.defaults.gain.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Gain.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Gain\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            gain: {\r\n                value: 1.0,\r\n                automatable: true,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    gain: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.gainNode.gain;\r\n        },\r\n        set: function(value) {\r\n            this.gainNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.MoogFilter = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.processor);\r\n    this.processor.connect(this.output);\r\n\r\n    var in1, in2, in3, in4, out1, out2, out3, out4;\r\n    in1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0;\r\n    var input, output, f, fb, i, length, inputFactor;\r\n    this.processor.onaudioprocess = function(e) {\r\n        input = e.inputBuffer.getChannelData(0);\r\n        output = e.outputBuffer.getChannelData(0);\r\n        f = this.cutoff * 1.16;\r\n        inputFactor = 0.35013 * (f * f) * (f * f);\r\n        fb = this.resonance * (1.0 - 0.15 * f * f);\r\n        length = input.length;\r\n        for (i = 0; i < length; i++) {\r\n            input[i] -= out4 * fb;\r\n            input[i] *= inputFactor;\r\n            out1 = input[i] + 0.3 * in1 + (1 - f) * out1; // Pole 1\r\n            in1 = input[i];\r\n            out2 = out1 + 0.3 * in2 + (1 - f) * out2; // Pole 2\r\n            in2 = out1;\r\n            out3 = out2 + 0.3 * in3 + (1 - f) * out3; // Pole 3\r\n            in3 = out2;\r\n            out4 = out3 + 0.3 * in4 + (1 - f) * out4; // Pole 4\r\n            in4 = out3;\r\n            output[i] = out4;\r\n        }\r\n    };\r\n\r\n    this.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value);\r\n    this.resonance = initValue(properties.resonance, this.defaults.resonance.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"MoogFilter\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bufferSize: {\r\n                value: 4096,\r\n                min: 256,\r\n                max: 16384,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            cutoff: {\r\n                value: 0.065,\r\n                min: 0.0001,\r\n                max: 1.0,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            resonance: {\r\n                value: 3.5,\r\n                min: 0.0,\r\n                max: 4.0,\r\n                automatable: false,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    cutoff: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.processor.cutoff;\r\n        },\r\n        set: function(value) {\r\n            this.processor.cutoff = value;\r\n        }\r\n    },\r\n    resonance: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.processor.resonance;\r\n        },\r\n        set: function(value) {\r\n            this.processor.resonance = value;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Overdrive = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.inputDrive = userContext.createGain();\r\n    this.waveshaper = userContext.createWaveShaper();\r\n    this.outputDrive = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.inputDrive);\r\n    this.inputDrive.connect(this.waveshaper);\r\n    this.waveshaper.connect(this.outputDrive);\r\n    this.outputDrive.connect(this.output);\r\n\r\n    this.ws_table = new Float32Array(this.k_nSamples);\r\n    this.drive = initValue(properties.drive, this.defaults.drive.value);\r\n    this.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value);\r\n    this.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value);\r\n    this.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Overdrive\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            drive: {\r\n                value: 0.197,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT,\r\n                scaled: true\r\n            },\r\n            outputGain: {\r\n                value: -9.154,\r\n                min: -46,\r\n                max: 0,\r\n                automatable: true,\r\n                type: FLOAT,\r\n                scaled: true\r\n            },\r\n            curveAmount: {\r\n                value: 0.979,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            algorithmIndex: {\r\n                value: 0,\r\n                min: 0,\r\n                max: 5,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    k_nSamples: {\r\n        value: 8192\r\n    },\r\n    drive: {\r\n        get: function() {\r\n            return this.inputDrive.gain;\r\n        },\r\n        set: function(value) {\r\n            this.inputDrive.gain.value = value;\r\n        }\r\n    },\r\n    curveAmount: {\r\n        get: function() {\r\n            return this._curveAmount;\r\n        },\r\n        set: function(value) {\r\n            this._curveAmount = value;\r\n            if (this._algorithmIndex === undefined) {\r\n                this._algorithmIndex = 0;\r\n            }\r\n            this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table);\r\n            this.waveshaper.curve = this.ws_table;\r\n        }\r\n    },\r\n    outputGain: {\r\n        get: function() {\r\n            return this.outputDrive.gain;\r\n        },\r\n        set: function(value) {\r\n            this._outputGain = dbToWAVolume(value);\r\n            this.outputDrive.gain.setValueAtTime(this._outputGain, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    algorithmIndex: {\r\n        get: function() {\r\n            return this._algorithmIndex;\r\n        },\r\n        set: function(value) {\r\n            this._algorithmIndex = value;\r\n            this.curveAmount = this._curveAmount;\r\n        }\r\n    },\r\n    waveshaperAlgorithms: {\r\n        value: [\r\n            function(amount, n_samples, ws_table) {\r\n                amount = Math.min(amount, 0.9999);\r\n                var k = 2 * amount / (1 - amount),\r\n                    i, x;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    ws_table[i] = (1 + k) * x / (1 + k * Math.abs(x));\r\n                }\r\n            },\r\n            function(amount, n_samples, ws_table) {\r\n                var i, x, y;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * (y >= 0 ? 5.8 : 1.2);\r\n                    ws_table[i] = tanh(y);\r\n                }\r\n            },\r\n            function(amount, n_samples, ws_table) {\r\n                var i, x, y, a = 1 - amount;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\r\n                    ws_table[i] = tanh(y * 2);\r\n                }\r\n            },\r\n            function(amount, n_samples, ws_table) {\r\n                var i, x, y, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    abx = Math.abs(x);\r\n                    if (abx < a) {\r\n                        y = abx;\r\n                    } else if (abx > a) {\r\n                        y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\r\n                    } else if (abx > 1) {\r\n                        y = abx;\r\n                    }\r\n                    ws_table[i] = sign(x) * y * (1 / ((a + 1) / 2));\r\n                }\r\n            },\r\n            function(amount, n_samples, ws_table) { // fixed curve, amount doesn't do anything, the distortion is just from the drive\r\n                var i, x;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    if (x < -0.08905) {\r\n                        ws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\r\n                    } else if (x >= -0.08905 && x < 0.320018) {\r\n                        ws_table[i] = (-6.153 * (x * x)) + 3.9375 * x;\r\n                    } else {\r\n                        ws_table[i] = 0.630035;\r\n                    }\r\n                }\r\n            },\r\n            function(amount, n_samples, ws_table) {\r\n                var a = 2 + Math.round(amount * 14),\r\n                    // we go from 2 to 16 bits, keep in mind for the UI\r\n                    bits = Math.round(Math.pow(2, a - 1)),\r\n                    // real number of quantization steps divided by 2\r\n                    i, x;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    ws_table[i] = Math.round(x * bits) / bits;\r\n                }\r\n            }\r\n        ]\r\n    }\r\n});\r\n\r\nTuna.prototype.Panner = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.panner = userContext.createStereoPanner();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.panner);\r\n    this.panner.connect(this.output);\r\n\r\n    this.pan = initValue(properties.pan, this.defaults.pan.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Panner.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Panner\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            pan: {\r\n                value: 0.0,\r\n                min: -1.0,\r\n                max: 1.0,\r\n                automatable: true,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    pan: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this.panner.pan;\r\n        },\r\n        set: function(value) {\r\n            this.panner.pan.value = value;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Phaser = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.splitter = this.activateNode = userContext.createChannelSplitter(2);\r\n    this.filtersL = [];\r\n    this.filtersR = [];\r\n    this.feedbackGainNodeL = userContext.createGain();\r\n    this.feedbackGainNodeR = userContext.createGain();\r\n    this.merger = userContext.createChannelMerger(2);\r\n    this.filteredSignal = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n    this.lfoL = new userInstance.LFO({\r\n        target: this.filtersL,\r\n        callback: this.callback\r\n    });\r\n    this.lfoR = new userInstance.LFO({\r\n        target: this.filtersR,\r\n        callback: this.callback\r\n    });\r\n\r\n    var i = this.stage;\r\n    while (i--) {\r\n        this.filtersL[i] = userContext.createBiquadFilter();\r\n        this.filtersR[i] = userContext.createBiquadFilter();\r\n        this.filtersL[i].type = \"allpass\";\r\n        this.filtersR[i].type = \"allpass\";\r\n    }\r\n    this.input.connect(this.splitter);\r\n    this.input.connect(this.output);\r\n    this.splitter.connect(this.filtersL[0], 0, 0);\r\n    this.splitter.connect(this.filtersR[0], 1, 0);\r\n    this.connectInOrder(this.filtersL);\r\n    this.connectInOrder(this.filtersR);\r\n    this.filtersL[this.stage - 1].connect(this.feedbackGainNodeL);\r\n    this.filtersL[this.stage - 1].connect(this.merger, 0, 0);\r\n    this.filtersR[this.stage - 1].connect(this.feedbackGainNodeR);\r\n    this.filtersR[this.stage - 1].connect(this.merger, 0, 1);\r\n    this.feedbackGainNodeL.connect(this.filtersL[0]);\r\n    this.feedbackGainNodeR.connect(this.filtersR[0]);\r\n    this.merger.connect(this.output);\r\n\r\n    this.rate = initValue(properties.rate, this.defaults.rate.value);\r\n    this.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value;\r\n    this.depth = initValue(properties.depth, this.defaults.depth.value);\r\n    this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\r\n    this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\r\n\r\n    this.lfoL.activate(true);\r\n    this.lfoR.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Phaser.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Phaser\"\r\n    },\r\n    stage: {\r\n        value: 4\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            rate: {\r\n                value: 0.1,\r\n                min: 0,\r\n                max: 8,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            depth: {\r\n                value: 0.6,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            feedback: {\r\n                value: 0.7,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            stereoPhase: {\r\n                value: 40,\r\n                min: 0,\r\n                max: 180,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            baseModulationFrequency: {\r\n                value: 700,\r\n                min: 500,\r\n                max: 1500,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    callback: {\r\n        value: function(filters, value) {\r\n            for (var stage = 0; stage < 4; stage++) {\r\n                filters[stage].frequency.value = value;\r\n            }\r\n        }\r\n    },\r\n    depth: {\r\n        get: function() {\r\n            return this._depth;\r\n        },\r\n        set: function(value) {\r\n            this._depth = value;\r\n            this.lfoL.oscillation = this._baseModulationFrequency * this._depth;\r\n            this.lfoR.oscillation = this._baseModulationFrequency * this._depth;\r\n        }\r\n    },\r\n    rate: {\r\n        get: function() {\r\n            return this._rate;\r\n        },\r\n        set: function(value) {\r\n            this._rate = value;\r\n            this.lfoL.frequency = this._rate;\r\n            this.lfoR.frequency = this._rate;\r\n        }\r\n    },\r\n    baseModulationFrequency: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._baseModulationFrequency;\r\n        },\r\n        set: function(value) {\r\n            this._baseModulationFrequency = value;\r\n            this.lfoL.offset = this._baseModulationFrequency;\r\n            this.lfoR.offset = this._baseModulationFrequency;\r\n            this.depth = this._depth;\r\n        }\r\n    },\r\n    feedback: {\r\n        get: function() {\r\n            return this._feedback;\r\n        },\r\n        set: function(value) {\r\n            this._feedback = value;\r\n            this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n            this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    stereoPhase: {\r\n        get: function() {\r\n            return this._stereoPhase;\r\n        },\r\n        set: function(value) {\r\n            this._stereoPhase = value;\r\n            var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\r\n            newPhase = fmod(newPhase, 2 * Math.PI);\r\n            this.lfoR._phase = newPhase;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.PingPongDelay = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.wet = userContext.createGain();\r\n    this.stereoToMonoMix = userContext.createGain();\r\n    this.feedbackLevel = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n    this.delayLeft = userContext.createDelay(10);\r\n    this.delayRight = userContext.createDelay(10);\r\n\r\n    this.activateNode = userContext.createGain();\r\n    this.splitter = userContext.createChannelSplitter(2);\r\n    this.merger = userContext.createChannelMerger(2);\r\n\r\n    this.activateNode.connect(this.splitter);\r\n    this.splitter.connect(this.stereoToMonoMix, 0, 0);\r\n    this.splitter.connect(this.stereoToMonoMix, 1, 0);\r\n    this.stereoToMonoMix.gain.value = .5;\r\n    this.stereoToMonoMix.connect(this.wet);\r\n    this.wet.connect(this.delayLeft);\r\n    this.feedbackLevel.connect(this.wet);\r\n    this.delayLeft.connect(this.delayRight);\r\n    this.delayRight.connect(this.feedbackLevel);\r\n    this.delayLeft.connect(this.merger, 0, 0);\r\n    this.delayRight.connect(this.merger, 0, 1);\r\n    this.merger.connect(this.output);\r\n    this.activateNode.connect(this.output);\r\n\r\n    this.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value;\r\n    this.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value;\r\n    this.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value;\r\n    this.wet.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value;\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"PingPongDelay\"\r\n    },\r\n    delayTimeLeft: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._delayTimeLeft;\r\n        },\r\n        set: function(value) {\r\n            this._delayTimeLeft = value;\r\n            this.delayLeft.delayTime.value = value / 1000;\r\n        }\r\n    },\r\n    delayTimeRight: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._delayTimeRight;\r\n        },\r\n        set: function(value) {\r\n            this._delayTimeRight = value;\r\n            this.delayRight.delayTime.value = value / 1000;\r\n        }\r\n    },\r\n    wetLevel: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.wet.gain;\r\n        },\r\n        set: function (value) {\r\n            this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    }, \r\n    feedback: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.feedbackLevel.gain;\r\n        },\r\n        set: function (value) {\r\n            this.feedbackLevel.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            delayTimeLeft: {\r\n                value: 200,\r\n                min: 1,\r\n                max: 10000,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            delayTimeRight: {\r\n                value: 400,\r\n                min: 1,\r\n                max: 10000,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            feedback: {\r\n                value: 0.3,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            wetLevel: {\r\n                value: 0.5,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Tremolo = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.splitter = this.activateNode = userContext.createChannelSplitter(2);\r\n    this.amplitudeL = userContext.createGain();\r\n    this.amplitudeR = userContext.createGain();\r\n    this.merger = userContext.createChannelMerger(2);\r\n    this.output = userContext.createGain();\r\n    this.lfoL = new userInstance.LFO({\r\n        target: this.amplitudeL.gain,\r\n        callback: pipe\r\n    });\r\n    this.lfoR = new userInstance.LFO({\r\n        target: this.amplitudeR.gain,\r\n        callback: pipe\r\n    });\r\n\r\n    this.input.connect(this.splitter);\r\n    this.splitter.connect(this.amplitudeL, 0);\r\n    this.splitter.connect(this.amplitudeR, 1);\r\n    this.amplitudeL.connect(this.merger, 0, 0);\r\n    this.amplitudeR.connect(this.merger, 0, 1);\r\n    this.merger.connect(this.output);\r\n\r\n    this.rate = properties.rate || this.defaults.rate.value;\r\n    this.intensity = initValue(properties.intensity, this.defaults.intensity.value);\r\n    this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\r\n\r\n    this.lfoL.offset = 1 - (this.intensity / 2);\r\n    this.lfoR.offset = 1 - (this.intensity / 2);\r\n    this.lfoL.phase = this.stereoPhase * Math.PI / 180;\r\n\r\n    this.lfoL.activate(true);\r\n    this.lfoR.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Tremolo\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            intensity: {\r\n                value: 0.3,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            stereoPhase: {\r\n                value: 0,\r\n                min: 0,\r\n                max: 180,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            rate: {\r\n                value: 5,\r\n                min: 0.1,\r\n                max: 11,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    intensity: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._intensity;\r\n        },\r\n        set: function(value) {\r\n            this._intensity = value;\r\n            this.lfoL.offset = 1 - this._intensity / 2;\r\n            this.lfoR.offset = 1 - this._intensity / 2;\r\n            this.lfoL.oscillation = this._intensity;\r\n            this.lfoR.oscillation = this._intensity;\r\n        }\r\n    },\r\n    rate: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._rate;\r\n        },\r\n        set: function(value) {\r\n            this._rate = value;\r\n            this.lfoL.frequency = this._rate;\r\n            this.lfoR.frequency = this._rate;\r\n        }\r\n    },\r\n    stereoPhase: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._stereoPhase;\r\n        },\r\n        set: function(value) {\r\n            this._stereoPhase = value;\r\n            var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\r\n            newPhase = fmod(newPhase, 2 * Math.PI);\r\n            this.lfoR.phase = newPhase;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.WahWah = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.envelopeFollower = new userInstance.EnvelopeFollower({\r\n        target: this,\r\n        callback: function(context, value) {\r\n            context.sweep = value;\r\n        }\r\n    });\r\n    this.filterBp = userContext.createBiquadFilter();\r\n    this.filterPeaking = userContext.createBiquadFilter();\r\n    this.output = userContext.createGain();\r\n\r\n    //Connect AudioNodes\r\n    this.activateNode.connect(this.filterBp);\r\n    this.filterBp.connect(this.filterPeaking);\r\n    this.filterPeaking.connect(this.output);\r\n\r\n    //Set Properties\r\n    this.init();\r\n    this.automode = initValue(properties.automode, this.defaults.automode.value);\r\n    this.resonance = properties.resonance || this.defaults.resonance.value;\r\n    this.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value);\r\n    this.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value);\r\n    this.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value;\r\n    this.sweep = initValue(properties.sweep, this.defaults.sweep.value);\r\n\r\n    this.activateNode.gain.value = 2;\r\n    this.envelopeFollower.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.WahWah.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"WahWah\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            automode: {\r\n                value: true,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            baseFrequency: {\r\n                value: 0.153,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            excursionOctaves: {\r\n                value: 3.3,\r\n                min: 1,\r\n                max: 6,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            sweep: {\r\n                value: 0.35,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            resonance: {\r\n                value: 19,\r\n                min: 1,\r\n                max: 100,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            sensitivity: {\r\n                value: -0.5,\r\n                min: -1,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    automode: {\r\n        get: function() {\r\n            return this._automode;\r\n        },\r\n        set: function(value) {\r\n            this._automode = value;\r\n            if (value) {\r\n                this.activateNode.connect(this.envelopeFollower.input);\r\n                this.envelopeFollower.activate(true);\r\n            } else {\r\n                this.envelopeFollower.activate(false);\r\n                this.activateNode.disconnect();\r\n                this.activateNode.connect(this.filterBp);\r\n            }\r\n        }\r\n    },\r\n    filterFreqTimeout: {\r\n        writable: true,\r\n        value: 0\r\n    },\r\n    setFilterFreq: {\r\n        value: function() {\r\n            try {\r\n                this.filterBp.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\r\n                this.filterPeaking.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\r\n            } catch (e) {\r\n                clearTimeout(this.filterFreqTimeout);\r\n                //put on the next cycle to let all init properties be set\r\n                this.filterFreqTimeout = setTimeout(function() {\r\n                    this.setFilterFreq();\r\n                }.bind(this), 0);\r\n            }\r\n        }\r\n    },\r\n    sweep: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._sweep;\r\n        },\r\n        set: function(value) {\r\n            this._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity);\r\n            this.setFilterFreq();\r\n        }\r\n    },\r\n    baseFrequency: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._baseFrequency;\r\n        },\r\n        set: function(value) {\r\n            this._baseFrequency = 50 * Math.pow(10, value * 2);\r\n            this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\r\n            this.setFilterFreq();\r\n        }\r\n    },\r\n    excursionOctaves: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._excursionOctaves;\r\n        },\r\n        set: function(value) {\r\n            this._excursionOctaves = value;\r\n            this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\r\n            this.setFilterFreq();\r\n        }\r\n    },\r\n    sensitivity: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._sensitivity;\r\n        },\r\n        set: function(value) {\r\n            this._sensitivity = Math.pow(10, value);\r\n        }\r\n    },\r\n    resonance: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._resonance;\r\n        },\r\n        set: function(value) {\r\n            this._resonance = value;\r\n            this.filterPeaking.Q.value = this._resonance;\r\n        }\r\n    },\r\n    init: {\r\n        value: function() {\r\n            this.output.gain.value = 1;\r\n            this.filterPeaking.type = \"peaking\";\r\n            this.filterBp.type = \"bandpass\";\r\n            this.filterPeaking.frequency.value = 100;\r\n            this.filterPeaking.gain.value = 20;\r\n            this.filterPeaking.Q.value = 5;\r\n            this.filterBp.frequency.value = 100;\r\n            this.filterBp.Q.value = 1;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.EnvelopeFollower = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1);\r\n\r\n    this.input.connect(this.output);\r\n\r\n    this.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value);\r\n    this.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value);\r\n    this._envelope = 0;\r\n    this.target = properties.target || {};\r\n    this.callback = properties.callback || function() {};\r\n\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"EnvelopeFollower\"\r\n    },\r\n    defaults: {\r\n        value: {\r\n            attackTime: {\r\n                value: 0.003,\r\n                min: 0,\r\n                max: 0.5,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            releaseTime: {\r\n                value: 0.5,\r\n                min: 0,\r\n                max: 0.5,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    buffersize: {\r\n        value: 256\r\n    },\r\n    envelope: {\r\n        value: 0\r\n    },\r\n    sampleRate: {\r\n        value: 44100\r\n    },\r\n    attackTime: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._attackTime;\r\n        },\r\n        set: function(value) {\r\n            this._attackTime = value;\r\n            this._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize);\r\n        }\r\n    },\r\n    releaseTime: {\r\n        enumerable: true,\r\n        get: function() {\r\n            return this._releaseTime;\r\n        },\r\n        set: function(value) {\r\n            this._releaseTime = value;\r\n            this._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize);\r\n        }\r\n    },\r\n    callback: {\r\n        get: function() {\r\n            return this._callback;\r\n        },\r\n        set: function(value) {\r\n            if (typeof value === \"function\") {\r\n                this._callback = value;\r\n            } else {\r\n                console.error(\"tuna.js: \" + this.name + \": Callback must be a function!\");\r\n            }\r\n        }\r\n    },\r\n    target: {\r\n        get: function() {\r\n            return this._target;\r\n        },\r\n        set: function(value) {\r\n            this._target = value;\r\n        }\r\n    },\r\n    activate: {\r\n        value: function(doActivate) {\r\n            this.activated = doActivate;\r\n            if (doActivate) {\r\n                this.jsNode.connect(userContext.destination);\r\n                this.jsNode.onaudioprocess = this.returnCompute(this);\r\n            } else {\r\n                this.jsNode.disconnect();\r\n                this.jsNode.onaudioprocess = null;\r\n            }\r\n            if (this.activateCallback) {\r\n                this.activateCallback(doActivate);\r\n            }\r\n        }\r\n    },\r\n    returnCompute: {\r\n        value: function(instance) {\r\n            return function(event) {\r\n                instance.compute(event);\r\n            };\r\n        }\r\n    },\r\n    compute: {\r\n        value: function(event) {\r\n            var count = event.inputBuffer.getChannelData(0).length,\r\n                channels = event.inputBuffer.numberOfChannels,\r\n                current, chan, rms, i;\r\n            chan = rms = i = 0;\r\n\r\n            for(chan = 0; chan < channels; ++chan) {\r\n                for (i = 0; i < count; ++i) {\r\n                    current = event.inputBuffer.getChannelData(chan)[i];\r\n                    rms += (current * current);\r\n                }\r\n            }\r\n            rms = Math.sqrt(rms / channels);\r\n\r\n            if (this._envelope < rms) {\r\n                this._envelope *= this._attackC;\r\n                this._envelope += (1 - this._attackC) * rms;\r\n            } else {\r\n                this._envelope *= this._releaseC;\r\n                this._envelope += (1 - this._releaseC) * rms;\r\n            }\r\n            this._callback(this._target, this._envelope);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.LFO = function(properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n\r\n    //Instantiate AudioNode\r\n    this.input = userContext.createGain();\r\n    this.output = userContext.createScriptProcessor(256, 1, 1);\r\n    this.activateNode = userContext.destination;\r\n\r\n    //Set Properties\r\n    this.frequency = initValue(properties.frequency, this.defaults.frequency.value);\r\n    this.offset = initValue(properties.offset, this.defaults.offset.value);\r\n    this.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value);\r\n    this.phase = initValue(properties.phase, this.defaults.phase.value);\r\n    this.target = properties.target || {};\r\n    this.output.onaudioprocess = this.callback(properties.callback || function() {});\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.LFO.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"LFO\"\r\n    },\r\n    bufferSize: {\r\n        value: 256\r\n    },\r\n    sampleRate: {\r\n        value: 44100\r\n    },\r\n    defaults: {\r\n        value: {\r\n            frequency: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 20,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            offset: {\r\n                value: 0.85,\r\n                min: 0,\r\n                max: 22049,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            oscillation: {\r\n                value: 0.3,\r\n                min: -22050,\r\n                max: 22050,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            phase: {\r\n                value: 0,\r\n                min: 0,\r\n                max: 2 * Math.PI,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    frequency: {\r\n        get: function() {\r\n            return this._frequency;\r\n        },\r\n        set: function(value) {\r\n            this._frequency = value;\r\n            this._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate;\r\n        }\r\n    },\r\n    offset: {\r\n        get: function() {\r\n            return this._offset;\r\n        },\r\n        set: function(value) {\r\n            this._offset = value;\r\n        }\r\n    },\r\n    oscillation: {\r\n        get: function() {\r\n            return this._oscillation;\r\n        },\r\n        set: function(value) {\r\n            this._oscillation = value;\r\n        }\r\n    },\r\n    phase: {\r\n        get: function() {\r\n            return this._phase;\r\n        },\r\n        set: function(value) {\r\n            this._phase = value;\r\n        }\r\n    },\r\n    target: {\r\n        get: function() {\r\n            return this._target;\r\n        },\r\n        set: function(value) {\r\n            this._target = value;\r\n        }\r\n    },\r\n    activate: {\r\n        value: function(doActivate) {\r\n            if (doActivate) {\r\n                this.output.connect(userContext.destination);\r\n                if (this.activateCallback) {\r\n                    this.activateCallback(doActivate);\r\n                }\r\n            } else {\r\n                this.output.disconnect();\r\n            }\r\n        }\r\n    },\r\n    callback: {\r\n        value: function(callback) {\r\n            var that = this;\r\n            return function() {\r\n                that._phase += that._phaseInc;\r\n                if (that._phase > 2 * Math.PI) {\r\n                    that._phase = 0;\r\n                }\r\n                callback(that._target, that._offset + that._oscillation * Math.sin(that._phase));\r\n            };\r\n        }\r\n    }\r\n});\r\n\r\nTuna.toString = Tuna.prototype.toString = function() {\r\n    return \"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js\";\r\n};\r\n","import { Tuna } from \"../../../dependencies/tuna.js\";\r\nimport { v4 as uuid } from \"uuid\";\r\nexport class EffectsChain {\r\n    constructor(context, settings = EffectsChain.createDefaults()) {\r\n        this._chainNodes = [];\r\n        this.id = uuid();\r\n        this._context = context;\r\n        this._settings = settings;\r\n        this._tuna = Tuna(context);\r\n        this._preGain = this._context.createGain();\r\n        this._preGain.gain.value = this._settings.preGain;\r\n        this._postGain = this._context.createGain();\r\n        this._postGain.gain.value = this._settings.postGain;\r\n        if (this._settings.effects.length > 0) {\r\n            let currentEffect = this.IEffectToEffectObject(this._settings.effects[0]);\r\n            this._chainNodes.push(currentEffect);\r\n            this._preGain.connect(currentEffect);\r\n            for (let i = 1; i < this._settings.effects.length; i++) {\r\n                currentEffect = this.IEffectToEffectObject(this._settings.effects[i]);\r\n                this._chainNodes[i - 1].connect(currentEffect);\r\n                this._chainNodes.push(currentEffect);\r\n            }\r\n            this._chainNodes[this._chainNodes.length - 1].connect(this._postGain);\r\n        }\r\n        else {\r\n            this._preGain.connect(this._postGain);\r\n        }\r\n    }\r\n    get input() {\r\n        return this._preGain;\r\n    }\r\n    get effectCount() {\r\n        return this._chainNodes.length;\r\n    }\r\n    get effects() {\r\n        return this._settings.effects;\r\n    }\r\n    get effectNodes() {\r\n        return this._chainNodes;\r\n    }\r\n    get chainName() {\r\n        return this._settings.chainName;\r\n    }\r\n    set chainName(value) {\r\n        this._settings.chainName = value;\r\n    }\r\n    get preGain() {\r\n        return this._preGain.gain.value;\r\n    }\r\n    set preGain(value) {\r\n        this._preGain.gain.value = value;\r\n    }\r\n    get postGain() {\r\n        return this._postGain.gain.value;\r\n    }\r\n    set postGain(value) {\r\n        this._preGain.gain.value = value;\r\n    }\r\n    destroy() {\r\n        this._preGain.disconnect();\r\n        for (let i = 0; i < this._chainNodes.length; i++) {\r\n            this._chainNodes[i].disconnect();\r\n        }\r\n        this._postGain.disconnect();\r\n    }\r\n    connect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._postGain.connect(node);\r\n        }\r\n        else {\r\n            this._postGain.connect(node.input);\r\n        }\r\n    }\r\n    disconnect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._postGain.disconnect(node);\r\n        }\r\n        else {\r\n            this._postGain.disconnect(node.input);\r\n        }\r\n    }\r\n    disconnectAll() {\r\n        this._postGain.disconnect();\r\n    }\r\n    addEffect(index, effect) {\r\n        if (index < 0 || index > this._chainNodes.length) {\r\n            throw new RangeError((\"Index out of range:\" + index.toString()));\r\n        }\r\n        let effectObject = this.IEffectToEffectObject(effect);\r\n        this._connectEffect(index, effectObject);\r\n        this._settings.effects.splice(index, 0, effect);\r\n    }\r\n    removeEffect(index) {\r\n        if (index >= 0 && index < this._chainNodes.length) {\r\n            this._disconnectEffect(index);\r\n            this._settings.effects.splice(index, 1);\r\n        }\r\n        else {\r\n            throw new RangeError(\"Index out of range\");\r\n        }\r\n    }\r\n    moveEffect(index, newIndex) {\r\n        index = Math.max(Math.min(this.effectCount, index), 0);\r\n        newIndex = Math.max(Math.min(this.effectCount, newIndex), 0);\r\n        if (index != newIndex) {\r\n            let effect = this._disconnectEffect(index);\r\n            this._connectEffect(newIndex, effect);\r\n            let temp = this._settings.effects[index];\r\n            this._settings.effects.splice(index, 1);\r\n            this._settings.effects.splice(newIndex, 0, temp);\r\n        }\r\n    }\r\n    getDelayTime() {\r\n        let longestDelay = 0;\r\n        this._settings.effects.forEach((effect) => {\r\n            let thisEffectDelay = 0;\r\n            if (effect.effectType == \"Delay\") {\r\n                let feedback = effect.properties.find(property => property.propertyName == \"feedback\").value;\r\n                let delayTime = effect.properties.find(property => property.propertyName == \"delayTime\").value / 1000;\r\n                thisEffectDelay = Math.log(0.005) / Math.log(feedback) * delayTime;\r\n            }\r\n            else if (effect.effectType == \"PingPongDelay\") {\r\n                let feedback = effect.properties.find(property => property.propertyName == \"feedback\").value;\r\n                let l = effect.properties.find(property => property.propertyName == \"delayTimeLeft\").value / 1000;\r\n                let r = effect.properties.find(property => property.propertyName == \"delayTimeRight\").value / 1000;\r\n                thisEffectDelay = Math.log(0.005) / Math.log(feedback) * Math.max(l + r);\r\n            }\r\n            else if (effect.effectType == \"Convolver\") {\r\n                thisEffectDelay = 3;\r\n            }\r\n            longestDelay += thisEffectDelay;\r\n        });\r\n        return longestDelay;\r\n    }\r\n    serialise() {\r\n        return this._settings;\r\n    }\r\n    static createDefaults() {\r\n        return {\r\n            \"chainName\": \"\",\r\n            \"effects\": [],\r\n            \"preGain\": 1,\r\n            \"postGain\": 1,\r\n            \"connections\": [\"Context\"]\r\n        };\r\n    }\r\n    IEffectToEffectObject(effect) {\r\n        let p = this._convertPropertyToObject(effect.properties);\r\n        switch (effect.effectType) {\r\n            case \"Chorus\":\r\n                return new this._tuna.Chorus(p);\r\n            case \"Delay\":\r\n                return new this._tuna.Delay(p);\r\n            case \"Overdrive\":\r\n                return new this._tuna.Overdrive(p);\r\n            case \"Compressor\":\r\n                return new this._tuna.Compressor(p);\r\n            case \"Convolver\":\r\n                return new this._tuna.Convolver(p);\r\n            case \"Filter\":\r\n                return new this._tuna.Filter(p);\r\n            case \"Cabinet\":\r\n                return new this._tuna.Cabinet(p);\r\n            case \"Tremolo\":\r\n                return new this._tuna.Tremolo(p);\r\n            case \"WahWah\":\r\n                return new this._tuna.WahWah(p);\r\n            case \"Phaser\":\r\n                return new this._tuna.Phaser(p);\r\n            case \"Bitcrusher\":\r\n                return new this._tuna.Bitcrusher(p);\r\n            case \"Moog\":\r\n                return new this._tuna.MoogFilter(p);\r\n            case \"PingPongDelay\":\r\n                return new this._tuna.PingPongDelay(p);\r\n            case \"Panner\":\r\n                return new this._tuna.Panner(p);\r\n            case \"Gain\":\r\n                return new this._tuna.Gain(p);\r\n            default:\r\n                throw new Error(\"Invalid effect name.\");\r\n        }\r\n    }\r\n    _convertPropertyToObject(properties) {\r\n        let newObj = {};\r\n        properties.forEach((prop) => {\r\n            newObj[prop.propertyName] = prop.value;\r\n        });\r\n        return newObj;\r\n    }\r\n    _connectEffect(index, effect) {\r\n        if (index < 0 || index > this._chainNodes.length) {\r\n            throw new Error(\"Invalid index to disconnect effect.\");\r\n        }\r\n        if (index > 0) {\r\n            this._chainNodes[index - 1].disconnect();\r\n            this._chainNodes[index - 1].connect(effect);\r\n        }\r\n        else {\r\n            this._preGain.disconnect();\r\n            this._preGain.connect(effect);\r\n        }\r\n        if (index === this._chainNodes.length) {\r\n            effect.connect(this._postGain);\r\n            this._chainNodes.push(effect);\r\n        }\r\n        else {\r\n            effect.connect(this._chainNodes[index]);\r\n            this._chainNodes.splice(index, 0, effect);\r\n        }\r\n    }\r\n    _disconnectEffect(index) {\r\n        if (index < 0 || index >= this._chainNodes.length || this._chainNodes.length === 0) {\r\n            throw new Error(\"Invalid index to disconnect effect.\");\r\n        }\r\n        this._chainNodes[index].disconnect();\r\n        let node = null;\r\n        if (index > 0) {\r\n            node = this._chainNodes[index - 1];\r\n        }\r\n        else {\r\n            node = this._preGain;\r\n        }\r\n        node.disconnect();\r\n        if (index === this._chainNodes.length - 1) {\r\n            node.connect(this._postGain);\r\n        }\r\n        else {\r\n            node.connect(this._chainNodes[index + 1]);\r\n        }\r\n        return this._chainNodes.splice(index, 1)[0];\r\n    }\r\n    static Chorus() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Chorus\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"rate\", value: 1.5, editable: true, step: 0.01, min: 0.01, max: 8 },\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.4, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"depth\", value: 0.7, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"delay\", value: 0.0045, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Delay() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Delay\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.45, editable: true, step: 0.01, min: 0, max: 0.999 },\r\n                { type: \"number\", displayName: \"Delay Time\", propertyName: \"delayTime\", value: 100, editable: true, step: 1, min: 1, max: 10000 },\r\n                { type: \"number\", displayName: \"Wet Level\", propertyName: \"wetLevel\", value: 0.5, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Dry Level\", propertyName: \"dryLevel\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"cutoff\", value: 20000, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Phaser() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Phaser\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"rate\", value: 0.1, editable: true, step: 0.01, min: 0, max: 8 },\r\n                { type: \"number\", propertyName: \"depth\", value: 0.6, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.7, editable: true, step: 0.01, min: 0, max: 0.999 },\r\n                { type: \"number\", displayName: \"Stereo Phase\", propertyName: \"stereoPhase\", value: 40, editable: true, step: 1, min: 0, max: 180 },\r\n                { type: \"number\", displayName: \"Base Modulation Frequency\", propertyName: \"baseModulationFrequency\", value: 700, editable: true, step: 1, min: 500, max: 1500 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Overdrive() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Overdrive\",\r\n            properties: [\r\n                { type: \"number\", displayName: \"Output Gain\", propertyName: \"outputGain\", value: 0, editable: true, step: 1, min: -42, max: 0 },\r\n                { type: \"number\", propertyName: \"drive\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Curve Amount\", propertyName: \"curveAmount\", value: 0.725, editable: true, step: 0.01, min: 0, max: 0.99 },\r\n                { type: \"number\", displayName: \"Algorithm Index\", propertyName: \"algorithmIndex\", value: 0, editable: true, step: 1, min: 0, max: 5 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Compressor() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Compressor\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"threshold\", value: -20, editable: true, step: 1, min: -100, max: 0 },\r\n                { type: \"number\", displayName: \"Makeup Gain\", propertyName: \"makeupGain\", value: 1, editable: true, step: 1, min: 0, max: 200 },\r\n                { type: \"number\", propertyName: \"attack\", value: 1, editable: true, step: 1, min: 0, max: 1000 },\r\n                { type: \"number\", propertyName: \"release\", value: 250, editable: true, step: 1, min: 0, max: 3000 },\r\n                { type: \"number\", propertyName: \"ratio\", value: 4, editable: true, step: 1, min: 1, max: 20 },\r\n                { type: \"number\", propertyName: \"knee\", value: 5, editable: true, step: 1, min: 0, max: 40 },\r\n                { type: \"boolean\", displayName: \"Auto Makeup\", propertyName: \"automakeup\", value: false, editable: true },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Convolver() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Convolver\",\r\n            properties: [\r\n                { type: \"number\", displayName: \"High Cut\", propertyName: \"highCut\", value: 22050, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"number\", displayName: \"Low Cut\", propertyName: \"lowCut\", value: 20, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"number\", displayName: \"Wet Level\", propertyName: \"wetLevel\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Dry Level\", propertyName: \"dryLevel\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"level\", value: 0.7, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"string\", propertyName: \"impulse\", value: \"/dependencies/impulses/impulse_rev.wav\", editable: false },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Filter() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Filter\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"frequency\", value: 22050, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"number\", propertyName: \"Q\", value: 1, editable: true, step: 0.001, min: 0.001, max: 100 },\r\n                { type: \"number\", propertyName: \"gain\", value: 0, editable: true, step: 1, min: -40, max: 40 },\r\n                { type: \"list\", displayName: \"Filter Type\", propertyName: \"filterType\", value: \"lowpass\", editable: true, options: [\"lowpass\", \"highpass\", \"bandpass\", \"lowshelf\", \"highshelf\", \"peaking\", \"notch\", \"allpass\"] },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Cabinet() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Cabinet\",\r\n            properties: [\r\n                { type: \"number\", displayName: \"Makeup Gain\", propertyName: \"makeupGain\", value: 1, editable: true, step: 0.1, min: 0, max: 20 },\r\n                { type: \"string\", displayName: \"Impulse Path\", propertyName: \"impulsePath\", value: \"/dependencies/impulses/impulse_guitar.wav\", editable: false },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Tremolo() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Tremolo\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"intensity\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"rate\", value: 5, editable: true, step: 0.001, min: 0.001, max: 8 },\r\n                { type: \"number\", propertyName: \"stereoPhase\", value: 0, editable: true, step: 1, min: 0, max: 180 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static WahWah() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"WahWah\",\r\n            properties: [\r\n                { type: \"boolean\", displayName: \"Auto\", propertyName: \"automode\", value: true, editable: true },\r\n                { type: \"number\", displayName: \"Base Frequency\", propertyName: \"baseFrequency\", value: 0.5, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Excursion Octaves\", propertyName: \"excursionOctaves\", value: 2, editable: true, step: 1, min: 1, max: 6 },\r\n                { type: \"number\", propertyName: \"sweep\", value: 0.2, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"resonance\", value: 10, editable: true, step: 1, min: 1, max: 100 },\r\n                { type: \"number\", propertyName: \"sensitivity\", value: 0.5, editable: true, step: 0.01, min: -1, max: 1 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Bitcrusher() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Bitcrusher\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"bits\", value: 4, editable: true, step: 1, min: 1, max: 16 },\r\n                { type: \"number\", displayName: \"Normal Frequency\", propertyName: \"normFreq\", value: 0.1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Buffer Size\", propertyName: \"bufferSize\", value: 4096, editable: true, step: 1, min: 256, max: 16384 },\r\n            ]\r\n        };\r\n    }\r\n    static Moog() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Moog\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"cutoff\", value: 0.065, editable: true, step: 0.001, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"resonance\", value: 3.5, editable: true, step: 0.01, min: 0, max: 4 },\r\n                { type: \"number\", displayName: \"Buffer Size\", propertyName: \"bufferSize\", value: 4096, editable: true, step: 1, min: 256, max: 16384 },\r\n            ]\r\n        };\r\n    }\r\n    static PingPongDelay() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"PingPongDelay\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"wetLevel\", value: 1.5, editable: true, step: 0.01, min: 0.01, max: 8 },\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.4, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Delay Time (Left)\", propertyName: \"delayTimeLeft\", value: 200, editable: true, step: 1, min: 1, max: 10000 },\r\n                { type: \"number\", displayName: \"Delay Time (Right)\", propertyName: \"delayTimeRight\", value: 400, editable: true, step: 1, min: 1, max: 10000 },\r\n            ]\r\n        };\r\n    }\r\n    static Panner() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Panner\",\r\n            properties: [{ type: \"number\", propertyName: \"pan\", value: 0, editable: true, step: 0.01, min: -1, max: 1 }]\r\n        };\r\n    }\r\n    static Gain() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Gain\",\r\n            properties: [{ type: \"number\", propertyName: \"gain\", value: 1, editable: true, step: 0.01, min: 0, max: 2 }]\r\n        };\r\n    }\r\n}\r\nEffectsChain.possibleEffects = new Map([[\"Chorus\", EffectsChain.Chorus],\r\n    [\"Delay\", EffectsChain.Delay],\r\n    [\"Ping Pong Delay\", EffectsChain.PingPongDelay],\r\n    [\"Overdrive\", EffectsChain.Overdrive],\r\n    [\"Gain\", EffectsChain.Gain],\r\n    [\"Compressor\", EffectsChain.Compressor],\r\n    [\"Pan\", EffectsChain.Panner],\r\n    [\"Convolver Reverb\", EffectsChain.Convolver],\r\n    [\"Tremolo\", EffectsChain.Tremolo],\r\n    [\"Filter\", EffectsChain.Filter],\r\n    [\"Bitcrusher\", EffectsChain.Bitcrusher],\r\n    [\"Phaser\", EffectsChain.Phaser],\r\n    [\"Wah\", EffectsChain.WahWah],\r\n    [\"Moog Filter\", EffectsChain.Moog],\r\n    [\"Cabinet Emulator\", EffectsChain.Cabinet]]);\r\n//# sourceMappingURL=EffectsChain.js.map","import { EffectsChain } from \"../Nodes/EffectsChain.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nexport class ConnectionManager {\r\n    constructor(context) {\r\n        this.effectsDeserialised = new SimpleEvent();\r\n        this._context = context;\r\n        this._outputGain = this._context.createGain();\r\n        this._outputGain.connect(context.destination);\r\n        this._bus = new EffectsChain(context);\r\n        this._bus.chainName = \"Bus\";\r\n        this._possibleConnections = { \"Context\": this._outputGain, \"Bus\": this._bus };\r\n        this._possibleConnectionStrings = [\"Context\", \"Bus\"];\r\n        this._currentConnections = {};\r\n        this._chains = [];\r\n        this.createConnections(this._bus, [\"Context\"]);\r\n    }\r\n    get possibleConnections() {\r\n        return this._possibleConnections;\r\n    }\r\n    get possibleConnectionStrings() {\r\n        return this._possibleConnectionStrings;\r\n    }\r\n    get outputGain() {\r\n        return this._outputGain;\r\n    }\r\n    get bus() {\r\n        return this._bus;\r\n    }\r\n    get chains() {\r\n        return this._chains;\r\n    }\r\n    getConnections(object) {\r\n        if (object.id in this._currentConnections) {\r\n            return this._currentConnections[object.id];\r\n        }\r\n        else {\r\n            throw new Error(\"Object not found\");\r\n        }\r\n    }\r\n    createConnections(object, connections) {\r\n        if (object.id in this._currentConnections) {\r\n            object.disconnectAll();\r\n        }\r\n        for (let i = 0; i < connections.length; i++) {\r\n            if (connections[i] in this._possibleConnections) {\r\n                object.connect(this._possibleConnections[connections[i]]);\r\n            }\r\n            else {\r\n                throw new Error(\"Invalid connection name: \" + connections[i]);\r\n            }\r\n        }\r\n        this._currentConnections[object.id] = connections;\r\n    }\r\n    addConnection(object, connection) {\r\n        if (connection in this._possibleConnections) {\r\n            if (object.id in this._currentConnections) {\r\n                if (this._currentConnections[object.id].indexOf(connection) == -1) {\r\n                    this._currentConnections[object.id].push(connection);\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                this._currentConnections[object.id] = [connection];\r\n            }\r\n            object.connect(this._possibleConnections[connection]);\r\n        }\r\n        else {\r\n            throw new Error(\"Invalid connection name: \" + connection);\r\n        }\r\n    }\r\n    removeConnection(object, connection) {\r\n        if (object.id in this._currentConnections) {\r\n            let index = this._currentConnections[object.id].indexOf(connection);\r\n            if (index != -1) {\r\n                object.disconnect(this._possibleConnections[connection]);\r\n                this._currentConnections[object.id].splice(index, 1);\r\n            }\r\n            else {\r\n                throw new Error(\"Object does not have this connection\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Object does not have any connections.\");\r\n        }\r\n    }\r\n    removeAllConnections(object) {\r\n        object.disconnectAll();\r\n        delete this._currentConnections[object.id];\r\n    }\r\n    addChain(settings) {\r\n        let object = new EffectsChain(this._context, settings);\r\n        if (settings === undefined) {\r\n            let chainNo = 0;\r\n            while ((\"Chain \" + chainNo) in this._possibleConnections) {\r\n                chainNo++;\r\n            }\r\n            ;\r\n            let name = \"Chain \" + chainNo.toString();\r\n            object.chainName = name;\r\n            this.createConnections(object, EffectsChain.createDefaults().connections);\r\n        }\r\n        else {\r\n            this.createConnections(object, settings.connections);\r\n        }\r\n        this._possibleConnectionStrings.push(object.chainName);\r\n        this._possibleConnections[object.chainName] = object;\r\n        this._chains.push(object);\r\n        return object;\r\n    }\r\n    removeChain(name) {\r\n        if (name.startsWith(\"Chain \") && name in this._possibleConnections) {\r\n            let index = this._chains.indexOf(this._possibleConnections[name]);\r\n            this._chains.splice(index, 1);\r\n            delete this._possibleConnections[name];\r\n            this._possibleConnectionStrings.splice(this._possibleConnectionStrings.indexOf(name), 1);\r\n        }\r\n        else {\r\n            throw new Error(\"Object not in ConnectionManager\");\r\n        }\r\n    }\r\n    getChain(name) {\r\n        if (name == \"Bus\") {\r\n            return this._bus;\r\n        }\r\n        else {\r\n            let chain = this._chains.find((value) => { value.chainName === name; });\r\n            if (chain !== undefined) {\r\n                return chain;\r\n            }\r\n            else {\r\n                throw new Error(\"Invalid chain name\");\r\n            }\r\n        }\r\n    }\r\n    getChainDelayTime(name) {\r\n        let chain = this.getChain(name);\r\n        let delayTime = chain.getDelayTime();\r\n        if (\"bus\" in this._currentConnections[chain.id]) {\r\n            delayTime += this._bus.getDelayTime();\r\n        }\r\n        return delayTime;\r\n    }\r\n    serialiseChains() {\r\n        let serialisedChains = [];\r\n        this.chains.concat(this.bus).forEach(chain => {\r\n            let chainSettings = chain.serialise();\r\n            if (chain.id in this._currentConnections) {\r\n                chainSettings.connections = this._currentConnections[chain.id];\r\n            }\r\n            else {\r\n                chainSettings.connections = [\"Context\"];\r\n            }\r\n            serialisedChains.push(chainSettings);\r\n        });\r\n        return serialisedChains;\r\n    }\r\n    deserialiseChains(newChains) {\r\n        this._possibleConnectionStrings = [\"Context\"];\r\n        this._possibleConnections = { \"Context\": this._outputGain };\r\n        for (let i = 0; i < this._chains.length; i++) {\r\n            delete this._possibleConnections[this._chains[i].chainName];\r\n            this._possibleConnectionStrings.splice(this._possibleConnectionStrings.indexOf(this._chains[i].chainName), 1);\r\n            this._chains[i].destroy();\r\n        }\r\n        this._chains = [];\r\n        newChains.forEach(chain => {\r\n            if (chain.chainName === \"Bus\") {\r\n                this._bus = new EffectsChain(this._context, chain);\r\n                this._possibleConnectionStrings.push(\"Bus\");\r\n                this._possibleConnections[chain.chainName] = this._bus;\r\n                this.createConnections(this._bus, chain.connections);\r\n            }\r\n            else {\r\n                this.addChain(chain);\r\n            }\r\n        });\r\n        this.effectsDeserialised.emit();\r\n    }\r\n}\r\n//# sourceMappingURL=ConnectionManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport SongMetadata from \"./SongMetadata.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nimport { OscillatorTrack } from \"../Tracks/OscillatorTrack.js\";\r\nimport { SoundFileTrack } from \"../Tracks/SoundFileTrack.js\";\r\nimport { ConnectionManager } from \"./ConnectionManager.js\";\r\nimport { setContext } from \"../../../dependencies/tuna.js\";\r\nexport class SongManager {\r\n    constructor(context) {\r\n        this.lookaheadTime = 0.125;\r\n        this._playing = false;\r\n        this._startTime = 0;\r\n        this._quarterNotePosition = 0;\r\n        this.playingIntervalIDs = null;\r\n        this.metadata = new SongMetadata();\r\n        this.context = (context === undefined) ? new AudioContext() : context;\r\n        this.connectionManager = new ConnectionManager(this.context);\r\n        this.scheduleEvent = new SimpleEvent();\r\n        this.playingChangedEvent = new SimpleEvent();\r\n        this.quarterNotePositionChangedEvent = new SimpleEvent();\r\n        this._tracks = [];\r\n        this._boundQuarterNoteUpdateFunction = this.quarterNoteUpdateFunction.bind(this);\r\n    }\r\n    get playing() {\r\n        return this._playing;\r\n    }\r\n    get quarterNotePosition() {\r\n        return this._quarterNotePosition;\r\n    }\r\n    set quarterNotePosition(value) {\r\n        this._internalQuarterNotePosition = value;\r\n        this._startTime = this.context.currentTime - this.metadata.positionQuarterNoteToSeconds(this._quarterNotePosition);\r\n        this._scheduleStop();\r\n        if (this._playing) {\r\n            this._tracks.forEach(element => {\r\n                element.start(this._quarterNotePosition);\r\n            });\r\n        }\r\n    }\r\n    set _internalQuarterNotePosition(value) {\r\n        this._quarterNotePosition = value;\r\n        this.quarterNotePositionChangedEvent.emit(value);\r\n    }\r\n    get tracks() {\r\n        return this._tracks;\r\n    }\r\n    addOscillatorTrack(settings) {\r\n        let newTrack = new OscillatorTrack(this.metadata, this.context, this.scheduleEvent, this.connectionManager, settings);\r\n        this._tracks.push(newTrack);\r\n        return newTrack;\r\n    }\r\n    addSoundFileTrack(settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let newTrack = yield SoundFileTrack.create(this.metadata, this.context, this.scheduleEvent, this.connectionManager, settings);\r\n            this._tracks.push(newTrack);\r\n            return newTrack;\r\n        });\r\n    }\r\n    removeTrack(track) {\r\n        let index = this._tracks.indexOf(track);\r\n        if (index != -1) {\r\n            this._tracks.splice(index, 1);\r\n        }\r\n        track.destroy();\r\n    }\r\n    start(startPosition = this.quarterNotePosition) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.context.state === \"suspended\") {\r\n                yield this.context.resume();\r\n            }\r\n            this._playing = true;\r\n            this.playingChangedEvent.emit(this._playing);\r\n            this.quarterNotePosition = startPosition;\r\n            if (startPosition == 0) {\r\n                this._startTime = this.context.currentTime;\r\n            }\r\n            else {\r\n                this._startTime = this.context.currentTime - this.metadata.positionQuarterNoteToSeconds(startPosition);\r\n            }\r\n            this.connectionManager.outputGain.gain.setTargetAtTime(0.9999, this.context.currentTime, 0.03);\r\n            this.playingIntervalIDs = setInterval(() => { this.scheduleNotes(); }, 50);\r\n            requestAnimationFrame(this._boundQuarterNoteUpdateFunction);\r\n            this._tracks.forEach(element => {\r\n                element.start(this._quarterNotePosition);\r\n            });\r\n            this._scheduleStop();\r\n        });\r\n    }\r\n    stop() {\r\n        this._playing = false;\r\n        this.playingChangedEvent.emit(this._playing);\r\n        this.connectionManager.outputGain.gain.setTargetAtTime(0.0001, this.context.currentTime, 0.03);\r\n        this._startSongLength = null;\r\n        clearInterval(this.playingIntervalIDs);\r\n        this._tracks.forEach(element => {\r\n            element.stop();\r\n        });\r\n    }\r\n    stopToBeginning() {\r\n        this.stop();\r\n        this.quarterNotePosition = 0;\r\n    }\r\n    serialise() {\r\n        let serialisedTracks = [];\r\n        this._tracks.forEach(track => {\r\n            let trackSettings = track.serialise();\r\n            serialisedTracks.push(trackSettings);\r\n        });\r\n        let serialisedChains = this.connectionManager.serialiseChains();\r\n        return {\r\n            \"fileType\": \"SequencerSongSettings\",\r\n            \"version\": SongManager.saveFileVersion,\r\n            \"metadataEvents\": this.metadata.serialise(),\r\n            \"tracks\": serialisedTracks,\r\n            \"chains\": serialisedChains\r\n        };\r\n    }\r\n    deserialise(settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (settings.version != SongManager.saveFileVersion) {\r\n                console.log(\"WARNING: Save file is an old version, loading may not function correctly.\");\r\n            }\r\n            this._tracks.forEach(track => { track.destroy(); });\r\n            this._tracks = [];\r\n            this.connectionManager.deserialiseChains(settings.chains);\r\n            this.metadata.deserialise(settings.metadataEvents);\r\n            for (let i = 0; i < settings.tracks.length; i++) {\r\n                let track = settings.tracks[i];\r\n                switch (track.source.type) {\r\n                    case \"oscillator\":\r\n                        this.addOscillatorTrack(track);\r\n                        break;\r\n                    case \"soundFile\":\r\n                        yield this.addSoundFileTrack(track);\r\n                        break;\r\n                    default:\r\n                        throw new Error(\"Invalid track type.\");\r\n                        break;\r\n                }\r\n            }\r\n            ;\r\n        });\r\n    }\r\n    destroy() {\r\n        this.scheduleEvent.removeAllListeners();\r\n        this.playingChangedEvent.removeAllListeners();\r\n    }\r\n    saveToWAV() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let length = this.getPlaybackLength();\r\n            if (length > 0) {\r\n                let song = this.serialise();\r\n                let offlineManager = new OfflineSongManager(length + 0.1);\r\n                yield offlineManager.deserialise(song);\r\n                let result = yield offlineManager.saveToWAV();\r\n                setContext(this.context);\r\n                return result;\r\n            }\r\n            else {\r\n                throw new Error(\"Song Length must be greater than 0 to save to WAV.\");\r\n            }\r\n        });\r\n    }\r\n    getPlaybackLength() {\r\n        let longestEvent = 0;\r\n        let cachedEffectLengths = {};\r\n        this._tracks.forEach(track => {\r\n            let playbackTime = this.metadata.positionQuarterNoteToSeconds(track.timeline.playbackTime);\r\n            let connection = this.connectionManager.getConnections(track.audioSource)[0];\r\n            if (connection != \"Context\") {\r\n                if (connection in cachedEffectLengths) {\r\n                    playbackTime += cachedEffectLengths[connection];\r\n                }\r\n                else {\r\n                    let chainDelayTime = this.connectionManager.getChainDelayTime(connection);\r\n                    playbackTime += chainDelayTime;\r\n                    cachedEffectLengths[connection] = chainDelayTime;\r\n                }\r\n            }\r\n            if (playbackTime > longestEvent) {\r\n                longestEvent = playbackTime;\r\n            }\r\n        });\r\n        return (longestEvent > 0 ? longestEvent + 0.01 : 0);\r\n    }\r\n    scheduleNotes() {\r\n        let quarterNoteTime = this.quarterNotePosition + ((this.lookaheadTime / this.metadata.getSecondsPerBeat(this.quarterNotePosition))\r\n            / this.metadata.getQuarterNoteMultiplier(this.quarterNotePosition));\r\n        this.scheduleEvent.emit(quarterNoteTime);\r\n    }\r\n    quarterNoteUpdateFunction() {\r\n        if (this.playing) {\r\n            let timeSinceStart = this.context.currentTime - this._startTime;\r\n            this._internalQuarterNotePosition = this.metadata.positionSecondsToQuarterNote(timeSinceStart);\r\n            if (this._startSongLength && timeSinceStart > this._startSongLength) {\r\n                this.stopToBeginning();\r\n            }\r\n            requestAnimationFrame(this._boundQuarterNoteUpdateFunction);\r\n        }\r\n    }\r\n    _scheduleStop() {\r\n        let length = this.getPlaybackLength();\r\n        if (length > 0) {\r\n            this._startSongLength = length;\r\n        }\r\n        else {\r\n            this._startSongLength = null;\r\n        }\r\n    }\r\n}\r\nSongManager.saveFileVersion = \"1.0.0\";\r\nexport class OfflineSongManager extends SongManager {\r\n    constructor(length) {\r\n        super(new OfflineAudioContext(2, length * 44100, 44100));\r\n    }\r\n    saveToWAV() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._tracks.forEach(track => {\r\n                track.scheduleAllEvents();\r\n            });\r\n            console.log(\"Starting AudioBuffer render\");\r\n            let audioBuffer = yield this.context.startRendering();\r\n            console.log(\"Finished AudioBuffer render\");\r\n            const [left, right] = [audioBuffer.getChannelData(0), audioBuffer.getChannelData(1)];\r\n            const interleaved = new Float32Array(left.length * 2);\r\n            for (let src = 0, dst = 0; src < left.length; src++, dst += 2) {\r\n                interleaved[dst] = left[src];\r\n                interleaved[dst + 1] = right[src];\r\n            }\r\n            ;\r\n            const wavBytes = getWavBytes(interleaved.buffer, {\r\n                isFloat: true,\r\n                numChannels: 2,\r\n                sampleRate: 44100,\r\n            });\r\n            return new Blob([wavBytes], { type: \"audio/wav\" });\r\n        });\r\n    }\r\n}\r\nfunction getWavBytes(buffer, options) {\r\n    const type = options.isFloat ? Float32Array : Uint16Array;\r\n    const numFrames = buffer.byteLength / type.BYTES_PER_ELEMENT;\r\n    const headerBytes = getWavHeader(Object.assign({}, options, { numFrames }));\r\n    const wavBytes = new Uint8Array(headerBytes.length + buffer.byteLength);\r\n    wavBytes.set(headerBytes, 0);\r\n    wavBytes.set(new Uint8Array(buffer), headerBytes.length);\r\n    return wavBytes;\r\n}\r\nfunction getWavHeader(options) {\r\n    const numFrames = options.numFrames;\r\n    const numChannels = options.numChannels || 2;\r\n    const sampleRate = options.sampleRate || 44100;\r\n    const bytesPerSample = options.isFloat ? 4 : 2;\r\n    const format = options.isFloat ? 3 : 1;\r\n    const blockAlign = numChannels * bytesPerSample;\r\n    const byteRate = sampleRate * blockAlign;\r\n    const dataSize = numFrames * blockAlign;\r\n    const buffer = new ArrayBuffer(44);\r\n    const dv = new DataView(buffer);\r\n    let p = 0;\r\n    function writeString(s) {\r\n        for (let i = 0; i < s.length; i++) {\r\n            dv.setUint8(p + i, s.charCodeAt(i));\r\n        }\r\n        p += s.length;\r\n    }\r\n    function writeUint32(d) {\r\n        dv.setUint32(p, d, true);\r\n        p += 4;\r\n    }\r\n    function writeUint16(d) {\r\n        dv.setUint16(p, d, true);\r\n        p += 2;\r\n    }\r\n    writeString('RIFF');\r\n    writeUint32(dataSize + 36);\r\n    writeString('WAVE');\r\n    writeString('fmt ');\r\n    writeUint32(16);\r\n    writeUint16(format);\r\n    writeUint16(numChannels);\r\n    writeUint32(sampleRate);\r\n    writeUint32(byteRate);\r\n    writeUint16(blockAlign);\r\n    writeUint16(bytesPerSample * 8);\r\n    writeString('data');\r\n    writeUint32(dataSize);\r\n    return new Uint8Array(buffer);\r\n}\r\n//# sourceMappingURL=SongManager.js.map","export class NavigationView {\r\n    constructor() {\r\n        this._viewStack = [];\r\n    }\r\n    get viewDepth() {\r\n        return this._viewStack.length;\r\n    }\r\n    get currentElement() {\r\n        return this._viewStack[this._viewStack.length - 1];\r\n    }\r\n    setStageRenderer(view, renderer) {\r\n        this.controlledStage = view;\r\n        this.renderer = renderer;\r\n        this.controlledStage.removeChildren(0, this.controlledStage.children.length);\r\n    }\r\n    setDefaultElement(element) {\r\n        if (this._viewStack.length == 0) {\r\n            this.controlledStage.addChild(element);\r\n            this._viewStack.push(element);\r\n        }\r\n        else {\r\n            this._viewStack.splice(0, 1, element);\r\n        }\r\n    }\r\n    show(element) {\r\n        if (this._viewStack.length > 0) {\r\n            this.controlledStage.removeChild(this.currentElement);\r\n        }\r\n        this._viewStack.push(element);\r\n        this.controlledStage.addChild(this.currentElement);\r\n    }\r\n    back() {\r\n        if (this._viewStack.length <= 1) {\r\n            throw new Error(\"Cannot bring view stack below 1 element.\");\r\n        }\r\n        this.controlledStage.removeChild(this.currentElement);\r\n        let removed = this._viewStack.pop();\r\n        removed.destroy();\r\n        this.controlledStage.addChild(this.currentElement);\r\n        this.currentElement.resize(this.renderer.width, this.renderer.height);\r\n    }\r\n    passWheelEvent(event, canvasX, canvasY) {\r\n        if (this.currentElement != undefined) {\r\n            this.currentElement.mouseWheelHandler(event, canvasX, canvasY);\r\n        }\r\n    }\r\n}\r\nconst navigationView = new NavigationView();\r\nexport { navigationView };\r\n//# sourceMappingURL=NavigationView.js.map","export class UIColors {\r\n}\r\nUIColors.bgColor = 0x303030;\r\nUIColors.fgColor = 0x5F5F5F;\r\nUIColors.timelineMarkerColor = 0xEEEEEE;\r\nUIColors.metadataEventColor = 0x0075ff;\r\nUIColors.trackEventColor = 0x319999;\r\nUIColors.trackEventSelectedColor = 0x004545;\r\nUIColors.trackEventHoveredColor = 0x097272;\r\nUIColors.trackEventDeleteColor = 0xFF0000;\r\nUIColors.trackEventHighlightColor = 0x54b7b7;\r\nexport class UIFonts {\r\n}\r\nUIFonts.trackFont = {\r\n    fontFamily: \"Arial\",\r\n    fontSize: 15,\r\n    fill: 0xFFFFFF\r\n};\r\nexport class UIPositioning {\r\n}\r\nUIPositioning.timelineHeaderHeight = 40;\r\nUIPositioning.sequencerSidebarWidth = 100;\r\nUIPositioning.timelineSidebarWidth = 200;\r\n//# sourceMappingURL=UITheme.js.map","import { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nexport class UITrack {\r\n    constructor(name, startY, height, track) {\r\n        this.name = name;\r\n        this.startY = startY;\r\n        this.height = height;\r\n        this.track = track;\r\n    }\r\n    destroy() {\r\n        this.track.destroy();\r\n    }\r\n    serialise() {\r\n        return {\r\n            type: \"base\",\r\n            name: this.name,\r\n            startY: this.startY,\r\n            height: this.height,\r\n            modelTrackID: this.track.id\r\n        };\r\n    }\r\n}\r\nexport class NoteUITrack extends UITrack {\r\n    constructor(settings, baseTrack) {\r\n        super(settings.name, settings.startY, settings.height, baseTrack);\r\n        if (settings.noteGroups != undefined) {\r\n            this._noteGroups = settings.noteGroups;\r\n        }\r\n        else {\r\n            this._noteGroups = [];\r\n        }\r\n        this.noteGroupsChanged = new SimpleEvent();\r\n    }\r\n    get noteGroups() {\r\n        return this._noteGroups;\r\n    }\r\n    serialise() {\r\n        let base = super.serialise();\r\n        return Object.assign(Object.assign({}, base), { type: \"oscillator\", noteGroups: this._noteGroups });\r\n    }\r\n    getNoteGroupsStartingBetweenTime(startTime, endTime) {\r\n        let noteGroupsInRange = [];\r\n        for (let i = 0; i < this._noteGroups.length; i++) {\r\n            let noteGroup = this._noteGroups[i];\r\n            if (noteGroup[0] >= startTime && noteGroup[0] <= endTime) {\r\n                noteGroupsInRange.push(noteGroup);\r\n            }\r\n            else if (noteGroup[0] > endTime) {\r\n                break;\r\n            }\r\n        }\r\n        return noteGroupsInRange;\r\n    }\r\n    getNoteGroupsWithinTime(startTime, endTime) {\r\n        let noteGroupsToReturn = [];\r\n        for (let i = 0; i < this._noteGroups.length; i++) {\r\n            let noteGroup = this._noteGroups[i];\r\n            if (noteGroup[1] > startTime && noteGroup[0] < endTime) {\r\n                noteGroupsToReturn.push(noteGroup);\r\n            }\r\n            else if (noteGroup[0] > endTime) {\r\n                break;\r\n            }\r\n        }\r\n        return noteGroupsToReturn;\r\n    }\r\n    getNoteGroupIndex(noteGroup) {\r\n        for (let i = 0; i < this._noteGroups.length; i++) {\r\n            if (noteGroup[0] == this._noteGroups[i][0] && noteGroup[1] == this._noteGroups[i][1]) {\r\n                return i;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    addNoteGroup(startTime, endTime) {\r\n        if (startTime < 0 || endTime < 0) {\r\n            throw new RangeError(\"StartTime and EndTime must both be greater than 0.\");\r\n        }\r\n        if (startTime > endTime) {\r\n            throw new RangeError(\"StartTime cannot be greater than endTime\");\r\n        }\r\n        this.noteGroupsChanged.emit();\r\n        if (this._noteGroups.length === 0) {\r\n            this._noteGroups.push([startTime, endTime]);\r\n            return 0;\r\n        }\r\n        else {\r\n            if (endTime <= this._noteGroups[0][0]) {\r\n                this._noteGroups.splice(0, 0, [startTime, endTime]);\r\n                return 0;\r\n            }\r\n            else if (startTime >= this._noteGroups[this._noteGroups.length - 1][1]) {\r\n                this._noteGroups.push([startTime, endTime]);\r\n                return this._noteGroups.length - 1;\r\n            }\r\n            for (let i = 0; i < this._noteGroups.length - 1; i++) {\r\n                if (startTime >= this._noteGroups[i][1] && endTime <= this._noteGroups[i + 1][0]) {\r\n                    this._noteGroups.splice(i + 1, 0, [startTime, endTime]);\r\n                    return i;\r\n                }\r\n            }\r\n            throw new RangeError(\"Region invalid, likely collides with other existing region.\");\r\n        }\r\n    }\r\n    removeNoteGroup(startTime) {\r\n        let left = 0;\r\n        let right = this._noteGroups.length - 1;\r\n        let mid = 0;\r\n        while (left <= right) {\r\n            mid = Math.floor((left + right) / 2);\r\n            if (startTime - this._noteGroups[mid][0] === 0) {\r\n                this._noteGroups.splice(mid, 1);\r\n                this.noteGroupsChanged.emit();\r\n                return;\r\n            }\r\n            else if (startTime - this._noteGroups[mid][0] > 0) {\r\n                left = mid + 1;\r\n            }\r\n            else {\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        throw new RangeError(\"Element with given startTime does not exist.\");\r\n    }\r\n    updateNoteGroups(noteEvent) {\r\n        if (this._noteGroups.length == 0) {\r\n            this.addNoteGroup(noteEvent.startPosition, noteEvent.endPosition);\r\n            return;\r\n        }\r\n        let noteGroups = this.getNoteGroupsWithinTime(noteEvent.startPosition, noteEvent.endPosition);\r\n        let chosenNoteGroup = null;\r\n        if (noteGroups.length > 1) {\r\n            chosenNoteGroup = [noteGroups[0][0], noteGroups[noteGroups.length - 1][1]];\r\n            noteGroups.forEach(noteGroup => {\r\n                this.removeNoteGroup(noteGroup[0]);\r\n            });\r\n            this.addNoteGroup(chosenNoteGroup[0], chosenNoteGroup[1]);\r\n        }\r\n        else if (noteGroups.length == 1) {\r\n            chosenNoteGroup = noteGroups[0];\r\n        }\r\n        else {\r\n            if (this.noteGroups[0][0] > noteEvent.endPosition) {\r\n                chosenNoteGroup = this.noteGroups[0];\r\n            }\r\n            else {\r\n                let index = 1;\r\n                while (index < this.noteGroups.length && this.noteGroups[index][1] < noteEvent.startPosition) {\r\n                    index++;\r\n                }\r\n                if (index == this.noteGroups.length) {\r\n                    chosenNoteGroup = this.noteGroups[index - 1];\r\n                }\r\n                else {\r\n                    if (Math.abs(this.noteGroups[index - 1][1] - noteEvent.endPosition) <= Math.abs(this.noteGroups[index][0] - noteEvent.startPosition)) {\r\n                        chosenNoteGroup = this.noteGroups[index - 1];\r\n                    }\r\n                    else {\r\n                        chosenNoteGroup = this.noteGroups[index];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        let newNoteGroup = chosenNoteGroup;\r\n        if (newNoteGroup[0] > noteEvent.startPosition) {\r\n            newNoteGroup[0] = noteEvent.startPosition;\r\n        }\r\n        if (newNoteGroup[1] < noteEvent.endPosition) {\r\n            newNoteGroup[1] = noteEvent.endPosition;\r\n        }\r\n        if (newNoteGroup != chosenNoteGroup) {\r\n            this.removeNoteGroup(chosenNoteGroup[0]);\r\n            this.addNoteGroup(newNoteGroup[0], newNoteGroup[1]);\r\n            this.noteGroupsChanged.emit();\r\n        }\r\n        else {\r\n            this.checkNoteGroupBoundaries(this.getNoteGroupIndex(chosenNoteGroup));\r\n        }\r\n    }\r\n    checkNoteGroupBoundaries(index) {\r\n        let notes = this.getNoteGroupNotes(index);\r\n        if (notes.length == 0) {\r\n            this.removeNoteGroup(this._noteGroups[index][0]);\r\n            return;\r\n        }\r\n        let max = notes[0].endPosition;\r\n        for (let i = 1; i < notes.length; i++) {\r\n            max = Math.max(max, notes[i].endPosition);\r\n        }\r\n        this._noteGroups[index][0] = notes[0].startPosition;\r\n        this._noteGroups[index][1] = max;\r\n        this.noteGroupsChanged.emit();\r\n    }\r\n    getNoteGroupNotes(index) {\r\n        let noteGroup = this._noteGroups[index];\r\n        return this.track.timeline.getEventsBetweenTimes(noteGroup[0], noteGroup[1]);\r\n    }\r\n    addEvent(startPosition, pitch, duration) {\r\n        let event = this.track.addNote(startPosition, pitch, duration);\r\n        this.updateNoteGroups(event);\r\n        return event;\r\n    }\r\n    editEvent(event, startPosition, pitch, duration) {\r\n        event.pitchString = pitch;\r\n        this.track.timeline.editEvent(this.track.timeline.getIndexOfEvent(event), startPosition, duration);\r\n        this.updateNoteGroups(event);\r\n    }\r\n    removeEvent(event) {\r\n        let noteGroupIndex = this.getNoteGroupIndex(this.getNoteGroupsWithinTime(event.startPosition, event.endPosition)[0]);\r\n        this.track.removeNote(event);\r\n        this.checkNoteGroupBoundaries(noteGroupIndex);\r\n    }\r\n    destroy() {\r\n        this.noteGroupsChanged.removeAllListeners();\r\n        super.destroy();\r\n    }\r\n}\r\nexport class SoundFileUITrack extends UITrack {\r\n    constructor(settings, track) {\r\n        super(settings.name, settings.startY, settings.height, track);\r\n        this.displayActualWidth = true;\r\n        this.displayActualWidth = settings.displayActualWidth;\r\n    }\r\n    get eventDuration() {\r\n        return this.track.soundFileDuration;\r\n    }\r\n    serialise() {\r\n        let base = super.serialise();\r\n        return Object.assign(Object.assign({}, base), { type: \"soundFile\", displayActualWidth: this.displayActualWidth });\r\n    }\r\n    getOneShotsBetweenTime(startTime, endTime) {\r\n        return this.track.timeline.getEventsBetweenTimes(startTime, endTime);\r\n    }\r\n}\r\n//# sourceMappingURL=UITrack.js.map","export var EventSnapType;\r\n(function (EventSnapType) {\r\n    EventSnapType[EventSnapType[\"Beat\"] = 0] = \"Beat\";\r\n    EventSnapType[EventSnapType[\"HalfBeat\"] = 1] = \"HalfBeat\";\r\n    EventSnapType[EventSnapType[\"QuarterBeat\"] = 2] = \"QuarterBeat\";\r\n    EventSnapType[EventSnapType[\"EighthBeat\"] = 3] = \"EighthBeat\";\r\n    EventSnapType[EventSnapType[\"None\"] = 4] = \"None\";\r\n})(EventSnapType || (EventSnapType = {}));\r\nexport var TimelineMode;\r\n(function (TimelineMode) {\r\n    TimelineMode[TimelineMode[\"Playback\"] = 0] = \"Playback\";\r\n    TimelineMode[TimelineMode[\"Edit\"] = 1] = \"Edit\";\r\n})(TimelineMode || (TimelineMode = {}));\r\nexport var MouseClickType;\r\n(function (MouseClickType) {\r\n    MouseClickType[MouseClickType[\"LeftClick\"] = 0] = \"LeftClick\";\r\n    MouseClickType[MouseClickType[\"RightClick\"] = 1] = \"RightClick\";\r\n    MouseClickType[MouseClickType[\"MiddleClick\"] = 2] = \"MiddleClick\";\r\n    MouseClickType[MouseClickType[\"None\"] = 3] = \"None\";\r\n})(MouseClickType || (MouseClickType = {}));\r\nexport var NoteLength;\r\n(function (NoteLength) {\r\n    NoteLength[NoteLength[\"Whole\"] = 0] = \"Whole\";\r\n    NoteLength[NoteLength[\"Half\"] = 1] = \"Half\";\r\n    NoteLength[NoteLength[\"Quarter\"] = 2] = \"Quarter\";\r\n    NoteLength[NoteLength[\"Eighth\"] = 3] = \"Eighth\";\r\n    NoteLength[NoteLength[\"Sixteenth\"] = 4] = \"Sixteenth\";\r\n    NoteLength[NoteLength[\"ThirtySecond\"] = 5] = \"ThirtySecond\";\r\n})(NoteLength || (NoteLength = {}));\r\n//# sourceMappingURL=Enums.js.map","import * as PIXI from \"pixi.js\";\r\nimport { MouseClickType } from \"../Settings/Enums\";\r\nimport { PointHelper } from \"../../HelperModules/PointHelper\";\r\nexport class InteractiveContainer extends PIXI.Container {\r\n    constructor() {\r\n        super();\r\n        this.mouseIsOver = false;\r\n        this.interactive = true;\r\n        this.on(\"pointerdown\", this.pointerDownHandler.bind(this));\r\n        this.on(\"pointermove\", this.pointerMoveHandler.bind(this));\r\n        this.on(\"pointerup\", this.pointerUpHandler.bind(this));\r\n        this.on(\"pointerupoutside\", this.pointerUpHandler.bind(this));\r\n        this.on(\"pointerover\", this.pointerOverHandler.bind(this));\r\n        this.on(\"pointerout\", this.pointerOutHandler.bind(this));\r\n    }\r\n    pointerOverHandler(event) {\r\n        this.mouseIsOver = true;\r\n    }\r\n    pointerOutHandler(event) {\r\n        this.mouseIsOver = false;\r\n    }\r\n}\r\nexport class MouseTypeContainer extends InteractiveContainer {\r\n    pointerDownHandler(event) {\r\n        if (!this.mouseIsOver) {\r\n            return;\r\n        }\r\n        switch (event.data.button) {\r\n            case 0:\r\n                this._mouseClickType = MouseClickType.LeftClick;\r\n                break;\r\n            case 1:\r\n                this._mouseClickType = MouseClickType.MiddleClick;\r\n                break;\r\n            case 2:\r\n                this._mouseClickType = MouseClickType.RightClick;\r\n                break;\r\n            default:\r\n                this._mouseClickType = MouseClickType.None;\r\n                return;\r\n        }\r\n        this._startPointerPosition = event.data.getLocalPosition(this.parent);\r\n    }\r\n    pointerMoveHandler(event) {\r\n        return;\r\n    }\r\n    pointerUpHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.None || this._mouseClickType == undefined) {\r\n            return;\r\n        }\r\n        else {\r\n            if (PointHelper.distanceSquared(event.data.getLocalPosition(this.parent), this._startPointerPosition) < 10) {\r\n                this.pointerUpClickHandler(event);\r\n            }\r\n            else {\r\n                this.pointerUpDragHandler(event);\r\n            }\r\n        }\r\n        this._mouseClickType = MouseClickType.None;\r\n        this._startPointerPosition = undefined;\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        return;\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        return;\r\n    }\r\n}\r\n//# sourceMappingURL=InteractiveContainer.js.map","export class PointHelper {\r\n    static distance(a, b) {\r\n        let x = a.x - b.x;\r\n        let y = a.y - b.y;\r\n        return Math.sqrt(x * x + y * y);\r\n    }\r\n    static distanceSquared(a, b) {\r\n        let x = a.x - b.x;\r\n        let y = a.y - b.y;\r\n        return x * x + y * y;\r\n    }\r\n}\r\n//# sourceMappingURL=PointHelper.js.map","export class ObjectPool {\r\n    constructor() {\r\n        this._availableObjects = [];\r\n    }\r\n    get objectCount() {\r\n        return this._availableObjects.length;\r\n    }\r\n    getObject() {\r\n        if (this._availableObjects.length > 0) {\r\n            return this._availableObjects.pop();\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    returnObject(instance) {\r\n        this._availableObjects.push(instance);\r\n    }\r\n}\r\n//# sourceMappingURL=ObjectPool.js.map","import * as React from \"react\";\r\nimport InputRange from \"react-input-range\";\r\nexport class Slider extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentValue: this.props.value\r\n        };\r\n    }\r\n    render() {\r\n        if (this.props.onRelease) {\r\n            return React.createElement(InputRange, { classNames: Slider.classNames, minValue: this.props.min, maxValue: this.props.max, step: this.props.step, value: this.state.currentValue, onChange: (value) => this.setState({ currentValue: value }), onChangeComplete: this.props.onChange });\r\n        }\r\n        else {\r\n            return React.createElement(InputRange, { classNames: Slider.classNames, minValue: this.props.min, maxValue: this.props.max, step: this.props.step, value: this.props.value, onChange: this.props.onChange });\r\n        }\r\n    }\r\n}\r\nSlider.classNames = {\r\n    activeTrack: \"sliderTrackActive\",\r\n    disabledInputRange: \"sliderDisabled\",\r\n    inputRange: \"slider\",\r\n    labelContainer: \"sliderLabelContainer\",\r\n    maxLabel: \"sliderMaxLabel\",\r\n    minLabel: \"sliderMinLabel\",\r\n    slider: \"sliderHandle\",\r\n    sliderContainer: \"sliderHandleContainer\",\r\n    track: \"sliderTrack\",\r\n    valueLabel: \"sliderValueLabel\"\r\n};\r\nexport class FileInput extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"input\", { className: this.props.className, type: \"file\", onChange: (event) => this.props.onChange(event.target.files), accept: this.props.accept });\r\n    }\r\n}\r\nexport class IconFileInput extends React.PureComponent {\r\n    handleClick() {\r\n        this._inputRef.click();\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", null,\r\n            React.createElement(\"button\", { className: this.props.className, title: this.props.title, onClick: this.handleClick.bind(this) },\r\n                React.createElement(\"i\", { className: this.props.iconName })),\r\n            React.createElement(\"input\", { style: { position: \"absolute\", zIndex: -1, opacity: 0 }, type: \"file\", ref: (ref) => { this._inputRef = ref; }, onChange: (event) => this.props.onChange(event.target.files), accept: this.props.accept }));\r\n    }\r\n}\r\nexport class LabelledCheckbox extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className, onClick: () => { this.props.onChange(!this.props.state); } },\r\n            React.createElement(\"p\", null, this.props.label),\r\n            React.createElement(\"input\", { type: \"checkbox\", name: this.props.label, checked: this.props.state, onChange: (event) => { this.props.onChange(event.target.checked); } }));\r\n    }\r\n}\r\nexport class FAButton extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"button\", { title: this.props.title, className: this.props.className, onClick: () => { this.props.onClick(); }, disabled: this.props.disabled },\r\n            React.createElement(\"i\", { className: this.props.iconName }));\r\n    }\r\n}\r\nexport class Dropdown extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dropdownVisible: false\r\n        };\r\n    }\r\n    _handleDropdownClick() {\r\n        this.setState({ dropdownVisible: !this.state.dropdownVisible });\r\n    }\r\n    render() {\r\n        const objDivClasses = \"dropdown\" + (this.props.optionsDivClassName == undefined ? \"\" : \" \" + this.props.optionsDivClassName);\r\n        return React.createElement(\"div\", null,\r\n            React.createElement(FAButton, { className: this.props.buttonClassName, title: this.props.title, iconName: this.props.iconName, onClick: () => { this._handleDropdownClick(); } }),\r\n            this.state.dropdownVisible && React.createElement(ClickOutsideWatcher, { callback: () => this.setState({ dropdownVisible: false }) },\r\n                React.createElement(\"div\", { className: objDivClasses }, this.props.optionTitles.map((title, index) => {\r\n                    return React.createElement(DropdownItem, { key: index, index: index, className: this.props.optionClassName, title: title, callback: (index) => { this._handleDropdownClick(); this.props.optionClickCallback(index); } });\r\n                }))));\r\n    }\r\n}\r\nexport class DropdownItem extends React.Component {\r\n    render() {\r\n        const className = \"dropdownItem buttonColorAnim\" + (this.props.className == undefined ? \"\" : \" \" + this.props.className);\r\n        return React.createElement(\"button\", { className: className, onClick: () => { this.props.callback(this.props.index); } }, this.props.title);\r\n    }\r\n}\r\nexport class BoxSelect extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this._selectOptionClicked = this._selectOptionClicked.bind(this);\r\n        this.state = {\r\n            selectVisible: false,\r\n        };\r\n        this._selectButton = React.createRef();\r\n    }\r\n    _selectOptionClicked(index) {\r\n        this.props.selectedCallback(index, this.props.options[index]);\r\n        this.setState({ selectVisible: false });\r\n    }\r\n    render() {\r\n        const buttonClassName = \"boxSelectButton\" + (this.props.selectButtonClassName ? \" \" + this.props.selectButtonClassName : \"\");\r\n        return React.createElement(\"div\", { className: this.props.className, style: { display: \"flex\", flexDirection: \"column\", alignItems: \"center\", position: \"relative\" } },\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"button\", { className: (this.props.mainButtonClassName ? this.props.mainButtonClassName : \"mainBoxSelectButton\"), title: this.props.title, ref: this._selectButton, onClick: () => { this.setState({ selectVisible: !this.state.selectVisible }); } }, this.props.selected !== undefined ? this.props.options[this.props.selected] : (this.props.boxSelectTitle ? this.props.boxSelectTitle : this.props.children))),\r\n            this.state.selectVisible && React.createElement(ClickOutsideWatcher, { className: \"boxSelectWatcher\", callback: () => { this.setState({ selectVisible: false }); } },\r\n                React.createElement(BoxSelectOverlay, { buttonClassName: buttonClassName, selectButton: this._selectButton, options: this.props.options, selectOptionClickedCallback: this._selectOptionClicked })));\r\n    }\r\n}\r\nclass BoxSelectOverlay extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            renderAbove: false,\r\n        };\r\n        this._overlayContainer = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        let bottom = this._overlayContainer.current.getBoundingClientRect().bottom;\r\n        if (bottom > window.innerHeight) {\r\n            this.setState({ renderAbove: true });\r\n        }\r\n    }\r\n    render() {\r\n        const overlayClassName = \"boxSelectOverlay\" + (this.props.className ? \" \" + this.props.className : \"\");\r\n        let options = this.props.options.map((value, index) => {\r\n            return React.createElement(\"button\", { className: this.props.buttonClassName, key: index, onClick: () => { this.props.selectOptionClickedCallback(index); } }, value);\r\n        });\r\n        let currentButton = this.props.selectButton.current;\r\n        if (!this.state.renderAbove) {\r\n            return React.createElement(\"div\", { className: \"boxSelectOverlayContainer\", ref: this._overlayContainer, style: { top: currentButton.offsetHeight + 1 } },\r\n                React.createElement(\"div\", { className: \"boxSelectOverlayArrow top\" }),\r\n                React.createElement(\"div\", { className: overlayClassName }, options));\r\n        }\r\n        else {\r\n            return React.createElement(\"div\", { className: \"boxSelectOverlayContainer\", ref: this._overlayContainer, style: { top: -this._overlayContainer.current.offsetHeight - 1 } },\r\n                React.createElement(\"div\", { className: overlayClassName }, options),\r\n                React.createElement(\"div\", { className: \"boxSelectOverlayArrow bottom\" }));\r\n        }\r\n    }\r\n}\r\nexport class SelectionGroup extends React.Component {\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className }, this.props.buttonContents.map((value, index) => {\r\n            let selected = false;\r\n            if (index === this.props.selectedButton) {\r\n                selected = true;\r\n            }\r\n            let title = undefined;\r\n            if (this.props.buttonTitles && this.props.buttonTitles.length > index) {\r\n                title = this.props.buttonTitles[index];\r\n            }\r\n            return React.createElement(SelectionButton, { key: index, title: title, className: this.props.buttonClassName, disabled: this.props.disabled, selected: selected, content: value, onClick: () => { this.props.onButtonClick(index); } });\r\n        }));\r\n    }\r\n}\r\nclass SelectionButton extends React.Component {\r\n    render() {\r\n        const classes = \"selectionButton\" + (this.props.selected ? \" selected\" : \"\") + (this.props.className != null ? \" \" + this.props.className : \"\");\r\n        return React.createElement(\"button\", { className: classes, title: this.props.title, onClick: () => { this.props.onClick(); }, disabled: this.props.disabled }, this.props.content);\r\n    }\r\n}\r\nexport class ClickOutsideWatcher extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._childRef = React.createRef();\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleClick(e) {\r\n        if (this._childRef && e.target instanceof Element && !this._childRef.current.contains(e.target)) {\r\n            this.props.callback();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        document.addEventListener(\"pointerdown\", this.handleClick);\r\n    }\r\n    componentWillUnmount() {\r\n        document.removeEventListener(\"pointerdown\", this.handleClick);\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className, ref: this._childRef },\r\n            this.props.children,\r\n            \" \");\r\n    }\r\n}\r\n//# sourceMappingURL=BasicElements.js.map","import * as React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ClickOutsideWatcher, FAButton } from \"./BasicElements\";\r\nconst modalRoot = document.getElementById(\"root\");\r\nexport class BackgroundModal extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this._modalRootChild = document.createElement(\"div\");\r\n        this._modalRootChild.className = \"fullScreen modal\";\r\n    }\r\n    componentDidMount() {\r\n        modalRoot.appendChild(this._modalRootChild);\r\n    }\r\n    componentWillUnmount() {\r\n        this._modalRootChild.className += \" hide\";\r\n        setTimeout(() => { modalRoot.removeChild(this._modalRootChild); }, 500);\r\n    }\r\n    render() {\r\n        if (this.props.outsideClick) {\r\n            return createPortal(React.createElement(ClickOutsideWatcher, { callback: this.props.outsideClick }, this.props.children), this._modalRootChild);\r\n        }\r\n        else {\r\n            return createPortal(this.props.children, this._modalRootChild);\r\n        }\r\n    }\r\n}\r\nfunction LoadingSpinner(props) {\r\n    return React.createElement(\"div\", { className: \"loadDetails\" },\r\n        React.createElement(\"p\", { className: \"loadTitle\" }, props.title),\r\n        React.createElement(\"div\", { className: \"sequencerSpinner\" },\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD5D\"),\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD5E\"),\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD5F\"),\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD60\")));\r\n}\r\nexport function LoadingSpinnerModal(props) {\r\n    return React.createElement(BackgroundModal, null,\r\n        React.createElement(LoadingSpinner, Object.assign({}, props)));\r\n}\r\nfunction ErrorBox(props) {\r\n    return React.createElement(\"div\", null,\r\n        React.createElement(FAButton, { className: \"errorModalClose buttonAnim\", iconName: \"fa fa-close\", onClick: props.onClose }),\r\n        React.createElement(\"div\", { className: \"errorModal\" },\r\n            React.createElement(\"div\", { className: \"errorModalTitle\" },\r\n                React.createElement(\"i\", { className: \"fa fa-exclamation-circle\" })),\r\n            React.createElement(\"p\", { className: \"errorModalContent\" }, props.error)));\r\n}\r\nexport class ErrorModal extends React.Component {\r\n    render() {\r\n        return React.createElement(BackgroundModal, null,\r\n            React.createElement(ErrorBox, Object.assign({}, this.props)));\r\n    }\r\n}\r\nexport class LoadingErrorModal extends React.Component {\r\n    render() {\r\n        return React.createElement(BackgroundModal, { outsideClick: (!this.props.loading ? this.props.onClose : undefined) }, this.props.loading ? React.createElement(LoadingSpinner, { title: this.props.title }) : React.createElement(ErrorBox, { error: this.props.title, onClose: this.props.onClose }));\r\n    }\r\n}\r\n//# sourceMappingURL=Modal.js.map","import * as React from \"react\";\r\nimport { BoxSelect } from \"../SharedReact/BasicElements\";\r\nimport { ErrorModal } from \"../SharedReact/Modal\";\r\nexport class MetadataEditBox extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            numerator: this.props.numerator.toString(),\r\n            denominator: this.props.denominator,\r\n            bpm: this.props.bpm.toString(),\r\n            modalShown: false, errorString: \"\"\r\n        };\r\n        this.handleNumeratorChange = this.handleNumeratorChange.bind(this);\r\n        this.handleNumeratorBlur = this.handleNumeratorBlur.bind(this);\r\n        this.handleDenominatorChange = this.handleDenominatorChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n    handleNumeratorChange(value) {\r\n        this.setState({ numerator: value });\r\n    }\r\n    handleNumeratorBlur(value) {\r\n        let newNumerator = parseInt(value, 10);\r\n        if (Number.isNaN(newNumerator) || newNumerator <= 0 || newNumerator > 32) {\r\n            this.setState({ numerator: this.props.numerator, modalShown: true, errorString: \"Invalid numerator value - please enter a number between 1 and 32.\" });\r\n        }\r\n        else {\r\n            this.setState({ numerator: newNumerator });\r\n        }\r\n    }\r\n    handleDenominatorChange(value) {\r\n        let intValue = parseInt(value, 10);\r\n        this.setState({ denominator: intValue });\r\n    }\r\n    handleBPMChange(value) {\r\n        this.setState({ bpm: value });\r\n    }\r\n    handleBPMBlur(value) {\r\n        let newBpm = parseInt(value, 10);\r\n        if (Number.isNaN(newBpm) || newBpm <= 0 || newBpm > 300) {\r\n            this.setState({ bpm: this.props.bpm, modalShown: true, errorString: \"Invalid BPM value - please enter a number between 1 and 300.\" });\r\n        }\r\n        else {\r\n            this.setState({ bpm: newBpm });\r\n        }\r\n    }\r\n    handleSubmit() {\r\n        if (!this.state.modalShown) {\r\n            let newNumerator = parseInt(this.state.numerator);\r\n            let newBpm = parseInt(this.state.bpm);\r\n            this.props.onSubmit(newNumerator, this.state.denominator, newBpm);\r\n        }\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"metadataDiv\" },\r\n            React.createElement(\"div\", { className: \"boxSelectOverlayArrow top\" }),\r\n            React.createElement(\"div\", { className: \"metadataInnerDiv\" },\r\n                React.createElement(\"div\", { className: \"metadataProperty\" },\r\n                    React.createElement(\"p\", null, \"Time Signature:\"),\r\n                    React.createElement(TimeSignatureEditBox, { numerator: this.state.numerator, onNumeratorBlur: (value) => { this.handleNumeratorBlur(value); }, onNumeratorChange: this.handleNumeratorChange, denominator: this.state.denominator, onDenominatorChange: this.handleDenominatorChange })),\r\n                React.createElement(\"div\", { className: \"metadataProperty\" },\r\n                    React.createElement(\"p\", null, \"BPM:\"),\r\n                    React.createElement(\"input\", { className: \"metadataBPM\", type: \"text\", size: 2, value: this.state.bpm, pattern: \"[0-9]*\", onBlur: (event) => { this.handleBPMBlur(event.target.value); }, onChange: (event) => { this.handleBPMChange(event.target.value); } })),\r\n                React.createElement(\"button\", { className: \"metadataSubmit\", onClick: this.handleSubmit }, \"Submit\")),\r\n            this.state.modalShown && React.createElement(ErrorModal, { error: this.state.errorString, onClose: () => this.setState({ modalShown: false }) }));\r\n    }\r\n}\r\nclass TimeSignatureEditBox extends React.Component {\r\n    render() {\r\n        var containerStyle = { display: \"inline-block\" };\r\n        return React.createElement(\"div\", { className: \"metadataTimeSignature\", style: containerStyle },\r\n            React.createElement(\"input\", { className: \"metadataNumerator\", type: \"text\", value: this.props.numerator, onBlur: (event) => { this.props.onNumeratorBlur(event.target.value); }, onChange: (event) => { this.props.onNumeratorChange(event.target.value); } }),\r\n            React.createElement(\"div\", { className: \"metadataDivider\" }),\r\n            React.createElement(BoxSelect, { mainButtonClassName: \"metadataDenominator buttonAnim\", boxSelectTitle: this.props.denominator.toString(), options: TimeSignatureEditBox.timeSignatureStrings, selectedCallback: (value) => { this.props.onDenominatorChange(TimeSignatureEditBox.timeSignatureNumbers[value]); } }));\r\n    }\r\n}\r\nTimeSignatureEditBox.timeSignatureStrings = [\"2\", \"4\", \"8\", \"16\", \"32\"];\r\nTimeSignatureEditBox.timeSignatureNumbers = [2, 4, 8, 16, 32];\r\n//# sourceMappingURL=MetadataEditBox.js.map","import * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer\";\r\nimport { MetadataEvent } from \"../../Model/Notation/SongEvents\";\r\nimport { MouseClickType } from \"../Settings/Enums\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme\";\r\nimport { MetadataEditBox } from \"./MetadataEditBox\";\r\nimport { ClickOutsideWatcher } from \"../SharedReact/BasicElements\";\r\nexport class MetadataTimelineEvent extends MouseTypeContainer {\r\n    constructor(timeline) {\r\n        super();\r\n        this.timeline = timeline;\r\n        this._eventEdited = this._eventEdited.bind(this);\r\n        this._unmountEditDiv = this._unmountEditDiv.bind(this);\r\n        this._graphics = new PIXI.Graphics();\r\n        this._graphics.beginFill(UIColors.metadataEventColor).drawRect(0, 0, 4, UIPositioning.timelineHeaderHeight).endFill();\r\n        this.addChild(this._graphics);\r\n        this._editDiv = document.createElement(\"div\");\r\n        this._editDiv.style.position = \"absolute\";\r\n        this._editDiv.style.top = UIPositioning.timelineHeaderHeight.toString() + \"px\";\r\n        this._editDivMounted = false;\r\n    }\r\n    get active() {\r\n        return this._active;\r\n    }\r\n    set active(value) {\r\n        this._active = value;\r\n        if (value) {\r\n            this.alpha = 1;\r\n        }\r\n        else {\r\n            this.alpha = 0.4;\r\n        }\r\n    }\r\n    initialise(quarterNotePosition, active) {\r\n        this.active = active;\r\n        let closestEvent = this.timeline.metadata.events[this.timeline.metadata.events.binarySearch(quarterNotePosition, true)];\r\n        if (active) {\r\n            this.event = closestEvent;\r\n            this.alpha = 1;\r\n        }\r\n        else {\r\n            this.event = new MetadataEvent(quarterNotePosition, closestEvent.bpm, closestEvent.timeSignature);\r\n        }\r\n    }\r\n    pointerOverHandler(event) {\r\n        super.pointerOverHandler(event);\r\n        if (!this.active) {\r\n            this.alpha = 0.7;\r\n        }\r\n    }\r\n    pointerOutHandler(event) {\r\n        super.pointerOutHandler(event);\r\n        if (!this.active) {\r\n            this.alpha = 0.4;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            if (!this.active) {\r\n                this.active = true;\r\n                this.event = this.timeline.metadata.addMetadataEvent(this.event.startPosition, this.event.bpm, this.event.timeSignature);\r\n            }\r\n            this._editDiv.style.left = (this.getGlobalPosition().x + 2).toString() + \"px\";\r\n            this._mountEditDiv();\r\n        }\r\n        else if (this.active && this._mouseClickType == MouseClickType.RightClick && this.event.startPosition != 0) {\r\n            this.active = false;\r\n            this.timeline.metadata.removeMetadataEvent(this.event.startPosition);\r\n            this._unmountEditDiv();\r\n            let oldStartPosition = this.event.startPosition;\r\n            let closestEvent = this.timeline.metadata.events[this.timeline.metadata.events.binarySearch(this.event.startPosition, true)];\r\n            this.event = new MetadataEvent(this.event.startPosition, closestEvent.bpm, closestEvent.timeSignature);\r\n            this.timeline.regenerateAroundPosition(this.timeline.metadata.positionQuarterNoteToBars(oldStartPosition));\r\n        }\r\n    }\r\n    setVisible(value) {\r\n        this.visible = value;\r\n        if (!value) {\r\n            this._unmountEditDiv();\r\n        }\r\n    }\r\n    destroy() {\r\n        this._unmountEditDiv();\r\n        this._editDiv = null;\r\n        super.destroy();\r\n    }\r\n    _eventEdited(timeSigNumerator, timeSigDenominator, bpm) {\r\n        this.event = this.timeline.metadata.addMetadataEvent(this.event.startPosition, bpm, [timeSigNumerator, timeSigDenominator]);\r\n        this._unmountEditDiv();\r\n        this.timeline.regenerateAroundPosition(this.timeline.metadata.positionQuarterNoteToBars(this.event.startPosition));\r\n    }\r\n    _mountEditDiv() {\r\n        if (!this._editDivMounted) {\r\n            document.getElementById(\"applicationContainer\").appendChild(this._editDiv);\r\n            this._editDivMounted = true;\r\n            render(React.createElement(ClickOutsideWatcher, { callback: this._unmountEditDiv },\r\n                React.createElement(MetadataEditBox, { numerator: this.event.timeSignature[0], denominator: this.event.timeSignature[1], bpm: this.event.bpm, onSubmit: this._eventEdited })), this._editDiv);\r\n        }\r\n    }\r\n    _unmountEditDiv() {\r\n        if (this._editDivMounted) {\r\n            unmountComponentAtNode(this._editDiv);\r\n            document.getElementById(\"applicationContainer\").removeChild(this._editDiv);\r\n            this._editDivMounted = false;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=MetadataTimelineEvent.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIFonts, UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { MetadataTimelineEvent } from \"./MetadataTimelineEvent.js\";\r\nexport class BarHeader extends PIXI.Container {\r\n    constructor(timeline) {\r\n        super();\r\n        this._headerText = new PIXI.Text(\"\", UIFonts.trackFont);\r\n        this._headerText.x = 15;\r\n        this._headerText.y = 11;\r\n        this._headerGraphics = new PIXI.Graphics();\r\n        this._metadataTimelineEvent = new MetadataTimelineEvent(timeline);\r\n        this.addChild(this._headerGraphics, this._headerText, this._metadataTimelineEvent);\r\n    }\r\n    initialise(x, width, barNumber, metadataEventPosition, metadataEventActive) {\r\n        this.setX(x);\r\n        this._headerGraphics.clear();\r\n        this._headerGraphics.beginFill(UIColors.bgColor)\r\n            .drawRect(1, 0, width, UIPositioning.timelineHeaderHeight)\r\n            .endFill()\r\n            .beginFill(UIColors.fgColor)\r\n            .drawRect(1, 0, 2, UIPositioning.timelineHeaderHeight)\r\n            .drawRect(1, UIPositioning.timelineHeaderHeight, width, 2)\r\n            .endFill();\r\n        this._headerText.text = (barNumber + 1).toString();\r\n        this._metadataTimelineEvent.initialise(metadataEventPosition, metadataEventActive);\r\n        return this;\r\n    }\r\n    setX(value) {\r\n        this.x = value;\r\n    }\r\n    setVisible(value) {\r\n        this.visible = value;\r\n        this._metadataTimelineEvent.setVisible(value);\r\n    }\r\n}\r\n//# sourceMappingURL=ScrollableBarHeader.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIColors } from \"../Settings/UITheme.js\";\r\nimport { BarHeader } from \"./ScrollableBarHeader.js\";\r\nexport class ScrollableBar extends PIXI.Container {\r\n    constructor(headerContainer, timeline) {\r\n        super();\r\n        this._graphics = new PIXI.Graphics();\r\n        this.addChild(this._graphics);\r\n        this._header = new BarHeader(timeline);\r\n        headerContainer.addChild(this._header);\r\n    }\r\n    get leftBound() {\r\n        return this.x;\r\n    }\r\n    get rightBound() {\r\n        return this.x + this.width;\r\n    }\r\n    get barNumber() {\r\n        return this._barNumber;\r\n    }\r\n    get numberOfBeats() {\r\n        return this._numberOfBeats;\r\n    }\r\n    get verticalScrollPosition() {\r\n        return this._verticalScrollPosition;\r\n    }\r\n    set verticalScrollPosition(value) {\r\n        this._verticalScrollPosition = value;\r\n        this._graphics.y = this._verticalScrollPosition;\r\n    }\r\n    resize(height) {\r\n        this._graphics.clear();\r\n        this._graphics.beginFill(UIColors.fgColor);\r\n        this._graphics.drawRect(1, 0, 2, height);\r\n        for (let i = 1; i < this._numberOfBeats + 1; i++) {\r\n            this._graphics.drawRect(this._beatWidth * i, 0, 1, height);\r\n        }\r\n        this._graphics.endFill();\r\n    }\r\n    setX(value) {\r\n        this.x = value;\r\n        this._header.setX(value);\r\n    }\r\n    initialise(x, height, barNumber, numberOfBeats, beatWidth, metadataEventPosition, metadataEventActive, leftSide = true) {\r\n        if (leftSide) {\r\n            this.x = x;\r\n        }\r\n        else {\r\n            this.x = x - beatWidth * numberOfBeats;\r\n        }\r\n        this._barNumber = barNumber;\r\n        this._numberOfBeats = numberOfBeats;\r\n        this._beatWidth = beatWidth;\r\n        this.resize(height);\r\n        this._header.initialise(this.x, numberOfBeats * this._beatWidth, this.barNumber, metadataEventPosition, metadataEventActive);\r\n        return this;\r\n    }\r\n    setVisible(value) {\r\n        this.visible = value;\r\n        this._header.visible = value;\r\n    }\r\n}\r\n//# sourceMappingURL=ScrollableBar.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIColors } from \"../Settings/UITheme.js\";\r\nexport class TimelineMarker extends PIXI.Graphics {\r\n    constructor() {\r\n        super();\r\n    }\r\n    redraw(x, y, width, height) {\r\n        this.clear();\r\n        this.beginFill(UIColors.timelineMarkerColor)\r\n            .drawPolygon([new PIXI.Point(x, y), new PIXI.Point(x - 4, y - 4), new PIXI.Point(x + width + 5, y - 4), new PIXI.Point(x + width, y)])\r\n            .drawRect(x, y, width, height)\r\n            .endFill();\r\n    }\r\n}\r\n//# sourceMappingURL=TimelineMarker.js.map","import { SimpleEvent } from \"../../HelperModules/SimpleEvent\";\r\nimport { EventSnapType, NoteLength } from \"./Enums\";\r\nexport class EditType {\r\n    constructor() {\r\n        this.snapType = EventSnapType.Beat;\r\n        this.noteLength = NoteLength.Quarter;\r\n        this._noteLengthDisabled = true;\r\n        this.noteLengthDisabledChange = new SimpleEvent();\r\n        this.markerCenteredChanged = new SimpleEvent();\r\n    }\r\n    get noteLengthDisabled() {\r\n        return this._noteLengthDisabled;\r\n    }\r\n    set noteLengthDisabled(value) {\r\n        this._noteLengthDisabled = value;\r\n        this.noteLengthDisabledChange.emit(value);\r\n    }\r\n    get markerCentered() {\r\n        return this._markerCentered;\r\n    }\r\n    set markerCentered(value) {\r\n        this._markerCentered = value;\r\n        this.markerCenteredChanged.emit(value);\r\n    }\r\n}\r\nexport const editType = new EditType();\r\n//# sourceMappingURL=EditType.js.map","import * as PIXI from \"pixi.js\";\r\nimport { ObjectPool } from \"../../HelperModules/ObjectPool.js\";\r\nimport { ScrollableBar } from \"./ScrollableBar.js\";\r\nimport { MouseClickType, TimelineMode, EventSnapType } from \"../Settings/Enums.js\";\r\nimport { TimelineMarker } from \"./TimelineMarker.js\";\r\nimport { UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nimport { editType } from \"../Settings/EditType.js\";\r\nexport class ScrollableTimeline extends MouseTypeContainer {\r\n    get dragType() {\r\n        return editType.snapType;\r\n    }\r\n    constructor(startX, endX, startY, endY, songManager) {\r\n        super();\r\n        this.timelineMode = TimelineMode.Edit;\r\n        this._zoomScale = 1;\r\n        this._verticalScrollPosition = 0;\r\n        this._mouseClickType = MouseClickType.None;\r\n        this._selected = [];\r\n        this.startX = startX;\r\n        this.startY = startY;\r\n        this.endX = endX;\r\n        this.endY = endY;\r\n        this.songManager = songManager;\r\n        this._onScreen = true;\r\n        this.timelineViewChange = new SimpleEvent();\r\n        this._scrollObjects = [];\r\n        this._barPool = new ObjectPool();\r\n        this._maskGraphics = new PIXI.Graphics();\r\n        this.mask = this._maskGraphics;\r\n        this._maskGraphics.beginFill(0xFFFFFF).drawRect(this.startX, this.startY, this.endX, this.endY).endFill();\r\n        this._interactivityRect = new PIXI.Graphics();\r\n        this.addChild(this._interactivityRect);\r\n        this.resizeInteractiveArea(endX, endY);\r\n        this._barContainer = new PIXI.Container();\r\n        this._headerContainer = new PIXI.Container();\r\n        this._metadataEventContainer = new PIXI.Container();\r\n        this._eventContainer = new PIXI.Container();\r\n        this._timelineMarker = new TimelineMarker();\r\n        this.addChild(this._barContainer, this._eventContainer, this._headerContainer, this._metadataEventContainer, this._timelineMarker);\r\n        this._timelineMarkerAnim = this._timelineMarkerAnim.bind(this);\r\n        this._playingStateChanged = this._playingStateChanged.bind(this);\r\n        this._repositionTimelineMarker = this._repositionTimelineMarker.bind(this);\r\n        this.songManager.playingChangedEvent.addListener(this._playingStateChanged);\r\n    }\r\n    get metadata() {\r\n        return this.songManager.metadata;\r\n    }\r\n    get beatWidth() {\r\n        return ScrollableTimeline.beatWidth * this._zoomScale;\r\n    }\r\n    resize(width, height) {\r\n        this.resizeInteractiveArea(width, height);\r\n        this._maskGraphics.clear().beginFill(0xFFFFFF).drawRect(this.startX, this.startY, width, height).endFill();\r\n        this.endX = Math.max(width, this.startX + 1);\r\n        this.endY = Math.max(height, this.startY + 1);\r\n        let barHeight = Math.max(this.contentHeight, this.endY);\r\n        for (let i = 0; i < this._barContainer.children.length; i++) {\r\n            let bar = this._barContainer.children[i];\r\n            bar.resize(barHeight);\r\n        }\r\n        let rightSideOffset = this.x + this._scrollObjects[this._scrollObjects.length - 1].rightBound - this.endX;\r\n        while (rightSideOffset < 100) {\r\n            let lastBar = this._scrollObjects[this._scrollObjects.length - 1];\r\n            let bar = this._initialiseScrollableBar(lastBar.rightBound, lastBar.barNumber + 1, true);\r\n            this._scrollObjects.push(bar);\r\n            rightSideOffset = this.x + this._scrollObjects[this._scrollObjects.length - 1].rightBound - this.endX;\r\n        }\r\n        while (rightSideOffset > 800 && this._scrollObjects.length > 1) {\r\n            let bar = this._scrollObjects.pop();\r\n            this._returnScrollableBar(bar);\r\n            rightSideOffset = this.x + this._scrollObjects[this._scrollObjects.length - 1].rightBound - this.endX;\r\n        }\r\n    }\r\n    resizeInteractiveArea(width, height) {\r\n        this._interactivityRect.clear();\r\n        this._interactivityRect.beginFill(0x000000, 1.0);\r\n        this._interactivityRect.drawRect(0, 0, width, height);\r\n        this._interactivityRect.endFill();\r\n        this._interactivityRect.alpha = 0.0;\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        if (this._mouseClickType == MouseClickType.None) {\r\n            return;\r\n        }\r\n        else if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.timelineViewChange.emit();\r\n        }\r\n        this._startPointerPosition = event.data.getLocalPosition(this.parent);\r\n        this._startXPosition = this.x;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.RightClick && this.timelineMode == TimelineMode.Edit) {\r\n        }\r\n        else if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            let moveDelta = event.data.getLocalPosition(this.parent).x - this._startPointerPosition.x;\r\n            this.x = this._startXPosition + moveDelta;\r\n            if (this._scrollObjects[0].barNumber === 0 && this.x + this._scrollObjects[0].leftBound > this.startX) {\r\n                this.x = -this._scrollObjects[0].leftBound + this.startX;\r\n            }\r\n            let anchor = this.x - this.endX;\r\n            let rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].rightBound;\r\n            while (rightSideOffset < 100) {\r\n                let lastBar = this._scrollObjects[this._scrollObjects.length - 1];\r\n                let bar = this._initialiseScrollableBar(lastBar.rightBound, lastBar.barNumber + 1, true);\r\n                this._scrollObjects.push(bar);\r\n                rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].rightBound;\r\n            }\r\n            rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].leftBound;\r\n            while (rightSideOffset > 800) {\r\n                let bar = this._scrollObjects.pop();\r\n                this._returnScrollableBar(bar);\r\n                rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].leftBound;\r\n            }\r\n            anchor = this.startX - this.x;\r\n            let leftSideOffset = anchor - this._scrollObjects[0].leftBound;\r\n            while (leftSideOffset < 100 && this._scrollObjects[0].barNumber != 0) {\r\n                let firstBar = this._scrollObjects[0];\r\n                let bar = this._initialiseScrollableBar(firstBar.leftBound, firstBar.barNumber - 1, false);\r\n                this._scrollObjects.splice(0, 0, bar);\r\n                leftSideOffset = anchor - this._scrollObjects[0].leftBound;\r\n            }\r\n            leftSideOffset = anchor - this._scrollObjects[0].rightBound;\r\n            while (leftSideOffset > 800) {\r\n                let bar = this._scrollObjects.splice(0, 1)[0];\r\n                this._returnScrollableBar(bar);\r\n                leftSideOffset = anchor - this._scrollObjects[0].rightBound;\r\n            }\r\n        }\r\n    }\r\n    pointerUpHandler(event) {\r\n        super.pointerUpHandler(event);\r\n        this._startXPosition = undefined;\r\n        this._startPointerPosition = undefined;\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.x = this._startXPosition;\r\n            if ((this.timelineMode == TimelineMode.Playback || this._startPointerPosition.y < UIPositioning.timelineHeaderHeight) && this._startPointerPosition.x > this.startX) {\r\n                let [barPosition, beatPosition, numberOfBeats] = this._getBarFromStageCoordinates(this._startPointerPosition.x);\r\n                barPosition += beatPosition / numberOfBeats;\r\n                this.songManager.quarterNotePosition = this.metadata.positionBarsToQuarterNote(barPosition);\r\n            }\r\n        }\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this._offsetChildren(-this.x);\r\n            this.x = 0;\r\n            if (editType.markerCentered) {\r\n                editType.markerCentered = false;\r\n            }\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        let stageX = event.clientX - canvasX;\r\n        let stageY = event.clientY - canvasY;\r\n        if (stageX < this.startX || stageX > this.endX || stageY < 0 || stageY > this.endY) {\r\n            return;\r\n        }\r\n        this.timelineViewChange.emit();\r\n        let [barPosition, beatPosition, numBeats] = this._getBarFromStageCoordinates(stageX);\r\n        barPosition += beatPosition / numBeats;\r\n        this._zoomScale = Math.max(0.5, Math.min(5.0, this._zoomScale - event.deltaY / 1000));\r\n        this._regenerateTimeline(this._scrollObjects[0].barNumber, Math.floor(barPosition));\r\n        let offset = this._getStageCoordinatesFromBar(barPosition) - stageX;\r\n        if (this._scrollObjects[0].barNumber === 0 && this._scrollObjects[0].leftBound - offset > this.startX) {\r\n            offset = this.startX - this._scrollObjects[0].leftBound;\r\n        }\r\n        this._offsetChildren(offset);\r\n    }\r\n    updateVerticalScroll(value) {\r\n        this._scrollObjects.forEach(bar => {\r\n            bar.verticalScrollPosition = value;\r\n        });\r\n        this._eventContainer.y = value;\r\n        this._verticalScrollPosition = value;\r\n    }\r\n    regenerateAroundPosition(barPosition) {\r\n        let startBarPosition = this._getStageCoordinatesFromBar(barPosition);\r\n        if (startBarPosition === -1) {\r\n            this._regenerateTimeline(Math.floor(barPosition));\r\n        }\r\n        else {\r\n            this._regenerateTimeline(this._scrollObjects[0].barNumber, Math.floor(barPosition));\r\n            let offset = this._getStageCoordinatesFromBar(barPosition) - startBarPosition;\r\n            if (this._scrollObjects[0].barNumber === 0 && this._scrollObjects[0].leftBound - offset > this.startX) {\r\n                offset = this.startX - this._scrollObjects[0].leftBound;\r\n            }\r\n            this._offsetChildren(offset);\r\n        }\r\n    }\r\n    addedHandler() {\r\n        this._onScreen = true;\r\n        this.regenerateAroundPosition(this._scrollObjects[0].barNumber);\r\n        this._playingStateChanged(this.songManager.playing);\r\n    }\r\n    removedHandler() {\r\n        this._onScreen = false;\r\n        this._playingStateChanged(false);\r\n        this._mouseClickType = MouseClickType.None;\r\n    }\r\n    destroy() {\r\n        this.songManager.playingChangedEvent.removeListener(this._playingStateChanged);\r\n        super.destroy({ children: true });\r\n    }\r\n    _getBarFromStageCoordinates(stageX) {\r\n        for (let i = 0; i < this._scrollObjects.length; i++) {\r\n            if (this._scrollObjects[i].leftBound <= stageX && this._scrollObjects[i].rightBound > stageX) {\r\n                return [this._scrollObjects[i].barNumber, ((stageX - this._scrollObjects[i].leftBound) / this.beatWidth), this._scrollObjects[i].numberOfBeats];\r\n            }\r\n        }\r\n    }\r\n    _getStageCoordinatesFromBar(barNumber) {\r\n        for (let i = 0; i < this._scrollObjects.length; i++) {\r\n            if (this._scrollObjects[i].barNumber === Math.floor(barNumber)) {\r\n                return this._scrollObjects[i].leftBound + ((barNumber % 1) * this._scrollObjects[i].numberOfBeats * this.beatWidth);\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    _offsetChildren(pixelOffset) {\r\n        this._scrollObjects.forEach(child => {\r\n            child.setX(child.x - pixelOffset);\r\n        });\r\n        for (let i = 0; i < this._eventContainer.children.length; i++) {\r\n            this._eventContainer.children[i].x -= pixelOffset;\r\n        }\r\n        for (let i = 0; i < this._metadataEventContainer.children.length; i++) {\r\n            this._metadataEventContainer.children[i].x -= pixelOffset;\r\n        }\r\n        this._checkBarsFillScreen();\r\n        this._repositionTimelineMarker(this.songManager.quarterNotePosition);\r\n    }\r\n    _regenerateTimeline(fromBar, toBar) {\r\n        let currentBar = fromBar;\r\n        while (this._scrollObjects.length > 0) {\r\n            this._returnScrollableBar(this._scrollObjects[0]);\r\n            this._scrollObjects.splice(0, 1);\r\n        }\r\n        let currentXPosition = this.startX;\r\n        let generatedABar = false;\r\n        while (currentXPosition < this.endX || !generatedABar) {\r\n            generatedABar = true;\r\n            let bar = this._initialiseScrollableBar(currentXPosition, currentBar, true);\r\n            this._scrollObjects.push(bar);\r\n            currentBar++;\r\n            currentXPosition = bar.rightBound;\r\n        }\r\n        if (toBar != undefined) {\r\n            while (currentBar <= toBar) {\r\n                let bar = this._initialiseScrollableBar(currentXPosition, currentBar, true);\r\n                this._scrollObjects.push(bar);\r\n                currentBar++;\r\n                currentXPosition = bar.rightBound;\r\n            }\r\n        }\r\n        if (this._eventContainer.children.length == 0) {\r\n            this._initialiseTrackTimelineEvents();\r\n        }\r\n        else {\r\n            for (let i = 0; i < this._eventContainer.children.length; i++) {\r\n                let event = this._eventContainer.children[i];\r\n                event.reinitialise();\r\n            }\r\n        }\r\n        this._redrawTimelineMarker();\r\n    }\r\n    _checkBarsFillScreen() {\r\n        while (this._scrollObjects[0].leftBound > this.startX && this._scrollObjects[0].barNumber != 0) {\r\n            let bar = this._initialiseScrollableBar(this._scrollObjects[0].leftBound, this._scrollObjects[0].barNumber - 1, false);\r\n            this._scrollObjects.splice(0, 0, bar);\r\n        }\r\n        while (this._scrollObjects[this._scrollObjects.length - 1].rightBound < this.endX) {\r\n            let bar = this._initialiseScrollableBar(this._scrollObjects[this._scrollObjects.length - 1].rightBound, this._scrollObjects[this._scrollObjects.length - 1].barNumber + 1, true);\r\n            this._scrollObjects.push(bar);\r\n        }\r\n    }\r\n    _scrollToPosition(barPosition) {\r\n        let barNumber = Math.floor(barPosition);\r\n        this._regenerateTimeline(barNumber);\r\n        let scrollAmount = this.metadata.getTimeSignature(barPosition)[0] * (barPosition % 1) * this.beatWidth;\r\n        this._offsetChildren(scrollAmount);\r\n    }\r\n    _initialiseScrollableBar(xPosition, barNumber, leftSide) {\r\n        let bar = null;\r\n        if (this._barPool.objectCount > 0) {\r\n            bar = this._barPool.getObject();\r\n            bar.setVisible(true);\r\n        }\r\n        else {\r\n            bar = new ScrollableBar(this._headerContainer, this);\r\n            this._barContainer.addChild(bar);\r\n        }\r\n        let quarterNotePosition = this.metadata.positionBarsToQuarterNote(barNumber);\r\n        let numberOfBeats = this.metadata.getTimeSignature(quarterNotePosition)[0];\r\n        let metadataEventActive = !(this.metadata.events.binarySearch(quarterNotePosition) == -1);\r\n        bar.initialise(xPosition, Math.max(this.contentHeight, this.endY), barNumber, numberOfBeats, this.beatWidth, quarterNotePosition, metadataEventActive, leftSide);\r\n        bar.verticalScrollPosition = this._verticalScrollPosition;\r\n        return bar;\r\n    }\r\n    _returnScrollableBar(instance) {\r\n        instance.setVisible(false);\r\n        this._barPool.returnObject(instance);\r\n    }\r\n    snapCoordinateToDragType(value) {\r\n        return value - this.getPixelOffsetFromDragType(value);\r\n    }\r\n    getPixelOffsetFromDragType(value) {\r\n        switch (this.dragType) {\r\n            case EventSnapType.Beat:\r\n                return (value % this.beatWidth);\r\n            case EventSnapType.HalfBeat:\r\n                return (value % (this.beatWidth / 2));\r\n            case EventSnapType.QuarterBeat:\r\n                return (value % (this.beatWidth / 4));\r\n            case EventSnapType.EighthBeat:\r\n                return (value % (this.beatWidth / 8));\r\n            case EventSnapType.None:\r\n                return 0;\r\n        }\r\n    }\r\n    snapBeatToDragType(value) {\r\n        switch (this.dragType) {\r\n            case EventSnapType.None:\r\n                break;\r\n            case EventSnapType.Beat:\r\n                value = value - (value % 1);\r\n                break;\r\n            case EventSnapType.HalfBeat:\r\n                value *= 2;\r\n                value = (value - (value % 1)) / 2;\r\n                break;\r\n            case EventSnapType.QuarterBeat:\r\n                value *= 4;\r\n                value = (value - (value % 1)) / 4;\r\n                break;\r\n            case EventSnapType.EighthBeat:\r\n                value *= 8;\r\n                value = (value - (value % 1)) / 8;\r\n                break;\r\n        }\r\n        return value;\r\n    }\r\n    getTimelineEventXWidth(startPosition, endPosition) {\r\n        let x = this.getTimelineEventX(startPosition);\r\n        let width = (this.metadata.positionQuarterNoteToBeats(endPosition) - this.metadata.positionQuarterNoteToBeats(startPosition)) * this.beatWidth;\r\n        return [x, width];\r\n    }\r\n    getTimelineEventX(position) {\r\n        return (this.metadata.positionQuarterNoteToBeats(position) - this.metadata.positionQuarterNoteToBeats(this.metadata.positionBarsToQuarterNote(this._scrollObjects[0].barNumber))) * this.beatWidth + this._scrollObjects[0].leftBound;\r\n    }\r\n    _playingStateChanged(value) {\r\n        if (value == true && this._onScreen) {\r\n            this.timelineMode = TimelineMode.Playback;\r\n            requestAnimationFrame(this._timelineMarkerAnim);\r\n        }\r\n        else {\r\n            this.timelineMode = TimelineMode.Edit;\r\n            if (!this.songManager.quarterNotePositionChangedEvent.hasListener(this._repositionTimelineMarker)) {\r\n                this.songManager.quarterNotePositionChangedEvent.addListener(this._repositionTimelineMarker);\r\n            }\r\n        }\r\n    }\r\n    _timelineMarkerAnim() {\r\n        this._repositionTimelineMarker(this.songManager.quarterNotePosition);\r\n        if (this.songManager.playing == true) {\r\n            try {\r\n                if (editType.markerCentered && (this._timelineMarker.x > this.endX || this._timelineMarker.x < this.startX)) {\r\n                    let barPosition = this.metadata.positionQuarterNoteToBars(this.songManager.quarterNotePosition);\r\n                    this._scrollToPosition(barPosition);\r\n                }\r\n                requestAnimationFrame(this._timelineMarkerAnim);\r\n            }\r\n            catch (e) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    _redrawTimelineMarker() {\r\n        this._timelineMarker.redraw(0, UIPositioning.timelineHeaderHeight, 2, this.endY);\r\n        this._repositionTimelineMarker(this.songManager.quarterNotePosition);\r\n    }\r\n    _repositionTimelineMarker(position) {\r\n        if (this._onScreen) {\r\n            this._timelineMarker.x = Math.round(this.getTimelineEventX(position));\r\n        }\r\n    }\r\n}\r\nScrollableTimeline.beatWidth = 50;\r\n//# sourceMappingURL=ScrollableTimeline.js.map","import * as PIXI from \"pixi.js\";\r\nimport { MouseTypeContainer } from \"../Shared/InteractiveContainer.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nexport class NoteGroupMarker extends PIXI.Container {\r\n    constructor(timeline) {\r\n        super();\r\n        this.timeline = timeline;\r\n        this.y = UIPositioning.timelineHeaderHeight - NoteGroupMarker.triangleSize;\r\n        this._leftHandle = new NoteGroupHandle();\r\n        this._rightHandle = new NoteGroupHandle();\r\n        this._graphics = new PIXI.Graphics();\r\n        this.addChild(this._graphics, this._leftHandle, this._rightHandle);\r\n    }\r\n    reinitialise(noteGroup, y) {\r\n        this.noteGroup = noteGroup;\r\n        if (y != undefined) {\r\n            this.y = y;\r\n        }\r\n        let [x, width] = this.timeline.getTimelineEventXWidth(this.noteGroup[0], this.noteGroup[1]);\r\n        this.x = x + 1;\r\n        this.redraw(width);\r\n    }\r\n    redraw(width) {\r\n        let triangleSize = NoteGroupMarker.triangleSize;\r\n        this._graphics.clear()\r\n            .beginFill(UIColors.trackEventColor)\r\n            .drawRect(0, triangleSize - NoteGroupMarker.lineHeight, width, NoteGroupMarker.lineHeight)\r\n            .moveTo(0, 0).lineTo(0, triangleSize).lineTo(triangleSize, triangleSize).lineTo(0, 0)\r\n            .moveTo(width, 0).lineTo(width, triangleSize).lineTo(width - triangleSize, triangleSize).lineTo(width, 0)\r\n            .endFill();\r\n    }\r\n}\r\nNoteGroupMarker.triangleSize = 10;\r\nNoteGroupMarker.lineHeight = 4;\r\nclass NoteGroupHandle extends MouseTypeContainer {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\n//# sourceMappingURL=NoteGroupMarker.js.map","export class MouseState {\r\n    constructor() {\r\n        this.buttons = 0;\r\n        document.addEventListener(\"pointerdown\", this._pointerDownHandler.bind(this));\r\n        document.addEventListener(\"pointerup\", this._pointerUpHandler.bind(this));\r\n    }\r\n    _pointerDownHandler() {\r\n        this.buttons = 1;\r\n    }\r\n    _pointerUpHandler() {\r\n        this.buttons = 0;\r\n    }\r\n}\r\nexport const mouseState = new MouseState();\r\n//# sourceMappingURL=MouseState.js.map","import * as PIXI from \"pixi.js\";\r\nimport { ScrollableTimeline } from \"../Shared/ScrollableTimeline.js\";\r\nimport { TimelineMode, MouseClickType, NoteLength } from \"../Settings/Enums.js\";\r\nimport { NoteTimelineEvent } from \"../Shared/TrackTimelineEvent.js\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { NoteGroupMarker } from \"./NoteGroupMarker.js\";\r\nimport { ObjectPool } from \"../../HelperModules/ObjectPool.js\";\r\nimport { editType } from \"../Settings/EditType.js\";\r\nimport { mouseState } from \"../Shared/MouseState.js\";\r\nexport class SequencerTimeline extends ScrollableTimeline {\r\n    get noteLength() {\r\n        return editType.noteLength;\r\n    }\r\n    constructor(startX, endX, endY, contentHeight, songManager, track, startFrom) {\r\n        super(startX, endX, 0, endY, songManager);\r\n        this.timelineMode = TimelineMode.Edit;\r\n        this.track = track;\r\n        this._contentHeight = contentHeight;\r\n        this._initialiseNoteGroups = this._initialiseNoteGroups.bind(this);\r\n        this.track.noteGroupsChanged.addListener(this._initialiseNoteGroups);\r\n        this._noteGroupContainer = new PIXI.Container();\r\n        this._noteGroupPool = new ObjectPool();\r\n        this._newEventGraphics = new PIXI.Graphics();\r\n        this.addChildAt(this._newEventGraphics, this.children.length - 3);\r\n        this.addChildAt(this._noteGroupContainer, this.children.length - 1);\r\n        this._regenerateTimeline(startFrom);\r\n    }\r\n    get contentHeight() {\r\n        return this._contentHeight;\r\n    }\r\n    get offsetContentHeight() {\r\n        return this.contentHeight - SequencerTimeline.noteHeight;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        this._newEventGraphics.visible = false;\r\n        super.pointerMoveHandler(event);\r\n        if (this.timelineMode == TimelineMode.Edit && mouseState.buttons === 0) {\r\n            this._newEventData = undefined;\r\n            let mousePos = event.data.getLocalPosition(this.parent);\r\n            if (mousePos.x < this.startX || mousePos.x > this.endX || mousePos.y < (this.startY + UIPositioning.timelineHeaderHeight) || mousePos.y > this.endY) {\r\n                return;\r\n            }\r\n            let y = mousePos.y - this._verticalScrollPosition;\r\n            y = y - (y % 20);\r\n            let noteString = NoteHelper.noteNumberToNoteString(Math.max(0, (this.offsetContentHeight - y) / SequencerTimeline.noteHeight));\r\n            let [barPosition, beatPosition, numBeats] = this._getBarFromStageCoordinates(mousePos.x);\r\n            beatPosition = this.snapBeatToDragType(beatPosition);\r\n            barPosition += beatPosition / numBeats;\r\n            let startPosition = this.metadata.positionBarsToQuarterNote(barPosition);\r\n            let length = SequencerTimeline.noteLengthDict[this.noteLength];\r\n            let noteData = { pitchString: noteString, startPosition: startPosition, duration: length };\r\n            let events = this.track.track.timeline.getEventsBetweenTimes(startPosition, startPosition + length);\r\n            for (let i = 0; i < events.length; i++) {\r\n                if (events[i].pitchString === noteData.pitchString) {\r\n                    return;\r\n                }\r\n            }\r\n            let x = this._getStageCoordinatesFromBar(barPosition);\r\n            y += this._verticalScrollPosition;\r\n            let width = (this.metadata.positionQuarterNoteToBeats(startPosition + length) - this.metadata.positionQuarterNoteToBeats(startPosition)) * this.beatWidth;\r\n            this._newEventGraphics.clear()\r\n                .beginFill(UIColors.trackEventColor)\r\n                .drawRect(x, y + 1, width, SequencerTimeline.noteHeight - 1)\r\n                .endFill()\r\n                .beginHole()\r\n                .drawRect(x + 2, y + 3, width - 4, SequencerTimeline.noteHeight - 5)\r\n                .endHole();\r\n            this._newEventData = noteData;\r\n            this._newEventGraphics.visible = true;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        super.pointerUpClickHandler(event);\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.timelineMode == TimelineMode.Edit && this._newEventData != undefined) {\r\n            let noteEvent = this.track.addEvent(this._newEventData.startPosition, this._newEventData.pitchString, this._newEventData.duration);\r\n            this._initialiseNoteGroups();\r\n            this._initialiseNote(noteEvent);\r\n            this._newEventData = undefined;\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        this._newEventGraphics.visible = false;\r\n        super.mouseWheelHandler(event, canvasX, canvasY);\r\n    }\r\n    addedHandler() {\r\n        super.addedHandler();\r\n        editType.noteLengthDisabled = false;\r\n    }\r\n    destroy() {\r\n        this.track.noteGroupsChanged.removeListener(this._initialiseNoteGroups);\r\n        super.destroy();\r\n    }\r\n    _regenerateTimeline(fromBar, toBar) {\r\n        super._regenerateTimeline(fromBar, toBar);\r\n        this._initialiseNoteGroups();\r\n    }\r\n    _offsetChildren(pixelOffset) {\r\n        super._offsetChildren(pixelOffset);\r\n        this._noteGroupContainer.children.forEach(child => {\r\n            child.x -= pixelOffset;\r\n        });\r\n    }\r\n    _initialiseTrackTimelineEvents() {\r\n        let notes = this.track.track.timeline.events;\r\n        notes.forEach(note => {\r\n            this._initialiseNote(note);\r\n        });\r\n    }\r\n    _initialiseNote(note) {\r\n        let y = this.offsetContentHeight - NoteHelper.noteStringToNoteNumber(note.pitchString) * SequencerTimeline.noteHeight;\r\n        let timelineEvent = new NoteTimelineEvent(this, this.track, note, y, SequencerTimeline.noteHeight - 1);\r\n        timelineEvent.borderHeight = 1;\r\n        this._eventContainer.addChild(timelineEvent);\r\n        return timelineEvent;\r\n    }\r\n    _initialiseNoteGroups() {\r\n        this._noteGroupContainer.children.forEach(noteGroupMarker => {\r\n            noteGroupMarker.visible = false;\r\n            this._noteGroupPool.returnObject(noteGroupMarker);\r\n        });\r\n        this.track.noteGroups.forEach(noteGroup => {\r\n            let marker = this._noteGroupPool.getObject();\r\n            if (marker == null) {\r\n                marker = new NoteGroupMarker(this);\r\n                this._noteGroupContainer.addChild(marker);\r\n            }\r\n            marker.visible = true;\r\n            marker.reinitialise(noteGroup);\r\n        });\r\n    }\r\n}\r\nSequencerTimeline.noteHeight = 20;\r\nSequencerTimeline.noteLengthDict = {\r\n    [NoteLength.Whole]: 4,\r\n    [NoteLength.Half]: 2,\r\n    [NoteLength.Quarter]: 1,\r\n    [NoteLength.Eighth]: 0.5,\r\n    [NoteLength.Sixteenth]: 0.25,\r\n    [NoteLength.ThirtySecond]: 0.125\r\n};\r\n//# sourceMappingURL=SequencerTimeline.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer.js\";\r\nimport { MouseClickType, TimelineMode } from \"../Settings/Enums.js\";\r\nimport { SequencerTimeline } from \"../Sequencer/SequencerTimeline.js\";\r\nexport class TrackTimelineEvent extends MouseTypeContainer {\r\n    constructor(timeline, track, x, width, y, height) {\r\n        super();\r\n        this.borderLeft = 1;\r\n        this.borderRight = 2;\r\n        this.borderHeight = 2;\r\n        this.paddingHeight = 2;\r\n        this.selectedBorderWidth = 3;\r\n        this._hovered = false;\r\n        this._opacity = 1;\r\n        this._hoveredColor = UIColors.trackEventHoveredColor;\r\n        this.timeline = timeline;\r\n        this.track = track;\r\n        this._contentGraphics = new PIXI.Graphics();\r\n        this._selectedGraphics = new PIXI.Graphics();\r\n        this._selectedGraphics.zIndex = 1;\r\n        this.addChild(this._contentGraphics, this._selectedGraphics);\r\n        this.x = x + this.borderLeft;\r\n        this.assignedWidth = Math.max(width - this.borderRight, 5);\r\n        this.assignedHeight = height - this.borderHeight;\r\n        this.y = y + this.borderHeight;\r\n    }\r\n    reinitialise(y, height) {\r\n        let [x, width] = this.timeline.getTimelineEventXWidth(this.eventStartPosition, this.eventStartPosition + this.eventDuration);\r\n        this.x = x + this.borderLeft;\r\n        this.assignedWidth = Math.max(width - this.borderRight, 5);\r\n        if (y != undefined) {\r\n            this.y = y;\r\n        }\r\n        if (height != undefined) {\r\n            this.assignedHeight = height;\r\n        }\r\n        this.redraw();\r\n    }\r\n    get leftBound() {\r\n        return this.x;\r\n    }\r\n    get rightBound() {\r\n        return this.x + this.width;\r\n    }\r\n    get hovered() {\r\n        return this._hovered;\r\n    }\r\n    set hovered(value) {\r\n        this._hovered = value;\r\n        this.redrawSelected();\r\n    }\r\n    get hoveredColor() {\r\n        return this._hoveredColor;\r\n    }\r\n    set hoveredColor(value) {\r\n        if (value == null) {\r\n            value = UIColors.trackEventHoveredColor;\r\n        }\r\n        this._hoveredColor = value;\r\n        this.redrawSelected();\r\n    }\r\n    get opacity() {\r\n        return this._opacity;\r\n    }\r\n    set opacity(value) {\r\n        if (value < 0 || value > 1) {\r\n            throw new RangeError(\"Opacity must be between 0 and 1.\");\r\n        }\r\n        this._opacity = value;\r\n        this.redraw();\r\n    }\r\n    destroy() {\r\n        super.destroy({ children: true });\r\n    }\r\n    redraw() {\r\n        this._contentGraphics.clear();\r\n        this._contentGraphics.beginFill(UIColors.trackEventColor, this._opacity)\r\n            .drawRect(0, 0, this.assignedWidth, this.assignedHeight)\r\n            .endFill();\r\n        this.redrawSelected();\r\n    }\r\n    redrawSelected() {\r\n        this._selectedGraphics.clear();\r\n        if (this.hovered) {\r\n            this._selectedGraphics.beginFill(this._hoveredColor, this.opacity)\r\n                .drawRect(0, 0, this.assignedWidth, this.assignedHeight)\r\n                .endFill()\r\n                .beginHole()\r\n                .drawRect(this.selectedBorderWidth, this.selectedBorderWidth, this.assignedWidth - this.selectedBorderWidth * 2, this.assignedHeight - this.selectedBorderWidth * 2)\r\n                .endHole();\r\n        }\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        if (this._mouseClickType == MouseClickType.None || !(this.timeline.timelineMode == TimelineMode.Edit)) {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.hoveredColor = UIColors.trackEventSelectedColor;\r\n        }\r\n        else if (this._mouseClickType == MouseClickType.RightClick) {\r\n            this.hoveredColor = UIColors.trackEventDeleteColor;\r\n        }\r\n        this._startXPosition = this.x;\r\n        this._startYPosition = this.y;\r\n        this._startPointerPosition = event.data.getLocalPosition(this.parent);\r\n        this._snappedStartPointerPosition = this._startPointerPosition.clone();\r\n        this._snappedStartPointerPosition.x = this.timeline.snapCoordinateToDragType(this._snappedStartPointerPosition.x);\r\n    }\r\n    pointerMoveHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.timeline.timelineMode == TimelineMode.Edit) {\r\n            event.stopPropagation();\r\n            let moveDelta = this.timeline.snapCoordinateToDragType(event.data.getLocalPosition(this.parent).x) - this._snappedStartPointerPosition.x;\r\n            let newEventStart = this.timeline.metadata.positionQuarterNoteToBeats(this.eventStartPosition) + (moveDelta / this.timeline.beatWidth);\r\n            if (newEventStart < 0) {\r\n                moveDelta -= newEventStart * this.timeline.beatWidth;\r\n            }\r\n            this.x = this._startXPosition + moveDelta;\r\n        }\r\n    }\r\n    pointerUpHandler(event) {\r\n        super.pointerUpHandler(event);\r\n        if (!this._destroyed) {\r\n            this.hoveredColor = UIColors.trackEventHoveredColor;\r\n            this._startXPosition = undefined;\r\n            this._startYPosition = undefined;\r\n            this._startPointerPosition = undefined;\r\n            this._snappedStartPointerPosition = undefined;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        event.stopPropagation();\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.x = this._startXPosition;\r\n            this.clickHandler();\r\n        }\r\n        else if (this.timeline.timelineMode == TimelineMode.Edit && this._mouseClickType == MouseClickType.RightClick) {\r\n            this.deleteEvent();\r\n        }\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        if (this.timeline.timelineMode == TimelineMode.Edit) {\r\n            if (this._mouseClickType == MouseClickType.LeftClick) {\r\n                let point = event.data.getLocalPosition(this.parent);\r\n                let moveX = this.timeline.snapCoordinateToDragType(point.x) - this._snappedStartPointerPosition.x;\r\n                let moveY = point.y - this._snappedStartPointerPosition.y;\r\n                let newEventStart = this.timeline.metadata.positionQuarterNoteToBeats(this.eventStartPosition) + (moveX / this.timeline.beatWidth);\r\n                if (newEventStart < 0) {\r\n                    moveX -= newEventStart * this.timeline.beatWidth;\r\n                }\r\n                let dragDistance = new PIXI.Point(moveX, moveY);\r\n                this.dragHandler(dragDistance);\r\n            }\r\n            else if (this._mouseClickType == MouseClickType.RightClick && this.mouseIsOver) {\r\n                this.deleteEvent();\r\n            }\r\n        }\r\n    }\r\n    pointerOverHandler(event) {\r\n        super.pointerOverHandler(event);\r\n        this._hovered = true;\r\n        this.redrawSelected();\r\n    }\r\n    pointerOutHandler(event) {\r\n        super.pointerOutHandler(event);\r\n        this._hovered = false;\r\n        this.redrawSelected();\r\n    }\r\n    deleteEvent() {\r\n        this.destroy();\r\n    }\r\n}\r\nexport class NoteGroupTimelineEvent extends TrackTimelineEvent {\r\n    constructor(timeline, track, noteGroup, clickCallback) {\r\n        let [x, width] = timeline.getTimelineEventXWidth(noteGroup[0], noteGroup[1]);\r\n        let y = track.startY;\r\n        let height = track.height;\r\n        super(timeline, track, x, width, y, height);\r\n        this._noteGroup = noteGroup;\r\n        this._clickCallback = clickCallback;\r\n        this.redraw();\r\n    }\r\n    get noteGroup() {\r\n        return this._noteGroup;\r\n    }\r\n    get eventStartPosition() {\r\n        return this._noteGroup[0];\r\n    }\r\n    get eventDuration() {\r\n        return this._noteGroup[1] - this._noteGroup[0];\r\n    }\r\n    redraw() {\r\n        super.redraw();\r\n        this._notes = this.track.track.timeline.getEventsBetweenTimes(this._noteGroup[0], this._noteGroup[1]);\r\n        this.setNotes(this._notes, this.track.track.highestPitch, this.track.track.lowestPitch, this._noteGroup);\r\n    }\r\n    setNotes(notes, highestNote, lowestNote, noteGroup) {\r\n        let noteRange = NoteHelper.distanceBetweenNotes(highestNote, lowestNote) + 1;\r\n        let metadata = this.timeline.metadata;\r\n        let start = metadata.positionQuarterNoteToBeats(noteGroup[0]);\r\n        let end = metadata.positionQuarterNoteToBeats(noteGroup[1]);\r\n        let noteHeight = (this.track.height - this.paddingHeight * 2) / noteRange;\r\n        let positionMap = position => {\r\n            return (metadata.positionQuarterNoteToBeats(position) - start) / (end - start);\r\n        };\r\n        this._contentGraphics.beginFill(UIColors.trackEventHighlightColor, this._opacity);\r\n        notes.forEach(note => {\r\n            let startX = positionMap(note.startPosition) * this.assignedWidth;\r\n            let endX = positionMap(note.endPosition) * this.assignedWidth;\r\n            this._contentGraphics.drawRect(startX, NoteHelper.distanceBetweenNotes(highestNote, note.pitchString) * noteHeight + this.paddingHeight + NoteGroupTimelineEvent.noteMarginHeight, endX - startX - 2, noteHeight - NoteGroupTimelineEvent.noteMarginHeight * 2);\r\n        });\r\n        this._contentGraphics.endFill();\r\n    }\r\n    dragHandler(dragDistance) {\r\n        let metadata = this.timeline.metadata;\r\n        let noteGroup = Object.assign([], this._noteGroup);\r\n        let beatChange = dragDistance.x / this.timeline.beatWidth;\r\n        noteGroup[0] = metadata.positionBeatsToQuarterNote(metadata.positionQuarterNoteToBeats(noteGroup[0]) + beatChange);\r\n        let quarterNoteChange = noteGroup[0] - this._noteGroup[0];\r\n        noteGroup[1] = noteGroup[1] + quarterNoteChange;\r\n        let groups = this.track.getNoteGroupsWithinTime(noteGroup[0], noteGroup[1]);\r\n        let timePeriodClear = true;\r\n        for (let i = 0; i < groups.length; i++) {\r\n            if (!(groups[i][0] == this._noteGroup[0] && groups[i][1] == this._noteGroup[1])) {\r\n                timePeriodClear = false;\r\n                break;\r\n            }\r\n        }\r\n        if (!timePeriodClear) {\r\n            this.x = this._startXPosition;\r\n        }\r\n        else {\r\n            this._notes.forEach(note => {\r\n                this.track.track.timeline.removeEvent(note);\r\n                note.startPosition = note.startPosition + quarterNoteChange;\r\n                this.track.track.timeline.addEvent(note);\r\n            });\r\n            this.track.removeNoteGroup(this._noteGroup[0]);\r\n            this.track.addNoteGroup(noteGroup[0], noteGroup[1]);\r\n            this._noteGroup = noteGroup;\r\n            this.reinitialise();\r\n        }\r\n    }\r\n    deleteEvent() {\r\n        this._notes.forEach(note => {\r\n            this.track.track.removeNote(note);\r\n        });\r\n        delete this._notes;\r\n        this.track.removeNoteGroup(this.noteGroup[0]);\r\n        super.deleteEvent();\r\n    }\r\n    clickHandler() {\r\n        this._clickCallback(this.track, this.eventStartPosition);\r\n    }\r\n}\r\nNoteGroupTimelineEvent.noteMarginHeight = 2;\r\nexport class OneShotTimelineEvent extends TrackTimelineEvent {\r\n    constructor(timeline, track, event) {\r\n        let [x, width] = timeline.getTimelineEventXWidth(event.startPosition, event.endPosition);\r\n        if (!track.displayActualWidth) {\r\n            width = 0;\r\n        }\r\n        super(timeline, track, x, width, track.startY, track.height);\r\n        this.event = event;\r\n        this._modelEventRemoved = this._modelEventRemoved.bind(this);\r\n        this.event.removed.addListener(this._modelEventRemoved);\r\n        this.redraw();\r\n    }\r\n    get eventStartPosition() {\r\n        return this.event.startPosition;\r\n    }\r\n    get eventDuration() {\r\n        if (this.track.displayActualWidth) {\r\n            return this.event.duration;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    destroy() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.destroy();\r\n    }\r\n    deleteEvent() {\r\n        this.track.track.timeline.removeEvent(this.event);\r\n        super.deleteEvent();\r\n    }\r\n    _modelEventRemoved() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.deleteEvent();\r\n    }\r\n    dragHandler(dragDistance) {\r\n        let beatChange = dragDistance.x / this.timeline.beatWidth;\r\n        let newStartPosition = this.timeline.metadata.positionBeatsToQuarterNote(this.timeline.metadata.positionQuarterNoteToBeats(this.event.startPosition) + beatChange);\r\n        let eventsInPeriod = this.track.track.timeline.getEventsBetweenTimes(newStartPosition, newStartPosition + this.event.duration);\r\n        let timePeriodClear = true;\r\n        for (let i = 0; i < eventsInPeriod.length; i++) {\r\n            if (eventsInPeriod[i] != this.event) {\r\n                timePeriodClear = false;\r\n                break;\r\n            }\r\n        }\r\n        if (!timePeriodClear) {\r\n            this.x = this._startXPosition;\r\n        }\r\n        else {\r\n            let eventIndex = this.track.track.timeline.getIndexOfEvent(this.event);\r\n            this.track.track.timeline.editEvent(eventIndex, newStartPosition);\r\n            this.reinitialise();\r\n        }\r\n    }\r\n    clickHandler() {\r\n    }\r\n}\r\nexport class NoteTimelineEvent extends TrackTimelineEvent {\r\n    constructor(timeline, track, event, y, height) {\r\n        let [x, width] = timeline.getTimelineEventXWidth(event.startPosition, event.endPosition);\r\n        super(timeline, track, x, width, y, height);\r\n        this.event = event;\r\n        this._modelEventRemoved = this._modelEventRemoved.bind(this);\r\n        this.event.removed.addListener(this._modelEventRemoved);\r\n        this.redraw();\r\n    }\r\n    get eventStartPosition() {\r\n        return this.event.startPosition;\r\n    }\r\n    get eventDuration() {\r\n        return this.event.duration;\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        this._snappedStartPointerPosition.y = this._snappedStartPointerPosition.y - (this._snappedStartPointerPosition.y % SequencerTimeline.noteHeight) + SequencerTimeline.noteHeight;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        super.pointerMoveHandler(event);\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            let moveDelta = event.data.getLocalPosition(this.parent).y - this._snappedStartPointerPosition.y;\r\n            let oldNoteNumber = NoteHelper.noteStringToNoteNumber(this.event.pitchString);\r\n            let noteYPosition = Math.min(this.timeline.offsetContentHeight - UIPositioning.timelineHeaderHeight, Math.max(0, oldNoteNumber * SequencerTimeline.noteHeight - moveDelta));\r\n            this._lastNoteNumber = Math.floor(noteYPosition / SequencerTimeline.noteHeight);\r\n            this.y = this._startYPosition - (this._lastNoteNumber - oldNoteNumber) * SequencerTimeline.noteHeight;\r\n        }\r\n    }\r\n    destroy() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.destroy();\r\n    }\r\n    deleteEvent() {\r\n        this.track.removeEvent(this.event);\r\n        super.deleteEvent();\r\n    }\r\n    _modelEventRemoved() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.deleteEvent();\r\n    }\r\n    dragHandler(dragDistance) {\r\n        let beatChange = dragDistance.x / this.timeline.beatWidth;\r\n        let newNotePitch = NoteHelper.noteNumberToNoteString(this._lastNoteNumber);\r\n        let newStartPosition = this.timeline.metadata.positionBeatsToQuarterNote(this.timeline.metadata.positionQuarterNoteToBeats(this.event.startPosition) + beatChange);\r\n        let eventsInPeriod = this.track.track.timeline.getEventsBetweenTimes(newStartPosition, newStartPosition + this.event.duration);\r\n        let timePeriodClear = true;\r\n        for (let i = 0; i < eventsInPeriod.length; i++) {\r\n            if (eventsInPeriod[i] != this.event && eventsInPeriod[i].pitchString == newNotePitch) {\r\n                timePeriodClear = false;\r\n                break;\r\n            }\r\n        }\r\n        if (!timePeriodClear) {\r\n            this.x = this._startXPosition;\r\n            this.y = this._startYPosition;\r\n        }\r\n        else {\r\n            this.track.editEvent(this.event, newStartPosition, newNotePitch);\r\n            this.reinitialise();\r\n        }\r\n    }\r\n    clickHandler() {\r\n    }\r\n}\r\n//# sourceMappingURL=TrackTimelineEvent.js.map","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","import * as Redux from \"redux\";\r\nimport { UIPositioning } from \"../Settings/UITheme\";\r\nconst ADD_TRACK = \"ADD_TRACK\";\r\nconst REMOVE_TRACK = \"REMOVE_TRACK\";\r\nconst SET_TRACKS = \"SET_TRACKS\";\r\nconst EDIT_ATTRIBUTE = \"EDIT_ATTRIBUTE\";\r\nconst initialState = {\r\n    tracks: []\r\n};\r\nfunction UITrackReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case ADD_TRACK:\r\n            return {\r\n                tracks: [...state.tracks, action.track]\r\n            };\r\n        case REMOVE_TRACK:\r\n            let newTracks = state.tracks.filter((t, index) => index != action.index);\r\n            if (newTracks.length > 0) {\r\n                newTracks[0].startY = UIPositioning.timelineHeaderHeight;\r\n                for (let i = 1; i < newTracks.length; i++) {\r\n                    newTracks[i].startY = newTracks[i - 1].startY + newTracks[i - 1].height;\r\n                }\r\n            }\r\n            return { tracks: newTracks };\r\n        case SET_TRACKS:\r\n            return { tracks: action.tracks };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport const UITrackStore = Redux.createStore(UITrackReducer);\r\n//# sourceMappingURL=UITrackStore.js.map","import * as PIXI from \"pixi.js\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack.js\";\r\nimport { NoteGroupTimelineEvent, OneShotTimelineEvent } from \"../Shared/TrackTimelineEvent.js\";\r\nimport { UIColors } from \"../Settings/UITheme.js\";\r\nimport { ScrollableTimeline } from \"../Shared/ScrollableTimeline.js\";\r\nimport { TimelineMode, MouseClickType } from \"../Settings/Enums.js\";\r\nimport { editType } from \"../Settings/EditType.js\";\r\nimport { UITrackStore } from \"../ReactUI/UITrackStore.js\";\r\nimport { mouseState } from \"../Shared/MouseState.js\";\r\nexport class SongTimeline extends ScrollableTimeline {\r\n    constructor(startX, endX, endY, songManager, showSequencerCallback) {\r\n        super(startX, endX, 0, endY, songManager);\r\n        this.songManager = songManager;\r\n        this._noteGroupTimelineEvents = [];\r\n        this._showSequencerCallback = showSequencerCallback;\r\n        this._newEventGraphics = new PIXI.Graphics();\r\n        this.addChildAt(this._newEventGraphics, this.children.length - 3);\r\n        this._regenerateTimeline(0);\r\n        this._UITrackUpdateHandler = this._UITrackUpdateHandler.bind(this);\r\n        this._cleanupListener = UITrackStore.subscribe(this._UITrackUpdateHandler);\r\n    }\r\n    get contentHeight() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length == 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return tracks[tracks.length - 1].startY + tracks[tracks.length - 1].height;\r\n        }\r\n    }\r\n    destroy() {\r\n        this._cleanupListener();\r\n        super.destroy();\r\n    }\r\n    pointerMoveHandler(event) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this._newEventGraphics.visible = false;\r\n        super.pointerMoveHandler(event);\r\n        if (this.timelineMode == TimelineMode.Edit && mouseState.buttons === 0) {\r\n            this._newEventData = undefined;\r\n            let mousePos = event.data.getLocalPosition(this.parent);\r\n            mousePos.y -= this._newEventGraphics.y;\r\n            for (let i = 0; i < tracks.length; i++) {\r\n                if (tracks[i].startY + this._verticalScrollPosition < mousePos.y && tracks[i].startY + tracks[i].height + this._verticalScrollPosition > mousePos.y) {\r\n                    let track = tracks[i];\r\n                    if (mousePos.x < this.startX || mousePos.x > this.endX) {\r\n                        return;\r\n                    }\r\n                    let [barPosition, beatPosition, numBeats] = this._getBarFromStageCoordinates(mousePos.x);\r\n                    beatPosition = this.snapBeatToDragType(beatPosition);\r\n                    barPosition += beatPosition / numBeats;\r\n                    let startPosition = this.metadata.positionBarsToQuarterNote(barPosition);\r\n                    let endPosition = startPosition;\r\n                    let x = this._getStageCoordinatesFromBar(barPosition);\r\n                    let y = track.startY + this._verticalScrollPosition;\r\n                    let width = 0;\r\n                    let height = track.height;\r\n                    if (track instanceof NoteUITrack) {\r\n                        endPosition = startPosition + 4;\r\n                        if (track.getNoteGroupsWithinTime(startPosition, endPosition).length > 0) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    else if (track instanceof SoundFileUITrack) {\r\n                        endPosition = startPosition + track.eventDuration;\r\n                        let existingEvents = track.getOneShotsBetweenTime(startPosition, endPosition);\r\n                        if (!track.track.allowOverlaps && existingEvents.length > 0) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            if (existingEvents.length == 1 && existingEvents[0].startPosition == startPosition && existingEvents[0].endPosition == endPosition) {\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    width = (this.metadata.positionQuarterNoteToBeats(endPosition) - this.metadata.positionQuarterNoteToBeats(startPosition)) * this.beatWidth;\r\n                    width = Math.max(width, 5);\r\n                    this._newEventGraphics.clear();\r\n                    this._newEventGraphics.beginFill(UIColors.trackEventColor)\r\n                        .drawRect(x, y + 2, width, height - 2)\r\n                        .endFill()\r\n                        .beginHole()\r\n                        .drawRect(x + 2, y + 4, width - 4, height - 6)\r\n                        .endHole();\r\n                    this._newEventGraphics.visible = true;\r\n                    this._newEventData = { track: track, startPosition: startPosition };\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._newEventGraphics.visible = false;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        super.pointerUpClickHandler(event);\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.timelineMode == TimelineMode.Edit && this._newEventData != undefined) {\r\n            let track = this._newEventData.track;\r\n            let startPosition = this._newEventData.startPosition;\r\n            if (track instanceof NoteUITrack) {\r\n                track.addNoteGroup(startPosition, startPosition + 4);\r\n                this._initialiseNoteGroup([startPosition, startPosition + 4], track);\r\n            }\r\n            else if (track instanceof SoundFileUITrack) {\r\n                let event = track.track.addOneShot(startPosition);\r\n                this._initialiseOneShotTimelineEvent(event, track);\r\n            }\r\n            this._newEventData = undefined;\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        this._newEventGraphics.visible = false;\r\n        super.mouseWheelHandler(event, canvasX, canvasY);\r\n    }\r\n    regenerateTracks() {\r\n        while (this._eventContainer.children[0]) {\r\n            let timelineEvent = this._eventContainer.children[0];\r\n            timelineEvent.destroy();\r\n        }\r\n        this._noteGroupTimelineEvents = [];\r\n        this._initialiseTrackTimelineEvents();\r\n    }\r\n    reinitialiseTrack(track) {\r\n        for (let i = 0; i < this._eventContainer.children.length; i++) {\r\n            let timelineEvent = this._eventContainer.children[i];\r\n            if (timelineEvent.track === track) {\r\n                timelineEvent.reinitialise();\r\n            }\r\n        }\r\n    }\r\n    regenerateNoteGroups() {\r\n        this._noteGroupTimelineEvents.forEach(timelineEvent => {\r\n            timelineEvent.destroy();\r\n        });\r\n        this._noteGroupTimelineEvents = [];\r\n        UITrackStore.getState().tracks.forEach(track => {\r\n            if (track instanceof NoteUITrack) {\r\n                track.noteGroups.forEach(noteGroup => {\r\n                    this._initialiseNoteGroup(noteGroup, track);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    addedHandler() {\r\n        this.regenerateNoteGroups();\r\n        editType.noteLengthDisabled = true;\r\n        super.addedHandler();\r\n    }\r\n    _initialiseTrackTimelineEvents() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        for (let i = 0; i < tracks.length; i++) {\r\n            let track = tracks[i];\r\n            if (track instanceof NoteUITrack) {\r\n                track.noteGroups.forEach(group => {\r\n                    this._initialiseNoteGroup(group, track);\r\n                });\r\n            }\r\n            else if (track instanceof SoundFileUITrack) {\r\n                track.track.timeline.events.forEach(event => {\r\n                    this._initialiseOneShotTimelineEvent(event, track);\r\n                });\r\n            }\r\n        }\r\n        ;\r\n    }\r\n    _initialiseNoteGroup(noteGroup, track) {\r\n        let event = new NoteGroupTimelineEvent(this, track, noteGroup, this._showSequencerCallback);\r\n        this._eventContainer.addChild(event);\r\n        this._noteGroupTimelineEvents.push(event);\r\n        return event;\r\n    }\r\n    _initialiseOneShotTimelineEvent(event, track) {\r\n        let timelineEvent = new OneShotTimelineEvent(this, track, event);\r\n        this._eventContainer.addChild(timelineEvent);\r\n        return timelineEvent;\r\n    }\r\n    _UITrackUpdateHandler() {\r\n        let barHeight = Math.max(this.contentHeight, this.endY);\r\n        for (let i = 0; i < this._barContainer.children.length; i++) {\r\n            let bar = this._barContainer.children[i];\r\n            bar.resize(barHeight);\r\n        }\r\n        this.regenerateTracks();\r\n    }\r\n}\r\n//# sourceMappingURL=SongTimeline.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { BoxSelect, ClickOutsideWatcher, FAButton, IconFileInput, LabelledCheckbox, Slider } from \"../SharedReact/BasicElements.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nimport { UITrackStore } from \"../ReactUI/UITrackStore.js\";\r\nimport { LoadingErrorModal } from \"../SharedReact/Modal.js\";\r\nconst modalRoot = document.getElementById(\"root\");\r\nexport class TrackList extends PIXI.Container {\r\n    constructor(sidebarWidth, width, height, songManager) {\r\n        super();\r\n        this._verticalScroll = 0;\r\n        this.songManager = songManager;\r\n        this._sidebarWidth = sidebarWidth;\r\n        this.trackEdited = new SimpleEvent();\r\n        this._gainChanged = this._gainChanged.bind(this);\r\n        this._nameChanged = this._nameChanged.bind(this);\r\n        this._soundFileChanged = this._soundFileChanged.bind(this);\r\n        this._allowOverlapChanged = this._allowOverlapChanged.bind(this);\r\n        this._displayActualWidthChanged = this._displayActualWidthChanged.bind(this);\r\n        this._updateSoundFile = this._updateSoundFile.bind(this);\r\n        this._deleteTrack = this._deleteTrack.bind(this);\r\n        this._connectionChanged = this._connectionChanged.bind(this);\r\n        this.drawTracks = this.drawTracks.bind(this);\r\n        this._envelopeEnabledChanged = this._envelopeEnabledChanged.bind(this);\r\n        this._envelopeAttackChanged = this._envelopeAttackChanged.bind(this);\r\n        this._envelopeReleaseChanged = this._envelopeReleaseChanged.bind(this);\r\n        this._oscillatorTypeChanged = this._oscillatorTypeChanged.bind(this);\r\n        this._trackListGraphics = new PIXI.Graphics();\r\n        this._trackLineGraphics = new PIXI.Graphics();\r\n        this.addChild(this._trackListGraphics, this._trackLineGraphics);\r\n        this._trackSettingsContainer = document.createElement(\"div\");\r\n        this._trackSettingsContainer.style.position = \"absolute\";\r\n        this._trackSettingsContainer.style.width = this._sidebarWidth.toString() + \"px\";\r\n        this._trackSettingsContainer.style.overflow = \"hidden\";\r\n        document.getElementById(\"applicationContainer\").appendChild(this._trackSettingsContainer);\r\n        this.resize(width, height);\r\n        this._cleanupListener = UITrackStore.subscribe(this.drawTracks);\r\n    }\r\n    resize(width, height) {\r\n        this.endX = width;\r\n        this.endY = height;\r\n        this._trackListGraphics.clear().beginFill(UIColors.bgColor)\r\n            .drawRect(0, 0, this._sidebarWidth, this.endY)\r\n            .endFill();\r\n        this._trackListGraphics.beginFill(UIColors.fgColor)\r\n            .drawRect(this._sidebarWidth - 2, 0, 3, this.endY)\r\n            .drawRect(0, UIPositioning.timelineHeaderHeight, this._sidebarWidth, 2)\r\n            .endFill();\r\n        this.drawTracks();\r\n    }\r\n    updateVerticalScroll(value) {\r\n        this._trackLineGraphics.y = value;\r\n        this._verticalScroll = value;\r\n        this._rerenderList();\r\n    }\r\n    destroy() {\r\n        unmountComponentAtNode(this._trackSettingsContainer);\r\n        this._cleanupListener();\r\n        super.destroy({ children: true });\r\n    }\r\n    addedHandler() {\r\n        this._trackSettingsContainer.style.removeProperty(\"display\");\r\n    }\r\n    removedHandler() {\r\n        this._trackSettingsContainer.style.display = \"none\";\r\n    }\r\n    drawTracks() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this._trackLineGraphics.clear();\r\n        if (tracks.length > 0) {\r\n            this._trackLineGraphics.beginFill(UIColors.fgColor);\r\n            tracks.forEach(track => {\r\n                this._trackLineGraphics.drawRect(0, track.startY + track.height, this.endX, 2);\r\n            });\r\n            this._trackLineGraphics.endFill();\r\n            this._trackLineGraphics.mask = new PIXI.Graphics().beginFill(0xFFFFFF).drawRect(0, UIPositioning.timelineHeaderHeight, this.endX, this.endY).endFill();\r\n            this._trackSettingsContainer.style.top = tracks[0].startY.toString() + \"px\";\r\n            this._trackSettingsContainer.style.height = (this.endY - tracks[0].startY).toString() + \"px\";\r\n            this._rerenderList();\r\n        }\r\n        else {\r\n            unmountComponentAtNode(this._trackSettingsContainer);\r\n        }\r\n    }\r\n    _nameChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        tracks[index].name = value;\r\n        this._rerenderList();\r\n    }\r\n    _gainChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        tracks[index].track.audioSource.masterGain = value;\r\n        this._rerenderList();\r\n    }\r\n    _soundFileChanged(index, files) {\r\n        let modalDiv = document.createElement(\"div\");\r\n        modalRoot.appendChild(modalDiv);\r\n        render(React.createElement(LoadingErrorModal, { loading: true, title: \"Loading Sound File...\", onClose: () => { unmountComponentAtNode(modalDiv); } }), modalDiv);\r\n        let file = files[0];\r\n        const objecturl = URL.createObjectURL(file);\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', objecturl, true);\r\n        xhr.responseType = 'blob';\r\n        let onloadFunc = this._updateSoundFile;\r\n        xhr.onload = function (e) {\r\n            if (this.status == 200) {\r\n                onloadFunc(index, this.response);\r\n                unmountComponentAtNode(modalDiv);\r\n                modalRoot.removeChild(modalDiv);\r\n            }\r\n            else {\r\n                render(React.createElement(LoadingErrorModal, { loading: false, title: \"Unknown error. Please try again.\", onClose: () => { unmountComponentAtNode(modalDiv); modalRoot.removeChild(modalDiv); } }), modalDiv);\r\n            }\r\n        };\r\n        xhr.send();\r\n    }\r\n    _updateSoundFile(index, blob) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let tracks = UITrackStore.getState().tracks;\r\n            let soundFileTrack = tracks[index].track;\r\n            yield soundFileTrack.setSoundFile(blob);\r\n            this.trackEdited.emit(index);\r\n        });\r\n    }\r\n    _allowOverlapChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        let soundFileTrack = tracks[index].track;\r\n        soundFileTrack.allowOverlaps = value;\r\n        this._rerenderList();\r\n    }\r\n    _displayActualWidthChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        let soundFileTrack = tracks[index];\r\n        soundFileTrack.displayActualWidth = value;\r\n        this.trackEdited.emit(index);\r\n        this._rerenderList();\r\n    }\r\n    _connectionChanged(index, connectionIndex) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        tracks[index].track.connectTo(tracks[index].track.possibleConnections[connectionIndex]);\r\n        this._rerenderList();\r\n    }\r\n    _deleteTrack(index) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this.songManager.removeTrack(tracks[index].track);\r\n        UITrackStore.dispatch({ type: \"REMOVE_TRACK\", index: index });\r\n    }\r\n    _oscillatorTypeChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            track.track.audioSource.oscillatorType = value.toLowerCase();\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _envelopeEnabledChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            track.track.audioSource.envelopeEnabled = value;\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _envelopeAttackChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            value = Math.max(0, Math.min(4, value));\r\n            track.track.audioSource.envelope.attack = value;\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _envelopeReleaseChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            value = Math.max(0, Math.min(4, value));\r\n            track.track.audioSource.envelope.release = value;\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _rerenderList() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length > 0) {\r\n            render(React.createElement(TrackSettingsList, { tracks: tracks, possibleConnections: this.songManager.connectionManager.possibleConnectionStrings, onNameChange: this._nameChanged, onGainChange: this._gainChanged, onSoundFileUpdate: this._soundFileChanged, onAllowOverlapChange: this._allowOverlapChanged, onDisplayActualWidthChange: this._displayActualWidthChanged, onDeleteTrack: this._deleteTrack, onConnectionChanged: this._connectionChanged, width: this._sidebarWidth, verticalScroll: this._verticalScroll, onOscillatorTypeChanged: this._oscillatorTypeChanged, onEnvelopeEnabledChanged: this._envelopeEnabledChanged, onEnvelopeAttackChanged: this._envelopeAttackChanged, onEnvelopeReleaseChanged: this._envelopeReleaseChanged }), this._trackSettingsContainer);\r\n        }\r\n    }\r\n}\r\nclass TrackSettingsList extends React.Component {\r\n    render() {\r\n        return (React.createElement(\"div\", { style: { position: \"absolute\", top: this.props.verticalScroll.toString() + \"px\" } }, this.props.tracks.map((track, index) => {\r\n            if (track instanceof SoundFileUITrack) {\r\n                return React.createElement(SoundFileTrackSettingsBox, { key: index, index: index, name: track.name, onNameChange: this.props.onNameChange, gain: track.track.audioSource.masterGain, onGainChange: this.props.onGainChange, deleteTrack: this.props.onDeleteTrack, width: this.props.width, height: track.height, soundFileChange: this.props.onSoundFileUpdate, displayActualWidth: track.displayActualWidth, displayActualWidthChange: this.props.onDisplayActualWidthChange, allowOverlap: track.track.allowOverlaps, allowOverlapChange: this.props.onAllowOverlapChange, connection: track.track.connection, connectionOptions: this.props.possibleConnections, connectionChanged: this.props.onConnectionChanged });\r\n            }\r\n            else if (track instanceof NoteUITrack) {\r\n                let instrument = track.track.audioSource;\r\n                let oscillatorProps = {\r\n                    enabled: instrument.envelopeEnabled,\r\n                    enabledChanged: this.props.onEnvelopeEnabledChanged,\r\n                    attack: instrument.envelope.attack,\r\n                    attackChanged: this.props.onEnvelopeAttackChanged,\r\n                    release: instrument.envelope.release,\r\n                    releaseChanged: this.props.onEnvelopeReleaseChanged\r\n                };\r\n                return React.createElement(OscillatorTrackSettingsBox, { key: index, index: index, name: track.name, onNameChange: this.props.onNameChange, gain: track.track.audioSource.masterGain, onGainChange: this.props.onGainChange, deleteTrack: this.props.onDeleteTrack, width: this.props.width, height: track.height, oscillatorType: capitalise(track.track.audioSource.oscillatorType), oscillatorTypeChanged: this.props.onOscillatorTypeChanged, envelopeSettings: oscillatorProps, connection: track.track.connection, connectionOptions: this.props.possibleConnections, connectionChanged: this.props.onConnectionChanged });\r\n            }\r\n        })));\r\n    }\r\n}\r\nclass SoundFileTrackSettingsBox extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleNameChange = this.handleNameChange.bind(this);\r\n        this.handleGainChange = this.handleGainChange.bind(this);\r\n        this.handleConnectionChanged = this.handleConnectionChanged.bind(this);\r\n    }\r\n    handleNameChange(value) {\r\n        this.props.onNameChange(this.props.index, value);\r\n    }\r\n    handleGainChange(value) {\r\n        this.props.onGainChange(this.props.index, value);\r\n    }\r\n    handleConnectionChanged(index) {\r\n        this.props.connectionChanged(this.props.index, index);\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { style: { position: \"relative\" } },\r\n            React.createElement(FAButton, { className: \"trackSettingsDeleteButton buttonColorAnim\", title: \"Delete Track\", iconName: \"fa fa-close\", onClick: () => { this.props.deleteTrack(this.props.index); } }),\r\n            React.createElement(\"div\", { className: \"trackSettingsDiv\", style: { width: this.props.width, height: this.props.height } },\r\n                React.createElement(\"input\", { className: \"trackSettingsName\", type: \"text\", value: this.props.name, size: Math.max(1, this.props.name.length), onChange: (event) => { this.handleNameChange(event.target.value); } }),\r\n                React.createElement(Slider, { min: 0, max: 1, step: 0.01, value: this.props.gain, onChange: this.handleGainChange }),\r\n                React.createElement(IconFileInput, { className: \"trackSettingsIconInput buttonColorAnim\", title: \"Set Sound File\", iconName: \"fa fa-music\", onChange: (files) => { this.props.soundFileChange(this.props.index, files); }, accept: \"audio/*\" }),\r\n                React.createElement(LabelledCheckbox, { className: \"trackSettingsInteractable pointer\", label: \"Display Actual Width:\", state: this.props.displayActualWidth, onChange: (value) => { this.props.displayActualWidthChange(this.props.index, value); } }),\r\n                React.createElement(LabelledCheckbox, { className: \"trackSettingsInteractable pointer\", label: \"Allow Overlaps:\", state: this.props.allowOverlap, onChange: (value) => { this.props.allowOverlapChange(this.props.index, value); } }),\r\n                React.createElement(BoxSelect, { className: \"trackSettingsBoxSelect\", boxSelectTitle: this.props.connection, options: this.props.connectionOptions, selectedCallback: this.handleConnectionChanged })));\r\n    }\r\n}\r\nclass OscillatorTrackSettingsBox extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleNameChange = this.handleNameChange.bind(this);\r\n        this.handleGainChange = this.handleGainChange.bind(this);\r\n        this.handleConnectionChanged = this.handleConnectionChanged.bind(this);\r\n    }\r\n    handleNameChange(value) {\r\n        this.props.onNameChange(this.props.index, value);\r\n    }\r\n    handleGainChange(value) {\r\n        this.props.onGainChange(this.props.index, value);\r\n    }\r\n    handleConnectionChanged(index) {\r\n        this.props.connectionChanged(this.props.index, index);\r\n    }\r\n    render() {\r\n        let es = this.props.envelopeSettings;\r\n        return React.createElement(\"div\", { style: { position: \"relative\" } },\r\n            React.createElement(FAButton, { className: \"trackSettingsDeleteButton buttonColorAnim\", title: \"Delete Effect\", iconName: \"fa fa-close\", onClick: () => { this.props.deleteTrack(this.props.index); } }),\r\n            React.createElement(\"div\", { className: \"trackSettingsDiv\", style: { width: this.props.width, height: this.props.height } },\r\n                React.createElement(\"input\", { className: \"trackSettingsName\", type: \"text\", value: this.props.name, size: Math.max(1, this.props.name.length), onChange: (event) => { this.handleNameChange(event.target.value); } }),\r\n                React.createElement(Slider, { min: 0, max: 1, step: 0.01, value: this.props.gain, onChange: this.handleGainChange }),\r\n                React.createElement(\"div\", { className: \"trackSettingsInteractable\" },\r\n                    React.createElement(\"p\", null, \"Type:\"),\r\n                    React.createElement(BoxSelect, { boxSelectTitle: this.props.oscillatorType, options: OscillatorTrackSettingsBox.oscillatorOptions, selectedCallback: (value) => { this.props.oscillatorTypeChanged(this.props.index, OscillatorTrackSettingsBox.oscillatorOptions[value]); } })),\r\n                React.createElement(OscillatorEnvelope, { enabled: es.enabled, enabledChanged: (value) => { es.enabledChanged(this.props.index, value); }, attack: es.attack, attackChanged: (value) => { es.attackChanged(this.props.index, value); }, release: es.release, releaseChanged: (value) => { es.releaseChanged(this.props.index, value); } }),\r\n                React.createElement(BoxSelect, { className: \"trackSettingsBoxSelect\", boxSelectTitle: this.props.connection, options: this.props.connectionOptions, selectedCallback: this.handleConnectionChanged })));\r\n    }\r\n}\r\nOscillatorTrackSettingsBox.oscillatorOptions = [\"Sine\", \"Square\", \"Sawtooth\", \"Triangle\"];\r\nclass OscillatorEnvelope extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            detailsVisible: false\r\n        };\r\n        this._openCloseButton = React.createRef();\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"oscillatorEnvelopeContainer\" },\r\n            React.createElement(\"button\", { className: \"mainBoxSelectButton\", ref: this._openCloseButton, onClick: () => { this.setState({ detailsVisible: !this.state.detailsVisible }); } }, \"Envelope Settings\"),\r\n            this.state.detailsVisible && React.createElement(ClickOutsideWatcher, { callback: () => this.setState({ detailsVisible: false }) },\r\n                React.createElement(OscillatorEnvelopeDetails, Object.assign({}, this.props, { mainButton: this._openCloseButton }))));\r\n    }\r\n}\r\nclass OscillatorEnvelopeDetails extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lastAttackValue: \"\",\r\n            lastReleaseValue: \"\"\r\n        };\r\n    }\r\n    render() {\r\n        let disabled = !this.props.enabled;\r\n        return React.createElement(\"div\", { className: \"envelopeOverlayOuterContainer\", style: { left: this.props.mainButton.current.offsetWidth + 2 } },\r\n            React.createElement(\"div\", { className: \"envelopeOverlayInnerContainer\" },\r\n                React.createElement(\"div\", { className: \"boxSelectOverlayArrow left\" }),\r\n                React.createElement(\"div\", { className: \"boxSelectOverlay envelopeOverlayContent\" },\r\n                    React.createElement(\"div\", { className: \"effectProperty\" },\r\n                        React.createElement(\"p\", null, \"Enabled:\"),\r\n                        React.createElement(\"input\", { type: \"checkbox\", checked: this.props.enabled, onChange: (event) => { this.props.enabledChanged(event.target.checked); } })),\r\n                    React.createElement(\"div\", { className: \"effectProperty\" },\r\n                        React.createElement(\"p\", null, \"Attack:\"),\r\n                        React.createElement(\"input\", { type: \"number\", step: \"0.01\", value: (parseFloat(this.state.lastAttackValue) === this.props.attack ? this.state.lastAttackValue : this.props.attack.toString()), onChange: (event) => { this.setState({ lastAttackValue: event.target.value }); this.props.attackChanged(event.target.value); }, disabled: disabled })),\r\n                    React.createElement(\"div\", { className: \"effectProperty\" },\r\n                        React.createElement(\"p\", null, \"Release:\"),\r\n                        React.createElement(\"input\", { type: \"number\", step: \"0.01\", value: (parseFloat(this.state.lastReleaseValue) === this.props.release ? this.state.lastReleaseValue : this.props.release.toString()), onChange: (event) => { this.setState({ lastReleaseValue: event.target.value }); this.props.releaseChanged(event.target.value); }, disabled: disabled })))));\r\n    }\r\n}\r\nfunction capitalise(s) {\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n//# sourceMappingURL=TrackList.js.map","import * as PIXI from \"pixi.js\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer\";\r\nimport { MouseClickType } from \"../Settings/Enums\";\r\nimport { UIPositioning } from \"../Settings/UITheme\";\r\nexport class VerticalScrollView extends MouseTypeContainer {\r\n    constructor(width, height) {\r\n        super();\r\n        this.scrollingEnabled = true;\r\n        this._sidebarPosition = UIPositioning.sequencerSidebarWidth;\r\n        this._verticalScrollPosition = 0;\r\n        this._interactivityRect = new PIXI.Graphics();\r\n        this.addChild(this._interactivityRect);\r\n        this.endX = width;\r\n        this.endY = height;\r\n        this.resizeInteractiveArea(width, height);\r\n        this.on(\"added\", this.addedHandler);\r\n        this.on(\"removed\", this.removedHandler);\r\n    }\r\n    resize(width, height) {\r\n        this.endX = width;\r\n        this.endY = height;\r\n        this.resizeInteractiveArea(width, height);\r\n        this.timeline.resize(width, height);\r\n    }\r\n    get verticalScrollPosition() {\r\n        return this._verticalScrollPosition;\r\n    }\r\n    set verticalScrollPosition(value) {\r\n        let oldVSP = this._verticalScrollPosition;\r\n        this._verticalScrollPosition = Math.min(0, Math.max(-this.contentHeight + this.endY - 2, value));\r\n        if (oldVSP != this._verticalScrollPosition) {\r\n            this.updateVerticalScroll(this._verticalScrollPosition);\r\n        }\r\n    }\r\n    resizeInteractiveArea(width, height) {\r\n        this._interactivityRect.clear();\r\n        this._interactivityRect.beginFill(0x000000, 1.0);\r\n        this._interactivityRect.drawRect(0, 0, width, height);\r\n        this._interactivityRect.endFill();\r\n        this._interactivityRect.alpha = 0.0;\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        if (this._mouseClickType == MouseClickType.None) {\r\n            return;\r\n        }\r\n        this._startPointerPosition = event.data.getLocalPosition(this);\r\n        this._startVerticalScrollPosition = this._verticalScrollPosition;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.scrollingEnabled) {\r\n            this.verticalScrollPosition = event.data.getLocalPosition(this).y - this._startPointerPosition.y + this._startVerticalScrollPosition;\r\n        }\r\n    }\r\n    pointerUpHandler(event) {\r\n        super.pointerUpHandler(event);\r\n        this._startPointerPosition = undefined;\r\n        this._startVerticalScrollPosition = undefined;\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.scrollingEnabled) {\r\n            this.verticalScrollPosition = event.data.getLocalPosition(this).y - this._startPointerPosition.y + this._startVerticalScrollPosition;\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        this.timeline.mouseWheelHandler(event, canvasX, canvasY);\r\n    }\r\n    addedHandler() {\r\n        this.timeline.addedHandler();\r\n    }\r\n    removedHandler() {\r\n        this.timeline.removedHandler();\r\n    }\r\n    destroy() {\r\n        super.destroy({ children: true });\r\n    }\r\n}\r\n//# sourceMappingURL=VerticalScrollView.js.map","import * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { SequencerTimeline } from \"./SequencerTimeline\";\r\nimport { UIColors, UIFonts, UIPositioning } from \"../Settings/UITheme\";\r\nimport { VerticalScrollView } from \"../Shared/VerticalScrollView\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper\";\r\nimport { FAButton } from \"../SharedReact/BasicElements\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nexport class SequencerView extends VerticalScrollView {\r\n    constructor(width, height, track, songManager, startFrom) {\r\n        super(width, height);\r\n        this.timeline = new SequencerTimeline(this._sidebarPosition, width, height, this.contentHeight, songManager, track, startFrom);\r\n        this._sidebarUI = new PIXI.Graphics().beginFill(UIColors.bgColor).drawRect(0, 0, this._sidebarPosition, height).endFill();\r\n        this._sidebarUI.beginFill(UIColors.fgColor)\r\n            .drawRect(0, UIPositioning.timelineHeaderHeight, this._sidebarPosition, 2)\r\n            .drawRect(this._sidebarPosition - 4, 0, 4, height)\r\n            .endFill();\r\n        this._noteList = new SequencerNotes(this._sidebarPosition, width, height, SequencerView.numNotes);\r\n        this.addChild(this._sidebarUI, this._noteList, this.timeline);\r\n        this._backButtonContainer = document.createElement(\"div\");\r\n        Object.assign(this._backButtonContainer.style, {\r\n            position: \"absolute\",\r\n            top: \"5px\",\r\n            left: \"5px\"\r\n        });\r\n        document.getElementById(\"applicationContainer\").appendChild(this._backButtonContainer);\r\n        render(React.createElement(FAButton, { iconName: \"fa fa-arrow-left\", onClick: () => { navigationView.back(); } }), this._backButtonContainer);\r\n    }\r\n    get contentHeight() {\r\n        return SequencerTimeline.noteHeight * SequencerView.numNotes;\r\n    }\r\n    resize(width, height) {\r\n        super.resize(width, height);\r\n        this._sidebarUI.clear();\r\n        this._sidebarUI.beginFill(UIColors.bgColor).drawRect(0, 0, this._sidebarPosition, height).endFill();\r\n        this._sidebarUI.beginFill(UIColors.fgColor).drawRect(this._sidebarPosition - 4, 0, 4, height).endFill();\r\n        this._noteList.resize(width, height);\r\n    }\r\n    destroy() {\r\n        unmountComponentAtNode(this._backButtonContainer);\r\n        document.getElementById(\"applicationContainer\").removeChild(this._backButtonContainer);\r\n        super.destroy();\r\n    }\r\n    updateVerticalScroll(value) {\r\n        value = Math.min(0, value);\r\n        this.timeline.updateVerticalScroll(value);\r\n        this._noteList.y = value;\r\n    }\r\n}\r\nSequencerView.numNotes = 99;\r\nclass SequencerNotes extends PIXI.Container {\r\n    constructor(width, screenWidth, screenHeight, numNotes) {\r\n        super();\r\n        this._numNotes = numNotes - 2;\r\n        this._horizontalLines = new PIXI.Graphics();\r\n        this._horizontalLines.y = UIPositioning.timelineHeaderHeight;\r\n        for (let i = 0; i < this._numNotes; i++) {\r\n            let height = i * SequencerTimeline.noteHeight;\r\n            let text = new PIXI.Text(NoteHelper.noteNumberToNoteString(this._numNotes - 1 - i), UIFonts.trackFont);\r\n            text.x = width / 2 - text.width / 2;\r\n            text.y = UIPositioning.timelineHeaderHeight + height + SequencerTimeline.noteHeight / 2 - text.height / 2 + 1;\r\n            this.addChild(text);\r\n        }\r\n        this.addChild(this._horizontalLines);\r\n        this.resize(screenWidth, screenHeight);\r\n    }\r\n    resize(width, height) {\r\n        this._horizontalLines.beginFill(UIColors.fgColor);\r\n        for (let i = 0; i < this._numNotes; i++) {\r\n            let currentHeight = i * SequencerTimeline.noteHeight;\r\n            this._horizontalLines.drawRect(0, currentHeight, width, 1);\r\n        }\r\n        this._horizontalLines.endFill();\r\n        this.mask = new PIXI.Graphics().beginFill(0xFFFFFF).drawRect(0, UIPositioning.timelineHeaderHeight, width, height).endFill();\r\n    }\r\n}\r\n//# sourceMappingURL=SequencerView.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { SongTimeline } from \"./SongTimeline\";\r\nimport { TrackList } from \"./TrackList.js\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack.js\";\r\nimport { VerticalScrollView } from \"../Shared/VerticalScrollView.js\";\r\nimport { UIPositioning } from \"../Settings/UITheme\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nimport { SequencerView } from \"../Sequencer/SequencerView\";\r\nimport { Dropdown } from \"../SharedReact/BasicElements\";\r\nimport { UITrackStore } from \"../ReactUI/UITrackStore\";\r\nexport class TimelineView extends VerticalScrollView {\r\n    constructor(width, height, songManager) {\r\n        super(width, height);\r\n        this._sidebarPosition = UIPositioning.timelineSidebarWidth;\r\n        this._songManager = songManager;\r\n        this.interactive = true;\r\n        this.showSequencer = this.showSequencer.bind(this);\r\n        this.addedHandler = this.addedHandler.bind(this);\r\n        this.removedHandler = this.removedHandler.bind(this);\r\n        this._trackEdited = this._trackEdited.bind(this);\r\n        this._UITrackUpdateHandler = this._UITrackUpdateHandler.bind(this);\r\n        this.on(\"added\", this.addedHandler);\r\n        this.on(\"removed\", this.removedHandler);\r\n        this.trackList = new TrackList(this._sidebarPosition, width, height, songManager);\r\n        this.trackList.trackEdited.addListener(this._trackEdited);\r\n        this.addChild(this.trackList);\r\n        this.timeline = new SongTimeline(this._sidebarPosition, width, height, songManager, this.showSequencer);\r\n        this.addChild(this.timeline);\r\n        this._newTrackDropdownContainer = document.createElement(\"div\");\r\n        document.getElementById(\"applicationContainer\").appendChild(this._newTrackDropdownContainer);\r\n        Object.assign(this._newTrackDropdownContainer.style, {\r\n            position: \"absolute\",\r\n            top: \"5px\",\r\n            left: \"5px\"\r\n        });\r\n        this._renderNewTrackObject();\r\n        this._cleanupListener = UITrackStore.subscribe(this._UITrackUpdateHandler);\r\n    }\r\n    get contentHeight() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length == 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return tracks[tracks.length - 1].startY + tracks[tracks.length - 1].height;\r\n        }\r\n    }\r\n    resize(width, height) {\r\n        super.resize(width, height);\r\n        this.trackList.resize(width, height);\r\n    }\r\n    destroy() {\r\n        unmountComponentAtNode(this._newTrackDropdownContainer);\r\n        document.getElementById(\"applicationContainer\").removeChild(this._newTrackDropdownContainer);\r\n        this.removeAllListeners();\r\n        this._cleanupListener();\r\n        super.destroy();\r\n    }\r\n    showSequencer(track, startPosition) {\r\n        let sequencerView = new SequencerView(this.endX, this.endY, track, this._songManager, Math.floor(this.timeline.metadata.positionQuarterNoteToBars(startPosition)));\r\n        navigationView.show(sequencerView);\r\n    }\r\n    addedHandler() {\r\n        super.addedHandler();\r\n        this.trackList.addedHandler();\r\n        this._renderNewTrackObject();\r\n    }\r\n    removedHandler() {\r\n        super.removedHandler();\r\n        this.trackList.removedHandler();\r\n        unmountComponentAtNode(this._newTrackDropdownContainer);\r\n    }\r\n    addOscillatorTrack() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        let track = this._songManager.addOscillatorTrack();\r\n        let startY = this.contentHeight != 0 ? this.contentHeight : UIPositioning.timelineHeaderHeight;\r\n        let settings = { name: \"Track \" + (tracks.length + 1).toString(), startY: startY, height: 250, modelTrackID: track.id, noteGroups: [] };\r\n        UITrackStore.dispatch({ type: \"ADD_TRACK\", track: new NoteUITrack(settings, track) });\r\n    }\r\n    addSoundFileTrack() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let tracks = UITrackStore.getState().tracks;\r\n            let track = yield this._songManager.addSoundFileTrack();\r\n            let startY = this.contentHeight != 0 ? this.contentHeight : UIPositioning.timelineHeaderHeight;\r\n            let settings = { type: \"soundFile\", name: (\"Track \" + (tracks.length + 1).toString()), startY: startY, height: 250, displayActualWidth: true, modelTrackID: track.id };\r\n            UITrackStore.dispatch({ type: \"ADD_TRACK\", track: new SoundFileUITrack(settings, track) });\r\n        });\r\n    }\r\n    updateVerticalScroll(value) {\r\n        value = Math.min(0, value);\r\n        this.timeline.updateVerticalScroll(value);\r\n        this.trackList.updateVerticalScroll(value);\r\n    }\r\n    _trackEdited(index) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this.timeline.reinitialiseTrack(tracks[index]);\r\n    }\r\n    _UITrackUpdateHandler() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length > 0) {\r\n            let lastTrack = tracks[tracks.length - 1];\r\n            let endHeight = lastTrack.startY + lastTrack.height + this.verticalScrollPosition;\r\n            if (endHeight < this.endY) {\r\n                this.verticalScrollPosition += (this.endY - endHeight);\r\n            }\r\n        }\r\n        else {\r\n            this.verticalScrollPosition = 0;\r\n        }\r\n        this._renderNewTrackObject();\r\n    }\r\n    _renderNewTrackObject() {\r\n        let buttonClassName = \"addTrackButton\";\r\n        if (UITrackStore.getState().tracks.length == 0) {\r\n            buttonClassName += \" highlight\";\r\n        }\r\n        render(React.createElement(Dropdown, { title: \"New Track\", iconName: \"fa fa-plus\", optionTitles: [\"New Oscillator Track\", \"New Sound File Track\"], buttonClassName: buttonClassName, optionsDivClassName: \"addTrackOptionsDiv\", optionClassName: \"addTrackItem\", optionClickCallback: (index) => __awaiter(this, void 0, void 0, function* () {\r\n                if (index == 0) {\r\n                    this.addOscillatorTrack();\r\n                }\r\n                else if (index == 1) {\r\n                    yield this.addSoundFileTrack();\r\n                }\r\n            }) }), this._newTrackDropdownContainer);\r\n    }\r\n}\r\n//# sourceMappingURL=TimelineView.js.map","import * as React from \"react\";\r\nimport { editType } from \"../Settings/EditType\";\r\nimport { SelectionGroup } from \"../SharedReact/BasicElements\";\r\nexport class EditPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._snapTypeChanged = this._snapTypeChanged.bind(this);\r\n        this._lengthTypeChanged = this._lengthTypeChanged.bind(this);\r\n        this._lengthEnabledChanged = this._lengthEnabledChanged.bind(this);\r\n        this.state = {\r\n            selectedSnapButton: editType.snapType,\r\n            selectedLengthButton: editType.noteLength,\r\n            lengthEnabled: editType.noteLengthDisabled\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        editType.noteLengthDisabledChange.addListener(this._lengthEnabledChanged);\r\n    }\r\n    componentWillUnmount() {\r\n        editType.noteLengthDisabledChange.removeListener(this._lengthEnabledChanged);\r\n    }\r\n    _snapTypeChanged(index) {\r\n        this.setState({ selectedSnapButton: index });\r\n        editType.snapType = index;\r\n    }\r\n    _lengthTypeChanged(index) {\r\n        this.setState({ selectedLengthButton: index });\r\n        editType.noteLength = index;\r\n    }\r\n    _lengthEnabledChanged(value) {\r\n        this.setState({ lengthEnabled: value });\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"editPanel\" },\r\n            React.createElement(\"div\", { className: \"selectionGroup\" },\r\n                React.createElement(\"p\", { className: \"selectionGroupTitle\" }, \"Snap Type:\"),\r\n                React.createElement(SelectionGroup, { className: \"snapTypeGroup\", buttonClassName: \"panelButton buttonAnim\", disabled: false, selectedButton: this.state.selectedSnapButton, buttonContents: [\"1\", React.createElement(Fraction, { n: 1, d: 2 }), React.createElement(Fraction, { n: 1, d: 4 }), React.createElement(Fraction, { n: 1, d: 8 }), React.createElement(\"p\", null, \"\\u2716\")], buttonTitles: [\"Snap to Whole Beat\", \"Snap To Half Beat\", \"Snap To Quarter Beat\", \"Snap to Eighth Beat\", \"No Snapping\"], onButtonClick: this._snapTypeChanged })),\r\n            React.createElement(\"div\", { className: \"selectionGroup\" },\r\n                React.createElement(\"p\", { className: \"selectionGroupTitle\" }, \"Note Length:\"),\r\n                React.createElement(SelectionGroup, { className: \"lengthTypeGroup\", buttonClassName: \"panelButton buttonAnim noteButton\", disabled: this.state.lengthEnabled, selectedButton: this.state.selectedLengthButton, buttonContents: [React.createElement(\"span\", null, \"\\uD834\\uDD5D\"), React.createElement(\"span\", null, \"\\uD834\\uDD5E\"), React.createElement(\"span\", null, \"\\uD834\\uDD5F\"), React.createElement(\"span\", null, \"\\uD834\\uDD60\"), React.createElement(\"span\", null, \"\\uD834\\uDD61\"), React.createElement(\"span\", null, \"\\uD834\\uDD62\")], buttonTitles: [\"Whole Note\", \"Half Note\", \"Quarter Note\", \"8th Note\", \"16th Note\", \"32nd Note\"], onButtonClick: this._lengthTypeChanged })));\r\n    }\r\n}\r\nclass Fraction extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"p\", { style: { fontFamily: \"Arial, Helvetica, sans-serif\" } },\r\n            React.createElement(\"sup\", null, this.props.n),\r\n            \"\\u2044\",\r\n            React.createElement(\"sub\", null, this.props.d));\r\n    }\r\n}\r\n//# sourceMappingURL=EditPanel.js.map","import * as React from \"react\";\r\nimport { editType } from \"../Settings/EditType\";\r\nimport { FAButton } from \"../SharedReact/BasicElements\";\r\nexport class PlaybackPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._markerCenteredChanged = this._markerCenteredChanged.bind(this);\r\n        this._playingStateChanged = this._playingStateChanged.bind(this);\r\n        editType.markerCenteredChanged.addListener(this._markerCenteredChanged);\r\n        this.state = {\r\n            playing: this.props.songManager.playing,\r\n            markerCentred: editType.markerCentered,\r\n        };\r\n    }\r\n    _playingStateChanged(value) {\r\n        this.setState({ playing: value });\r\n    }\r\n    _markerCenteredChanged(value) {\r\n        this.setState({ markerCentred: value });\r\n    }\r\n    componentDidMount() {\r\n        this.props.songManager.playingChangedEvent.addListener(this._playingStateChanged);\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.songManager.playingChangedEvent.removeListener(this._playingStateChanged);\r\n    }\r\n    render() {\r\n        let c = \"panelButton buttonAnim\";\r\n        return React.createElement(\"div\", { className: \"playbackPanel\" },\r\n            React.createElement(\"div\", { className: \"playbackButtons\" },\r\n                React.createElement(PlayPauseButton, { className: c, playing: this.state.playing, playFunction: () => { this.props.songManager.start(); }, pauseFunction: () => { this.props.songManager.stop(); } }),\r\n                React.createElement(FAButton, { className: c, title: \"Stop\", iconName: \"fa fa-stop\", onClick: () => { this.props.songManager.stopToBeginning(); this.setState({ playing: this.props.songManager.playing }); } })),\r\n            React.createElement(\"button\", { className: \"recentreButton buttonAnim\", onClick: () => { editType.markerCentered = true; }, style: { visibility: ((!this.state.markerCentred && this.props.songManager.playing) ? \"visible\" : \"hidden\") } }, \"Recentre Marker\"));\r\n    }\r\n}\r\nclass PlayPauseButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        let icon = null;\r\n        let func = null;\r\n        let title = \"\";\r\n        if (this.props.playing) {\r\n            title = \"Pause\";\r\n            icon = \"fa fa-pause\";\r\n            func = this.props.pauseFunction;\r\n        }\r\n        else {\r\n            title = \"Play\";\r\n            icon = \"fa fa-play\";\r\n            func = this.props.playFunction;\r\n        }\r\n        return React.createElement(FAButton, { title: title, className: this.props.className, iconName: icon, onClick: func });\r\n    }\r\n}\r\n//# sourceMappingURL=PlaybackPanel.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = ReactBeautifulDnd;","import * as React from \"react\";\r\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\r\nimport { EffectsChain } from \"../../Model/Nodes/EffectsChain\";\r\nimport { BoxSelect, FAButton, Slider } from \"../SharedReact/BasicElements\";\r\nexport class EffectsChainPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._deserialiseFunction = () => { this.forceUpdate(); };\r\n        this._effectChanged = this._effectChanged.bind(this);\r\n        this._effectRemoved = this._effectRemoved.bind(this);\r\n        this._newEffect = this._newEffect.bind(this);\r\n        this._moveEffect = this._moveEffect.bind(this);\r\n        this._selectedChainChanged = this._selectedChainChanged.bind(this);\r\n        this._deleteCurrentChain = this._deleteCurrentChain.bind(this);\r\n        this._preGainChanged = this._preGainChanged.bind(this);\r\n        this._postGainChanged = this._postGainChanged.bind(this);\r\n        this._connectionChanged = this._connectionChanged.bind(this);\r\n        this.state = {\r\n            currentChainNumber: 0,\r\n            hidden: false\r\n        };\r\n    }\r\n    get currentChain() {\r\n        if (this.state.currentChainNumber === 0) {\r\n            return this.props.connectionManager.bus;\r\n        }\r\n        return this.props.connectionManager.chains[this.state.currentChainNumber - 1];\r\n    }\r\n    get chainsAndBus() {\r\n        return [this.props.connectionManager.bus].concat(this.props.connectionManager.chains);\r\n    }\r\n    _newEffect(newEffectIndex) {\r\n        this.currentChain.addEffect(this.currentChain.effects.length, EffectsChain.possibleEffects.get(EffectsChainInfo.effectTitles[newEffectIndex])());\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _effectChanged(effectIndex, propertyIndex, value) {\r\n        let property = this.currentChain.effects[effectIndex].properties[propertyIndex];\r\n        property.value = value;\r\n        this.currentChain.effectNodes[effectIndex][property.propertyName] = value;\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _effectRemoved(index) {\r\n        this.currentChain.removeEffect(index);\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _moveEffect(oldIndex, newIndex) {\r\n        this.currentChain.moveEffect(oldIndex, newIndex);\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _hidePanel() {\r\n        this.setState({ hidden: !this.state.hidden }, () => {\r\n            if (this.state.hidden) {\r\n                this.props.hideShowCallback();\r\n            }\r\n            else {\r\n                setTimeout(() => { this.props.hideShowCallback(); }, 500);\r\n            }\r\n        });\r\n    }\r\n    _selectedChainChanged(index) {\r\n        if (index > this.props.connectionManager.chains.length) {\r\n            this.props.connectionManager.addChain();\r\n        }\r\n        this.setState({ currentChainNumber: index });\r\n    }\r\n    _deleteCurrentChain() {\r\n        this.props.connectionManager.removeChain(this.currentChain.chainName);\r\n        this.setState({ currentChainNumber: 0 });\r\n    }\r\n    _preGainChanged(value) {\r\n        this.currentChain.preGain = value;\r\n    }\r\n    _postGainChanged(value) {\r\n        this.currentChain.postGain = value;\r\n    }\r\n    _connectionChanged(index, value) {\r\n        let curChain = this.currentChain;\r\n        if (curChain !== this.props.connectionManager.bus && this.props.connectionManager.getConnections(curChain)[0] != value) {\r\n            console.log(this.props.connectionManager.getConnections(curChain)[0]);\r\n            this.props.connectionManager.removeAllConnections(curChain);\r\n            this.props.connectionManager.addConnection(curChain, value);\r\n            this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.props.connectionManager.effectsDeserialised.addListener(this._deserialiseFunction);\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.connectionManager.effectsDeserialised.removeListener(this._deserialiseFunction);\r\n    }\r\n    render() {\r\n        let options = this.chainsAndBus.map(value => { return value.chainName; });\r\n        options.push(\"New Chain...\");\r\n        let curChain = this.currentChain;\r\n        return React.createElement(\"div\", { className: \"effectsChainPanel\" + (this.state.hidden ? \" hidden\" : \"\") },\r\n            React.createElement(FAButton, { title: this.state.hidden ? \"Show Effects\" : \"Hide Effects\", className: \"effectsChainHideShowButton\", iconName: this.state.hidden ? \"fa fa-caret-left\" : \"fa fa-caret-right\", onClick: () => { this._hidePanel(); } }),\r\n            React.createElement(\"div\", { className: \"effectsChainContent\" },\r\n                React.createElement(\"div\", { className: \"effectsChainPanelTitle\" },\r\n                    React.createElement(BoxSelect, { title: \"New Chain\", mainButtonClassName: \"effectsChainTitleButton\", selectButtonClassName: \"effectsChainSelectButton\", selected: this.state.currentChainNumber, options: options, selectedCallback: this._selectedChainChanged }),\r\n                    React.createElement(FAButton, { title: \"Delete Chain\", className: \"effectsChainButton buttonColorAnim size title\", iconName: \"fa fa-close\", onClick: this._deleteCurrentChain, disabled: curChain.chainName === \"Bus\" })),\r\n                React.createElement(EffectsChainInfo, { effectsChain: curChain.effects, moveEffect: this._moveEffect, effectPropertyChanged: this._effectChanged, newEffect: this._newEffect, effectRemoved: this._effectRemoved, preGainValue: curChain.preGain, preGainValueChanged: this._preGainChanged, postGainValue: curChain.postGain, postGainValueChanged: this._postGainChanged, connection: this.props.connectionManager.getConnections(curChain)[0], connectionOptions: (curChain === this.props.connectionManager.bus ? [\"Context\"] : [\"Context\", \"Bus\"]), connectionChangedCallback: this._connectionChanged })));\r\n    }\r\n}\r\nclass EffectsChainInfo extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._onDragEnd = this._onDragEnd.bind(this);\r\n    }\r\n    _onDragEnd(result) {\r\n        if (!result.destination || result.source.index == result.destination.index) {\r\n            return;\r\n        }\r\n        this.props.moveEffect(result.source.index, result.destination.index);\r\n    }\r\n    render() {\r\n        let effects = this.props.effectsChain.map((effect, index) => {\r\n            return React.createElement(ChainEffect, Object.assign({ key: effect.id, effectIndex: index }, effect, { onPropertyChange: this.props.effectPropertyChanged, onDelete: this.props.effectRemoved }));\r\n        });\r\n        return React.createElement(\"div\", { className: \"effectsList\" },\r\n            React.createElement(\"div\", { className: \"effectsListDivider\", style: { marginTop: \"0px\" } }),\r\n            React.createElement(\"div\", { className: \"effectProperty range\" },\r\n                React.createElement(\"p\", { className: \"effectTitleText\" }, \"Input Gain:\"),\r\n                React.createElement(Slider, { value: this.props.preGainValue, min: 0, max: 1, step: 0.01, onRelease: true, onChange: this.props.preGainValueChanged })),\r\n            React.createElement(\"div\", { className: \"effectProperty range \" },\r\n                React.createElement(\"p\", { className: \"effectTitleText\" }, \"Output Gain:\"),\r\n                React.createElement(Slider, { value: this.props.postGainValue, min: 0, max: 1, step: 0.01, onRelease: true, onChange: this.props.postGainValueChanged })),\r\n            React.createElement(\"div\", { className: \"effectProperty list\" },\r\n                React.createElement(\"p\", { className: \"effectTitleText\" }, \"Output:\"),\r\n                React.createElement(BoxSelect, { mainButtonClassName: \"\", boxSelectTitle: this.props.connection, options: this.props.connectionOptions, selectedCallback: this.props.connectionChangedCallback })),\r\n            React.createElement(\"div\", { className: \"effectsListDivider\" }),\r\n            React.createElement(\"p\", { className: \"effectTitleText\" }, \"Effects:\"),\r\n            React.createElement(DragDropContext, { onDragEnd: this._onDragEnd },\r\n                React.createElement(Droppable, { droppableId: \"effectsList\" }, (provided, snapshot) => (React.createElement(\"div\", Object.assign({ className: \"effectsListDroppable effectsListElement\" + (snapshot.isDraggingOver ? \" dragging\" : \"\"), ref: provided.innerRef }, provided.droppableProps),\r\n                    effects,\r\n                    provided.placeholder)))),\r\n            React.createElement(BoxSelect, { mainButtonClassName: \"effectsChainButton buttonColorAnim dropdownButton\", title: \"New Effect\", options: EffectsChainInfo.effectTitles, selectedCallback: this.props.newEffect },\r\n                React.createElement(\"i\", { className: \"fa fa-plus\" })));\r\n    }\r\n}\r\nEffectsChainInfo.effectTitles = Array.from(EffectsChain.possibleEffects.keys());\r\nclass ChainEffect extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            collapsed: true\r\n        };\r\n        this._contentRef = React.createRef();\r\n    }\r\n    render() {\r\n        return React.createElement(Draggable, { draggableId: this.props.id, index: this.props.effectIndex }, (provided, snapshot) => (React.createElement(\"div\", Object.assign({ className: \"chainEffect\" + (snapshot.isDragging ? \" dragging\" : \"\"), ref: provided.innerRef }, provided.draggableProps),\r\n            React.createElement(\"div\", Object.assign({ className: \"chainEffectTitle\" }, provided.dragHandleProps),\r\n                React.createElement(FAButton, { className: \"effectsChainButton buttonColorAnim size\", title: this.state.collapsed ? \"Expand\" : \"Collapse\", iconName: \"fa \" + (this.state.collapsed ? \"fa-chevron-right\" : \"fa-chevron-down\"), onClick: () => this.setState({ collapsed: !this.state.collapsed }) }),\r\n                React.createElement(\"p\", { className: \"effectTitleText\", style: { marginRight: \"5px\" } }, this.props.effectType),\r\n                React.createElement(FAButton, { className: \"effectsChainButton buttonColorAnim size\", title: \"Delete Effect\", iconName: \"fa fa-close\", onClick: () => { this.props.onDelete(this.props.effectIndex); } })),\r\n            React.createElement(\"div\", { ref: this._contentRef, className: \"effectContent\", style: { maxHeight: (this.state.collapsed ? undefined : (this._contentRef.current ? this._contentRef.current.scrollHeight + \"px\" : \"initial\")) } }, this.props.properties.map((property, index) => {\r\n                if (property.editable) {\r\n                    switch (property.type) {\r\n                        case \"number\":\r\n                            if (property.hasOwnProperty(\"min\")) {\r\n                                return React.createElement(RangeEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                            }\r\n                            else {\r\n                                return React.createElement(NumberEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                            }\r\n                        case \"string\":\r\n                            return React.createElement(StringEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                        case \"boolean\":\r\n                            return React.createElement(BooleanEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                        case \"list\":\r\n                            return React.createElement(ListEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                        default:\r\n                            console.log(\"Unknown property type: \" + property.type);\r\n                            return null;\r\n                    }\r\n                }\r\n            })))));\r\n    }\r\n}\r\nfunction capitalise(s) {\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\nclass NumberEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty number\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(\"input\", { type: \"number\", name: nameToUse, value: this.props.value, step: this.props.step, onChange: (event) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, event.target.value); } }));\r\n    }\r\n}\r\nclass RangeEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty range\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(Slider, { onRelease: true, min: this.props.min, max: this.props.max, step: this.props.step, value: this.props.value, onChange: (value) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, value); } }));\r\n    }\r\n}\r\nclass StringEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty string\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(\"input\", { type: \"text\", name: nameToUse, value: this.props.value, onChange: (event) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, event.target.value); } }));\r\n    }\r\n}\r\nclass BooleanEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty boolean\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(\"input\", { type: \"checkbox\", name: nameToUse, checked: this.props.value, onChange: (event) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, event.target.checked); } }));\r\n    }\r\n}\r\nclass ListEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty list\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(BoxSelect, { selected: this.props.options.indexOf(this.props.value), options: this.props.options, selectedCallback: (newIndex) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, this.props.options[newIndex]); } }));\r\n    }\r\n}\r\n//# sourceMappingURL=EffectsChainPanel.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from \"react\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack\";\r\nimport { FAButton } from \"../SharedReact/BasicElements\";\r\nimport { LoadingErrorModal } from \"../SharedReact/Modal\";\r\nimport { UITrackStore } from \"./UITrackStore\";\r\nexport class SerialisePanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._modalCloseFunc = () => { this.setState({ modalShown: false }); };\r\n        this.state = {\r\n            modalShown: false,\r\n            modalLoading: true,\r\n            modalText: \"\"\r\n        };\r\n        this._serialise = this._serialise.bind(this);\r\n        this._deserialise = this._deserialise.bind(this);\r\n        this._getFile = this._getFile.bind(this);\r\n        this._saveToWAV = this._saveToWAV.bind(this);\r\n        this._inputRef = React.createRef();\r\n    }\r\n    _serialise() {\r\n        this.setState({ modalShown: true, modalLoading: true, modalText: \"Saving to File...\" });\r\n        let tracks = UITrackStore.getState().tracks.map(t => t.serialise());\r\n        let modelSettings = this.props.songManager.serialise();\r\n        let songSettings = Object.assign(Object.assign({}, modelSettings), { UITracks: tracks });\r\n        let outputString = JSON.stringify(songSettings);\r\n        let a = document.createElement(\"a\");\r\n        let file = new Blob([outputString], { type: \"application/web-sequencer\" });\r\n        a.href = URL.createObjectURL(file);\r\n        a.download = new Date().toLocaleDateString() + \".sqn\";\r\n        a.click();\r\n        this.setState({ modalShown: false });\r\n    }\r\n    _deserialise() {\r\n        this._inputRef.current.click();\r\n    }\r\n    _getFile(event) {\r\n        this.setState({ modalShown: true, modalLoading: true, modalText: \"Loading File...\" });\r\n        const file = event.target.files[0];\r\n        if (!file) {\r\n            this.setState({ modalLoading: false, modalText: \"Invalid File\" });\r\n            return;\r\n        }\r\n        else {\r\n            let reader = new FileReader();\r\n            reader.onloadend = () => __awaiter(this, void 0, void 0, function* () {\r\n                let parsed = JSON.parse(reader.result);\r\n                if (!(typeof parsed === 'object' && parsed.hasOwnProperty(\"fileType\") && parsed.fileType == \"SequencerSongSettings\")) {\r\n                    console.log(\"Invalid file type.\");\r\n                    return;\r\n                }\r\n                yield this.props.songManager.deserialise(parsed);\r\n                let UITracks = [];\r\n                for (let i = 0; i < parsed.UITracks.length; i++) {\r\n                    let track = parsed.UITracks[i];\r\n                    let baseTrack = this.props.songManager.tracks.find(modelTrack => modelTrack.id == track.modelTrackID);\r\n                    if (baseTrack == undefined) {\r\n                        console.log(\"UITrack with missing ID found: \", track);\r\n                        continue;\r\n                    }\r\n                    switch (track.type) {\r\n                        case \"oscillator\":\r\n                            UITracks.push(new NoteUITrack(track, baseTrack));\r\n                            break;\r\n                        case \"soundFile\":\r\n                            UITracks.push(new SoundFileUITrack(track, baseTrack));\r\n                            break;\r\n                        default:\r\n                            console.log(\"Invalid track type: \", track.type);\r\n                            break;\r\n                    }\r\n                }\r\n                UITrackStore.dispatch({ type: \"SET_TRACKS\", tracks: UITracks });\r\n                while (navigationView.viewDepth > 1) {\r\n                    navigationView.back();\r\n                }\r\n                this.setState({ modalShown: false });\r\n            });\r\n            reader.readAsText(file);\r\n        }\r\n    }\r\n    _saveToWAV() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.setState({ modalShown: true, modalLoading: true, modalText: \"Generating WAV...\" });\r\n            let file = null;\r\n            try {\r\n                file = yield this.props.songManager.saveToWAV();\r\n            }\r\n            catch (_a) {\r\n                this.setState({ modalLoading: false, modalText: \"Please add events to the song before saving.\" });\r\n                return;\r\n            }\r\n            let a = document.createElement(\"a\");\r\n            a.href = URL.createObjectURL(file);\r\n            a.download = new Date().toLocaleDateString() + \".wav\";\r\n            a.click();\r\n            this.setState({ modalShown: false, modalText: \"\" });\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this._inputRef.current.addEventListener(\"change\", this._getFile);\r\n    }\r\n    componentWillUnmount() {\r\n        this._inputRef.current.removeEventListener(\"change\", this._getFile);\r\n    }\r\n    render() {\r\n        let c = \"panelButton buttonAnim\";\r\n        return React.createElement(\"div\", { className: \"serialisePanel\" },\r\n            React.createElement(FAButton, { className: c, title: \"Save File\", iconName: \"fa fa-save\", onClick: this._serialise }),\r\n            React.createElement(FAButton, { className: c, title: \"Open File\", iconName: \"fa fa-folder-open\", onClick: this._deserialise }),\r\n            React.createElement(FAButton, { className: c, title: \"Download as WAV\", iconName: \"fa fa-music\", onClick: this._saveToWAV }),\r\n            this.state.modalShown && React.createElement(LoadingErrorModal, { loading: this.state.modalLoading, title: this.state.modalText, onClose: this._modalCloseFunc }),\r\n            React.createElement(\"input\", { type: \"file\", ref: this._inputRef, accept: \".sqn\", style: { position: \"absolute\", top: \"-9999px\" } }));\r\n    }\r\n}\r\n//# sourceMappingURL=SerialisePanel.js.map","import * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { SongManager } from \"../../Model/SongManagement/SongManager\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nimport { UIColors } from \"../Settings/UITheme\";\r\nimport { TimelineView } from \"../Timeline/TimelineView\";\r\nimport { EditPanel } from \"./EditPanel\";\r\nimport { PlaybackPanel } from \"./PlaybackPanel\";\r\nimport { EffectsChainPanel } from \"./EffectsChainPanel\";\r\nimport { SerialisePanel } from \"./SerialisePanel\";\r\nexport class SequencerApp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._hideShowCallback = () => { this._timelineRef.current.resizePIXIApp(); };\r\n        this.state = {\r\n            songManager: new SongManager(),\r\n        };\r\n        this._timelineRef = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        this.props.hideLoader();\r\n    }\r\n    componentWillUnmount() {\r\n        this.state.songManager.destroy();\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"fullScreen\" },\r\n            React.createElement(\"div\", { style: { position: \"relative\", width: \"100%\", height: \"100%\" } },\r\n                React.createElement(\"div\", { className: \"sequencerAppTopBar\" },\r\n                    React.createElement(PlaybackPanel, { songManager: this.state.songManager }),\r\n                    React.createElement(EditPanel, null),\r\n                    React.createElement(SerialisePanel, { songManager: this.state.songManager })),\r\n                React.createElement(\"div\", { className: \"sequencerAppMainPanel\" },\r\n                    React.createElement(PIXITimeline, { ref: this._timelineRef, className: \"sequencerAppMainPanelLeft\", songManager: this.state.songManager }),\r\n                    React.createElement(EffectsChainPanel, { connectionManager: this.state.songManager.connectionManager, hideShowCallback: this._hideShowCallback }))));\r\n    }\r\n}\r\nexport class PIXITimeline extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            pixiApp: null,\r\n        };\r\n        PIXI.settings.ROUND_PIXELS = true;\r\n        this._pixiContainer = React.createRef();\r\n        this.resizePIXIApp = this.resizePIXIApp.bind(this);\r\n    }\r\n    resizePIXIApp() {\r\n        const parent = this.state.pixiApp.view.parentElement;\r\n        this.state.pixiApp.renderer.resize(parent.clientWidth, parent.clientHeight);\r\n        navigationView.currentElement.resize(parent.clientWidth, parent.clientHeight);\r\n        this.state.pixiApp.render();\r\n    }\r\n    componentDidMount() {\r\n        let app = new PIXI.Application();\r\n        app.view.setAttribute(\"oncontextmenu\", \"return false;\");\r\n        app.view.addEventListener(\"mousedown\", function (e) { e.preventDefault(); });\r\n        app.renderer.backgroundColor = UIColors.bgColor;\r\n        this._pixiContainer.current.appendChild(app.view);\r\n        window.addEventListener(\"resize\", this.resizePIXIApp);\r\n        const parent = app.view.parentElement;\r\n        app.renderer.resize(parent.clientWidth, parent.clientHeight);\r\n        let timeline = new TimelineView(app.renderer.width, app.renderer.height, this.props.songManager);\r\n        app.view.addEventListener(\"wheel\", event => navigationView.passWheelEvent(event, app.renderer.view.getBoundingClientRect().left, app.renderer.view.getBoundingClientRect().top));\r\n        navigationView.setStageRenderer(app.stage, app.renderer);\r\n        navigationView.show(timeline);\r\n        this.setState({ pixiApp: app }, this.resizePIXIApp);\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"resize\", this.resizePIXIApp);\r\n        if (this.state.pixiApp != undefined) {\r\n            this.state.pixiApp.destroy(true);\r\n        }\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className },\r\n            React.createElement(\"div\", { id: \"applicationContainer\", ref: this._pixiContainer }));\r\n    }\r\n}\r\n//# sourceMappingURL=SequencerApp.js.map","import * as React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { SequencerApp } from \"./View/ReactUI/SequencerApp\";\r\nlet loaderDiv = document.getElementById(\"loader\");\r\nlet hideLoader = () => {\r\n    loaderDiv.className += \" hide\";\r\n    setTimeout(() => { loaderDiv.parentElement.removeChild(loaderDiv); }, 500);\r\n};\r\ndocument.title = \"WebSequencer\";\r\nrender(React.createElement(SequencerApp, { hideLoader: hideLoader }), document.getElementById('root'));\r\n//# sourceMappingURL=app.js.map"],"names":["boundClass","target","keys","undefined","Reflect","ownKeys","prototype","Object","getOwnPropertyNames","getOwnPropertySymbols","concat","forEach","key","descriptor","getOwnPropertyDescriptor","value","defineProperty","boundMethod","fn","Error","definingProperty","configurable","get","this","hasOwnProperty","boundFn","bind","writable","exports","_len","arguments","length","args","Array","_key","apply","module","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","err","name","getShim","isRequired","ReactPropTypes","array","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","obj","_inputRange","_inputRange2","__esModule","default","activeTrack","disabledInputRange","inputRange","labelContainer","maxLabel","minLabel","slider","sliderContainer","track","valueLabel","_class","_createClass","defineProperties","i","enumerable","Constructor","protoProps","staticProps","_react2","_interopRequireDefault","_propTypes2","_autobindDecorator2","valueTransformer","newObj","call","_interopRequireWildcard","_defaultClassNames2","_label2","_rangePropType2","_valuePropType2","_slider2","_track2","_utils","_keyCodes","_applyDecoratedDescriptor","property","decorators","context","desc","initializer","slice","reverse","reduce","decorator","InputRange","_React$Component","instance","TypeError","_classCallCheck","_this","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","startValue","trackNode","isSliderDragging","lastKeyMoved","subClass","superClass","create","constructor","setPrototypeOf","_inherits","allowSameValues","ariaLabelledby","ariaControls","classNames","disabled","draggableTrack","formatLabel","maxValue","minValue","onChangeStart","onChange","onChangeComplete","step","removeDocumentMouseUpListener","removeDocumentTouchEndListener","getClientRect","position","values","getValueFromProps","isMultiValue","positions","getPositionsFromValues","getTrackClientRect","distanceTo","min","max","currentValues","isObject","isWithinRange","hasStepDifference","updatePositions","getValueFromPosition","transformedValues","getStepValueFromValue","updateValues","shouldUpdate","updateValue","ownerDocument","addEventListener","handleMouseUp","handleTouchEnd","removeEventListener","event","_this2","getPositionFromEvent","requestAnimationFrame","updatePosition","prevEvent","_props","_props$value","stepValue","prevPosition","prevValue","offset","keyCode","LEFT_ARROW","DOWN_ARROW","preventDefault","decrementValue","RIGHT_ARROW","UP_ARROW","incrementValue","_props2","_props2$value","getKeyByPosition","isDefined","handleInteractionStart","handleInteractionEnd","addDocumentMouseUpListener","addDocumentTouchEndListener","_this3","percentages","getPercentagesFromValues","getKeys","map","percentage","_props3","createElement","onSliderDrag","handleSliderDrag","onSliderKeyDown","handleSliderKeyDown","type","_this4","captialize","_this5","componentClassName","getComponentClassName","ref","className","onKeyDown","handleKeyDown","onKeyUp","handleKeyUp","onMouseDown","handleMouseDown","onTouchStart","handleTouchStart","onTrackDrag","handleTrackDrag","onTrackMouseDown","handleTrackMouseDown","renderSliders","renderHiddenInputs","Component","Label","labelValue","children","propTypes","isNumber","Slider","removeDocumentMouseMoveListener","removeDocumentTouchMoveListener","left","handleMouseMove","handleTouchMove","addDocumentMouseMoveListener","addDocumentTouchMoveListener","style","getStyle","draggable","role","tabIndex","Track","trackDragEvent","getBoundingClientRect","width","x","touches","clientX","y","activeTrackStyle","getActiveTrackStyle","_extends","assign","source","getPercentageFromPosition","clientRect","sizePerc","getPercentageFromValue","getPositionFromValue","clamp","valuePerStep","Math","round","charAt","toUpperCase","pointA","pointB","xDiff","pow","yDiff","sqrt","_captialize","_clamp","_distanceTo","_isDefined","_isNumber","_isObject","_length","_typeof","Symbol","iterator","numA","numB","abs","root","result","observable","window","g","React","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","id","loaded","__webpack_modules__","n","getter","d","a","definition","o","globalThis","Function","e","hmd","set","prop","ReactDOM","PIXI","SortedArray","comparator","b","super","_comparator","insert","right","mid","floor","splice","remove","index","indexOf","removeAt","RangeError","elementRemoved","exists","binarySearch","closest","NoteHelper","static","octave","extractOctave","noteNumber","notes","note1","note2","noteStringToNoteNumber","toString","note","parseInt","getRandomValues","rnds8","Uint8Array","rng","crypto","msCrypto","uuid","byteToHex","push","substr","arr","toLowerCase","options","buf","rnds","random","SimpleEvent","_callbacks","callbacks","addListener","callback","removeListener","hasListener","removeAllListeners","emit","BaseEvent","startPosition","duration","_duration","removed","endPosition","eventRemoved","serialise","SecondsBaseEvent","metadata","secondsDuration","_metadata","positionSecondsToQuarterNote","positionQuarterNoteToSeconds","eventType","NoteEvent","pitch","pitchString","_parseQuarterNoteLength","_pitchString","noteStringToFrequency","setDurationString","durationPattern","test","noteLength","RegExp","MetadataEvent","bpm","timeSignature","originalStartPosition","_bpm","_secondsPerBeat","secondsPerBeat","_timeSignature","_quarterNoteMultiplier","quarterNoteMultiplier","SongMetadata","_metaEvents","_metaEventSecondLengths","_metaEventBarLengths","_metaEventBeatLengths","addMetadataEvent","events","getBPM","time","getSecondsPerBeat","getTimeSignature","getQuarterNoteMultiplier","positionQuarterNoteToBars","positionBarsToQuarterNote","positionQuarterNoteToBeats","positionBeatsToQuarterNote","precalculateLengths","indicesToRemove","roundedBarPosition","newPosition","removeMetadataEvent","totalSecondsDuration","totalBarsDuration","totalBeatsDuration","quarterNoteDuration","serialisedEvents","metaEvent","deserialise","metaEvents","console","log","OscillatorInstrument","settings","createDefaults","_settings","_context","_masterGain","createGain","gain","_sources","newOscillator","oscillatorType","oscillator","masterGain","setValueAtTime","currentTime","envelopeEnabled","envelope","connect","AudioNode","input","disconnect","disconnectAll","playNote","start","end","frequency","sourceToUse","sourceAvailable","currentSource","j","usage","noteDuration","scheduleNote","startTime","endTime","sourceGain","volume","attackEnd","releaseStart","release","attack","cancelScheduledValues","setTargetAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime","stop","destroy","destination","createOscillator","EventTimeline","_events","_eventPosition","longestEventIndex","longestEventValue","playbackTime","updatePlaybackTime","addEvent","editEvent","removeEvent","getIndexOfEvent","getEventsUntilTime","eventsToSchedule","getEventsBetweenTimes","foundEvents","songEvents","BaseTrack","scheduleEvent","audioSource","connectionManager","_startTime","_playing","_timeline","_scheduleEvent","_connectionManager","_scheduleEventFunc","quarterNotePosition","scheduleSongEvents","createConnections","connections","timeline","connection","getConnections","possibleConnections","possibleConnectionStrings","quarterNoteTime","songEventHandler","scheduleAllEvents","connectTo","connectionString","removeAllConnections","addConnection","OscillatorTrack","_pitchStrings","highestPitch","highest","distanceBetweenNotes","lowestPitch","lowest","addNote","removeNote","removeNoteByIndex","eventStart","eventEnd","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","next","rejected","done","then","SoundFileInstrument","initialise","_playingNodes","soundData","_audioBuffer","decodeAudioData","getBlobFromBase64","arrayBuffer","playOneShot","bufferSource","createBufferSource","volumeGain","setSoundFile","file","getBase64FromBlob","base64","buffer","reader","FileReader","onload","readAsDataURL","base64blob","byteString","atob","split","ab","ArrayBuffer","ia","charCodeAt","Blob","pop","SoundFileTrack","soundFileDuration","allowOverlaps","addOneShot","removeOneShot","overlapEvent","startPositionSeconds","userContext","userInstance","pipe","param","val","Super","activate","doActivate","activateNode","activateCallback","output","bypass","_bypass","_lastBypassValue","connectInOrder","nodeArray","error","getDefaults","defaults","automate","method","dur","_is","automatable","FLOAT","BOOLEAN","INT","Tuna","_window","AudioContext","webkitAudioContext","__connectified__","proto","oconnect","shimConnect","isPrototypeOf","connectify","dbToWAVolume","db","fmod","tmp","tmp2","pY","p","l","l2","toExponential","match","toFixed","parseFloat","sign","tanh","exp","initValue","userVal","defaultVal","Bitcrusher","properties","bufferSize","processor","createScriptProcessor","phaser","last","onaudioprocess","inputBuffer","getChannelData","outputBuffer","bits","normfreq","Cabinet","convolver","newConvolver","impulsePath","makeupNode","makeupGain","Convolver","impulse","dryLevel","wetLevel","Chorus","attenuator","splitter","createChannelSplitter","delayL","createDelay","delayR","feedbackGainNodeLR","feedbackGainNodeRL","merger","createChannelMerger","lfoL","LFO","delayTime","lfoR","feedback","rate","delay","depth","phase","PI","_delay","_depth","oscillation","_feedback","_rate","Compressor","compNode","createDynamicsCompressor","automakeup","computeMakeup","threshold","ratio","knee","c","_automakeup","createConvolver","dry","filterLow","createBiquadFilter","filterHigh","wet","highCut","lowCut","level","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","response","send","Delay","filter","feedbackNode","cutoff","Filter","Q","resonance","filterType","Gain","gainNode","MoogFilter","in1","in2","in3","in4","out1","out2","out3","out4","f","fb","inputFactor","Overdrive","inputDrive","waveshaper","createWaveShaper","outputDrive","ws_table","Float32Array","k_nSamples","drive","outputGain","curveAmount","algorithmIndex","scaled","_curveAmount","_algorithmIndex","waveshaperAlgorithms","curve","_outputGain","amount","n_samples","k","abx","Panner","panner","createStereoPanner","pan","Phaser","filtersL","filtersR","feedbackGainNodeL","feedbackGainNodeR","filteredSignal","stage","baseModulationFrequency","stereoPhase","filters","_baseModulationFrequency","_stereoPhase","newPhase","_phase","PingPongDelay","stereoToMonoMix","feedbackLevel","delayLeft","delayRight","delayTimeLeft","delayTimeRight","_delayTimeLeft","_delayTimeRight","Tremolo","amplitudeL","amplitudeR","intensity","_intensity","WahWah","envelopeFollower","EnvelopeFollower","sweep","filterBp","filterPeaking","init","automode","sensitivity","baseFrequency","excursionOctaves","_automode","filterFreqTimeout","setFilterFreq","_baseFrequency","_excursionFrequency","_sweep","clearTimeout","setTimeout","_sensitivity","sampleRate","_excursionOctaves","_resonance","jsNode","buffersize","attackTime","releaseTime","_envelope","_attackTime","_attackC","_releaseTime","_releaseC","_callback","_target","activated","returnCompute","compute","current","chan","rms","count","channels","numberOfChannels","_frequency","_phaseInc","_offset","_oscillation","that","sin","EffectsChain","_chainNodes","_tuna","_preGain","preGain","_postGain","postGain","effects","currentEffect","IEffectToEffectObject","effectCount","effectNodes","chainName","addEffect","effect","effectObject","_connectEffect","removeEffect","_disconnectEffect","moveEffect","newIndex","temp","getDelayTime","longestDelay","thisEffectDelay","effectType","find","propertyName","r","_convertPropertyToObject","editable","displayName","possibleEffects","Map","Moog","ConnectionManager","effectsDeserialised","_bus","_possibleConnections","_possibleConnectionStrings","_currentConnections","_chains","bus","chains","removeConnection","addChain","chainNo","removeChain","startsWith","getChain","chain","getChainDelayTime","serialiseChains","serialisedChains","chainSettings","deserialiseChains","newChains","SongManager","lookaheadTime","_quarterNotePosition","playingIntervalIDs","playingChangedEvent","quarterNotePositionChangedEvent","_tracks","_boundQuarterNoteUpdateFunction","quarterNoteUpdateFunction","playing","_internalQuarterNotePosition","_scheduleStop","tracks","addOscillatorTrack","newTrack","addSoundFileTrack","removeTrack","state","resume","setInterval","scheduleNotes","_startSongLength","clearInterval","stopToBeginning","serialisedTracks","trackSettings","saveFileVersion","version","metadataEvents","saveToWAV","getPlaybackLength","song","offlineManager","OfflineSongManager","longestEvent","cachedEffectLengths","chainDelayTime","timeSinceStart","OfflineAudioContext","audioBuffer","startRendering","interleaved","src","dst","wavBytes","isFloat","Uint16Array","numFrames","byteLength","BYTES_PER_ELEMENT","headerBytes","numChannels","bytesPerSample","format","blockAlign","byteRate","dataSize","dv","DataView","writeString","s","setUint8","writeUint32","setUint32","writeUint16","setUint16","getWavHeader","getWavBytes","navigationView","_viewStack","viewDepth","currentElement","setStageRenderer","view","renderer","controlledStage","removeChildren","setDefaultElement","addChild","show","removeChild","back","resize","height","passWheelEvent","canvasX","canvasY","mouseWheelHandler","UIColors","bgColor","fgColor","timelineMarkerColor","metadataEventColor","trackEventColor","trackEventSelectedColor","trackEventHoveredColor","trackEventDeleteColor","trackEventHighlightColor","UIFonts","trackFont","fontFamily","fontSize","fill","UIPositioning","timelineHeaderHeight","sequencerSidebarWidth","timelineSidebarWidth","UITrack","startY","modelTrackID","NoteUITrack","baseTrack","noteGroups","_noteGroups","noteGroupsChanged","base","getNoteGroupsStartingBetweenTime","noteGroupsInRange","noteGroup","getNoteGroupsWithinTime","noteGroupsToReturn","getNoteGroupIndex","addNoteGroup","removeNoteGroup","updateNoteGroups","noteEvent","chosenNoteGroup","newNoteGroup","checkNoteGroupBoundaries","getNoteGroupNotes","noteGroupIndex","SoundFileUITrack","displayActualWidth","eventDuration","getOneShotsBetweenTime","EventSnapType","TimelineMode","MouseClickType","NoteLength","InteractiveContainer","mouseIsOver","interactive","on","pointerDownHandler","pointerMoveHandler","pointerUpHandler","pointerOverHandler","pointerOutHandler","MouseTypeContainer","data","button","_mouseClickType","LeftClick","MiddleClick","RightClick","None","_startPointerPosition","getLocalPosition","parent","distanceSquared","pointerUpClickHandler","pointerUpDragHandler","ObjectPool","_availableObjects","objectCount","getObject","returnObject","currentValue","render","onRelease","setState","IconFileInput","handleClick","_inputRef","click","title","onClick","iconName","zIndex","opacity","files","accept","LabelledCheckbox","label","checked","FAButton","Dropdown","dropdownVisible","_handleDropdownClick","objDivClasses","optionsDivClassName","buttonClassName","ClickOutsideWatcher","optionTitles","DropdownItem","optionClassName","optionClickCallback","BoxSelect","_selectOptionClicked","selectVisible","_selectButton","selectedCallback","selectButtonClassName","display","flexDirection","alignItems","mainButtonClassName","selected","boxSelectTitle","BoxSelectOverlay","selectButton","selectOptionClickedCallback","renderAbove","_overlayContainer","componentDidMount","bottom","innerHeight","overlayClassName","currentButton","top","offsetHeight","SelectionGroup","buttonContents","selectedButton","buttonTitles","SelectionButton","content","onButtonClick","classes","_childRef","Element","contains","document","componentWillUnmount","modalRoot","getElementById","BackgroundModal","_modalRootChild","appendChild","outsideClick","createPortal","LoadingSpinner","ErrorBox","onClose","ErrorModal","LoadingErrorModal","loading","MetadataEditBox","numerator","denominator","modalShown","errorString","handleNumeratorChange","handleNumeratorBlur","handleDenominatorChange","handleSubmit","newNumerator","Number","isNaN","intValue","handleBPMChange","handleBPMBlur","newBpm","onSubmit","TimeSignatureEditBox","onNumeratorBlur","onNumeratorChange","onDenominatorChange","size","pattern","onBlur","timeSignatureStrings","timeSignatureNumbers","MetadataTimelineEvent","_eventEdited","_unmountEditDiv","_graphics","beginFill","drawRect","endFill","_editDiv","_editDivMounted","active","_active","alpha","closestEvent","getGlobalPosition","_mountEditDiv","oldStartPosition","regenerateAroundPosition","setVisible","visible","timeSigNumerator","timeSigDenominator","unmountComponentAtNode","BarHeader","_headerText","_headerGraphics","_metadataTimelineEvent","barNumber","metadataEventPosition","metadataEventActive","setX","clear","text","ScrollableBar","headerContainer","_header","leftBound","rightBound","_barNumber","numberOfBeats","_numberOfBeats","verticalScrollPosition","_verticalScrollPosition","_beatWidth","beatWidth","leftSide","TimelineMarker","redraw","drawPolygon","editType","snapType","Beat","Quarter","_noteLengthDisabled","noteLengthDisabledChange","markerCenteredChanged","noteLengthDisabled","markerCentered","_markerCentered","ScrollableTimeline","dragType","startX","endX","endY","songManager","timelineMode","Edit","_zoomScale","_selected","_onScreen","timelineViewChange","_scrollObjects","_barPool","_maskGraphics","mask","_interactivityRect","resizeInteractiveArea","_barContainer","_headerContainer","_metadataEventContainer","_eventContainer","_timelineMarker","_timelineMarkerAnim","_playingStateChanged","_repositionTimelineMarker","barHeight","contentHeight","rightSideOffset","lastBar","bar","_initialiseScrollableBar","_returnScrollableBar","_startXPosition","moveDelta","anchor","leftSideOffset","firstBar","Playback","barPosition","beatPosition","_getBarFromStageCoordinates","_offsetChildren","stageX","stageY","clientY","numBeats","deltaY","_regenerateTimeline","_getStageCoordinatesFromBar","updateVerticalScroll","startBarPosition","addedHandler","removedHandler","pixelOffset","child","_checkBarsFillScreen","fromBar","toBar","currentBar","currentXPosition","generatedABar","_initialiseTrackTimelineEvents","reinitialise","_redrawTimelineMarker","_scrollToPosition","scrollAmount","xPosition","snapCoordinateToDragType","getPixelOffsetFromDragType","HalfBeat","QuarterBeat","EighthBeat","snapBeatToDragType","getTimelineEventXWidth","getTimelineEventX","NoteGroupMarker","triangleSize","_leftHandle","NoteGroupHandle","_rightHandle","lineHeight","moveTo","lineTo","mouseState","buttons","_pointerDownHandler","_pointerUpHandler","SequencerTimeline","startFrom","_contentHeight","_initialiseNoteGroups","_noteGroupContainer","_noteGroupPool","_newEventGraphics","addChildAt","offsetContentHeight","noteHeight","_newEventData","mousePos","noteString","noteNumberToNoteString","noteLengthDict","noteData","beginHole","endHole","_initialiseNote","timelineEvent","NoteTimelineEvent","borderHeight","noteGroupMarker","marker","Whole","Half","Eighth","Sixteenth","ThirtySecond","TrackTimelineEvent","borderLeft","borderRight","paddingHeight","selectedBorderWidth","_hovered","_opacity","_hoveredColor","_contentGraphics","_selectedGraphics","assignedWidth","assignedHeight","eventStartPosition","hovered","redrawSelected","hoveredColor","stopPropagation","_startYPosition","_snappedStartPointerPosition","clone","newEventStart","_destroyed","clickHandler","deleteEvent","point","moveX","moveY","dragDistance","dragHandler","NoteGroupTimelineEvent","clickCallback","_noteGroup","_clickCallback","_notes","setNotes","highestNote","lowestNote","noteRange","positionMap","noteMarginHeight","beatChange","quarterNoteChange","groups","timePeriodClear","OneShotTimelineEvent","_modelEventRemoved","newStartPosition","eventsInPeriod","eventIndex","oldNoteNumber","noteYPosition","_lastNoteNumber","newNotePitch","randomString","substring","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","initialState","UITrackStore","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","dispatch","action","listeners","replaceReducer","nextReducer","_ref","outerSubscribe","observer","observeState","unsubscribe","newTracks","t","SongTimeline","showSequencerCallback","_noteGroupTimelineEvents","_showSequencerCallback","_UITrackUpdateHandler","_cleanupListener","existingEvents","_initialiseNoteGroup","_initialiseOneShotTimelineEvent","regenerateTracks","reinitialiseTrack","regenerateNoteGroups","group","TrackList","sidebarWidth","_verticalScroll","_sidebarWidth","trackEdited","_gainChanged","_nameChanged","_soundFileChanged","_allowOverlapChanged","_displayActualWidthChanged","_updateSoundFile","_deleteTrack","_connectionChanged","drawTracks","_envelopeEnabledChanged","_envelopeAttackChanged","_envelopeReleaseChanged","_oscillatorTypeChanged","_trackListGraphics","_trackLineGraphics","_trackSettingsContainer","overflow","_rerenderList","removeProperty","modalDiv","objecturl","URL","createObjectURL","onloadFunc","blob","soundFileTrack","connectionIndex","TrackSettingsList","onNameChange","onGainChange","onSoundFileUpdate","onAllowOverlapChange","onDisplayActualWidthChange","onDeleteTrack","onConnectionChanged","verticalScroll","onOscillatorTypeChanged","onEnvelopeEnabledChanged","onEnvelopeAttackChanged","onEnvelopeReleaseChanged","SoundFileTrackSettingsBox","deleteTrack","soundFileChange","displayActualWidthChange","allowOverlap","allowOverlapChange","connectionOptions","connectionChanged","instrument","oscillatorProps","enabled","enabledChanged","attackChanged","releaseChanged","OscillatorTrackSettingsBox","oscillatorTypeChanged","envelopeSettings","handleNameChange","handleGainChange","handleConnectionChanged","es","oscillatorOptions","OscillatorEnvelope","detailsVisible","_openCloseButton","OscillatorEnvelopeDetails","mainButton","lastAttackValue","lastReleaseValue","offsetWidth","VerticalScrollView","scrollingEnabled","_sidebarPosition","oldVSP","_startVerticalScrollPosition","SequencerView","_sidebarUI","_noteList","SequencerNotes","numNotes","_backButtonContainer","screenWidth","screenHeight","_numNotes","_horizontalLines","currentHeight","TimelineView","_songManager","showSequencer","_trackEdited","trackList","_newTrackDropdownContainer","_renderNewTrackObject","sequencerView","lastTrack","endHeight","EditPanel","_snapTypeChanged","_lengthTypeChanged","_lengthEnabledChanged","selectedSnapButton","selectedLengthButton","lengthEnabled","Fraction","PlaybackPanel","_markerCenteredChanged","markerCentred","PlayPauseButton","playFunction","pauseFunction","visibility","icon","ReactBeautifulDnd","EffectsChainPanel","_deserialiseFunction","forceUpdate","_effectChanged","_effectRemoved","_newEffect","_moveEffect","_selectedChainChanged","_deleteCurrentChain","_preGainChanged","_postGainChanged","currentChainNumber","hidden","currentChain","chainsAndBus","newEffectIndex","EffectsChainInfo","effectTitles","effectIndex","propertyIndex","oldIndex","_hidePanel","hideShowCallback","curChain","effectsChain","effectPropertyChanged","newEffect","effectRemoved","preGainValue","preGainValueChanged","postGainValue","postGainValueChanged","connectionChangedCallback","_onDragEnd","ChainEffect","onPropertyChange","onDelete","marginTop","DragDropContext","onDragEnd","Droppable","droppableId","provided","snapshot","isDraggingOver","innerRef","droppableProps","placeholder","from","collapsed","_contentRef","Draggable","draggableId","isDragging","draggableProps","dragHandleProps","marginRight","maxHeight","scrollHeight","RangeEffectProperty","NumberEffectProperty","StringEffectProperty","BooleanEffectProperty","ListEffectProperty","nameToUse","SerialisePanel","_modalCloseFunc","modalLoading","modalText","_serialise","_deserialise","_getFile","_saveToWAV","modelSettings","songSettings","UITracks","outputString","JSON","stringify","href","download","Date","toLocaleDateString","onloadend","parsed","parse","fileType","modelTrack","readAsText","_a","SequencerApp","_hideShowCallback","_timelineRef","resizePIXIApp","hideLoader","PIXITimeline","pixiApp","_pixiContainer","parentElement","clientWidth","clientHeight","app","setAttribute","backgroundColor","loaderDiv"],"sourceRoot":""}