{"version":3,"sources":["webpack://web-sequencer/./node_modules/autobind-decorator/lib/index.js","webpack://web-sequencer/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://web-sequencer/./node_modules/prop-types/index.js","webpack://web-sequencer/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/index.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/default-class-names.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/input-range.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/key-codes.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/label.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/range-prop-type.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/slider.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/track.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/value-prop-type.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/input-range/value-transformer.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/captialize.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/clamp.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/distance-to.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/index.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/is-defined.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/is-number.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/is-object.js","webpack://web-sequencer/./node_modules/react-input-range/lib/js/utils/length.js","webpack://web-sequencer/./node_modules/symbol-observable/es/index.js","webpack://web-sequencer/./node_modules/symbol-observable/es/ponyfill.js","webpack://web-sequencer/external \"React\"","webpack://web-sequencer/webpack/bootstrap","webpack://web-sequencer/webpack/runtime/compat get default export","webpack://web-sequencer/webpack/runtime/define property getters","webpack://web-sequencer/webpack/runtime/global","webpack://web-sequencer/webpack/runtime/harmony module decorator","webpack://web-sequencer/webpack/runtime/hasOwnProperty shorthand","webpack://web-sequencer/external \"ReactDOM\"","webpack://web-sequencer/external \"PIXI\"","webpack://web-sequencer/./build/HelperModules/SortedArray.js","webpack://web-sequencer/./build/HelperModules/NoteHelper.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/rng.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/regex.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/validate.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://web-sequencer/./node_modules/uuid/dist/esm-browser/v4.js","webpack://web-sequencer/./build/HelperModules/SimpleEvent.js","webpack://web-sequencer/./build/Model/Notation/SongEvents.js","webpack://web-sequencer/./build/Model/SongManagement/SongMetadata.js","webpack://web-sequencer/./build/Model/Nodes/OscillatorInstrument.js","webpack://web-sequencer/./build/Model/Notation/EventTimeline.js","webpack://web-sequencer/./build/Model/Tracks/BaseTrack.js","webpack://web-sequencer/./build/Model/Tracks/OscillatorTrack.js","webpack://web-sequencer/./build/Model/Nodes/SoundFileInstrument.js","webpack://web-sequencer/./build/Model/Tracks/SoundFileTrack.js","webpack://web-sequencer/./dependencies/tuna.js","webpack://web-sequencer/./build/Model/Nodes/EffectsChain.js","webpack://web-sequencer/./build/Model/SongManagement/ConnectionManager.js","webpack://web-sequencer/./build/Model/SongManagement/SongManager.js","webpack://web-sequencer/./build/View/Shared/NavigationView.js","webpack://web-sequencer/./build/View/Settings/UITheme.js","webpack://web-sequencer/./build/View/Shared/UITrack.js","webpack://web-sequencer/./build/View/Settings/Enums.js","webpack://web-sequencer/./build/View/Shared/InteractiveContainer.js","webpack://web-sequencer/./build/HelperModules/PointHelper.js","webpack://web-sequencer/./build/HelperModules/ObjectPool.js","webpack://web-sequencer/./build/View/SharedReact/BasicElements.js","webpack://web-sequencer/./build/View/SharedReact/Modal.js","webpack://web-sequencer/./build/View/Shared/MetadataEditBox.js","webpack://web-sequencer/./build/View/Shared/MetadataTimelineEvent.js","webpack://web-sequencer/./build/View/Shared/ScrollableBarHeader.js","webpack://web-sequencer/./build/View/Shared/ScrollableBar.js","webpack://web-sequencer/./build/View/Shared/TimelineMarker.js","webpack://web-sequencer/./build/View/Settings/EditType.js","webpack://web-sequencer/./build/View/Shared/ScrollableTimeline.js","webpack://web-sequencer/./build/View/Sequencer/NoteGroupMarker.js","webpack://web-sequencer/./build/View/Shared/MouseState.js","webpack://web-sequencer/./build/View/Sequencer/SequencerTimeline.js","webpack://web-sequencer/./build/View/Shared/TrackTimelineEvent.js","webpack://web-sequencer/./node_modules/redux/es/redux.js","webpack://web-sequencer/./build/View/ReactUI/UITrackStore.js","webpack://web-sequencer/./build/View/Timeline/SongTimeline.js","webpack://web-sequencer/./build/View/Timeline/TrackList.js","webpack://web-sequencer/./build/View/Shared/VerticalScrollView.js","webpack://web-sequencer/./build/View/Sequencer/SequencerView.js","webpack://web-sequencer/./build/View/Timeline/TimelineView.js","webpack://web-sequencer/./build/View/ReactUI/EditPanel.js","webpack://web-sequencer/./build/View/ReactUI/PlaybackPanel.js","webpack://web-sequencer/external \"ReactBeautifulDnd\"","webpack://web-sequencer/./build/View/ReactUI/EffectsChainPanel.js","webpack://web-sequencer/./build/View/ReactUI/SerialisePanel.js","webpack://web-sequencer/./build/View/ReactUI/SequencerApp.js","webpack://web-sequencer/./build/app.js"],"names":["boundClass","target","keys","undefined","Reflect","ownKeys","prototype","Object","getOwnPropertyNames","getOwnPropertySymbols","concat","forEach","key","descriptor","getOwnPropertyDescriptor","value","defineProperty","boundMethod","fn","Error","definingProperty","configurable","get","this","hasOwnProperty","boundFn","bind","writable","exports","_len","arguments","length","args","Array","_key","apply","module","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","err","name","getShim","isRequired","ReactPropTypes","array","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","obj","_inputRange","_inputRange2","__esModule","default","activeTrack","disabledInputRange","inputRange","labelContainer","maxLabel","minLabel","slider","sliderContainer","track","valueLabel","_class","_createClass","defineProperties","i","enumerable","Constructor","protoProps","staticProps","_react2","_interopRequireDefault","_propTypes2","_autobindDecorator2","valueTransformer","newObj","call","_interopRequireWildcard","_defaultClassNames2","_label2","_rangePropType2","_valuePropType2","_slider2","_track2","_utils","_keyCodes","_applyDecoratedDescriptor","property","decorators","context","desc","initializer","slice","reverse","reduce","decorator","InputRange","_React$Component","instance","TypeError","_classCallCheck","_this","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","startValue","trackNode","isSliderDragging","lastKeyMoved","subClass","superClass","create","constructor","setPrototypeOf","_inherits","allowSameValues","ariaLabelledby","ariaControls","classNames","disabled","draggableTrack","formatLabel","maxValue","minValue","onChangeStart","onChange","onChangeComplete","step","removeDocumentMouseUpListener","removeDocumentTouchEndListener","getClientRect","position","values","getValueFromProps","isMultiValue","positions","getPositionsFromValues","getTrackClientRect","distanceTo","min","max","currentValues","isObject","isWithinRange","hasStepDifference","updatePositions","getValueFromPosition","transformedValues","getStepValueFromValue","updateValues","shouldUpdate","updateValue","ownerDocument","addEventListener","handleMouseUp","handleTouchEnd","removeEventListener","event","_this2","getPositionFromEvent","requestAnimationFrame","updatePosition","prevEvent","_props","_props$value","stepValue","prevPosition","prevValue","offset","keyCode","LEFT_ARROW","DOWN_ARROW","preventDefault","decrementValue","RIGHT_ARROW","UP_ARROW","incrementValue","_props2","_props2$value","getKeyByPosition","isDefined","handleInteractionStart","handleInteractionEnd","addDocumentMouseUpListener","addDocumentTouchEndListener","_this3","percentages","getPercentagesFromValues","getKeys","map","percentage","_props3","createElement","onSliderDrag","handleSliderDrag","onSliderKeyDown","handleSliderKeyDown","type","_this4","captialize","_this5","componentClassName","getComponentClassName","ref","className","onKeyDown","handleKeyDown","onKeyUp","handleKeyUp","onMouseDown","handleMouseDown","onTouchStart","handleTouchStart","onTrackDrag","handleTrackDrag","onTrackMouseDown","handleTrackMouseDown","renderSliders","renderHiddenInputs","Component","Label","labelValue","children","propTypes","isNumber","Slider","removeDocumentMouseMoveListener","removeDocumentTouchMoveListener","left","handleMouseMove","handleTouchMove","addDocumentMouseMoveListener","addDocumentTouchMoveListener","style","getStyle","draggable","role","tabIndex","Track","trackDragEvent","getBoundingClientRect","width","x","touches","clientX","y","activeTrackStyle","getActiveTrackStyle","_extends","assign","source","getPercentageFromPosition","clientRect","sizePerc","getPercentageFromValue","getPositionFromValue","clamp","valuePerStep","Math","round","charAt","toUpperCase","pointA","pointB","xDiff","pow","yDiff","sqrt","_captialize","_clamp","_distanceTo","_isDefined","_isNumber","_isObject","_length","_typeof","Symbol","iterator","numA","numB","abs","root","result","observable","window","g","React","__webpack_module_cache__","__webpack_require__","moduleId","id","loaded","__webpack_modules__","n","getter","d","a","definition","o","globalThis","Function","e","hmd","set","prop","ReactDOM","PIXI","SortedArray","comparator","b","super","_comparator","right","mid","floor","splice","index","indexOf","RangeError","elementRemoved","binarySearch","closest","NoteHelper","octave","extractOctave","noteNumber","notes","note1","note2","noteStringToNoteNumber","toString","note","parseInt","getRandomValues","rnds8","Uint8Array","rng","crypto","msCrypto","uuid","byteToHex","push","substr","arr","toLowerCase","options","buf","rnds","random","SimpleEvent","_callbacks","callback","BaseEvent","startPosition","duration","_duration","removed","emit","SecondsBaseEvent","metadata","secondsDuration","_metadata","positionSecondsToQuarterNote","positionQuarterNoteToSeconds","serialise","eventType","NoteEvent","pitch","pitchString","_parseQuarterNoteLength","_pitchString","noteStringToFrequency","durationPattern","test","noteLength","RegExp","MetadataEvent","bpm","timeSignature","originalStartPosition","_bpm","_secondsPerBeat","_timeSignature","_quarterNoteMultiplier","SongMetadata","_metaEvents","_metaEventSecondLengths","_metaEventBarLengths","_metaEventBeatLengths","addMetadataEvent","time","secondsPerBeat","quarterNoteMultiplier","insert","precalculateLengths","indicesToRemove","roundedBarPosition","newPosition","removeAt","totalSecondsDuration","totalBarsDuration","totalBeatsDuration","quarterNoteDuration","serialisedEvents","metaEvent","metaEvents","console","log","OscillatorInstrument","settings","createDefaults","_settings","_context","_masterGain","createGain","gain","_sources","newOscillator","oscillator","oscillatorType","setValueAtTime","currentTime","envelopeEnabled","envelope","AudioNode","connect","input","disconnect","start","end","frequency","sourceToUse","sourceAvailable","currentSource","j","usage","noteDuration","scheduleNote","startTime","endTime","sourceGain","volume","attackEnd","releaseStart","release","attack","cancelScheduledValues","setTargetAtTime","linearRampToValueAtTime","exponentialRampToValueAtTime","destination","createOscillator","EventTimeline","_events","_eventPosition","longestEventIndex","longestEventValue","events","addEvent","getIndexOfEvent","updatePlaybackTime","eventsToSchedule","foundEvents","endPosition","songEvents","BaseTrack","scheduleEvent","audioSource","connectionManager","_startTime","_playing","_timeline","_scheduleEvent","_connectionManager","_scheduleEventFunc","quarterNotePosition","scheduleSongEvents","addListener","deserialise","createConnections","connections","getConnections","possibleConnectionStrings","stop","quarterNoteTime","getEventsUntilTime","songEventHandler","connectionString","possibleConnections","removeAllConnections","addConnection","timeline","destroy","removeListener","OscillatorTrack","_pitchStrings","highest","distanceBetweenNotes","lowest","removeEvent","eventStart","eventEnd","playNote","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","next","rejected","done","then","SoundFileInstrument","_playingNodes","initialise","soundData","_audioBuffer","decodeAudioData","getBlobFromBase64","arrayBuffer","bufferSource","createBufferSource","volumeGain","file","getBase64FromBlob","base64","buffer","reader","FileReader","onload","readAsDataURL","base64blob","byteString","atob","split","ab","ArrayBuffer","ia","charCodeAt","Blob","pop","SoundFileTrack","allowOverlaps","getEventsBetweenTimes","setSoundFile","overlapEvent","startPositionSeconds","playOneShot","userContext","userInstance","pipe","param","val","Super","activate","doActivate","activateNode","activateCallback","output","bypass","_bypass","_lastBypassValue","connectInOrder","nodeArray","error","getDefaults","defaults","automate","method","dur","_is","automatable","FLOAT","BOOLEAN","INT","Tuna","_window","AudioContext","webkitAudioContext","__connectified__","proto","oconnect","shimConnect","isPrototypeOf","connectify","dbToWAVolume","db","fmod","tmp","tmp2","pY","p","l","l2","toExponential","match","toFixed","parseFloat","sign","tanh","exp","initValue","userVal","defaultVal","Bitcrusher","properties","bufferSize","processor","createScriptProcessor","phaser","last","onaudioprocess","inputBuffer","getChannelData","outputBuffer","bits","normfreq","Cabinet","convolver","newConvolver","impulsePath","makeupNode","makeupGain","Convolver","impulse","dryLevel","wetLevel","Chorus","attenuator","splitter","createChannelSplitter","delayL","createDelay","delayR","feedbackGainNodeLR","feedbackGainNodeRL","merger","createChannelMerger","lfoL","LFO","delayTime","lfoR","feedback","rate","delay","depth","phase","PI","_delay","_depth","oscillation","_feedback","_rate","Compressor","compNode","createDynamicsCompressor","automakeup","computeMakeup","threshold","ratio","knee","c","_automakeup","createConvolver","dry","filterLow","createBiquadFilter","filterHigh","wet","highCut","lowCut","level","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","response","send","Delay","filter","feedbackNode","cutoff","Filter","Q","resonance","filterType","Gain","gainNode","MoogFilter","in1","in2","in3","in4","out1","out2","out3","out4","f","fb","inputFactor","Overdrive","inputDrive","waveshaper","createWaveShaper","outputDrive","ws_table","Float32Array","k_nSamples","drive","outputGain","curveAmount","algorithmIndex","scaled","_drive","_curveAmount","_algorithmIndex","waveshaperAlgorithms","curve","_outputGain","amount","n_samples","k","abx","Panner","panner","createStereoPanner","pan","Phaser","filtersL","filtersR","feedbackGainNodeL","feedbackGainNodeR","filteredSignal","stage","baseModulationFrequency","stereoPhase","filters","_baseModulationFrequency","_stereoPhase","newPhase","_phase","PingPongDelay","stereoToMonoMix","feedbackLevel","delayLeft","delayRight","delayTimeLeft","delayTimeRight","_delayTimeLeft","_delayTimeRight","Tremolo","amplitudeL","amplitudeR","intensity","_intensity","WahWah","envelopeFollower","EnvelopeFollower","sweep","filterBp","filterPeaking","init","automode","sensitivity","baseFrequency","excursionOctaves","_automode","filterFreqTimeout","setFilterFreq","_baseFrequency","_excursionFrequency","_sweep","clearTimeout","setTimeout","_sensitivity","sampleRate","_excursionOctaves","_resonance","jsNode","buffersize","attackTime","releaseTime","_envelope","_attackTime","_attackC","_releaseTime","_releaseC","_callback","_target","activated","returnCompute","compute","current","chan","rms","count","channels","numberOfChannels","_frequency","_phaseInc","_offset","_oscillation","that","sin","EffectsChain","_chainNodes","_tuna","_preGain","preGain","_postGain","postGain","effects","currentEffect","IEffectToEffectObject","chainName","effect","effectObject","_connectEffect","_disconnectEffect","newIndex","effectCount","temp","longestDelay","thisEffectDelay","effectType","find","propertyName","r","_convertPropertyToObject","editable","displayName","possibleEffects","Map","Moog","ConnectionManager","effectsDeserialised","_bus","_possibleConnections","_possibleConnectionStrings","_currentConnections","_chains","disconnectAll","connection","chainNo","startsWith","chain","getChain","getDelayTime","serialisedChains","chains","bus","chainSettings","newChains","addChain","SongManager","lookaheadTime","_quarterNotePosition","playingIntervalIDs","playingChangedEvent","quarterNotePositionChangedEvent","_tracks","_boundQuarterNoteUpdateFunction","quarterNoteUpdateFunction","_internalQuarterNotePosition","_scheduleStop","newTrack","state","resume","setInterval","scheduleNotes","_startSongLength","clearInterval","serialisedTracks","trackSettings","serialiseChains","saveFileVersion","version","deserialiseChains","metadataEvents","tracks","addOscillatorTrack","addSoundFileTrack","removeAllListeners","getPlaybackLength","song","offlineManager","OfflineSongManager","saveToWAV","longestEvent","cachedEffectLengths","playbackTime","chainDelayTime","getChainDelayTime","getSecondsPerBeat","getQuarterNoteMultiplier","playing","timeSinceStart","stopToBeginning","OfflineAudioContext","scheduleAllEvents","audioBuffer","startRendering","interleaved","src","dst","wavBytes","isFloat","Uint16Array","numFrames","byteLength","BYTES_PER_ELEMENT","headerBytes","numChannels","bytesPerSample","format","blockAlign","byteRate","dataSize","dv","DataView","writeString","s","setUint8","writeUint32","setUint32","writeUint16","setUint16","getWavHeader","getWavBytes","navigationView","_viewStack","view","renderer","controlledStage","removeChildren","addChild","removeChild","currentElement","resize","height","canvasX","canvasY","mouseWheelHandler","UIColors","bgColor","fgColor","timelineMarkerColor","metadataEventColor","trackEventColor","trackEventSelectedColor","trackEventHoveredColor","trackEventDeleteColor","trackEventHighlightColor","UIFonts","trackFont","fontFamily","fontSize","fill","UIPositioning","timelineHeaderHeight","sequencerSidebarWidth","timelineSidebarWidth","UITrack","startY","modelTrackID","NoteUITrack","baseTrack","noteGroups","_noteGroups","noteGroupsChanged","base","noteGroupsInRange","noteGroup","noteGroupsToReturn","noteEvent","addNoteGroup","getNoteGroupsWithinTime","chosenNoteGroup","removeNoteGroup","newNoteGroup","checkNoteGroupBoundaries","getNoteGroupIndex","getNoteGroupNotes","addNote","updateNoteGroups","editEvent","noteGroupIndex","removeNote","SoundFileUITrack","displayActualWidth","soundFileDuration","EventSnapType","TimelineMode","MouseClickType","NoteLength","InteractiveContainer","mouseIsOver","interactive","on","pointerDownHandler","pointerMoveHandler","pointerUpHandler","pointerOverHandler","pointerOutHandler","MouseTypeContainer","data","button","_mouseClickType","LeftClick","MiddleClick","RightClick","None","_startPointerPosition","getLocalPosition","parent","distanceSquared","pointerUpClickHandler","pointerUpDragHandler","ObjectPool","_availableObjects","currentValue","onRelease","setState","IconFileInput","_inputRef","click","title","onClick","handleClick","iconName","zIndex","opacity","files","accept","LabelledCheckbox","label","checked","FAButton","Dropdown","dropdownVisible","objDivClasses","optionsDivClassName","buttonClassName","_handleDropdownClick","ClickOutsideWatcher","optionTitles","DropdownItem","optionClassName","optionClickCallback","BoxSelect","_selectOptionClicked","selectVisible","_selectButton","selectedCallback","selectButtonClassName","display","flexDirection","alignItems","mainButtonClassName","selected","boxSelectTitle","BoxSelectOverlay","selectButton","selectOptionClickedCallback","renderAbove","_overlayContainer","bottom","innerHeight","overlayClassName","currentButton","top","offsetHeight","SelectionGroup","buttonContents","selectedButton","buttonTitles","SelectionButton","content","onButtonClick","classes","_childRef","Element","contains","document","modalRoot","getElementById","BackgroundModal","_modalRootChild","appendChild","outsideClick","createPortal","LoadingSpinner","ErrorBox","onClose","ErrorModal","LoadingErrorModal","loading","MetadataEditBox","numerator","denominator","modalShown","errorString","handleNumeratorChange","handleNumeratorBlur","handleDenominatorChange","handleSubmit","newNumerator","NaN","intValue","newBpm","onSubmit","TimeSignatureEditBox","onNumeratorBlur","onNumeratorChange","onDenominatorChange","size","pattern","onBlur","handleBPMBlur","handleBPMChange","timeSignatureStrings","timeSignatureNumbers","MetadataTimelineEvent","_eventEdited","_unmountEditDiv","_graphics","beginFill","drawRect","endFill","_editDiv","_editDivMounted","_active","alpha","active","closestEvent","getGlobalPosition","_mountEditDiv","removeMetadataEvent","oldStartPosition","regenerateAroundPosition","positionQuarterNoteToBars","visible","timeSigNumerator","timeSigDenominator","render","unmountComponentAtNode","BarHeader","_headerText","_headerGraphics","_metadataTimelineEvent","barNumber","metadataEventPosition","metadataEventActive","setX","clear","text","setVisible","ScrollableBar","headerContainer","_header","_barNumber","_numberOfBeats","_verticalScrollPosition","_beatWidth","numberOfBeats","beatWidth","leftSide","TimelineMarker","drawPolygon","editType","snapType","Beat","Quarter","_noteLengthDisabled","noteLengthDisabledChange","markerCenteredChanged","_markerCentered","ScrollableTimeline","startX","endX","endY","songManager","timelineMode","Edit","_zoomScale","_selected","_onScreen","timelineViewChange","_scrollObjects","_barPool","_maskGraphics","mask","_interactivityRect","resizeInteractiveArea","_barContainer","_headerContainer","_metadataEventContainer","_eventContainer","_timelineMarker","_timelineMarkerAnim","_playingStateChanged","_repositionTimelineMarker","barHeight","contentHeight","rightSideOffset","rightBound","lastBar","bar","_initialiseScrollableBar","_returnScrollableBar","_startXPosition","moveDelta","leftBound","anchor","leftSideOffset","firstBar","Playback","barPosition","beatPosition","_getBarFromStageCoordinates","positionBarsToQuarterNote","_offsetChildren","markerCentered","stageX","stageY","clientY","numBeats","deltaY","_regenerateTimeline","_getStageCoordinatesFromBar","verticalScrollPosition","startBarPosition","pixelOffset","child","_checkBarsFillScreen","fromBar","toBar","currentBar","currentXPosition","generatedABar","_initialiseTrackTimelineEvents","reinitialise","_redrawTimelineMarker","scrollAmount","getTimeSignature","xPosition","objectCount","getObject","returnObject","getPixelOffsetFromDragType","dragType","HalfBeat","QuarterBeat","EighthBeat","getTimelineEventX","positionQuarterNoteToBeats","hasListener","_scrollToPosition","redraw","NoteGroupMarker","triangleSize","_leftHandle","NoteGroupHandle","_rightHandle","getTimelineEventXWidth","lineHeight","moveTo","lineTo","mouseState","buttons","_pointerDownHandler","_pointerUpHandler","SequencerTimeline","startFrom","_contentHeight","_initialiseNoteGroups","_noteGroupContainer","_noteGroupPool","_newEventGraphics","addChildAt","noteHeight","_newEventData","mousePos","noteString","noteNumberToNoteString","offsetContentHeight","snapBeatToDragType","noteLengthDict","noteData","beginHole","endHole","_initialiseNote","addedHandler","noteLengthDisabled","timelineEvent","NoteTimelineEvent","borderHeight","noteGroupMarker","marker","Whole","Half","Eighth","Sixteenth","ThirtySecond","TrackTimelineEvent","borderLeft","borderRight","paddingHeight","selectedBorderWidth","_hovered","_opacity","_hoveredColor","_contentGraphics","_selectedGraphics","assignedWidth","assignedHeight","eventStartPosition","eventDuration","redrawSelected","hovered","stopPropagation","hoveredColor","_startYPosition","_snappedStartPointerPosition","clone","snapCoordinateToDragType","newEventStart","_destroyed","clickHandler","deleteEvent","point","moveX","moveY","dragDistance","dragHandler","NoteGroupTimelineEvent","clickCallback","_noteGroup","_clickCallback","_notes","setNotes","highestPitch","lowestPitch","highestNote","lowestNote","noteRange","positionMap","noteMarginHeight","beatChange","positionBeatsToQuarterNote","quarterNoteChange","groups","timePeriodClear","OneShotTimelineEvent","_modelEventRemoved","newStartPosition","eventsInPeriod","eventIndex","oldNoteNumber","noteYPosition","_lastNoteNumber","newNotePitch","randomString","substring","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","initialState","UITrackStore","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","dispatch","action","listeners","replaceReducer","nextReducer","_ref","outerSubscribe","observer","observeState","unsubscribe","newTracks","t","SongTimeline","showSequencerCallback","_noteGroupTimelineEvents","_showSequencerCallback","_UITrackUpdateHandler","_cleanupListener","existingEvents","getOneShotsBetweenTime","_initialiseNoteGroup","addOneShot","_initialiseOneShotTimelineEvent","regenerateNoteGroups","group","regenerateTracks","TrackList","sidebarWidth","_verticalScroll","_sidebarWidth","trackEdited","_gainChanged","_nameChanged","_soundFileChanged","_allowOverlapChanged","_displayActualWidthChanged","_updateSoundFile","_deleteTrack","_connectionChanged","drawTracks","_envelopeEnabledChanged","_envelopeAttackChanged","_envelopeReleaseChanged","_oscillatorTypeChanged","_trackListGraphics","_trackLineGraphics","_trackSettingsContainer","overflow","_rerenderList","removeProperty","masterGain","modalDiv","objecturl","URL","createObjectURL","onloadFunc","blob","soundFileTrack","connectionIndex","connectTo","removeTrack","TrackSettingsList","onNameChange","onGainChange","onSoundFileUpdate","onAllowOverlapChange","onDisplayActualWidthChange","onDeleteTrack","onConnectionChanged","verticalScroll","onOscillatorTypeChanged","onEnvelopeEnabledChanged","onEnvelopeAttackChanged","onEnvelopeReleaseChanged","SoundFileTrackSettingsBox","deleteTrack","soundFileChange","displayActualWidthChange","allowOverlap","allowOverlapChange","connectionOptions","connectionChanged","instrument","oscillatorProps","enabled","enabledChanged","attackChanged","releaseChanged","OscillatorTrackSettingsBox","oscillatorTypeChanged","envelopeSettings","handleNameChange","handleGainChange","handleConnectionChanged","es","oscillatorOptions","OscillatorEnvelope","detailsVisible","_openCloseButton","OscillatorEnvelopeDetails","mainButton","lastAttackValue","lastReleaseValue","offsetWidth","VerticalScrollView","scrollingEnabled","_sidebarPosition","removedHandler","oldVSP","updateVerticalScroll","_startVerticalScrollPosition","SequencerView","_sidebarUI","_noteList","SequencerNotes","numNotes","_backButtonContainer","back","screenWidth","screenHeight","_numNotes","_horizontalLines","currentHeight","TimelineView","_songManager","showSequencer","_trackEdited","trackList","_newTrackDropdownContainer","_renderNewTrackObject","sequencerView","show","reinitialiseTrack","lastTrack","endHeight","EditPanel","_snapTypeChanged","_lengthTypeChanged","_lengthEnabledChanged","selectedSnapButton","selectedLengthButton","lengthEnabled","Fraction","PlaybackPanel","_markerCenteredChanged","markerCentred","PlayPauseButton","playFunction","pauseFunction","visibility","icon","ReactBeautifulDnd","EffectsChainPanel","_deserialiseFunction","forceUpdate","_effectChanged","_effectRemoved","_newEffect","_moveEffect","_selectedChainChanged","_deleteCurrentChain","_preGainChanged","_postGainChanged","currentChainNumber","hidden","newEffectIndex","currentChain","addEffect","EffectsChainInfo","effectTitles","effectIndex","propertyIndex","effectNodes","removeEffect","oldIndex","moveEffect","hideShowCallback","removeChain","curChain","chainsAndBus","_hidePanel","effectsChain","effectPropertyChanged","newEffect","effectRemoved","preGainValue","preGainValueChanged","postGainValue","postGainValueChanged","connectionChangedCallback","_onDragEnd","ChainEffect","onPropertyChange","onDelete","marginTop","DragDropContext","onDragEnd","Droppable","droppableId","provided","snapshot","isDraggingOver","innerRef","droppableProps","placeholder","from","collapsed","_contentRef","Draggable","draggableId","isDragging","draggableProps","dragHandleProps","marginRight","maxHeight","scrollHeight","RangeEffectProperty","NumberEffectProperty","StringEffectProperty","BooleanEffectProperty","ListEffectProperty","nameToUse","SerialisePanel","_modalCloseFunc","modalLoading","modalText","_serialise","_deserialise","_getFile","_saveToWAV","modelSettings","songSettings","UITracks","outputString","JSON","stringify","href","download","Date","toLocaleDateString","onloadend","parsed","parse","fileType","modelTrack","viewDepth","readAsText","_a","SequencerApp","_hideShowCallback","_timelineRef","resizePIXIApp","hideLoader","PIXITimeline","pixiApp","_pixiContainer","parentElement","clientWidth","clientHeight","app","setAttribute","backgroundColor","passWheelEvent","setStageRenderer","loaderDiv"],"mappings":"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","file":"bundle.js","sourcesContent":["/**\n * @copyright 2015, Andrey Popp <8mayday@gmail.com>\n *\n * The decorator may be used on classes or methods\n * ```\n * @autobind\n * class FullBound {}\n *\n * class PartBound {\n *   @autobind\n *   method () {}\n * }\n * ```\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = autobind;\n\nfunction autobind() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (args.length === 1) {\n    return boundClass.apply(undefined, args);\n  } else {\n    return boundMethod.apply(undefined, args);\n  }\n}\n\n/**\n * Use boundMethod to bind all methods on the target.prototype\n */\nfunction boundClass(target) {\n  // (Using reflect to get all keys including symbols)\n  var keys = undefined;\n  // Use Reflect if exists\n  if (typeof Reflect !== 'undefined' && typeof Reflect.ownKeys === 'function') {\n    keys = Reflect.ownKeys(target.prototype);\n  } else {\n    keys = Object.getOwnPropertyNames(target.prototype);\n    // use symbols if support is provided\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      keys = keys.concat(Object.getOwnPropertySymbols(target.prototype));\n    }\n  }\n\n  keys.forEach(function (key) {\n    // Ignore special case target method\n    if (key === 'constructor') {\n      return;\n    }\n\n    var descriptor = Object.getOwnPropertyDescriptor(target.prototype, key);\n\n    // Only methods need binding\n    if (typeof descriptor.value === 'function') {\n      Object.defineProperty(target.prototype, key, boundMethod(target, key, descriptor));\n    }\n  });\n  return target;\n}\n\n/**\n * Return a descriptor removing the value and returning a getter\n * The getter will return a .bind version of the function\n * and memoize the result against a symbol on the instance\n */\nfunction boundMethod(target, key, descriptor) {\n  var fn = descriptor.value;\n\n  if (typeof fn !== 'function') {\n    throw new Error('@autobind decorator can only be applied to methods not: ' + typeof fn);\n  }\n\n  // In IE11 calling Object.defineProperty has a side-effect of evaluating the\n  // getter for the property which is being replaced. This causes infinite\n  // recursion and an \"Out of stack space\" error.\n  var definingProperty = false;\n\n  return {\n    configurable: true,\n    get: function get() {\n      if (definingProperty || this === target.prototype || this.hasOwnProperty(key)) {\n        return fn;\n      }\n\n      var boundFn = fn.bind(this);\n      definingProperty = true;\n      Object.defineProperty(this, key, {\n        value: boundFn,\n        configurable: true,\n        writable: true\n      });\n      definingProperty = false;\n      return boundFn;\n    }\n  };\n}\nmodule.exports = exports['default'];\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inputRange = require('./input-range/input-range');\n\nvar _inputRange2 = _interopRequireDefault(_inputRange);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @ignore\n * @typedef {Object} ClientRect\n * @property {number} height\n * @property {number} left\n * @property {number} top\n * @property {number} width\n */\n\n/**\n * @typedef {Object} InputRangeClassNames\n * @property {string} activeTrack\n * @property {string} disabledInputRange\n * @property {string} inputRange\n * @property {string} labelContainer\n * @property {string} maxLabel\n * @property {string} minLabel\n * @property {string} slider\n * @property {string} sliderContainer\n * @property {string} track\n * @property {string} valueLabel\n */\n\n/**\n * @typedef {Function} LabelFormatter\n * @param {number} value\n * @param {string} type\n * @return {string}\n */\n\n/**\n * @ignore\n * @typedef {Object} Point\n * @property {number} x\n * @property {number} y\n */\n\n/**\n * @typedef {Object} Range\n * @property {number} min - Min value\n * @property {number} max - Max value\n */\n\nexports.default = _inputRange2.default;\nmodule.exports = exports['default'];\n//# sourceMappingURL=index.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Default CSS class names\n * @ignore\n * @type {InputRangeClassNames}\n */\nvar DEFAULT_CLASS_NAMES = {\n  activeTrack: 'input-range__track input-range__track--active',\n  disabledInputRange: 'input-range input-range--disabled',\n  inputRange: 'input-range',\n  labelContainer: 'input-range__label-container',\n  maxLabel: 'input-range__label input-range__label--max',\n  minLabel: 'input-range__label input-range__label--min',\n  slider: 'input-range__slider',\n  sliderContainer: 'input-range__slider-container',\n  track: 'input-range__track input-range__track--background',\n  valueLabel: 'input-range__label input-range__label--value'\n};\n\nexports.default = DEFAULT_CLASS_NAMES;\nmodule.exports = exports['default'];\n//# sourceMappingURL=default-class-names.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _desc, _value, _class;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nvar _valueTransformer = require('./value-transformer');\n\nvar valueTransformer = _interopRequireWildcard(_valueTransformer);\n\nvar _defaultClassNames = require('./default-class-names');\n\nvar _defaultClassNames2 = _interopRequireDefault(_defaultClassNames);\n\nvar _label = require('./label');\n\nvar _label2 = _interopRequireDefault(_label);\n\nvar _rangePropType = require('./range-prop-type');\n\nvar _rangePropType2 = _interopRequireDefault(_rangePropType);\n\nvar _valuePropType = require('./value-prop-type');\n\nvar _valuePropType2 = _interopRequireDefault(_valuePropType);\n\nvar _slider = require('./slider');\n\nvar _slider2 = _interopRequireDefault(_slider);\n\nvar _track = require('./track');\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _utils = require('../utils');\n\nvar _keyCodes = require('./key-codes');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n/**\n * A React component that allows users to input numeric values within a range\n * by dragging its sliders.\n */\nvar InputRange = (_class = function (_React$Component) {\n  _inherits(InputRange, _React$Component);\n\n  _createClass(InputRange, null, [{\n    key: 'propTypes',\n\n    /**\n     * @ignore\n     * @override\n     * @return {Object}\n     */\n    get: function get() {\n      return {\n        allowSameValues: _propTypes2.default.bool,\n        ariaLabelledby: _propTypes2.default.string,\n        ariaControls: _propTypes2.default.string,\n        classNames: _propTypes2.default.objectOf(_propTypes2.default.string),\n        disabled: _propTypes2.default.bool,\n        draggableTrack: _propTypes2.default.bool,\n        formatLabel: _propTypes2.default.func,\n        maxValue: _rangePropType2.default,\n        minValue: _rangePropType2.default,\n        name: _propTypes2.default.string,\n        onChangeStart: _propTypes2.default.func,\n        onChange: _propTypes2.default.func.isRequired,\n        onChangeComplete: _propTypes2.default.func,\n        step: _propTypes2.default.number,\n        value: _valuePropType2.default\n      };\n    }\n\n    /**\n     * @ignore\n     * @override\n     * @return {Object}\n     */\n\n  }, {\n    key: 'defaultProps',\n    get: function get() {\n      return {\n        allowSameValues: false,\n        classNames: _defaultClassNames2.default,\n        disabled: false,\n        maxValue: 10,\n        minValue: 0,\n        step: 1\n      };\n    }\n\n    /**\n     * @param {Object} props\n     * @param {boolean} [props.allowSameValues]\n     * @param {string} [props.ariaLabelledby]\n     * @param {string} [props.ariaControls]\n     * @param {InputRangeClassNames} [props.classNames]\n     * @param {boolean} [props.disabled = false]\n     * @param {Function} [props.formatLabel]\n     * @param {number|Range} [props.maxValue = 10]\n     * @param {number|Range} [props.minValue = 0]\n     * @param {string} [props.name]\n     * @param {string} props.onChange\n     * @param {Function} [props.onChangeComplete]\n     * @param {Function} [props.onChangeStart]\n     * @param {number} [props.step = 1]\n     * @param {number|Range} props.value\n     */\n\n  }]);\n\n  function InputRange(props) {\n    _classCallCheck(this, InputRange);\n\n    /**\n     * @private\n     * @type {?number}\n     */\n    var _this = _possibleConstructorReturn(this, (InputRange.__proto__ || Object.getPrototypeOf(InputRange)).call(this, props));\n\n    _this.startValue = null;\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    _this.node = null;\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    _this.trackNode = null;\n\n    /**\n     * @private\n     * @type {bool}\n     */\n    _this.isSliderDragging = false;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    _this.lastKeyMoved = null;\n    return _this;\n  }\n\n  /**\n   * @ignore\n   * @override\n   * @return {void}\n   */\n\n\n  _createClass(InputRange, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.removeDocumentMouseUpListener();\n      this.removeDocumentTouchEndListener();\n    }\n\n    /**\n     * Return the CSS class name of the component\n     * @private\n     * @return {string}\n     */\n\n  }, {\n    key: 'getComponentClassName',\n    value: function getComponentClassName() {\n      if (!this.props.disabled) {\n        return this.props.classNames.inputRange;\n      }\n\n      return this.props.classNames.disabledInputRange;\n    }\n\n    /**\n     * Return the bounding rect of the track\n     * @private\n     * @return {ClientRect}\n     */\n\n  }, {\n    key: 'getTrackClientRect',\n    value: function getTrackClientRect() {\n      return this.trackNode.getClientRect();\n    }\n\n    /**\n     * Return the slider key closest to a point\n     * @private\n     * @param {Point} position\n     * @return {string}\n     */\n\n  }, {\n    key: 'getKeyByPosition',\n    value: function getKeyByPosition(position) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var positions = valueTransformer.getPositionsFromValues(values, this.props.minValue, this.props.maxValue, this.getTrackClientRect());\n\n      if (this.isMultiValue()) {\n        var distanceToMin = (0, _utils.distanceTo)(position, positions.min);\n        var distanceToMax = (0, _utils.distanceTo)(position, positions.max);\n\n        if (distanceToMin < distanceToMax) {\n          return 'min';\n        }\n      }\n\n      return 'max';\n    }\n\n    /**\n     * Return all the slider keys\n     * @private\n     * @return {string[]}\n     */\n\n  }, {\n    key: 'getKeys',\n    value: function getKeys() {\n      if (this.isMultiValue()) {\n        return ['min', 'max'];\n      }\n\n      return ['max'];\n    }\n\n    /**\n     * Return true if the difference between the new and the current value is\n     * greater or equal to the step amount of the component\n     * @private\n     * @param {Range} values\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'hasStepDifference',\n    value: function hasStepDifference(values) {\n      var currentValues = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n\n      return (0, _utils.length)(values.min, currentValues.min) >= this.props.step || (0, _utils.length)(values.max, currentValues.max) >= this.props.step;\n    }\n\n    /**\n     * Return true if the component accepts a min and max value\n     * @private\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'isMultiValue',\n    value: function isMultiValue() {\n      return (0, _utils.isObject)(this.props.value);\n    }\n\n    /**\n     * Return true if the range is within the max and min value of the component\n     * @private\n     * @param {Range} values\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'isWithinRange',\n    value: function isWithinRange(values) {\n      if (this.isMultiValue()) {\n        return values.min >= this.props.minValue && values.max <= this.props.maxValue && this.props.allowSameValues ? values.min <= values.max : values.min < values.max;\n      }\n\n      return values.max >= this.props.minValue && values.max <= this.props.maxValue;\n    }\n\n    /**\n     * Return true if the new value should trigger a render\n     * @private\n     * @param {Range} values\n     * @return {boolean}\n     */\n\n  }, {\n    key: 'shouldUpdate',\n    value: function shouldUpdate(values) {\n      return this.isWithinRange(values) && this.hasStepDifference(values);\n    }\n\n    /**\n     * Update the position of a slider\n     * @private\n     * @param {string} key\n     * @param {Point} position\n     * @return {void}\n     */\n\n  }, {\n    key: 'updatePosition',\n    value: function updatePosition(key, position) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var positions = valueTransformer.getPositionsFromValues(values, this.props.minValue, this.props.maxValue, this.getTrackClientRect());\n\n      positions[key] = position;\n      this.lastKeyMoved = key;\n\n      this.updatePositions(positions);\n    }\n\n    /**\n     * Update the positions of multiple sliders\n     * @private\n     * @param {Object} positions\n     * @param {Point} positions.min\n     * @param {Point} positions.max\n     * @return {void}\n     */\n\n  }, {\n    key: 'updatePositions',\n    value: function updatePositions(positions) {\n      var values = {\n        min: valueTransformer.getValueFromPosition(positions.min, this.props.minValue, this.props.maxValue, this.getTrackClientRect()),\n        max: valueTransformer.getValueFromPosition(positions.max, this.props.minValue, this.props.maxValue, this.getTrackClientRect())\n      };\n\n      var transformedValues = {\n        min: valueTransformer.getStepValueFromValue(values.min, this.props.step),\n        max: valueTransformer.getStepValueFromValue(values.max, this.props.step)\n      };\n\n      this.updateValues(transformedValues);\n    }\n\n    /**\n     * Update the value of a slider\n     * @private\n     * @param {string} key\n     * @param {number} value\n     * @return {void}\n     */\n\n  }, {\n    key: 'updateValue',\n    value: function updateValue(key, value) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n\n      values[key] = value;\n\n      this.updateValues(values);\n    }\n\n    /**\n     * Update the values of multiple sliders\n     * @private\n     * @param {Range|number} values\n     * @return {void}\n     */\n\n  }, {\n    key: 'updateValues',\n    value: function updateValues(values) {\n      if (!this.shouldUpdate(values)) {\n        return;\n      }\n\n      this.props.onChange(this.isMultiValue() ? values : values.max);\n    }\n\n    /**\n     * Increment the value of a slider by key name\n     * @private\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'incrementValue',\n    value: function incrementValue(key) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var value = values[key] + this.props.step;\n\n      this.updateValue(key, value);\n    }\n\n    /**\n     * Decrement the value of a slider by key name\n     * @private\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'decrementValue',\n    value: function decrementValue(key) {\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var value = values[key] - this.props.step;\n\n      this.updateValue(key, value);\n    }\n\n    /**\n     * Listen to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseUpListener',\n    value: function addDocumentMouseUpListener() {\n      this.removeDocumentMouseUpListener();\n      this.node.ownerDocument.addEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * Listen to touchend event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentTouchEndListener',\n    value: function addDocumentTouchEndListener() {\n      this.removeDocumentTouchEndListener();\n      this.node.ownerDocument.addEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * Stop listening to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseUpListener',\n    value: function removeDocumentMouseUpListener() {\n      this.node.ownerDocument.removeEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * Stop listening to touchend event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentTouchEndListener',\n    value: function removeDocumentTouchEndListener() {\n      this.node.ownerDocument.removeEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * Handle any \"mousemove\" event received by the slider\n     * @private\n     * @param {SyntheticEvent} event\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleSliderDrag',\n    value: function handleSliderDrag(event, key) {\n      var _this2 = this;\n\n      if (this.props.disabled) {\n        return;\n      }\n\n      var position = valueTransformer.getPositionFromEvent(event, this.getTrackClientRect());\n      this.isSliderDragging = true;\n      requestAnimationFrame(function () {\n        return _this2.updatePosition(key, position);\n      });\n    }\n\n    /**\n     * Handle any \"mousemove\" event received by the track\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTrackDrag',\n    value: function handleTrackDrag(event, prevEvent) {\n      if (this.props.disabled || !this.props.draggableTrack || this.isSliderDragging) {\n        return;\n      }\n\n      var _props = this.props,\n          maxValue = _props.maxValue,\n          minValue = _props.minValue,\n          _props$value = _props.value,\n          max = _props$value.max,\n          min = _props$value.min;\n\n\n      var position = valueTransformer.getPositionFromEvent(event, this.getTrackClientRect());\n      var value = valueTransformer.getValueFromPosition(position, minValue, maxValue, this.getTrackClientRect());\n      var stepValue = valueTransformer.getStepValueFromValue(value, this.props.step);\n\n      var prevPosition = valueTransformer.getPositionFromEvent(prevEvent, this.getTrackClientRect());\n      var prevValue = valueTransformer.getValueFromPosition(prevPosition, minValue, maxValue, this.getTrackClientRect());\n      var prevStepValue = valueTransformer.getStepValueFromValue(prevValue, this.props.step);\n\n      var offset = prevStepValue - stepValue;\n\n      var transformedValues = {\n        min: min - offset,\n        max: max - offset\n      };\n\n      this.updateValues(transformedValues);\n    }\n\n    /**\n     * Handle any \"keydown\" event received by the slider\n     * @private\n     * @param {SyntheticEvent} event\n     * @param {string} key\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleSliderKeyDown',\n    value: function handleSliderKeyDown(event, key) {\n      if (this.props.disabled) {\n        return;\n      }\n\n      switch (event.keyCode) {\n        case _keyCodes.LEFT_ARROW:\n        case _keyCodes.DOWN_ARROW:\n          event.preventDefault();\n          this.decrementValue(key);\n          break;\n\n        case _keyCodes.RIGHT_ARROW:\n        case _keyCodes.UP_ARROW:\n          event.preventDefault();\n          this.incrementValue(key);\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    /**\n     * Handle any \"mousedown\" event received by the track\n     * @private\n     * @param {SyntheticEvent} event\n     * @param {Point} position\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTrackMouseDown',\n    value: function handleTrackMouseDown(event, position) {\n      if (this.props.disabled) {\n        return;\n      }\n\n      var _props2 = this.props,\n          maxValue = _props2.maxValue,\n          minValue = _props2.minValue,\n          _props2$value = _props2.value,\n          max = _props2$value.max,\n          min = _props2$value.min;\n\n\n      event.preventDefault();\n\n      var value = valueTransformer.getValueFromPosition(position, minValue, maxValue, this.getTrackClientRect());\n      var stepValue = valueTransformer.getStepValueFromValue(value, this.props.step);\n\n      if (!this.props.draggableTrack || stepValue > max || stepValue < min) {\n        this.updatePosition(this.getKeyByPosition(position), position);\n      }\n    }\n\n    /**\n     * Handle the start of any mouse/touch event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleInteractionStart',\n    value: function handleInteractionStart() {\n      if (this.props.onChangeStart) {\n        this.props.onChangeStart(this.props.value);\n      }\n\n      if (this.props.onChangeComplete && !(0, _utils.isDefined)(this.startValue)) {\n        this.startValue = this.props.value;\n      }\n    }\n\n    /**\n     * Handle the end of any mouse/touch event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleInteractionEnd',\n    value: function handleInteractionEnd() {\n      if (this.isSliderDragging) {\n        this.isSliderDragging = false;\n      }\n\n      if (!this.props.onChangeComplete || !(0, _utils.isDefined)(this.startValue)) {\n        return;\n      }\n\n      if (this.startValue !== this.props.value) {\n        this.props.onChangeComplete(this.props.value);\n      }\n\n      this.startValue = null;\n    }\n\n    /**\n     * Handle any \"keydown\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(event) {\n      this.handleInteractionStart(event);\n    }\n\n    /**\n     * Handle any \"keyup\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleKeyUp',\n    value: function handleKeyUp(event) {\n      this.handleInteractionEnd(event);\n    }\n\n    /**\n     * Handle any \"mousedown\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown(event) {\n      this.handleInteractionStart(event);\n      this.addDocumentMouseUpListener();\n    }\n\n    /**\n     * Handle any \"mouseup\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     */\n\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp(event) {\n      this.handleInteractionEnd(event);\n      this.removeDocumentMouseUpListener();\n    }\n\n    /**\n     * Handle any \"touchstart\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart(event) {\n      this.handleInteractionStart(event);\n      this.addDocumentTouchEndListener();\n    }\n\n    /**\n     * Handle any \"touchend\" event received by the component\n     * @private\n     * @param {SyntheticEvent} event\n     */\n\n  }, {\n    key: 'handleTouchEnd',\n    value: function handleTouchEnd(event) {\n      this.handleInteractionEnd(event);\n      this.removeDocumentTouchEndListener();\n    }\n\n    /**\n     * Return JSX of sliders\n     * @private\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'renderSliders',\n    value: function renderSliders() {\n      var _this3 = this;\n\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var percentages = valueTransformer.getPercentagesFromValues(values, this.props.minValue, this.props.maxValue);\n      var keys = this.props.allowSameValues && this.lastKeyMoved === 'min' ? this.getKeys().reverse() : this.getKeys();\n\n      return keys.map(function (key) {\n        var value = values[key];\n        var percentage = percentages[key];\n\n        var _props3 = _this3.props,\n            maxValue = _props3.maxValue,\n            minValue = _props3.minValue;\n\n\n        if (key === 'min') {\n          maxValue = values.max;\n        } else {\n          minValue = values.min;\n        }\n\n        var slider = _react2.default.createElement(_slider2.default, {\n          ariaLabelledby: _this3.props.ariaLabelledby,\n          ariaControls: _this3.props.ariaControls,\n          classNames: _this3.props.classNames,\n          formatLabel: _this3.props.formatLabel,\n          key: key,\n          maxValue: maxValue,\n          minValue: minValue,\n          onSliderDrag: _this3.handleSliderDrag,\n          onSliderKeyDown: _this3.handleSliderKeyDown,\n          percentage: percentage,\n          type: key,\n          value: value });\n\n        return slider;\n      });\n    }\n\n    /**\n     * Return JSX of hidden inputs\n     * @private\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'renderHiddenInputs',\n    value: function renderHiddenInputs() {\n      var _this4 = this;\n\n      if (!this.props.name) {\n        return [];\n      }\n\n      var isMultiValue = this.isMultiValue();\n      var values = valueTransformer.getValueFromProps(this.props, isMultiValue);\n\n      return this.getKeys().map(function (key) {\n        var value = values[key];\n        var name = isMultiValue ? '' + _this4.props.name + (0, _utils.captialize)(key) : _this4.props.name;\n\n        return _react2.default.createElement('input', { key: key, type: 'hidden', name: name, value: value });\n      });\n    }\n\n    /**\n     * @ignore\n     * @override\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var componentClassName = this.getComponentClassName();\n      var values = valueTransformer.getValueFromProps(this.props, this.isMultiValue());\n      var percentages = valueTransformer.getPercentagesFromValues(values, this.props.minValue, this.props.maxValue);\n\n      return _react2.default.createElement(\n        'div',\n        {\n          'aria-disabled': this.props.disabled,\n          ref: function ref(node) {\n            _this5.node = node;\n          },\n          className: componentClassName,\n          onKeyDown: this.handleKeyDown,\n          onKeyUp: this.handleKeyUp,\n          onMouseDown: this.handleMouseDown,\n          onTouchStart: this.handleTouchStart },\n        _react2.default.createElement(\n          _label2.default,\n          {\n            classNames: this.props.classNames,\n            formatLabel: this.props.formatLabel,\n            type: 'min' },\n          this.props.minValue\n        ),\n        _react2.default.createElement(\n          _track2.default,\n          {\n            classNames: this.props.classNames,\n            draggableTrack: this.props.draggableTrack,\n            ref: function ref(trackNode) {\n              _this5.trackNode = trackNode;\n            },\n            percentages: percentages,\n            onTrackDrag: this.handleTrackDrag,\n            onTrackMouseDown: this.handleTrackMouseDown },\n          this.renderSliders()\n        ),\n        _react2.default.createElement(\n          _label2.default,\n          {\n            classNames: this.props.classNames,\n            formatLabel: this.props.formatLabel,\n            type: 'max' },\n          this.props.maxValue\n        ),\n        this.renderHiddenInputs()\n      );\n    }\n  }]);\n\n  return InputRange;\n}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, 'handleSliderDrag', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleSliderDrag'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTrackDrag', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTrackDrag'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleSliderKeyDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleSliderKeyDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTrackMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTrackMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleInteractionStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleInteractionStart'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleInteractionEnd', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleInteractionEnd'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleKeyDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleKeyDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleKeyUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleKeyUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchStart'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchEnd', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchEnd'), _class.prototype)), _class);\nexports.default = InputRange;\nmodule.exports = exports['default'];\n//# sourceMappingURL=input-range.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/** @ignore */\nvar DOWN_ARROW = exports.DOWN_ARROW = 40;\n\n/** @ignore */\nvar LEFT_ARROW = exports.LEFT_ARROW = 37;\n\n/** @ignore */\nvar RIGHT_ARROW = exports.RIGHT_ARROW = 39;\n\n/** @ignore */\nvar UP_ARROW = exports.UP_ARROW = 38;\n//# sourceMappingURL=key-codes.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Label;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @ignore\n * @param {Object} props\n * @param {InputRangeClassNames} props.classNames\n * @param {Function} props.formatLabel\n * @param {string} props.type\n */\nfunction Label(props) {\n  var labelValue = props.formatLabel ? props.formatLabel(props.children, props.type) : props.children;\n\n  return _react2.default.createElement(\n    'span',\n    { className: props.classNames[props.type + 'Label'] },\n    _react2.default.createElement(\n      'span',\n      { className: props.classNames.labelContainer },\n      labelValue\n    )\n  );\n}\n\n/**\n * @type {Object}\n * @property {Function} children\n * @property {Function} classNames\n * @property {Function} formatLabel\n * @property {Function} type\n */\nLabel.propTypes = {\n  children: _propTypes2.default.node.isRequired,\n  classNames: _propTypes2.default.objectOf(_propTypes2.default.string).isRequired,\n  formatLabel: _propTypes2.default.func,\n  type: _propTypes2.default.string.isRequired\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=label.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rangePropType;\n\nvar _utils = require('../utils');\n\n/**\n * @ignore\n * @param {Object} props - React component props\n * @return {?Error} Return Error if validation fails\n */\nfunction rangePropType(props) {\n  var maxValue = props.maxValue,\n      minValue = props.minValue;\n\n\n  if (!(0, _utils.isNumber)(minValue) || !(0, _utils.isNumber)(maxValue)) {\n    return new Error('\"minValue\" and \"maxValue\" must be a number');\n  }\n\n  if (minValue >= maxValue) {\n    return new Error('\"minValue\" must be smaller than \"maxValue\"');\n  }\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=range-prop-type.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _desc, _value, _class;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nvar _label = require('./label');\n\nvar _label2 = _interopRequireDefault(_label);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n/**\n * @ignore\n */\nvar Slider = (_class = function (_React$Component) {\n  _inherits(Slider, _React$Component);\n\n  _createClass(Slider, null, [{\n    key: 'propTypes',\n\n    /**\n     * Accepted propTypes of Slider\n     * @override\n     * @return {Object}\n     * @property {Function} ariaLabelledby\n     * @property {Function} ariaControls\n     * @property {Function} className\n     * @property {Function} formatLabel\n     * @property {Function} maxValue\n     * @property {Function} minValue\n     * @property {Function} onSliderDrag\n     * @property {Function} onSliderKeyDown\n     * @property {Function} percentage\n     * @property {Function} type\n     * @property {Function} value\n     */\n    get: function get() {\n      return {\n        ariaLabelledby: _propTypes2.default.string,\n        ariaControls: _propTypes2.default.string,\n        classNames: _propTypes2.default.objectOf(_propTypes2.default.string).isRequired,\n        formatLabel: _propTypes2.default.func,\n        maxValue: _propTypes2.default.number,\n        minValue: _propTypes2.default.number,\n        onSliderDrag: _propTypes2.default.func.isRequired,\n        onSliderKeyDown: _propTypes2.default.func.isRequired,\n        percentage: _propTypes2.default.number.isRequired,\n        type: _propTypes2.default.string.isRequired,\n        value: _propTypes2.default.number.isRequired\n      };\n    }\n\n    /**\n     * @param {Object} props\n     * @param {string} [props.ariaLabelledby]\n     * @param {string} [props.ariaControls]\n     * @param {InputRangeClassNames} props.classNames\n     * @param {Function} [props.formatLabel]\n     * @param {number} [props.maxValue]\n     * @param {number} [props.minValue]\n     * @param {Function} props.onSliderKeyDown\n     * @param {Function} props.onSliderDrag\n     * @param {number} props.percentage\n     * @param {number} props.type\n     * @param {number} props.value\n     */\n\n  }]);\n\n  function Slider(props) {\n    _classCallCheck(this, Slider);\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    var _this = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this, props));\n\n    _this.node = null;\n    return _this;\n  }\n\n  /**\n   * @ignore\n   * @override\n   * @return {void}\n   */\n\n\n  _createClass(Slider, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.removeDocumentMouseMoveListener();\n      this.removeDocumentMouseUpListener();\n      this.removeDocumentTouchEndListener();\n      this.removeDocumentTouchMoveListener();\n    }\n\n    /**\n     * @private\n     * @return {Object}\n     */\n\n  }, {\n    key: 'getStyle',\n    value: function getStyle() {\n      var perc = (this.props.percentage || 0) * 100;\n      var style = {\n        position: 'absolute',\n        left: perc + '%'\n      };\n\n      return style;\n    }\n\n    /**\n     * Listen to mousemove event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseMoveListener',\n    value: function addDocumentMouseMoveListener() {\n      this.removeDocumentMouseMoveListener();\n      this.node.ownerDocument.addEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * Listen to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseUpListener',\n    value: function addDocumentMouseUpListener() {\n      this.removeDocumentMouseUpListener();\n      this.node.ownerDocument.addEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * Listen to touchmove event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentTouchMoveListener',\n    value: function addDocumentTouchMoveListener() {\n      this.removeDocumentTouchMoveListener();\n      this.node.ownerDocument.addEventListener('touchmove', this.handleTouchMove);\n    }\n\n    /**\n     * Listen to touchend event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentTouchEndListener',\n    value: function addDocumentTouchEndListener() {\n      this.removeDocumentTouchEndListener();\n      this.node.ownerDocument.addEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseMoveListener',\n    value: function removeDocumentMouseMoveListener() {\n      this.node.ownerDocument.removeEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseUpListener',\n    value: function removeDocumentMouseUpListener() {\n      this.node.ownerDocument.removeEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentTouchMoveListener',\n    value: function removeDocumentTouchMoveListener() {\n      this.node.ownerDocument.removeEventListener('touchmove', this.handleTouchMove);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentTouchEndListener',\n    value: function removeDocumentTouchEndListener() {\n      this.node.ownerDocument.removeEventListener('touchend', this.handleTouchEnd);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown() {\n      this.addDocumentMouseMoveListener();\n      this.addDocumentMouseUpListener();\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp() {\n      this.removeDocumentMouseMoveListener();\n      this.removeDocumentMouseUpListener();\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseMove',\n    value: function handleMouseMove(event) {\n      this.props.onSliderDrag(event, this.props.type);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart() {\n      this.addDocumentTouchEndListener();\n      this.addDocumentTouchMoveListener();\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchMove',\n    value: function handleTouchMove(event) {\n      this.props.onSliderDrag(event, this.props.type);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleTouchEnd',\n    value: function handleTouchEnd() {\n      this.removeDocumentTouchMoveListener();\n      this.removeDocumentTouchEndListener();\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(event) {\n      this.props.onSliderKeyDown(event, this.props.type);\n    }\n\n    /**\n     * @override\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var style = this.getStyle();\n\n      return _react2.default.createElement(\n        'span',\n        {\n          className: this.props.classNames.sliderContainer,\n          ref: function ref(node) {\n            _this2.node = node;\n          },\n          style: style },\n        _react2.default.createElement(\n          _label2.default,\n          {\n            classNames: this.props.classNames,\n            formatLabel: this.props.formatLabel,\n            type: 'value' },\n          this.props.value\n        ),\n        _react2.default.createElement('div', {\n          'aria-labelledby': this.props.ariaLabelledby,\n          'aria-controls': this.props.ariaControls,\n          'aria-valuemax': this.props.maxValue,\n          'aria-valuemin': this.props.minValue,\n          'aria-valuenow': this.props.value,\n          className: this.props.classNames.slider,\n          draggable: 'false',\n          onKeyDown: this.handleKeyDown,\n          onMouseDown: this.handleMouseDown,\n          onTouchStart: this.handleTouchStart,\n          role: 'slider',\n          tabIndex: '0' })\n      );\n    }\n  }]);\n\n  return Slider;\n}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, 'handleMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseMove', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseMove'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchStart'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchMove', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchMove'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchEnd', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchEnd'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleKeyDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleKeyDown'), _class.prototype)), _class);\nexports.default = Slider;\nmodule.exports = exports['default'];\n//# sourceMappingURL=slider.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _desc, _value, _class;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _autobindDecorator = require('autobind-decorator');\n\nvar _autobindDecorator2 = _interopRequireDefault(_autobindDecorator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\n/**\n * @ignore\n */\nvar Track = (_class = function (_React$Component) {\n  _inherits(Track, _React$Component);\n\n  _createClass(Track, null, [{\n    key: 'propTypes',\n\n    /**\n     * @override\n     * @return {Object}\n     * @property {Function} children\n     * @property {Function} classNames\n     * @property {Boolean} draggableTrack\n     * @property {Function} onTrackDrag\n     * @property {Function} onTrackMouseDown\n     * @property {Function} percentages\n     */\n    get: function get() {\n      return {\n        children: _propTypes2.default.node.isRequired,\n        classNames: _propTypes2.default.objectOf(_propTypes2.default.string).isRequired,\n        draggableTrack: _propTypes2.default.bool,\n        onTrackDrag: _propTypes2.default.func,\n        onTrackMouseDown: _propTypes2.default.func.isRequired,\n        percentages: _propTypes2.default.objectOf(_propTypes2.default.number).isRequired\n      };\n    }\n\n    /**\n     * @param {Object} props\n     * @param {InputRangeClassNames} props.classNames\n     * @param {Boolean} props.draggableTrack\n     * @param {Function} props.onTrackDrag\n     * @param {Function} props.onTrackMouseDown\n     * @param {number} props.percentages\n     */\n\n  }]);\n\n  function Track(props) {\n    _classCallCheck(this, Track);\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    var _this = _possibleConstructorReturn(this, (Track.__proto__ || Object.getPrototypeOf(Track)).call(this, props));\n\n    _this.node = null;\n    _this.trackDragEvent = null;\n    return _this;\n  }\n\n  /**\n   * @private\n   * @return {ClientRect}\n   */\n\n\n  _createClass(Track, [{\n    key: 'getClientRect',\n    value: function getClientRect() {\n      return this.node.getBoundingClientRect();\n    }\n\n    /**\n     * @private\n     * @return {Object} CSS styles\n     */\n\n  }, {\n    key: 'getActiveTrackStyle',\n    value: function getActiveTrackStyle() {\n      var width = (this.props.percentages.max - this.props.percentages.min) * 100 + '%';\n      var left = this.props.percentages.min * 100 + '%';\n\n      return { left: left, width: width };\n    }\n\n    /**\n     * Listen to mousemove event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseMoveListener',\n    value: function addDocumentMouseMoveListener() {\n      this.removeDocumentMouseMoveListener();\n      this.node.ownerDocument.addEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * Listen to mouseup event\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'addDocumentMouseUpListener',\n    value: function addDocumentMouseUpListener() {\n      this.removeDocumentMouseUpListener();\n      this.node.ownerDocument.addEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseMoveListener',\n    value: function removeDocumentMouseMoveListener() {\n      this.node.ownerDocument.removeEventListener('mousemove', this.handleMouseMove);\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'removeDocumentMouseUpListener',\n    value: function removeDocumentMouseUpListener() {\n      this.node.ownerDocument.removeEventListener('mouseup', this.handleMouseUp);\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseMove',\n    value: function handleMouseMove(event) {\n      if (!this.props.draggableTrack) {\n        return;\n      }\n\n      if (this.trackDragEvent !== null) {\n        this.props.onTrackDrag(event, this.trackDragEvent);\n      }\n\n      this.trackDragEvent = event;\n    }\n\n    /**\n     * @private\n     * @return {void}\n     */\n\n  }, {\n    key: 'handleMouseUp',\n    value: function handleMouseUp() {\n      if (!this.props.draggableTrack) {\n        return;\n      }\n\n      this.removeDocumentMouseMoveListener();\n      this.removeDocumentMouseUpListener();\n      this.trackDragEvent = null;\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event - User event\n     */\n\n  }, {\n    key: 'handleMouseDown',\n    value: function handleMouseDown(event) {\n      var clientX = event.touches ? event.touches[0].clientX : event.clientX;\n      var trackClientRect = this.getClientRect();\n      var position = {\n        x: clientX - trackClientRect.left,\n        y: 0\n      };\n\n      this.props.onTrackMouseDown(event, position);\n\n      if (this.props.draggableTrack) {\n        this.addDocumentMouseMoveListener();\n        this.addDocumentMouseUpListener();\n      }\n    }\n\n    /**\n     * @private\n     * @param {SyntheticEvent} event - User event\n     */\n\n  }, {\n    key: 'handleTouchStart',\n    value: function handleTouchStart(event) {\n      event.preventDefault();\n\n      this.handleMouseDown(event);\n    }\n\n    /**\n     * @override\n     * @return {JSX.Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var activeTrackStyle = this.getActiveTrackStyle();\n\n      return _react2.default.createElement(\n        'div',\n        {\n          className: this.props.classNames.track,\n          onMouseDown: this.handleMouseDown,\n          onTouchStart: this.handleTouchStart,\n          ref: function ref(node) {\n            _this2.node = node;\n          } },\n        _react2.default.createElement('div', {\n          style: activeTrackStyle,\n          className: this.props.classNames.activeTrack }),\n        this.props.children\n      );\n    }\n  }]);\n\n  return Track;\n}(_react2.default.Component), (_applyDecoratedDescriptor(_class.prototype, 'handleMouseMove', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseMove'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseUp', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseUp'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleMouseDown', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleMouseDown'), _class.prototype), _applyDecoratedDescriptor(_class.prototype, 'handleTouchStart', [_autobindDecorator2.default], Object.getOwnPropertyDescriptor(_class.prototype, 'handleTouchStart'), _class.prototype)), _class);\nexports.default = Track;\nmodule.exports = exports['default'];\n//# sourceMappingURL=track.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = valuePropType;\n\nvar _utils = require('../utils');\n\n/**\n * @ignore\n * @param {Object} props\n * @return {?Error} Return Error if validation fails\n */\nfunction valuePropType(props, propName) {\n  var maxValue = props.maxValue,\n      minValue = props.minValue;\n\n  var value = props[propName];\n\n  if (!(0, _utils.isNumber)(value) && (!(0, _utils.isObject)(value) || !(0, _utils.isNumber)(value.min) || !(0, _utils.isNumber)(value.max))) {\n    return new Error('\"' + propName + '\" must be a number or a range object');\n  }\n\n  if ((0, _utils.isNumber)(value) && (value < minValue || value > maxValue)) {\n    return new Error('\"' + propName + '\" must be in between \"minValue\" and \"maxValue\"');\n  }\n\n  if ((0, _utils.isObject)(value) && (value.min < minValue || value.min > maxValue || value.max < minValue || value.max > maxValue)) {\n    return new Error('\"' + propName + '\" must be in between \"minValue\" and \"maxValue\"');\n  }\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=value-prop-type.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.getPercentageFromPosition = getPercentageFromPosition;\nexports.getValueFromPosition = getValueFromPosition;\nexports.getValueFromProps = getValueFromProps;\nexports.getPercentageFromValue = getPercentageFromValue;\nexports.getPercentagesFromValues = getPercentagesFromValues;\nexports.getPositionFromValue = getPositionFromValue;\nexports.getPositionsFromValues = getPositionsFromValues;\nexports.getPositionFromEvent = getPositionFromEvent;\nexports.getStepValueFromValue = getStepValueFromValue;\n\nvar _utils = require('../utils');\n\n/**\n * Convert a point into a percentage value\n * @ignore\n * @param {Point} position\n * @param {ClientRect} clientRect\n * @return {number} Percentage value\n */\nfunction getPercentageFromPosition(position, clientRect) {\n  var length = clientRect.width;\n  var sizePerc = position.x / length;\n\n  return sizePerc || 0;\n}\n\n/**\n * Convert a point into a model value\n * @ignore\n * @param {Point} position\n * @param {number} minValue\n * @param {number} maxValue\n * @param {ClientRect} clientRect\n * @return {number}\n */\nfunction getValueFromPosition(position, minValue, maxValue, clientRect) {\n  var sizePerc = getPercentageFromPosition(position, clientRect);\n  var valueDiff = maxValue - minValue;\n\n  return minValue + valueDiff * sizePerc;\n}\n\n/**\n * Convert props into a range value\n * @ignore\n * @param {Object} props\n * @param {boolean} isMultiValue\n * @return {Range}\n */\nfunction getValueFromProps(props, isMultiValue) {\n  if (isMultiValue) {\n    return _extends({}, props.value);\n  }\n\n  return {\n    min: props.minValue,\n    max: props.value\n  };\n}\n\n/**\n * Convert a model value into a percentage value\n * @ignore\n * @param {number} value\n * @param {number} minValue\n * @param {number} maxValue\n * @return {number}\n */\nfunction getPercentageFromValue(value, minValue, maxValue) {\n  var validValue = (0, _utils.clamp)(value, minValue, maxValue);\n  var valueDiff = maxValue - minValue;\n  var valuePerc = (validValue - minValue) / valueDiff;\n\n  return valuePerc || 0;\n}\n\n/**\n * Convert model values into percentage values\n * @ignore\n * @param {Range} values\n * @param {number} minValue\n * @param {number} maxValue\n * @return {Range}\n */\nfunction getPercentagesFromValues(values, minValue, maxValue) {\n  return {\n    min: getPercentageFromValue(values.min, minValue, maxValue),\n    max: getPercentageFromValue(values.max, minValue, maxValue)\n  };\n}\n\n/**\n * Convert a value into a point\n * @ignore\n * @param {number} value\n * @param {number} minValue\n * @param {number} maxValue\n * @param {ClientRect} clientRect\n * @return {Point} Position\n */\nfunction getPositionFromValue(value, minValue, maxValue, clientRect) {\n  var length = clientRect.width;\n  var valuePerc = getPercentageFromValue(value, minValue, maxValue);\n  var positionValue = valuePerc * length;\n\n  return {\n    x: positionValue,\n    y: 0\n  };\n}\n\n/**\n * Convert a range of values into points\n * @ignore\n * @param {Range} values\n * @param {number} minValue\n * @param {number} maxValue\n * @param {ClientRect} clientRect\n * @return {Range}\n */\nfunction getPositionsFromValues(values, minValue, maxValue, clientRect) {\n  return {\n    min: getPositionFromValue(values.min, minValue, maxValue, clientRect),\n    max: getPositionFromValue(values.max, minValue, maxValue, clientRect)\n  };\n}\n\n/**\n * Convert an event into a point\n * @ignore\n * @param {Event} event\n * @param {ClientRect} clientRect\n * @return {Point}\n */\nfunction getPositionFromEvent(event, clientRect) {\n  var length = clientRect.width;\n\n  var _ref = event.touches ? event.touches[0] : event,\n      clientX = _ref.clientX;\n\n  return {\n    x: (0, _utils.clamp)(clientX - clientRect.left, 0, length),\n    y: 0\n  };\n}\n\n/**\n * Convert a value into a step value\n * @ignore\n * @param {number} value\n * @param {number} valuePerStep\n * @return {number}\n */\nfunction getStepValueFromValue(value, valuePerStep) {\n  return Math.round(value / valuePerStep) * valuePerStep;\n}\n//# sourceMappingURL=value-transformer.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = captialize;\n/**\n * Captialize a string\n * @ignore\n * @param {string} string\n * @return {string}\n */\nfunction captialize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=captialize.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = clamp;\n/**\n * Clamp a value between a min and max value\n * @ignore\n * @param {number} value\n * @param {number} min\n * @param {number} max\n * @return {number}\n */\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=clamp.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = distanceTo;\n/**\n * Calculate the distance between pointA and pointB\n * @ignore\n * @param {Point} pointA\n * @param {Point} pointB\n * @return {number} Distance\n */\nfunction distanceTo(pointA, pointB) {\n  var xDiff = Math.pow(pointB.x - pointA.x, 2);\n  var yDiff = Math.pow(pointB.y - pointA.y, 2);\n\n  return Math.sqrt(xDiff + yDiff);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=distance-to.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _captialize = require('./captialize');\n\nObject.defineProperty(exports, 'captialize', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_captialize).default;\n  }\n});\n\nvar _clamp = require('./clamp');\n\nObject.defineProperty(exports, 'clamp', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_clamp).default;\n  }\n});\n\nvar _distanceTo = require('./distance-to');\n\nObject.defineProperty(exports, 'distanceTo', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_distanceTo).default;\n  }\n});\n\nvar _isDefined = require('./is-defined');\n\nObject.defineProperty(exports, 'isDefined', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_isDefined).default;\n  }\n});\n\nvar _isNumber = require('./is-number');\n\nObject.defineProperty(exports, 'isNumber', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_isNumber).default;\n  }\n});\n\nvar _isObject = require('./is-object');\n\nObject.defineProperty(exports, 'isObject', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_isObject).default;\n  }\n});\n\nvar _length = require('./length');\n\nObject.defineProperty(exports, 'length', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_length).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isDefined;\n/**\n * Check if a value is defined\n * @ignore\n * @param {*} value\n * @return {boolean}\n */\nfunction isDefined(value) {\n  return value !== undefined && value !== null;\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=is-defined.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isNumber;\n/**\n * Check if a value is a number\n * @ignore\n * @param {*} value\n * @return {boolean}\n */\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=is-number.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = isObject;\n/**\n * Check if a value is an object\n * @ignore\n * @param {*} value\n * @return {boolean}\n */\nfunction isObject(value) {\n  return value !== null && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object';\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=is-object.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = length;\n/**\n * Calculate the absolute difference between two numbers\n * @ignore\n * @param {number} numA\n * @param {number} numB\n * @return {number}\n */\nfunction length(numA, numB) {\n  return Math.abs(numA - numB);\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=length.js.map","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","module.exports = React;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","const __WEBPACK_NAMESPACE_OBJECT__ = ReactDOM;","const __WEBPACK_NAMESPACE_OBJECT__ = PIXI;","export default class SortedArray extends Array {\r\n    constructor(comparator = (a, b) => a - b) {\r\n        super();\r\n        this._comparator = comparator;\r\n    }\r\n    insert(value) {\r\n        let left = 0;\r\n        let right = this.length - 1;\r\n        let mid = 0;\r\n        while (left <= right) {\r\n            mid = Math.floor((left + right) / 2);\r\n            if (value === this[mid]) {\r\n                this.splice(mid, 0, value);\r\n                return mid;\r\n            }\r\n            else if (this._comparator(value, this[mid]) > 0) {\r\n                left = mid + 1;\r\n            }\r\n            else {\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        this.splice(left, 0, value);\r\n        return left;\r\n    }\r\n    remove(value) {\r\n        let index = this.indexOf(value);\r\n        if (index === -1) {\r\n            throw new Error(\"Element doesn't exist\");\r\n        }\r\n        else {\r\n            this.splice(index, 1);\r\n            return index;\r\n        }\r\n    }\r\n    removeAt(index) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new RangeError(\"Index out of range.\");\r\n        }\r\n        let elementRemoved = this[index];\r\n        this.splice(index, 1);\r\n        return elementRemoved;\r\n    }\r\n    exists(value) {\r\n        let index = this.binarySearch(value);\r\n        if (index === -1) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    binarySearch(value, closest = false) {\r\n        let left = 0;\r\n        let right = this.length - 1;\r\n        let mid = 0;\r\n        if (this.length == 0) {\r\n            return -1;\r\n        }\r\n        if (closest && this._comparator(value, this[right]) > 0) {\r\n            return right;\r\n        }\r\n        while (left <= right) {\r\n            mid = Math.floor((left + right) / 2);\r\n            if (this._comparator(value, this[mid]) === 0) {\r\n                while (mid > 0 && this._comparator(this[mid], this[mid - 1]) === 0) {\r\n                    mid = mid - 1;\r\n                }\r\n                return mid;\r\n            }\r\n            else if (this._comparator(value, this[mid]) > 0) {\r\n                left = mid + 1;\r\n            }\r\n            else {\r\n                if (closest && this._comparator(value, this[mid - 1])) {\r\n                    return mid - 1;\r\n                }\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        if (closest) {\r\n            return left;\r\n        }\r\n        else {\r\n            return -1;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SortedArray.js.map","export default class NoteHelper {\r\n    static noteStringToFrequency(value) {\r\n        let octave = NoteHelper.extractOctave(value);\r\n        let noteNumber = NoteHelper.notes.indexOf(value.slice(0, -1)) + 3;\r\n        noteNumber = noteNumber + ((octave - 1) * 12) + 1;\r\n        return 440 * Math.pow(2, (noteNumber - 49) / 12);\r\n    }\r\n    static distanceBetweenNotes(note1, note2) {\r\n        let notePosition1 = NoteHelper.noteStringToNoteNumber(note1);\r\n        let notePosition2 = NoteHelper.noteStringToNoteNumber(note2);\r\n        return notePosition1 - notePosition2;\r\n    }\r\n    static noteNumberToNoteString(value) {\r\n        if (value < 0) {\r\n            throw new RangeError(\"Note value cannot be less than 0\");\r\n        }\r\n        let note = NoteHelper.notes[value % 12];\r\n        let octave = Math.floor(value / 12);\r\n        return note + octave.toString();\r\n    }\r\n    static noteStringToNoteNumber(value) {\r\n        return (NoteHelper.extractOctave(value) * 12) + NoteHelper.notes.indexOf(value.slice(0, -1));\r\n    }\r\n    static extractOctave(note) {\r\n        if (note.length == 2) {\r\n            return parseInt(note.charAt(1));\r\n        }\r\n        else if (note.length === 3) {\r\n            return parseInt(note.charAt(2));\r\n        }\r\n        else {\r\n            throw new RangeError(\"String is invalid (incorrect length): \" + note);\r\n        }\r\n    }\r\n}\r\nNoteHelper.notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\r\n//# sourceMappingURL=NoteHelper.js.map","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","export class SimpleEvent {\r\n    constructor() {\r\n        this._callbacks = [];\r\n    }\r\n    get callbacks() {\r\n        return this._callbacks;\r\n    }\r\n    addListener(callback) {\r\n        this._callbacks.push(callback);\r\n    }\r\n    removeListener(callback) {\r\n        let index = this._callbacks.indexOf(callback);\r\n        if (index != -1) {\r\n            this._callbacks.splice(index, 1);\r\n        }\r\n    }\r\n    hasListener(callback) {\r\n        let index = this._callbacks.indexOf(callback);\r\n        if (index == -1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    removeAt(index) {\r\n        this._callbacks.splice(index, 1);\r\n    }\r\n    removeAllListeners() {\r\n        this._callbacks = [];\r\n    }\r\n    emit(...args) {\r\n        this._callbacks.forEach(element => {\r\n            element(...args);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=SimpleEvent.js.map","import NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nexport class BaseEvent {\r\n    constructor(startPosition, duration) {\r\n        this._duration = 0;\r\n        this.startPosition = startPosition;\r\n        if (duration != undefined) {\r\n            this.duration = duration;\r\n        }\r\n        this.id = uuid();\r\n        this.removed = new SimpleEvent();\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(value) {\r\n        this._duration = value;\r\n    }\r\n    get endPosition() {\r\n        return this.startPosition + this.duration;\r\n    }\r\n    eventRemoved() {\r\n        this.removed.emit();\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"eventType\": \"BaseEvent\",\r\n            \"startPosition\": this.startPosition,\r\n            \"duration\": this.duration\r\n        };\r\n    }\r\n    static comparator(a, b) {\r\n        if (a.startPosition > b.startPosition)\r\n            return 1;\r\n        if (a.startPosition < b.startPosition)\r\n            return -1;\r\n        if (a.duration > b.duration)\r\n            return 1;\r\n        if (a.duration < b.duration)\r\n            return -1;\r\n        return 0;\r\n    }\r\n}\r\nexport class SecondsBaseEvent extends BaseEvent {\r\n    constructor(startPosition, metadata, secondsDuration = 0) {\r\n        super(startPosition);\r\n        this._metadata = metadata;\r\n        this.secondsDuration = secondsDuration;\r\n    }\r\n    get duration() {\r\n        return this._metadata.positionSecondsToQuarterNote(this._duration);\r\n    }\r\n    set duration(value) {\r\n        this._duration = this._metadata.positionQuarterNoteToSeconds(value);\r\n    }\r\n    get secondsDuration() {\r\n        return this._duration;\r\n    }\r\n    set secondsDuration(value) {\r\n        this._duration = value;\r\n    }\r\n    serialise() {\r\n        let obj = super.serialise();\r\n        obj.eventType = \"SecondsBaseEvent\";\r\n        obj.duration = this._duration;\r\n        return obj;\r\n    }\r\n}\r\nexport class NoteEvent extends BaseEvent {\r\n    constructor(startPosition, pitch, duration) {\r\n        super(startPosition);\r\n        this.pitchString = pitch;\r\n        if (typeof (duration) === \"string\") {\r\n            this.duration = this._parseQuarterNoteLength(duration);\r\n        }\r\n        else {\r\n            this.duration = duration;\r\n        }\r\n    }\r\n    get pitchString() {\r\n        return this._pitchString;\r\n    }\r\n    set pitchString(value) {\r\n        this._pitchString = value;\r\n        this.pitch = NoteHelper.noteStringToFrequency(value);\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(value) {\r\n        if (value < 0) {\r\n            throw new Error(\"Invalid duration value\");\r\n        }\r\n        this._duration = value;\r\n    }\r\n    setDurationString(value) {\r\n        if (!NoteEvent.durationPattern.test(value)) {\r\n            throw new Error(\"Invalid duration value\");\r\n        }\r\n        this._duration = this._parseQuarterNoteLength(value);\r\n    }\r\n    serialise() {\r\n        let obj = super.serialise();\r\n        obj.eventType = \"NoteEvent\";\r\n        obj[\"pitch\"] = this.pitch;\r\n        obj[\"pitchString\"] = this.pitchString;\r\n        return obj;\r\n    }\r\n    _parseQuarterNoteLength(note) {\r\n        let noteLength = parseInt(note.slice(0, note.length - 1));\r\n        switch (note.charAt(note.length - 1)) {\r\n            case \"n\":\r\n                return (4 / noteLength);\r\n            case \".\":\r\n                return ((4 / noteLength) * 1.5);\r\n            case \"t\":\r\n                return ((4 / noteLength) / 1.5);\r\n            default:\r\n                throw new Error(\"Invalid note.\");\r\n        }\r\n    }\r\n    toString() {\r\n        return \"(NoteEvent: Duration: \" + this.duration + \" Pitch: \" + this.pitch + \" startPosition: \" + this.startPosition + \")\\n\";\r\n    }\r\n}\r\nNoteEvent.durationPattern = new RegExp(\"^(1|2|4|8|16|32|64)(t|n|\\\\.)$\");\r\nexport class MetadataEvent {\r\n    constructor(startPosition, bpm, timeSignature) {\r\n        this.startPosition = startPosition;\r\n        this.originalStartPosition = startPosition;\r\n        this.bpm = bpm;\r\n        this.timeSignature = timeSignature;\r\n    }\r\n    get bpm() {\r\n        return this._bpm;\r\n    }\r\n    set bpm(value) {\r\n        if (value < 0) {\r\n            throw new Error(\"Invalid BPM: cannot be negative.\");\r\n        }\r\n        this._bpm = value;\r\n        this._secondsPerBeat = 60 / this._bpm;\r\n    }\r\n    get secondsPerBeat() {\r\n        return this._secondsPerBeat;\r\n    }\r\n    get timeSignature() {\r\n        return this._timeSignature;\r\n    }\r\n    set timeSignature(value) {\r\n        if (value.length != 2) {\r\n            throw new RangeError(\"Incorrect number of values in array.\");\r\n        }\r\n        else if (value[0] < 0 || value[1] < 0) {\r\n            throw new RangeError(\"Numbers must be greater than 0.\");\r\n        }\r\n        if (value[1] % 2 != 0) {\r\n            throw new RangeError(\"Second number must be a power of two.\");\r\n        }\r\n        this._timeSignature = value;\r\n        this._quarterNoteMultiplier = this._timeSignature[1] / 4;\r\n    }\r\n    get quarterNoteMultiplier() {\r\n        return this._quarterNoteMultiplier;\r\n    }\r\n    static comparator(a, b) {\r\n        if (typeof (a) === \"number\") {\r\n            return a - b.startPosition;\r\n        }\r\n        else {\r\n            return a.startPosition - b.startPosition;\r\n        }\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"eventType\": \"MetadataEvent\",\r\n            \"startPosition\": this.startPosition,\r\n            \"bpm\": this.bpm,\r\n            \"timeSignature\": this.timeSignature,\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=SongEvents.js.map","import SortedArray from \"../../HelperModules/SortedArray.js\";\r\nimport { MetadataEvent } from \"../Notation/SongEvents.js\";\r\nexport default class SongMetadata {\r\n    constructor(bpm = 60, timeSignature = [4, 4]) {\r\n        this._metaEvents = new SortedArray(MetadataEvent.comparator);\r\n        this._metaEventSecondLengths = [];\r\n        this._metaEventBarLengths = [];\r\n        this._metaEventBeatLengths = [];\r\n        this.addMetadataEvent(0, bpm, timeSignature);\r\n    }\r\n    get events() {\r\n        return this._metaEvents;\r\n    }\r\n    getBPM(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].bpm;\r\n    }\r\n    getSecondsPerBeat(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].secondsPerBeat;\r\n    }\r\n    getTimeSignature(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].timeSignature;\r\n    }\r\n    getQuarterNoteMultiplier(time) {\r\n        return this._metaEvents[this._metaEvents.binarySearch(time, true)].quarterNoteMultiplier;\r\n    }\r\n    positionQuarterNoteToSeconds(time) {\r\n        if (time === undefined || time < 0) {\r\n            throw new RangeError(\"Time is invalid\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time, true);\r\n        if (index == 0) {\r\n            return time * this._metaEvents[index].quarterNoteMultiplier * this._metaEvents[index].secondsPerBeat;\r\n        }\r\n        else {\r\n            return this._metaEventSecondLengths[index] + (time - this._metaEvents[index].startPosition) * this._metaEvents[index].quarterNoteMultiplier * this._metaEvents[index].secondsPerBeat;\r\n        }\r\n    }\r\n    positionSecondsToQuarterNote(time) {\r\n        for (let i = this._metaEventSecondLengths.length - 1; i >= 0; i--) {\r\n            if (time >= this._metaEventSecondLengths[i]) {\r\n                return this._metaEvents[i].startPosition + (((time - this._metaEventSecondLengths[i]) / this._metaEvents[i].secondsPerBeat) / this._metaEvents[i].quarterNoteMultiplier);\r\n            }\r\n        }\r\n    }\r\n    positionQuarterNoteToBars(time) {\r\n        if (time === undefined || time < 0) {\r\n            throw new RangeError(\"Time is invalid\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time, true);\r\n        if (index == 0) {\r\n            return (time * this._metaEvents[index].quarterNoteMultiplier) / this._metaEvents[index].timeSignature[0];\r\n        }\r\n        else {\r\n            return this._metaEventBarLengths[index] + (((time - this._metaEvents[index].startPosition) * this._metaEvents[index].quarterNoteMultiplier) / this._metaEvents[index].timeSignature[0]);\r\n        }\r\n    }\r\n    positionBarsToQuarterNote(time) {\r\n        for (let i = this._metaEventBarLengths.length - 1; i >= 0; i--) {\r\n            if (time >= this._metaEventBarLengths[i]) {\r\n                return this._metaEvents[i].startPosition + (((time - this._metaEventBarLengths[i]) * this._metaEvents[i].timeSignature[0]) / this._metaEvents[i].quarterNoteMultiplier);\r\n            }\r\n        }\r\n    }\r\n    positionQuarterNoteToBeats(time) {\r\n        if (time === undefined || time < 0) {\r\n            throw new RangeError(\"Time is invalid\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time, true);\r\n        if (index == 0) {\r\n            return (time * this._metaEvents[index].quarterNoteMultiplier);\r\n        }\r\n        else {\r\n            return this._metaEventBeatLengths[index] + ((time - this._metaEvents[index].startPosition) * this._metaEvents[index].quarterNoteMultiplier);\r\n        }\r\n    }\r\n    positionBeatsToQuarterNote(time) {\r\n        for (let i = this._metaEventBeatLengths.length - 1; i >= 0; i--) {\r\n            if (time >= this._metaEventBeatLengths[i]) {\r\n                return this._metaEvents[i].startPosition + ((time - this._metaEventBeatLengths[i]) / this._metaEvents[i].quarterNoteMultiplier);\r\n            }\r\n        }\r\n    }\r\n    addMetadataEvent(time, bpm, timeSignature) {\r\n        let index = this._metaEvents.binarySearch(time);\r\n        if (index === -1) {\r\n            index = this._metaEvents.insert(new MetadataEvent(time, bpm, timeSignature));\r\n        }\r\n        else {\r\n            this._metaEvents[index].originalStartPosition = time;\r\n            this._metaEvents[index].bpm = bpm,\r\n                this._metaEvents[index].timeSignature = timeSignature;\r\n        }\r\n        this.precalculateLengths();\r\n        let indicesToRemove = [];\r\n        for (let i = index + 1; i < this._metaEvents.length; i++) {\r\n            let prevEvent = this._metaEvents[i - 1];\r\n            let roundedBarPosition = Math.round(((this._metaEvents[i].originalStartPosition - prevEvent.startPosition) * prevEvent.quarterNoteMultiplier) / prevEvent.timeSignature[0]);\r\n            let newPosition = prevEvent.startPosition + ((roundedBarPosition) * prevEvent.timeSignature[0]) / prevEvent.quarterNoteMultiplier;\r\n            if (newPosition != this._metaEvents[i].startPosition && this._metaEvents.binarySearch(newPosition) != -1) {\r\n                indicesToRemove.push(i);\r\n            }\r\n            else {\r\n                this._metaEvents[i].startPosition = newPosition;\r\n                this.precalculateLengths();\r\n            }\r\n        }\r\n        if (indicesToRemove != []) {\r\n            indicesToRemove.forEach(index => { this._metaEvents.removeAt(index); });\r\n            this.precalculateLengths();\r\n        }\r\n        return this._metaEvents[index];\r\n    }\r\n    removeMetadataEvent(time) {\r\n        if (time == 0) {\r\n            throw new RangeError(\"Cannot remove initial event.\");\r\n        }\r\n        let index = this._metaEvents.binarySearch(time);\r\n        if (index == -1) {\r\n            throw new RangeError(\"Event does not exist at this time.\");\r\n        }\r\n        this._metaEvents.removeAt(index);\r\n        this.precalculateLengths();\r\n    }\r\n    precalculateLengths() {\r\n        this._metaEventSecondLengths = [0];\r\n        this._metaEventBarLengths = [0];\r\n        this._metaEventBeatLengths = [0];\r\n        let totalSecondsDuration = 0;\r\n        let totalBarsDuration = 0;\r\n        let totalBeatsDuration = 0;\r\n        for (let i = 1; i < this._metaEvents.length; i++) {\r\n            let quarterNoteDuration = this._metaEvents[i].startPosition - this._metaEvents[i - 1].startPosition;\r\n            totalSecondsDuration += quarterNoteDuration * this._metaEvents[i - 1].quarterNoteMultiplier * this._metaEvents[i - 1].secondsPerBeat;\r\n            this._metaEventSecondLengths.push(totalSecondsDuration);\r\n            totalBarsDuration += (quarterNoteDuration * this._metaEvents[i - 1].quarterNoteMultiplier) / this._metaEvents[i - 1].timeSignature[0];\r\n            this._metaEventBarLengths.push(totalBarsDuration);\r\n            totalBeatsDuration += (quarterNoteDuration * this._metaEvents[i - 1].quarterNoteMultiplier);\r\n            this._metaEventBeatLengths.push(totalBeatsDuration);\r\n        }\r\n    }\r\n    serialise() {\r\n        let serialisedEvents = [];\r\n        this._metaEvents.forEach(metaEvent => {\r\n            serialisedEvents.push(metaEvent.serialise());\r\n        });\r\n        return serialisedEvents;\r\n    }\r\n    deserialise(metaEvents) {\r\n        this._metaEvents = new SortedArray();\r\n        this.addMetadataEvent(0, 60, [4, 4]);\r\n        metaEvents.forEach(metaEvent => {\r\n            if (metaEvent.eventType === \"MetadataEvent\") {\r\n                this.addMetadataEvent(metaEvent.startPosition, metaEvent.bpm, metaEvent.timeSignature);\r\n            }\r\n            else {\r\n                console.log(\"SongMetadata does not support this event type.\");\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=SongMetadata.js.map","import { v4 as uuid } from \"uuid\";\r\nexport class OscillatorInstrument {\r\n    constructor(context, settings = OscillatorInstrument.createDefaults()) {\r\n        this._settings = settings;\r\n        this.id = uuid();\r\n        this._context = context;\r\n        this._masterGain = context.createGain();\r\n        this._masterGain.gain.value = this._settings.gain;\r\n        this._sources = [OscillatorInstrument.newOscillator(context, settings, this._masterGain)];\r\n    }\r\n    get oscillatorType() {\r\n        return this._sources[0].oscillator.type;\r\n    }\r\n    set oscillatorType(value) {\r\n        if ([\"sine\", \"square\", \"sawtooth\", \"triangle\"].indexOf(value) == -1) {\r\n            throw new Error(\"Invalid oscillator type\");\r\n        }\r\n        this._settings.oscillatorType = value;\r\n        for (let i = 0; i < this._sources.length; i++) {\r\n            this._sources[i].oscillator.type = value;\r\n        }\r\n    }\r\n    get masterGain() {\r\n        return this._masterGain.gain.value;\r\n    }\r\n    set masterGain(value) {\r\n        if (!(value >= 0 && value <= 1)) {\r\n            throw new RangeError(\"Invalid Gain Value\");\r\n        }\r\n        this._settings.gain = value;\r\n        this._masterGain.gain.setValueAtTime(value, this._context.currentTime);\r\n    }\r\n    get envelopeEnabled() {\r\n        return this._settings.envelopeEnabled;\r\n    }\r\n    set envelopeEnabled(value) {\r\n        this._settings.envelopeEnabled = value;\r\n    }\r\n    get envelope() {\r\n        return this._settings.envelope;\r\n    }\r\n    set envelope(value) {\r\n        this._settings.envelope = value;\r\n    }\r\n    connect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.connect(node);\r\n        }\r\n        else {\r\n            this._masterGain.connect(node.input);\r\n        }\r\n    }\r\n    disconnect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.disconnect(node);\r\n        }\r\n        else {\r\n            this._masterGain.disconnect(node.input);\r\n        }\r\n    }\r\n    disconnectAll() {\r\n        this._masterGain.disconnect();\r\n    }\r\n    playNote(start, end, frequency) {\r\n        let sourceToUse = null;\r\n        for (let i = 0; i < this._sources.length; i++) {\r\n            let sourceAvailable = true;\r\n            let currentSource = this._sources[i];\r\n            for (let j = currentSource.usage.length - 1; j >= 0; j--) {\r\n                let noteDuration = currentSource.usage[j];\r\n                if (this._context.currentTime > noteDuration[1]) {\r\n                    currentSource.usage.splice(j, 1);\r\n                    continue;\r\n                }\r\n                else if (start <= noteDuration[1]) {\r\n                    sourceAvailable = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (sourceAvailable) {\r\n                sourceToUse = currentSource;\r\n                break;\r\n            }\r\n        }\r\n        ;\r\n        if (sourceToUse === null) {\r\n            sourceToUse = OscillatorInstrument.newOscillator(this._context, this._settings, this._masterGain);\r\n            sourceToUse.oscillator.frequency.setValueAtTime(frequency, 0);\r\n            this._sources.push(sourceToUse);\r\n        }\r\n        sourceToUse.usage.push([start, end]);\r\n        this.scheduleNote(start, frequency, end, sourceToUse.oscillator, sourceToUse.gain);\r\n    }\r\n    scheduleNote(startTime, frequency, endTime, source, sourceGain, volume = 0.999) {\r\n        if (startTime < this._context.currentTime) {\r\n            startTime = this._context.currentTime;\r\n        }\r\n        source.frequency.setValueAtTime(frequency, startTime);\r\n        let attackEnd = startTime + 0.001;\r\n        let releaseStart = endTime - 0.001;\r\n        if (this._settings.envelopeEnabled) {\r\n            releaseStart = endTime - this._settings.envelope.release;\r\n            attackEnd = startTime + this._settings.envelope.attack;\r\n        }\r\n        releaseStart = Math.max(endTime - this._settings.envelope.release, startTime);\r\n        attackEnd = Math.min(startTime + this._settings.envelope.attack, endTime);\r\n        if (attackEnd > releaseStart) {\r\n            attackEnd = releaseStart;\r\n        }\r\n        sourceGain.gain.cancelScheduledValues(startTime);\r\n        sourceGain.gain.setTargetAtTime(0.0001, startTime, 0.01);\r\n        sourceGain.gain.linearRampToValueAtTime(volume, attackEnd);\r\n        sourceGain.gain.cancelScheduledValues(releaseStart);\r\n        sourceGain.gain.setValueAtTime(volume, releaseStart);\r\n        sourceGain.gain.exponentialRampToValueAtTime(0.00001, endTime);\r\n    }\r\n    stop() {\r\n        this._sources.forEach(element => {\r\n            element.gain.gain.cancelScheduledValues(this._context.currentTime);\r\n            element.gain.gain.setTargetAtTime(0.0001, this._context.currentTime, 0.03);\r\n        });\r\n    }\r\n    serialise() {\r\n        return this._settings;\r\n    }\r\n    destroy() {\r\n        this._masterGain = null;\r\n        this._sources = [];\r\n    }\r\n    static newOscillator(context, settings, destination) {\r\n        let source = context.createOscillator();\r\n        source.start();\r\n        source.type = settings.oscillatorType;\r\n        let sourceGain = context.createGain();\r\n        sourceGain.gain.value = 0;\r\n        source.connect(sourceGain);\r\n        sourceGain.connect(destination);\r\n        return { oscillator: source, gain: sourceGain, usage: [] };\r\n    }\r\n    static createDefaults() {\r\n        return {\r\n            \"type\": \"oscillator\",\r\n            \"oscillatorType\": \"sine\",\r\n            \"gain\": 0.5,\r\n            \"envelopeEnabled\": true,\r\n            \"envelope\": {\r\n                \"attack\": 0.1,\r\n                \"release\": 0.1\r\n            }\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=OscillatorInstrument.js.map","import SortedArray from \"../../HelperModules/SortedArray.js\";\r\nimport { BaseEvent, NoteEvent, SecondsBaseEvent } from \"./SongEvents.js\";\r\nexport class EventTimeline {\r\n    constructor() {\r\n        this._events = new SortedArray(BaseEvent.comparator);\r\n        this._eventPosition = 0;\r\n        this.longestEventIndex = null;\r\n        this.longestEventValue = 0;\r\n    }\r\n    get events() {\r\n        return this._events;\r\n    }\r\n    get playbackTime() {\r\n        if (this._events.length > 0) {\r\n            let event = this._events[this.longestEventIndex];\r\n            return event.startPosition + event.duration;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    updatePlaybackTime() {\r\n        this.longestEventIndex = null;\r\n        this.longestEventValue = 0;\r\n        for (let i = 0; i < this._events.length; i++) {\r\n            if ((this._events[i].startPosition + this._events[i].duration) > this.longestEventValue) {\r\n                this.longestEventIndex = i;\r\n            }\r\n        }\r\n    }\r\n    addEvent(event) {\r\n        let index = this._events.insert(event);\r\n        if (this.longestEventIndex != null && (event.startPosition + event.duration) > this.longestEventValue) {\r\n            this.longestEventIndex = index;\r\n        }\r\n        else {\r\n            this.longestEventIndex = 0;\r\n        }\r\n        return index;\r\n    }\r\n    editEvent(index, startPosition, duration) {\r\n        let event = this.events[index];\r\n        event.startPosition = startPosition;\r\n        if (duration != undefined) {\r\n            event.duration = duration;\r\n        }\r\n        this.removeAt(index);\r\n        return this.addEvent(event);\r\n    }\r\n    removeEvent(event) {\r\n        let index = this.getIndexOfEvent(event);\r\n        if (index == -1) {\r\n            throw new Error(\"Event doesn't exist.\");\r\n        }\r\n        this.removeAt(index);\r\n    }\r\n    removeAt(index) {\r\n        this._events.splice(index, 1);\r\n        if (index === this.longestEventIndex) {\r\n            if (this._events.length > 0) {\r\n                this.updatePlaybackTime();\r\n            }\r\n            else {\r\n                this.longestEventIndex = null;\r\n            }\r\n        }\r\n        else if (index < this.longestEventIndex) {\r\n            this.longestEventIndex -= 1;\r\n        }\r\n    }\r\n    getIndexOfEvent(event) {\r\n        return this.events.map(function (x) { return x.id; }).indexOf(event.id);\r\n    }\r\n    start(time) {\r\n        for (let i = 0; i < this._events.length; i++) {\r\n            if ((this._events[i].startPosition + this._events[i].duration) > time) {\r\n                this._eventPosition = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    getEventsUntilTime(time) {\r\n        let eventsToSchedule = [];\r\n        while (this._eventPosition < this._events.length && this._events[this._eventPosition].startPosition < time) {\r\n            eventsToSchedule.push(this._events[this._eventPosition]);\r\n            this._eventPosition += 1;\r\n        }\r\n        return eventsToSchedule;\r\n    }\r\n    getEventsBetweenTimes(startTime, endTime) {\r\n        let index = 0;\r\n        let foundEvents = [];\r\n        while (index < this._events.length && this._events[index].endPosition <= startTime) {\r\n            index++;\r\n        }\r\n        while (index < this._events.length && this._events[index].startPosition < endTime) {\r\n            if (this._events[index].startPosition < endTime && this._events[index].endPosition > startTime) {\r\n                foundEvents.push(this._events[index]);\r\n            }\r\n            index++;\r\n        }\r\n        return foundEvents;\r\n    }\r\n    serialise() {\r\n        let serialisedEvents = [];\r\n        for (let i = 0; i < this.events.length; i++) {\r\n            serialisedEvents.push(this.events[i].serialise());\r\n        }\r\n        return serialisedEvents;\r\n    }\r\n    deserialise(songEvents, metadata) {\r\n        for (let i = 0; i < songEvents.length; i++) {\r\n            switch (songEvents[i].eventType) {\r\n                case \"BaseEvent\":\r\n                    this._events.push(new BaseEvent(songEvents[i].startPosition, songEvents[i].duration));\r\n                    break;\r\n                case \"NoteEvent\":\r\n                    this._events.push(new NoteEvent(songEvents[i].startPosition, songEvents[i].pitchString, songEvents[i].duration));\r\n                    break;\r\n                case \"SecondsBaseEvent\":\r\n                    this._events.push(new SecondsBaseEvent(songEvents[i].startPosition, metadata, songEvents[i].duration));\r\n                    break;\r\n            }\r\n        }\r\n        this.updatePlaybackTime();\r\n    }\r\n}\r\n//# sourceMappingURL=EventTimeline.js.map","import { EventTimeline } from \"../Notation/EventTimeline.js\";\r\nimport { v4 as uuid } from \"uuid\";\r\nexport class BaseTrack {\r\n    constructor(metadata, context, scheduleEvent, audioSource, connectionManager, settings) {\r\n        this._startTime = 0;\r\n        this._playing = false;\r\n        this._timeline = new EventTimeline();\r\n        this._context = context;\r\n        this._metadata = metadata;\r\n        this._scheduleEvent = scheduleEvent;\r\n        this._connectionManager = connectionManager;\r\n        this._scheduleEventFunc = function (quarterNotePosition) { this.scheduleSongEvents(quarterNotePosition); }.bind(this);\r\n        this._scheduleEvent.addListener(this._scheduleEventFunc);\r\n        this.audioSource = audioSource;\r\n        if (settings != undefined) {\r\n            this.id = settings.id;\r\n            this._timeline.deserialise(settings.events, this._metadata);\r\n            this._connectionManager.createConnections(this.audioSource, settings.connections);\r\n        }\r\n        else {\r\n            this.id = uuid();\r\n            this._connectionManager.createConnections(this.audioSource, [\"Context\"]);\r\n        }\r\n    }\r\n    get timeline() {\r\n        return this._timeline;\r\n    }\r\n    get connection() {\r\n        return this._connectionManager.getConnections(this.audioSource)[0];\r\n    }\r\n    get possibleConnections() {\r\n        return this._connectionManager.possibleConnectionStrings;\r\n    }\r\n    start(startPosition) {\r\n        this.stop();\r\n        if (startPosition == 0) {\r\n            this._startTime = this._context.currentTime;\r\n        }\r\n        else {\r\n            this._startTime = this._context.currentTime - this._metadata.positionQuarterNoteToSeconds(startPosition);\r\n        }\r\n        this._playing = true;\r\n        this._timeline.start(startPosition);\r\n    }\r\n    stop() {\r\n        this.audioSource.stop();\r\n        this._playing = false;\r\n    }\r\n    scheduleSongEvents(quarterNoteTime) {\r\n        if (this._playing) {\r\n            let events = this._timeline.getEventsUntilTime(quarterNoteTime);\r\n            events.forEach(event => {\r\n                this.songEventHandler(event);\r\n            });\r\n        }\r\n    }\r\n    scheduleAllEvents() {\r\n        this._startTime = this._context.currentTime;\r\n        for (let i = 0; i < this._timeline.events.length; i++) {\r\n            this.songEventHandler(this._timeline.events[i]);\r\n        }\r\n    }\r\n    connectTo(connectionString) {\r\n        if (connectionString in this._connectionManager.possibleConnections) {\r\n            this._connectionManager.removeAllConnections(this.audioSource);\r\n            this._connectionManager.addConnection(this.audioSource, connectionString);\r\n        }\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"id\": this.id,\r\n            \"source\": this.audioSource.serialise(),\r\n            \"events\": this.timeline.serialise(),\r\n            \"connections\": this._connectionManager.getConnections(this.audioSource),\r\n        };\r\n    }\r\n    destroy() {\r\n        this.stop();\r\n        this.audioSource.destroy();\r\n        this._scheduleEvent.removeListener(this._scheduleEventFunc);\r\n        this.audioSource = null;\r\n    }\r\n}\r\n//# sourceMappingURL=BaseTrack.js.map","import { OscillatorInstrument } from \"../Nodes/OscillatorInstrument.js\";\r\nimport { NoteEvent } from \"../Notation/SongEvents.js\";\r\nimport { BaseTrack } from \"./BaseTrack.js\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nexport class OscillatorTrack extends BaseTrack {\r\n    constructor(metadata, context, scheduleEvent, connectionManager, settings) {\r\n        let instrument = new OscillatorInstrument(context, settings ? settings.source : undefined);\r\n        super(metadata, context, scheduleEvent, instrument, connectionManager, settings);\r\n        this._pitchStrings = {};\r\n        if (settings) {\r\n            settings.events.forEach(event => {\r\n                if (event.pitchString in this._pitchStrings) {\r\n                    this._pitchStrings[event.pitchString] += 1;\r\n                }\r\n                else {\r\n                    this._pitchStrings[event.pitchString] = 1;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    get highestPitch() {\r\n        let highest = \"C0\";\r\n        Object.keys(this._pitchStrings).forEach(pitchString => {\r\n            if (NoteHelper.distanceBetweenNotes(pitchString, highest) > 0) {\r\n                highest = pitchString;\r\n            }\r\n        });\r\n        return highest;\r\n    }\r\n    get lowestPitch() {\r\n        let lowest = \"B9\";\r\n        Object.keys(this._pitchStrings).forEach(pitchString => {\r\n            if (NoteHelper.distanceBetweenNotes(pitchString, lowest) < 0) {\r\n                lowest = pitchString;\r\n            }\r\n        });\r\n        return lowest;\r\n    }\r\n    addNote(startPosition, pitch, duration) {\r\n        let event = new NoteEvent(startPosition, pitch, duration);\r\n        this._timeline.addEvent(event);\r\n        if (pitch in this._pitchStrings) {\r\n            this._pitchStrings[pitch] += 1;\r\n        }\r\n        else {\r\n            this._pitchStrings[pitch] = 1;\r\n        }\r\n        return event;\r\n    }\r\n    removeNote(event) {\r\n        this.timeline.removeEvent(event);\r\n        if (event.pitchString in this._pitchStrings) {\r\n            this._pitchStrings[event.pitchString] -= 1;\r\n            if (this._pitchStrings[event.pitchString] < 1) {\r\n                delete this._pitchStrings[event.pitchString];\r\n            }\r\n        }\r\n    }\r\n    removeNoteByIndex(index) {\r\n        this._timeline.events.removeAt(index);\r\n    }\r\n    songEventHandler(event) {\r\n        if (event instanceof NoteEvent) {\r\n            let eventStart = this._startTime + this._metadata.positionQuarterNoteToSeconds(event.startPosition);\r\n            let eventEnd = this._startTime + this._metadata.positionQuarterNoteToSeconds(event.startPosition + event.duration);\r\n            this.audioSource.playNote(eventStart, eventEnd, event.pitch);\r\n        }\r\n        else {\r\n            throw new Error(\"OscillatorTrack cannot handle this event type:\" + event.constructor.name);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=OscillatorTrack.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { v4 as uuid } from 'uuid';\r\nexport class SoundFileInstrument {\r\n    constructor(context, settings = SoundFileInstrument.createDefaults()) {\r\n        this._settings = settings;\r\n        this.id = uuid();\r\n        this._context = context;\r\n        this._playingNodes = [];\r\n        this._masterGain = context.createGain();\r\n        this._masterGain.gain.value = this._settings.gain;\r\n    }\r\n    static create(context, settings = SoundFileInstrument.createDefaults()) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const o = new SoundFileInstrument(context, settings);\r\n            yield o.initialise();\r\n            return o;\r\n        });\r\n    }\r\n    initialise() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this._settings.soundData != \"\") {\r\n                this._audioBuffer = yield this._context.decodeAudioData(yield SoundFileInstrument.getBlobFromBase64(this._settings.soundData).arrayBuffer());\r\n            }\r\n        });\r\n    }\r\n    get duration() {\r\n        if (this._audioBuffer != null) {\r\n            return this._audioBuffer.duration;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    get masterGain() {\r\n        return this._masterGain.gain.value;\r\n    }\r\n    set masterGain(value) {\r\n        if (!(value >= 0 && value <= 1)) {\r\n            throw new RangeError(\"Invalid Gain Value\");\r\n        }\r\n        this._settings.gain = value;\r\n        this._masterGain.gain.setValueAtTime(value, this._context.currentTime);\r\n    }\r\n    connect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.connect(node);\r\n        }\r\n        else {\r\n            this._masterGain.connect(node.input);\r\n        }\r\n    }\r\n    disconnect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._masterGain.disconnect(node);\r\n        }\r\n        else {\r\n            this._masterGain.disconnect(node.input);\r\n        }\r\n    }\r\n    disconnectAll() {\r\n        this._masterGain.disconnect();\r\n    }\r\n    playOneShot(startTime, offset, volume = 1) {\r\n        let bufferSource = SoundFileInstrument.createBufferSource(this._context, this._audioBuffer);\r\n        this._playingNodes.push(bufferSource);\r\n        if (volume != 1) {\r\n            let volumeGain = this._context.createGain();\r\n            volumeGain.gain.value = volume;\r\n            bufferSource.connect(volumeGain);\r\n            volumeGain.connect(this._masterGain);\r\n        }\r\n        else {\r\n            bufferSource.connect(this._masterGain);\r\n        }\r\n        if (offset < 0) {\r\n            offset = 0;\r\n        }\r\n        startTime = Math.max(0, startTime);\r\n        bufferSource.start(startTime, offset);\r\n    }\r\n    stop() {\r\n        this._playingNodes.forEach(bufferSource => {\r\n            bufferSource.stop();\r\n        });\r\n        this._playingNodes = [];\r\n    }\r\n    setSoundFile(file) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            SoundFileInstrument.getBase64FromBlob(file, base64 => {\r\n                this._settings.soundData = base64;\r\n            });\r\n            this._audioBuffer = yield this._context.decodeAudioData(yield file.arrayBuffer());\r\n        });\r\n    }\r\n    serialise() {\r\n        return this._settings;\r\n    }\r\n    destroy() {\r\n        this._masterGain = null;\r\n        this._playingNodes = [];\r\n        this._audioBuffer = null;\r\n    }\r\n    static createBufferSource(context, buffer) {\r\n        let bufferSource = context.createBufferSource();\r\n        bufferSource.buffer = buffer;\r\n        return bufferSource;\r\n    }\r\n    static getBase64FromBlob(file, callback) {\r\n        let reader = new FileReader();\r\n        reader.onload = function () {\r\n            callback(reader.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n    static getBlobFromBase64(base64blob) {\r\n        var byteString = atob(base64blob.split(',')[1]);\r\n        var ab = new ArrayBuffer(byteString.length);\r\n        var ia = new Uint8Array(ab);\r\n        for (var i = 0; i < byteString.length; i++) {\r\n            ia[i] = byteString.charCodeAt(i);\r\n        }\r\n        return new Blob([ab], { type: base64blob.split(\":\").pop().split(\";\")[0] });\r\n    }\r\n    static createDefaults() {\r\n        return {\r\n            \"type\": \"soundFile\",\r\n            \"gain\": 1,\r\n            \"soundData\": \"\"\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=SoundFileInstrument.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport { BaseTrack } from \"./BaseTrack.js\";\r\nimport { SoundFileInstrument } from \"../Nodes/SoundFileInstrument.js\";\r\nimport { SecondsBaseEvent } from \"../Notation/SongEvents.js\";\r\nexport class SoundFileTrack extends BaseTrack {\r\n    constructor(metadata, context, scheduleEvent, connectionManager, settings) {\r\n        super(metadata, context, scheduleEvent, new SoundFileInstrument(context, settings ? settings.source : undefined), connectionManager, settings);\r\n        this.allowOverlaps = false;\r\n        if (settings) {\r\n            this.allowOverlaps = settings.allowOverlaps;\r\n        }\r\n    }\r\n    static create(metadata, context, scheduleEvent, connectionManager, settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const o = new SoundFileTrack(metadata, context, scheduleEvent, connectionManager, settings);\r\n            yield o.initialise();\r\n            return o;\r\n        });\r\n    }\r\n    get soundFileDuration() {\r\n        return this._metadata.positionSecondsToQuarterNote(this.audioSource.duration);\r\n    }\r\n    initialise() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.audioSource.initialise();\r\n        });\r\n    }\r\n    addOneShot(startPosition) {\r\n        if (!this.allowOverlaps && this._timeline.getEventsBetweenTimes(startPosition, startPosition + this._metadata.positionSecondsToQuarterNote(this.audioSource.duration)).length > 0) {\r\n            throw new RangeError(\"Invalid location: a playback event already occurs in the duration of the new event. Disable allowOverlaps to suppress this error.\");\r\n        }\r\n        let event = new SecondsBaseEvent(startPosition, this._metadata, this.audioSource.duration);\r\n        this._timeline.addEvent(event);\r\n        return event;\r\n    }\r\n    removeOneShot(event) {\r\n        this._timeline.removeEvent(event);\r\n    }\r\n    setSoundFile(file) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.audioSource.setSoundFile(file);\r\n            this._timeline.events.forEach(event => {\r\n                event.secondsDuration = this.audioSource.duration;\r\n            });\r\n            if (!this.allowOverlaps) {\r\n                let index = 0;\r\n                while (index < this._timeline.events.length) {\r\n                    let event = this._timeline.events[index];\r\n                    let overlappingEvents = this._timeline.getEventsBetweenTimes(event.startPosition, event.endPosition);\r\n                    overlappingEvents.forEach(overlapEvent => {\r\n                        if (overlapEvent != event) {\r\n                            this._timeline.removeEvent(overlapEvent);\r\n                        }\r\n                    });\r\n                    index++;\r\n                }\r\n            }\r\n            this._timeline.updatePlaybackTime();\r\n        });\r\n    }\r\n    serialise() {\r\n        return {\r\n            \"id\": this.id,\r\n            \"source\": this.audioSource.serialise(),\r\n            \"events\": this.timeline.serialise(),\r\n            \"connections\": this._connectionManager.getConnections(this.audioSource),\r\n            \"allowOverlaps\": this.allowOverlaps\r\n        };\r\n    }\r\n    songEventHandler(event) {\r\n        if (event instanceof SecondsBaseEvent) {\r\n            let startPositionSeconds = this._startTime + this._metadata.positionQuarterNoteToSeconds(event.startPosition);\r\n            this.audioSource.playOneShot(startPositionSeconds, this._context.currentTime - startPositionSeconds);\r\n        }\r\n        else {\r\n            throw new Error(\"SoundFileTrack cannot handle this event type: \" + event.constructor.name);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SoundFileTrack.js.map","/*\r\n    Copyright (c) 2012 DinahMoe AB & Oskar Eriksson\r\n\r\n    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation\r\n    files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy,\r\n    modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software\r\n    is furnished to do so, subject to the following conditions:\r\n\r\n    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE\r\n    OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n/*global module*/\r\nvar userContext,\r\n    userInstance,\r\n    pipe = function (param, val) {\r\n        param.value = val;\r\n    },\r\n    Super = Object.create(null, {\r\n        activate: {\r\n            writable: true,\r\n            value: function (doActivate) {\r\n                if (doActivate) {\r\n                    this.input.disconnect();\r\n                    this.input.connect(this.activateNode);\r\n                    if (this.activateCallback) {\r\n                        this.activateCallback(doActivate);\r\n                    }\r\n                } else {\r\n                    this.input.disconnect();\r\n                    this.input.connect(this.output);\r\n                }\r\n            }\r\n        },\r\n        bypass: {\r\n            get: function () {\r\n                return this._bypass;\r\n            },\r\n            set: function (value) {\r\n                if (this._lastBypassValue === value) {\r\n                    return;\r\n                }\r\n                this._bypass = value;\r\n                this.activate(!value);\r\n                this._lastBypassValue = value;\r\n            }\r\n        },\r\n        connect: {\r\n            value: function (target) {\r\n                this.output.connect(target);\r\n            }\r\n        },\r\n        disconnect: {\r\n            value: function (target) {\r\n                this.output.disconnect(target);\r\n            }\r\n        },\r\n        connectInOrder: {\r\n            value: function (nodeArray) {\r\n                var i = nodeArray.length - 1;\r\n                while (i--) {\r\n                    if (!nodeArray[i].connect) {\r\n                        return console.error(\"AudioNode.connectInOrder: TypeError: Not an AudioNode.\", nodeArray[i]);\r\n                    }\r\n                    if (nodeArray[i + 1].input) {\r\n                        nodeArray[i].connect(nodeArray[i + 1].input);\r\n                    } else {\r\n                        nodeArray[i].connect(nodeArray[i + 1]);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        getDefaults: {\r\n            value: function () {\r\n                var result = {};\r\n                for (var key in this.defaults) {\r\n                    result[key] = this.defaults[key].value;\r\n                }\r\n                return result;\r\n            }\r\n        },\r\n        automate: {\r\n            value: function (property, value, duration, startTime) {\r\n                var start = startTime ? ~~(startTime / 1000) : userContext.currentTime,\r\n                    dur = duration ? ~~(duration / 1000) : 0,\r\n                    _is = this.defaults[property],\r\n                    param = this[property],\r\n                    method;\r\n\r\n                if (param) {\r\n                    if (_is.automatable) {\r\n                        if (!duration) {\r\n                            method = \"setValueAtTime\";\r\n                        } else {\r\n                            method = \"linearRampToValueAtTime\";\r\n                            param.cancelScheduledValues(start);\r\n                            param.setValueAtTime(param.value, start);\r\n                        }\r\n                        param[method](value, dur + start);\r\n                    } else {\r\n                        param = value;\r\n                    }\r\n                } else {\r\n                    console.error(\"Invalid Property for \" + this.name);\r\n                }\r\n            }\r\n        }\r\n    }),\r\n    FLOAT = \"float\",\r\n    BOOLEAN = \"boolean\",\r\n    STRING = \"string\",\r\n    INT = \"int\";\r\n\r\nfunction definition() {\r\n    return Tuna;\r\n}\r\n\r\nexport function Tuna(context) {\r\n    if (!(this instanceof Tuna)) {\r\n        return new Tuna(context);\r\n    }\r\n\r\n    var _window = typeof window === \"undefined\" ? {} : window;\r\n\r\n    if (!_window.AudioContext) {\r\n        _window.AudioContext = _window.webkitAudioContext;\r\n    }\r\n    if (!context) {\r\n        console.log(\"tuna.js: Missing audio context! Creating a new context for you.\");\r\n        context = _window.AudioContext && (new _window.AudioContext());\r\n    }\r\n    if (!context) {\r\n        throw new Error(\"Tuna cannot initialize because this environment does not support web audio.\");\r\n    }\r\n    connectify(context);\r\n    userContext = context;\r\n    userInstance = this;\r\n}\r\n\r\n// Modified code from source to allow the global context variable to be changed.\r\nexport function setContext(context) {\r\n    userContext = context;\r\n}\r\n\r\nfunction connectify(context) {\r\n    if (context.__connectified__ === true) return;\r\n\r\n    var gain = context.createGain(),\r\n        proto = Object.getPrototypeOf(Object.getPrototypeOf(gain)),\r\n        oconnect = proto.connect;\r\n\r\n    proto.connect = shimConnect;\r\n    context.__connectified__ = true; // Prevent overriding connect more than once\r\n\r\n    function shimConnect() {\r\n        var node = arguments[0];\r\n        arguments[0] = Super.isPrototypeOf ? (Super.isPrototypeOf(node) ? node.input : node) : (node.input || node);\r\n        oconnect.apply(this, arguments);\r\n        return node;\r\n    }\r\n}\r\n\r\nfunction dbToWAVolume(db) {\r\n    return Math.max(0, Math.round(100 * Math.pow(2, db / 6)) / 100);\r\n}\r\n\r\nfunction fmod(x, y) {\r\n    // http://kevin.vanzonneveld.net\r\n    // *     example 1: fmod(5.7, 1.3);\r\n    // *     returns 1: 0.5\r\n    var tmp, tmp2, p = 0,\r\n        pY = 0,\r\n        l = 0.0,\r\n        l2 = 0.0;\r\n\r\n    tmp = x.toExponential().match(/^.\\.?(.*)e(.+)$/);\r\n    p = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\r\n    tmp = y.toExponential().match(/^.\\.?(.*)e(.+)$/);\r\n    pY = parseInt(tmp[2], 10) - (tmp[1] + \"\").length;\r\n\r\n    if (pY > p) {\r\n        p = pY;\r\n    }\r\n\r\n    tmp2 = (x % y);\r\n\r\n    if (p < -100 || p > 20) {\r\n        // toFixed will give an out of bound error so we fix it like this:\r\n        l = Math.round(Math.log(tmp2) / Math.log(10));\r\n        l2 = Math.pow(10, l);\r\n\r\n        return (tmp2 / l2).toFixed(l - p) * l2;\r\n    } else {\r\n        return parseFloat(tmp2.toFixed(-p));\r\n    }\r\n}\r\n\r\nfunction sign(x) {\r\n    if (x === 0) {\r\n        return 1;\r\n    } else {\r\n        return Math.abs(x) / x;\r\n    }\r\n}\r\n\r\nfunction tanh(n) {\r\n    return (Math.exp(n) - Math.exp(-n)) / (Math.exp(n) + Math.exp(-n));\r\n}\r\n\r\nfunction initValue(userVal, defaultVal) {\r\n    return userVal === undefined ? defaultVal : userVal;\r\n}\r\n\r\nTuna.prototype.Bitcrusher = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.processor);\r\n    this.processor.connect(this.output);\r\n\r\n    var phaser = 0,\r\n        last = 0,\r\n        input, output, step, i, length;\r\n    this.processor.onaudioprocess = function (e) {\r\n        input = e.inputBuffer.getChannelData(0),\r\n            output = e.outputBuffer.getChannelData(0),\r\n            step = Math.pow(1 / 2, this.bits);\r\n        length = input.length;\r\n        for (i = 0; i < length; i++) {\r\n            phaser += this.normfreq;\r\n            if (phaser >= 1.0) {\r\n                phaser -= 1.0;\r\n                last = step * Math.floor(input[i] / step + 0.5);\r\n            }\r\n            output[i] = last;\r\n        }\r\n    };\r\n\r\n    this.bits = properties.bits || this.defaults.bits.value;\r\n    this.normfreq = initValue(properties.normfreq, this.defaults.normfreq.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Bitcrusher.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Bitcrusher\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bits: {\r\n                value: 4,\r\n                min: 1,\r\n                max: 16,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bufferSize: {\r\n                value: 4096,\r\n                min: 256,\r\n                max: 16384,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            normfreq: {\r\n                value: 0.1,\r\n                min: 0.0001,\r\n                max: 1.0,\r\n                automatable: false,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    bits: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.processor.bits;\r\n        },\r\n        set: function (value) {\r\n            this.processor.bits = value;\r\n        }\r\n    },\r\n    normfreq: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.processor.normfreq;\r\n        },\r\n        set: function (value) {\r\n            this.processor.normfreq = value;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Cabinet = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.convolver = this.newConvolver(properties.impulsePath || \"../impulses/impulse_guitar.wav\");\r\n    this.makeupNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.convolver.input);\r\n    this.convolver.output.connect(this.makeupNode);\r\n    this.makeupNode.connect(this.output);\r\n    //don't use makeupGain setter at init to avoid smoothing\r\n    this.makeupNode.gain.value = initValue(properties.makeupGain, this.defaults.makeupGain.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Cabinet.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Cabinet\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            makeupGain: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 20,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    makeupGain: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.makeupNode.gain;\r\n        },\r\n        set: function (value) {\r\n            this.makeupNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    newConvolver: {\r\n        value: function (impulsePath) {\r\n            return new userInstance.Convolver({\r\n                impulse: impulsePath,\r\n                dryLevel: 0,\r\n                wetLevel: 1\r\n            });\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Chorus = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.attenuator = this.activateNode = userContext.createGain();\r\n    this.splitter = userContext.createChannelSplitter(2);\r\n    this.delayL = userContext.createDelay();\r\n    this.delayR = userContext.createDelay();\r\n    this.feedbackGainNodeLR = userContext.createGain();\r\n    this.feedbackGainNodeRL = userContext.createGain();\r\n    this.merger = userContext.createChannelMerger(2);\r\n    this.output = userContext.createGain();\r\n\r\n    this.lfoL = new userInstance.LFO({\r\n        target: this.delayL.delayTime,\r\n        callback: pipe\r\n    });\r\n    this.lfoR = new userInstance.LFO({\r\n        target: this.delayR.delayTime,\r\n        callback: pipe\r\n    });\r\n\r\n    this.input.connect(this.attenuator);\r\n    this.attenuator.connect(this.output);\r\n    this.attenuator.connect(this.splitter);\r\n    this.splitter.connect(this.delayL, 0);\r\n    this.splitter.connect(this.delayR, 1);\r\n    this.delayL.connect(this.feedbackGainNodeLR);\r\n    this.delayR.connect(this.feedbackGainNodeRL);\r\n    this.feedbackGainNodeLR.connect(this.delayR);\r\n    this.feedbackGainNodeRL.connect(this.delayL);\r\n    this.delayL.connect(this.merger, 0, 0);\r\n    this.delayR.connect(this.merger, 0, 1);\r\n    this.merger.connect(this.output);\r\n\r\n    this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\r\n    this.rate = initValue(properties.rate, this.defaults.rate.value);\r\n    this.delay = initValue(properties.delay, this.defaults.delay.value);\r\n    this.depth = initValue(properties.depth, this.defaults.depth.value);\r\n    this.lfoR.phase = Math.PI / 2;\r\n    this.attenuator.gain.value = 0.6934; // 1 / (10 ^ (((20 * log10(3)) / 3) / 20))\r\n    this.lfoL.activate(true);\r\n    this.lfoR.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Chorus.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Chorus\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            feedback: {\r\n                value: 0.4,\r\n                min: 0,\r\n                max: 0.95,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            delay: {\r\n                value: 0.0045,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            depth: {\r\n                value: 0.7,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            rate: {\r\n                value: 1.5,\r\n                min: 0,\r\n                max: 8,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    delay: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._delay;\r\n        },\r\n        set: function (value) {\r\n            this._delay = 0.0002 * (Math.pow(10, value) * 2);\r\n            this.lfoL.offset = this._delay;\r\n            this.lfoR.offset = this._delay;\r\n            this._depth = this._depth;\r\n        }\r\n    },\r\n    depth: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._depth;\r\n        },\r\n        set: function (value) {\r\n            this._depth = value;\r\n            this.lfoL.oscillation = this._depth * this._delay;\r\n            this.lfoR.oscillation = this._depth * this._delay;\r\n        }\r\n    },\r\n    feedback: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._feedback;\r\n        },\r\n        set: function (value) {\r\n            this._feedback = value;\r\n            this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n            this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    rate: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._rate;\r\n        },\r\n        set: function (value) {\r\n            this._rate = value;\r\n            this.lfoL.frequency = this._rate;\r\n            this.lfoR.frequency = this._rate;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Compressor = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.compNode = this.activateNode = userContext.createDynamicsCompressor();\r\n    this.makeupNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.compNode.connect(this.makeupNode);\r\n    this.makeupNode.connect(this.output);\r\n\r\n    this.automakeup = initValue(properties.automakeup, this.defaults.automakeup.value);\r\n\r\n    //don't use makeupGain setter at initialization to avoid smoothing\r\n    if (this.automakeup) {\r\n        this.makeupNode.gain.value = dbToWAVolume(this.computeMakeup());\r\n    } else {\r\n        this.makeupNode.gain.value = dbToWAVolume(initValue(properties.makeupGain, this.defaults.makeupGain.value));\r\n    }\r\n    this.threshold = initValue(properties.threshold, this.defaults.threshold.value);\r\n    this.release = initValue(properties.release, this.defaults.release.value);\r\n    this.attack = initValue(properties.attack, this.defaults.attack.value);\r\n    this.ratio = properties.ratio || this.defaults.ratio.value;\r\n    this.knee = initValue(properties.knee, this.defaults.knee.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Compressor.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Compressor\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            threshold: {\r\n                value: -20,\r\n                min: -60,\r\n                max: 0,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            release: {\r\n                value: 250,\r\n                min: 10,\r\n                max: 2000,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            makeupGain: {\r\n                value: 1,\r\n                min: 1,\r\n                max: 100,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            attack: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1000,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            ratio: {\r\n                value: 4,\r\n                min: 1,\r\n                max: 50,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            knee: {\r\n                value: 5,\r\n                min: 0,\r\n                max: 40,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            automakeup: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    computeMakeup: {\r\n        value: function () {\r\n            var magicCoefficient = 4, // raise me if the output is too hot\r\n                c = this.compNode;\r\n            return -(c.threshold.value - c.threshold.value / c.ratio.value) / magicCoefficient;\r\n        }\r\n    },\r\n    automakeup: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._automakeup;\r\n        },\r\n        set: function (value) {\r\n            this._automakeup = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    threshold: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.compNode.threshold;\r\n        },\r\n        set: function (value) {\r\n            this.compNode.threshold.value = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    ratio: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.compNode.ratio;\r\n        },\r\n        set: function (value) {\r\n            this.compNode.ratio.value = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    knee: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.compNode.knee;\r\n        },\r\n        set: function (value) {\r\n            this.compNode.knee.value = value;\r\n            if (this._automakeup) this.makeupGain = this.computeMakeup();\r\n        }\r\n    },\r\n    attack: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.compNode.attack;\r\n        },\r\n        set: function (value) {\r\n            this.compNode.attack.value = value / 1000;\r\n        }\r\n    },\r\n    release: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.compNode.release;\r\n        },\r\n        set: function (value) {\r\n            this.compNode.release.value = value / 1000;\r\n        }\r\n    },\r\n    makeupGain: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.makeupNode.gain;\r\n        },\r\n        set: function (value) {\r\n            this.makeupNode.gain.setTargetAtTime(dbToWAVolume(value), userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Convolver = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.convolver = userContext.createConvolver();\r\n    this.dry = userContext.createGain();\r\n    this.filterLow = userContext.createBiquadFilter();\r\n    this.filterHigh = userContext.createBiquadFilter();\r\n    this.wet = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.filterLow);\r\n    this.activateNode.connect(this.dry);\r\n    this.filterLow.connect(this.filterHigh);\r\n    this.filterHigh.connect(this.convolver);\r\n    this.convolver.connect(this.wet);\r\n    this.wet.connect(this.output);\r\n    this.dry.connect(this.output);\r\n\r\n    //don't use setters at init to avoid smoothing\r\n    this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\r\n    this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\r\n    this.filterHigh.frequency.value = properties.highCut || this.defaults.highCut.value;\r\n    this.filterLow.frequency.value = properties.lowCut || this.defaults.lowCut.value;\r\n    this.output.gain.value = initValue(properties.level, this.defaults.level.value);\r\n    this.filterHigh.type = \"lowpass\";\r\n    this.filterLow.type = \"highpass\";\r\n    this.buffer = properties.impulse || \"../impulses/ir_rev_short.wav\";\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Convolver.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Convolver\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            highCut: {\r\n                value: 22050,\r\n                min: 20,\r\n                max: 22050,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            lowCut: {\r\n                value: 20,\r\n                min: 20,\r\n                max: 22050,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            dryLevel: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            wetLevel: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            level: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    lowCut: {\r\n        get: function () {\r\n            return this.filterLow.frequency;\r\n        },\r\n        set: function (value) {\r\n            this.filterLow.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    highCut: {\r\n        get: function () {\r\n            return this.filterHigh.frequency;\r\n        },\r\n        set: function (value) {\r\n            this.filterHigh.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    level: {\r\n        get: function () {\r\n            return this.output.gain;\r\n        },\r\n        set: function (value) {\r\n            this.output.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    dryLevel: {\r\n        get: function () {\r\n            return this.dry.gain;\r\n        },\r\n        set: function (value) {\r\n            this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    wetLevel: {\r\n        get: function () {\r\n            return this.wet.gain;\r\n        },\r\n        set: function (value) {\r\n            this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    buffer: {\r\n        enumerable: false,\r\n        get: function () {\r\n            return this.convolver.buffer;\r\n        },\r\n        set: function (impulse) {\r\n            var convolver = this.convolver,\r\n                xhr = new XMLHttpRequest();\r\n            if (!impulse) {\r\n                console.log(\"Tuna.Convolver.setBuffer: Missing impulse path!\");\r\n                return;\r\n            }\r\n            xhr.open(\"GET\", impulse, true);\r\n            xhr.responseType = \"arraybuffer\";\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4) {\r\n                    if (xhr.status < 300 && xhr.status > 199 || xhr.status === 302) {\r\n                        userContext.decodeAudioData(xhr.response, function (buffer) {\r\n                            convolver.buffer = buffer;\r\n                        }, function (e) {\r\n                            if (e) console.log(\"Tuna.Convolver.setBuffer: Error decoding data\" + e);\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            xhr.send(null);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Delay = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.dry = userContext.createGain();\r\n    this.wet = userContext.createGain();\r\n    this.filter = userContext.createBiquadFilter();\r\n    this.delay = userContext.createDelay(10);\r\n    this.feedbackNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.delay);\r\n    this.activateNode.connect(this.dry);\r\n    this.delay.connect(this.filter);\r\n    this.filter.connect(this.feedbackNode);\r\n    this.feedbackNode.connect(this.delay);\r\n    this.feedbackNode.connect(this.wet);\r\n    this.wet.connect(this.output);\r\n    this.dry.connect(this.output);\r\n\r\n    this.delayTime = properties.delayTime || this.defaults.delayTime.value;\r\n    //don't use setters at init to avoid smoothing\r\n    this.feedbackNode.gain.value = initValue(properties.feedback, this.defaults.feedback.value);\r\n    this.wet.gain.value = initValue(properties.wetLevel, this.defaults.wetLevel.value);\r\n    this.dry.gain.value = initValue(properties.dryLevel, this.defaults.dryLevel.value);\r\n    this.filter.frequency.value = properties.cutoff || this.defaults.cutoff.value;\r\n    this.filter.type = \"lowpass\";\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Delay.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Delay\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            delayTime: {\r\n                value: 100,\r\n                min: 20,\r\n                max: 1000,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            feedback: {\r\n                value: 0.45,\r\n                min: 0,\r\n                max: 0.9,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            cutoff: {\r\n                value: 20000,\r\n                min: 20,\r\n                max: 20000,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            wetLevel: {\r\n                value: 0.5,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            dryLevel: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    delayTime: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.delay.delayTime;\r\n        },\r\n        set: function (value) {\r\n            this.delay.delayTime.value = value / 1000;\r\n        }\r\n    },\r\n    wetLevel: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.wet.gain;\r\n        },\r\n        set: function (value) {\r\n            this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    dryLevel: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.dry.gain;\r\n        },\r\n        set: function (value) {\r\n            this.dry.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    feedback: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.feedbackNode.gain;\r\n        },\r\n        set: function (value) {\r\n            this.feedbackNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    cutoff: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.filter.frequency;\r\n        },\r\n        set: function (value) {\r\n            this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Filter = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.filter = userContext.createBiquadFilter();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.filter);\r\n    this.filter.connect(this.output);\r\n\r\n    //don't use setters for freq and gain at init to avoid smoothing\r\n    this.filter.frequency.value = properties.frequency || this.defaults.frequency.value;\r\n    this.Q = properties.resonance || this.defaults.Q.value;\r\n    this.filterType = initValue(properties.filterType, this.defaults.filterType.value);\r\n    this.filter.gain.value = initValue(properties.gain, this.defaults.gain.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Filter.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Filter\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            frequency: {\r\n                value: 800,\r\n                min: 20,\r\n                max: 22050,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            Q: {\r\n                value: 1,\r\n                min: 0.001,\r\n                max: 100,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            gain: {\r\n                value: 0,\r\n                min: -40,\r\n                max: 40,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            filterType: {\r\n                value: \"lowpass\",\r\n                automatable: false,\r\n                type: STRING\r\n            }\r\n        }\r\n    },\r\n    filterType: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.filter.type;\r\n        },\r\n        set: function (value) {\r\n            this.filter.type = value;\r\n        }\r\n    },\r\n    Q: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.filter.Q;\r\n        },\r\n        set: function (value) {\r\n            this.filter.Q.value = value;\r\n        }\r\n    },\r\n    gain: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.filter.gain;\r\n        },\r\n        set: function (value) {\r\n            this.filter.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    frequency: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.filter.frequency;\r\n        },\r\n        set: function (value) {\r\n            this.filter.frequency.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Gain = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.gainNode = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.gainNode);\r\n    this.gainNode.connect(this.output);\r\n\r\n    //don't use setter at init to avoid smoothing\r\n    this.gainNode.gain.value = initValue(properties.gain, this.defaults.gain.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Gain.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Gain\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            gain: {\r\n                value: 1.0,\r\n                automatable: true,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    gain: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.gainNode.gain;\r\n        },\r\n        set: function (value) {\r\n            this.gainNode.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.MoogFilter = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.bufferSize = properties.bufferSize || this.defaults.bufferSize.value;\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.processor = userContext.createScriptProcessor(this.bufferSize, 1, 1);\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.processor);\r\n    this.processor.connect(this.output);\r\n\r\n    var in1, in2, in3, in4, out1, out2, out3, out4;\r\n    in1 = in2 = in3 = in4 = out1 = out2 = out3 = out4 = 0.0;\r\n    var input, output, f, fb, i, length, inputFactor;\r\n    this.processor.onaudioprocess = function (e) {\r\n        input = e.inputBuffer.getChannelData(0);\r\n        output = e.outputBuffer.getChannelData(0);\r\n        f = this.cutoff * 1.16;\r\n        inputFactor = 0.35013 * (f * f) * (f * f);\r\n        fb = this.resonance * (1.0 - 0.15 * f * f);\r\n        length = input.length;\r\n        for (i = 0; i < length; i++) {\r\n            input[i] -= out4 * fb;\r\n            input[i] *= inputFactor;\r\n            out1 = input[i] + 0.3 * in1 + (1 - f) * out1; // Pole 1\r\n            in1 = input[i];\r\n            out2 = out1 + 0.3 * in2 + (1 - f) * out2; // Pole 2\r\n            in2 = out1;\r\n            out3 = out2 + 0.3 * in3 + (1 - f) * out3; // Pole 3\r\n            in3 = out2;\r\n            out4 = out3 + 0.3 * in4 + (1 - f) * out4; // Pole 4\r\n            in4 = out3;\r\n            output[i] = out4;\r\n        }\r\n    };\r\n\r\n    this.cutoff = initValue(properties.cutoff, this.defaults.cutoff.value);\r\n    this.resonance = initValue(properties.resonance, this.defaults.resonance.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.MoogFilter.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"MoogFilter\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bufferSize: {\r\n                value: 4096,\r\n                min: 256,\r\n                max: 16384,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            cutoff: {\r\n                value: 0.065,\r\n                min: 0.0001,\r\n                max: 1.0,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            resonance: {\r\n                value: 3.5,\r\n                min: 0.0,\r\n                max: 4.0,\r\n                automatable: false,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    cutoff: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.processor.cutoff;\r\n        },\r\n        set: function (value) {\r\n            this.processor.cutoff = value;\r\n        }\r\n    },\r\n    resonance: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.processor.resonance;\r\n        },\r\n        set: function (value) {\r\n            this.processor.resonance = value;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Overdrive = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.inputDrive = userContext.createGain();\r\n    this.waveshaper = userContext.createWaveShaper();\r\n    this.outputDrive = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.inputDrive);\r\n    this.inputDrive.connect(this.waveshaper);\r\n    this.waveshaper.connect(this.outputDrive);\r\n    this.outputDrive.connect(this.output);\r\n\r\n    this.ws_table = new Float32Array(this.k_nSamples);\r\n    this.drive = initValue(properties.drive, this.defaults.drive.value);\r\n    this.outputGain = initValue(properties.outputGain, this.defaults.outputGain.value);\r\n    this.curveAmount = initValue(properties.curveAmount, this.defaults.curveAmount.value);\r\n    this.algorithmIndex = initValue(properties.algorithmIndex, this.defaults.algorithmIndex.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Overdrive.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Overdrive\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            drive: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT,\r\n                scaled: true\r\n            },\r\n            outputGain: {\r\n                value: 0,\r\n                min: -46,\r\n                max: 0,\r\n                automatable: true,\r\n                type: FLOAT,\r\n                scaled: true\r\n            },\r\n            curveAmount: {\r\n                value: 0.725,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            algorithmIndex: {\r\n                value: 0,\r\n                min: 0,\r\n                max: 5,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    k_nSamples: {\r\n        value: 8192\r\n    },\r\n    drive: {\r\n        get: function () {\r\n            return this.inputDrive.gain;\r\n        },\r\n        set: function (value) {\r\n            this._drive = value;\r\n        }\r\n    },\r\n    curveAmount: {\r\n        get: function () {\r\n            return this._curveAmount;\r\n        },\r\n        set: function (value) {\r\n            this._curveAmount = value;\r\n            if (this._algorithmIndex === undefined) {\r\n                this._algorithmIndex = 0;\r\n            }\r\n            this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount, this.k_nSamples, this.ws_table);\r\n            this.waveshaper.curve = this.ws_table;\r\n        }\r\n    },\r\n    outputGain: {\r\n        get: function () {\r\n            return this.outputDrive.gain;\r\n        },\r\n        set: function (value) {\r\n            this._outputGain = dbToWAVolume(value);\r\n            this.outputDrive.gain.setValueAtTime(this._outputGain, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    algorithmIndex: {\r\n        get: function () {\r\n            return this._algorithmIndex;\r\n        },\r\n        set: function (value) {\r\n            this._algorithmIndex = value;\r\n            this.curveAmount = this._curveAmount;\r\n        }\r\n    },\r\n    waveshaperAlgorithms: {\r\n        value: [\r\n            function (amount, n_samples, ws_table) {\r\n                amount = Math.min(amount, 0.9999);\r\n                var k = 2 * amount / (1 - amount),\r\n                    i, x;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    ws_table[i] = (1 + k) * x / (1 + k * Math.abs(x));\r\n                }\r\n            },\r\n            function (amount, n_samples, ws_table) {\r\n                var i, x, y;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * y >= 0 ? 5.8 : 1.2;\r\n                    ws_table[i] = tanh(y);\r\n                }\r\n            },\r\n            function (amount, n_samples, ws_table) {\r\n                var i, x, y, a = 1 - amount;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\r\n                    ws_table[i] = tanh(y * 2);\r\n                }\r\n            },\r\n            function (amount, n_samples, ws_table) {\r\n                var i, x, y, abx, a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    abx = Math.abs(x);\r\n                    if (abx < a) y = abx;\r\n                    else if (abx > a) y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\r\n                    else if (abx > 1) y = abx;\r\n                    ws_table[i] = sign(x) * y * (1 / ((a + 1) / 2));\r\n                }\r\n            },\r\n            function (amount, n_samples, ws_table) { // fixed curve, amount doesn't do anything, the distortion is just from the drive\r\n                var i, x;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    if (x < -0.08905) {\r\n                        ws_table[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\r\n                    } else if (x >= -0.08905 && x < 0.320018) {\r\n                        ws_table[i] = (-6.153 * (x * x)) + 3.9375 * x;\r\n                    } else {\r\n                        ws_table[i] = 0.630035;\r\n                    }\r\n                }\r\n            },\r\n            function (amount, n_samples, ws_table) {\r\n                var a = 2 + Math.round(amount * 14),\r\n                    // we go from 2 to 16 bits, keep in mind for the UI\r\n                    bits = Math.round(Math.pow(2, a - 1)),\r\n                    // real number of quantization steps divided by 2\r\n                    i, x;\r\n                for (i = 0; i < n_samples; i++) {\r\n                    x = i * 2 / n_samples - 1;\r\n                    ws_table[i] = Math.round(x * bits) / bits;\r\n                }\r\n            }\r\n        ]\r\n    }\r\n});\r\n\r\nTuna.prototype.Panner = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.panner = userContext.createStereoPanner();\r\n    this.output = userContext.createGain();\r\n\r\n    this.activateNode.connect(this.panner);\r\n    this.panner.connect(this.output);\r\n\r\n    this.pan = initValue(properties.pan, this.defaults.pan.value);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Panner.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Panner\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            pan: {\r\n                value: 0.0,\r\n                min: -1.0,\r\n                max: 1.0,\r\n                automatable: true,\r\n                type: FLOAT\r\n            }\r\n        }\r\n    },\r\n    pan: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.panner.pan;\r\n        },\r\n        set: function (value) {\r\n            this.panner.pan.value = value;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Phaser = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.splitter = this.activateNode = userContext.createChannelSplitter(2);\r\n    this.filtersL = [];\r\n    this.filtersR = [];\r\n    this.feedbackGainNodeL = userContext.createGain();\r\n    this.feedbackGainNodeR = userContext.createGain();\r\n    this.merger = userContext.createChannelMerger(2);\r\n    this.filteredSignal = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n    this.lfoL = new userInstance.LFO({\r\n        target: this.filtersL,\r\n        callback: this.callback\r\n    });\r\n    this.lfoR = new userInstance.LFO({\r\n        target: this.filtersR,\r\n        callback: this.callback\r\n    });\r\n\r\n    var i = this.stage;\r\n    while (i--) {\r\n        this.filtersL[i] = userContext.createBiquadFilter();\r\n        this.filtersR[i] = userContext.createBiquadFilter();\r\n        this.filtersL[i].type = \"allpass\";\r\n        this.filtersR[i].type = \"allpass\";\r\n    }\r\n    this.input.connect(this.splitter);\r\n    this.input.connect(this.output);\r\n    this.splitter.connect(this.filtersL[0], 0, 0);\r\n    this.splitter.connect(this.filtersR[0], 1, 0);\r\n    this.connectInOrder(this.filtersL);\r\n    this.connectInOrder(this.filtersR);\r\n    this.filtersL[this.stage - 1].connect(this.feedbackGainNodeL);\r\n    this.filtersL[this.stage - 1].connect(this.merger, 0, 0);\r\n    this.filtersR[this.stage - 1].connect(this.feedbackGainNodeR);\r\n    this.filtersR[this.stage - 1].connect(this.merger, 0, 1);\r\n    this.feedbackGainNodeL.connect(this.filtersL[0]);\r\n    this.feedbackGainNodeR.connect(this.filtersR[0]);\r\n    this.merger.connect(this.output);\r\n\r\n    this.rate = initValue(properties.rate, this.defaults.rate.value);\r\n    this.baseModulationFrequency = properties.baseModulationFrequency || this.defaults.baseModulationFrequency.value;\r\n    this.depth = initValue(properties.depth, this.defaults.depth.value);\r\n    this.feedback = initValue(properties.feedback, this.defaults.feedback.value);\r\n    this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\r\n\r\n    this.lfoL.activate(true);\r\n    this.lfoR.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Phaser.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Phaser\"\r\n    },\r\n    stage: {\r\n        value: 4\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            rate: {\r\n                value: 0.1,\r\n                min: 0,\r\n                max: 8,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            depth: {\r\n                value: 0.6,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            feedback: {\r\n                value: 0.7,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            stereoPhase: {\r\n                value: 40,\r\n                min: 0,\r\n                max: 180,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            baseModulationFrequency: {\r\n                value: 700,\r\n                min: 500,\r\n                max: 1500,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    callback: {\r\n        value: function (filters, value) {\r\n            for (var stage = 0; stage < 4; stage++) {\r\n                filters[stage].frequency.value = value;\r\n            }\r\n        }\r\n    },\r\n    depth: {\r\n        get: function () {\r\n            return this._depth;\r\n        },\r\n        set: function (value) {\r\n            this._depth = value;\r\n            this.lfoL.oscillation = this._baseModulationFrequency * this._depth;\r\n            this.lfoR.oscillation = this._baseModulationFrequency * this._depth;\r\n        }\r\n    },\r\n    rate: {\r\n        get: function () {\r\n            return this._rate;\r\n        },\r\n        set: function (value) {\r\n            this._rate = value;\r\n            this.lfoL.frequency = this._rate;\r\n            this.lfoR.frequency = this._rate;\r\n        }\r\n    },\r\n    baseModulationFrequency: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._baseModulationFrequency;\r\n        },\r\n        set: function (value) {\r\n            this._baseModulationFrequency = value;\r\n            this.lfoL.offset = this._baseModulationFrequency;\r\n            this.lfoR.offset = this._baseModulationFrequency;\r\n            this.depth = this._depth;\r\n        }\r\n    },\r\n    feedback: {\r\n        get: function () {\r\n            return this._feedback;\r\n        },\r\n        set: function (value) {\r\n            this._feedback = value;\r\n            this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n            this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    stereoPhase: {\r\n        get: function () {\r\n            return this._stereoPhase;\r\n        },\r\n        set: function (value) {\r\n            this._stereoPhase = value;\r\n            var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\r\n            newPhase = fmod(newPhase, 2 * Math.PI);\r\n            this.lfoR._phase = newPhase;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.PingPongDelay = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.wet = userContext.createGain();\r\n    this.stereoToMonoMix = userContext.createGain();\r\n    this.feedbackLevel = userContext.createGain();\r\n    this.output = userContext.createGain();\r\n    this.delayLeft = userContext.createDelay(10);\r\n    this.delayRight = userContext.createDelay(10);\r\n\r\n    this.activateNode = userContext.createGain();\r\n    this.splitter = userContext.createChannelSplitter(2);\r\n    this.merger = userContext.createChannelMerger(2);\r\n\r\n    this.activateNode.connect(this.splitter);\r\n    this.splitter.connect(this.stereoToMonoMix, 0, 0);\r\n    this.splitter.connect(this.stereoToMonoMix, 1, 0);\r\n    this.stereoToMonoMix.gain.value = .5;\r\n    this.stereoToMonoMix.connect(this.wet);\r\n    this.wet.connect(this.delayLeft);\r\n    this.feedbackLevel.connect(this.wet);\r\n    this.delayLeft.connect(this.delayRight);\r\n    this.delayRight.connect(this.feedbackLevel);\r\n    this.delayLeft.connect(this.merger, 0, 0);\r\n    this.delayRight.connect(this.merger, 0, 1);\r\n    this.merger.connect(this.output);\r\n    this.activateNode.connect(this.output);\r\n\r\n    this.delayTimeLeft = properties.delayTimeLeft !== undefined ? properties.delayTimeLeft : this.defaults.delayTimeLeft.value;\r\n    this.delayTimeRight = properties.delayTimeRight !== undefined ? properties.delayTimeRight : this.defaults.delayTimeRight.value;\r\n    this.feedbackLevel.gain.value = properties.feedback !== undefined ? properties.feedback : this.defaults.feedback.value;\r\n    this.wet.gain.value = properties.wetLevel !== undefined ? properties.wetLevel : this.defaults.wetLevel.value;\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.PingPongDelay.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"PingPongDelay\"\r\n    },\r\n    delayTimeLeft: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._delayTimeLeft;\r\n        },\r\n        set: function (value) {\r\n            this._delayTimeLeft = value;\r\n            this.delayLeft.delayTime.value = value / 1000;\r\n        }\r\n    },\r\n    delayTimeRight: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._delayTimeRight;\r\n        },\r\n        set: function (value) {\r\n            this._delayTimeRight = value;\r\n            this.delayRight.delayTime.value = value / 1000;\r\n        }\r\n    },\r\n    wetLevel: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.wet.gain;\r\n        },\r\n        set: function (value) {\r\n            this.wet.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    feedback: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this.feedbackLevel.gain;\r\n        },\r\n        set: function (value) {\r\n            this.feedbackLevel.gain.setTargetAtTime(value, userContext.currentTime, 0.01);\r\n        }\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            delayTimeLeft: {\r\n                value: 200,\r\n                min: 1,\r\n                max: 10000,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            delayTimeRight: {\r\n                value: 400,\r\n                min: 1,\r\n                max: 10000,\r\n                automatable: false,\r\n                type: INT\r\n            },\r\n            feedback: {\r\n                value: 0.3,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            wetLevel: {\r\n                value: 0.5,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: true,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.Tremolo = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.splitter = this.activateNode = userContext.createChannelSplitter(2);\r\n    this.amplitudeL = userContext.createGain();\r\n    this.amplitudeR = userContext.createGain();\r\n    this.merger = userContext.createChannelMerger(2);\r\n    this.output = userContext.createGain();\r\n    this.lfoL = new userInstance.LFO({\r\n        target: this.amplitudeL.gain,\r\n        callback: pipe\r\n    });\r\n    this.lfoR = new userInstance.LFO({\r\n        target: this.amplitudeR.gain,\r\n        callback: pipe\r\n    });\r\n\r\n    this.input.connect(this.splitter);\r\n    this.splitter.connect(this.amplitudeL, 0);\r\n    this.splitter.connect(this.amplitudeR, 1);\r\n    this.amplitudeL.connect(this.merger, 0, 0);\r\n    this.amplitudeR.connect(this.merger, 0, 1);\r\n    this.merger.connect(this.output);\r\n\r\n    this.rate = properties.rate || this.defaults.rate.value;\r\n    this.intensity = initValue(properties.intensity, this.defaults.intensity.value);\r\n    this.stereoPhase = initValue(properties.stereoPhase, this.defaults.stereoPhase.value);\r\n\r\n    this.lfoL.offset = 1 - (this.intensity / 2);\r\n    this.lfoR.offset = 1 - (this.intensity / 2);\r\n    this.lfoL.phase = this.stereoPhase * Math.PI / 180;\r\n\r\n    this.lfoL.activate(true);\r\n    this.lfoR.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.Tremolo.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"Tremolo\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            intensity: {\r\n                value: 0.3,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            stereoPhase: {\r\n                value: 0,\r\n                min: 0,\r\n                max: 180,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            rate: {\r\n                value: 5,\r\n                min: 0.1,\r\n                max: 11,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    intensity: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._intensity;\r\n        },\r\n        set: function (value) {\r\n            this._intensity = value;\r\n            this.lfoL.offset = 1 - this._intensity / 2;\r\n            this.lfoR.offset = 1 - this._intensity / 2;\r\n            this.lfoL.oscillation = this._intensity;\r\n            this.lfoR.oscillation = this._intensity;\r\n        }\r\n    },\r\n    rate: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._rate;\r\n        },\r\n        set: function (value) {\r\n            this._rate = value;\r\n            this.lfoL.frequency = this._rate;\r\n            this.lfoR.frequency = this._rate;\r\n        }\r\n    },\r\n    stereoPhase: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._stereoPhase;\r\n        },\r\n        set: function (value) {\r\n            this._stereoPhase = value;\r\n            var newPhase = this.lfoL._phase + this._stereoPhase * Math.PI / 180;\r\n            newPhase = fmod(newPhase, 2 * Math.PI);\r\n            this.lfoR.phase = newPhase;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.WahWah = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.activateNode = userContext.createGain();\r\n    this.envelopeFollower = new userInstance.EnvelopeFollower({\r\n        target: this,\r\n        callback: function (context, value) {\r\n            context.sweep = value;\r\n        }\r\n    });\r\n    this.filterBp = userContext.createBiquadFilter();\r\n    this.filterPeaking = userContext.createBiquadFilter();\r\n    this.output = userContext.createGain();\r\n\r\n    //Connect AudioNodes\r\n    this.activateNode.connect(this.filterBp);\r\n    this.filterBp.connect(this.filterPeaking);\r\n    this.filterPeaking.connect(this.output);\r\n\r\n    //Set Properties\r\n    this.init();\r\n    this.automode = initValue(properties.automode, this.defaults.automode.value);\r\n    this.resonance = properties.resonance || this.defaults.resonance.value;\r\n    this.sensitivity = initValue(properties.sensitivity, this.defaults.sensitivity.value);\r\n    this.baseFrequency = initValue(properties.baseFrequency, this.defaults.baseFrequency.value);\r\n    this.excursionOctaves = properties.excursionOctaves || this.defaults.excursionOctaves.value;\r\n    this.sweep = initValue(properties.sweep, this.defaults.sweep.value);\r\n\r\n    this.activateNode.gain.value = 2;\r\n    this.envelopeFollower.activate(true);\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.WahWah.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"WahWah\"\r\n    },\r\n    defaults: {\r\n        writable: true,\r\n        value: {\r\n            automode: {\r\n                value: true,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            },\r\n            baseFrequency: {\r\n                value: 0.5,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            excursionOctaves: {\r\n                value: 2,\r\n                min: 1,\r\n                max: 6,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            sweep: {\r\n                value: 0.2,\r\n                min: 0,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            resonance: {\r\n                value: 10,\r\n                min: 1,\r\n                max: 100,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            sensitivity: {\r\n                value: 0.5,\r\n                min: -1,\r\n                max: 1,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    automode: {\r\n        get: function () {\r\n            return this._automode;\r\n        },\r\n        set: function (value) {\r\n            this._automode = value;\r\n            if (value) {\r\n                this.activateNode.connect(this.envelopeFollower.input);\r\n                this.envelopeFollower.activate(true);\r\n            } else {\r\n                this.envelopeFollower.activate(false);\r\n                this.activateNode.disconnect();\r\n                this.activateNode.connect(this.filterBp);\r\n            }\r\n        }\r\n    },\r\n    filterFreqTimeout: {\r\n        writable: true,\r\n        value: 0\r\n    },\r\n    setFilterFreq: {\r\n        value: function () {\r\n            try {\r\n                this.filterBp.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\r\n                this.filterPeaking.frequency.value = Math.min(22050, this._baseFrequency + this._excursionFrequency * this._sweep);\r\n            } catch (e) {\r\n                clearTimeout(this.filterFreqTimeout);\r\n                //put on the next cycle to let all init properties be set\r\n                this.filterFreqTimeout = setTimeout(function () {\r\n                    this.setFilterFreq();\r\n                }.bind(this), 0);\r\n            }\r\n        }\r\n    },\r\n    sweep: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._sweep;\r\n        },\r\n        set: function (value) {\r\n            this._sweep = Math.pow(value > 1 ? 1 : value < 0 ? 0 : value, this._sensitivity);\r\n            this.setFilterFreq();\r\n        }\r\n    },\r\n    baseFrequency: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._baseFrequency;\r\n        },\r\n        set: function (value) {\r\n            this._baseFrequency = 50 * Math.pow(10, value * 2);\r\n            this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\r\n            this.setFilterFreq();\r\n        }\r\n    },\r\n    excursionOctaves: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._excursionOctaves;\r\n        },\r\n        set: function (value) {\r\n            this._excursionOctaves = value;\r\n            this._excursionFrequency = Math.min(userContext.sampleRate / 2, this.baseFrequency * Math.pow(2, this._excursionOctaves));\r\n            this.setFilterFreq();\r\n        }\r\n    },\r\n    sensitivity: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._sensitivity;\r\n        },\r\n        set: function (value) {\r\n            this._sensitivity = Math.pow(10, value);\r\n        }\r\n    },\r\n    resonance: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._resonance;\r\n        },\r\n        set: function (value) {\r\n            this._resonance = value;\r\n            this.filterPeaking.Q.value = this._resonance;\r\n        }\r\n    },\r\n    init: {\r\n        value: function () {\r\n            this.output.gain.value = 1;\r\n            this.filterPeaking.type = \"peaking\";\r\n            this.filterBp.type = \"bandpass\";\r\n            this.filterPeaking.frequency.value = 100;\r\n            this.filterPeaking.gain.value = 20;\r\n            this.filterPeaking.Q.value = 5;\r\n            this.filterBp.frequency.value = 100;\r\n            this.filterBp.Q.value = 1;\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.EnvelopeFollower = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n    this.input = userContext.createGain();\r\n    this.jsNode = this.output = userContext.createScriptProcessor(this.buffersize, 1, 1);\r\n\r\n    this.input.connect(this.output);\r\n\r\n    this.attackTime = initValue(properties.attackTime, this.defaults.attackTime.value);\r\n    this.releaseTime = initValue(properties.releaseTime, this.defaults.releaseTime.value);\r\n    this._envelope = 0;\r\n    this.target = properties.target || {};\r\n    this.callback = properties.callback || function () { };\r\n\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.EnvelopeFollower.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"EnvelopeFollower\"\r\n    },\r\n    defaults: {\r\n        value: {\r\n            attackTime: {\r\n                value: 0.003,\r\n                min: 0,\r\n                max: 0.5,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            releaseTime: {\r\n                value: 0.5,\r\n                min: 0,\r\n                max: 0.5,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    buffersize: {\r\n        value: 256\r\n    },\r\n    envelope: {\r\n        value: 0\r\n    },\r\n    sampleRate: {\r\n        value: 44100\r\n    },\r\n    attackTime: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._attackTime;\r\n        },\r\n        set: function (value) {\r\n            this._attackTime = value;\r\n            this._attackC = Math.exp(-1 / this._attackTime * this.sampleRate / this.buffersize);\r\n        }\r\n    },\r\n    releaseTime: {\r\n        enumerable: true,\r\n        get: function () {\r\n            return this._releaseTime;\r\n        },\r\n        set: function (value) {\r\n            this._releaseTime = value;\r\n            this._releaseC = Math.exp(-1 / this._releaseTime * this.sampleRate / this.buffersize);\r\n        }\r\n    },\r\n    callback: {\r\n        get: function () {\r\n            return this._callback;\r\n        },\r\n        set: function (value) {\r\n            if (typeof value === \"function\") {\r\n                this._callback = value;\r\n            } else {\r\n                console.error(\"tuna.js: \" + this.name + \": Callback must be a function!\");\r\n            }\r\n        }\r\n    },\r\n    target: {\r\n        get: function () {\r\n            return this._target;\r\n        },\r\n        set: function (value) {\r\n            this._target = value;\r\n        }\r\n    },\r\n    activate: {\r\n        value: function (doActivate) {\r\n            this.activated = doActivate;\r\n            if (doActivate) {\r\n                this.jsNode.connect(userContext.destination);\r\n                this.jsNode.onaudioprocess = this.returnCompute(this);\r\n            } else {\r\n                this.jsNode.disconnect();\r\n                this.jsNode.onaudioprocess = null;\r\n            }\r\n            if (this.activateCallback) {\r\n                this.activateCallback(doActivate);\r\n            }\r\n        }\r\n    },\r\n    returnCompute: {\r\n        value: function (instance) {\r\n            return function (event) {\r\n                instance.compute(event);\r\n            };\r\n        }\r\n    },\r\n    compute: {\r\n        value: function (event) {\r\n            var count = event.inputBuffer.getChannelData(0).length,\r\n                channels = event.inputBuffer.numberOfChannels,\r\n                current, chan, rms, i;\r\n            chan = rms = i = 0;\r\n            if (channels > 1) { //need to mixdown\r\n                for (i = 0; i < count; ++i) {\r\n                    for (; chan < channels; ++chan) {\r\n                        current = event.inputBuffer.getChannelData(chan)[i];\r\n                        rms += (current * current) / channels;\r\n                    }\r\n                }\r\n            } else {\r\n                for (i = 0; i < count; ++i) {\r\n                    current = event.inputBuffer.getChannelData(0)[i];\r\n                    rms += (current * current);\r\n                }\r\n            }\r\n            rms = Math.sqrt(rms);\r\n\r\n            if (this._envelope < rms) {\r\n                this._envelope *= this._attackC;\r\n                this._envelope += (1 - this._attackC) * rms;\r\n            } else {\r\n                this._envelope *= this._releaseC;\r\n                this._envelope += (1 - this._releaseC) * rms;\r\n            }\r\n            this._callback(this._target, this._envelope);\r\n        }\r\n    }\r\n});\r\n\r\nTuna.prototype.LFO = function (properties) {\r\n    if (!properties) {\r\n        properties = this.getDefaults();\r\n    }\r\n\r\n    //Instantiate AudioNode\r\n    this.input = userContext.createGain();\r\n    this.output = userContext.createScriptProcessor(256, 1, 1);\r\n    this.activateNode = userContext.destination;\r\n\r\n    //Set Properties\r\n    this.frequency = initValue(properties.frequency, this.defaults.frequency.value);\r\n    this.offset = initValue(properties.offset, this.defaults.offset.value);\r\n    this.oscillation = initValue(properties.oscillation, this.defaults.oscillation.value);\r\n    this.phase = initValue(properties.phase, this.defaults.phase.value);\r\n    this.target = properties.target || {};\r\n    this.output.onaudioprocess = this.callback(properties.callback || function () { });\r\n    this.bypass = properties.bypass || this.defaults.bypass.value;\r\n};\r\nTuna.prototype.LFO.prototype = Object.create(Super, {\r\n    name: {\r\n        value: \"LFO\"\r\n    },\r\n    bufferSize: {\r\n        value: 256\r\n    },\r\n    sampleRate: {\r\n        value: 44100\r\n    },\r\n    defaults: {\r\n        value: {\r\n            frequency: {\r\n                value: 1,\r\n                min: 0,\r\n                max: 20,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            offset: {\r\n                value: 0.85,\r\n                min: 0,\r\n                max: 22049,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            oscillation: {\r\n                value: 0.3,\r\n                min: -22050,\r\n                max: 22050,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            phase: {\r\n                value: 0,\r\n                min: 0,\r\n                max: 2 * Math.PI,\r\n                automatable: false,\r\n                type: FLOAT\r\n            },\r\n            bypass: {\r\n                value: false,\r\n                automatable: false,\r\n                type: BOOLEAN\r\n            }\r\n        }\r\n    },\r\n    frequency: {\r\n        get: function () {\r\n            return this._frequency;\r\n        },\r\n        set: function (value) {\r\n            this._frequency = value;\r\n            this._phaseInc = 2 * Math.PI * this._frequency * this.bufferSize / this.sampleRate;\r\n        }\r\n    },\r\n    offset: {\r\n        get: function () {\r\n            return this._offset;\r\n        },\r\n        set: function (value) {\r\n            this._offset = value;\r\n        }\r\n    },\r\n    oscillation: {\r\n        get: function () {\r\n            return this._oscillation;\r\n        },\r\n        set: function (value) {\r\n            this._oscillation = value;\r\n        }\r\n    },\r\n    phase: {\r\n        get: function () {\r\n            return this._phase;\r\n        },\r\n        set: function (value) {\r\n            this._phase = value;\r\n        }\r\n    },\r\n    target: {\r\n        get: function () {\r\n            return this._target;\r\n        },\r\n        set: function (value) {\r\n            this._target = value;\r\n        }\r\n    },\r\n    activate: {\r\n        value: function (doActivate) {\r\n            if (doActivate) {\r\n                this.output.connect(userContext.destination);\r\n                if (this.activateCallback) {\r\n                    this.activateCallback(doActivate);\r\n                }\r\n            } else {\r\n                this.output.disconnect();\r\n            }\r\n        }\r\n    },\r\n    callback: {\r\n        value: function (callback) {\r\n            var that = this;\r\n            return function () {\r\n                that._phase += that._phaseInc;\r\n                if (that._phase > 2 * Math.PI) {\r\n                    that._phase = 0;\r\n                }\r\n                callback(that._target, that._offset + that._oscillation * Math.sin(that._phase));\r\n            };\r\n        }\r\n    }\r\n});\r\n\r\nTuna.toString = Tuna.prototype.toString = function () {\r\n    return \"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js\";\r\n};","import { Tuna } from \"../../../dependencies/tuna.js\";\r\nimport { v4 as uuid } from \"uuid\";\r\nexport class EffectsChain {\r\n    constructor(context, settings = EffectsChain.createDefaults()) {\r\n        this._chainNodes = [];\r\n        this.id = uuid();\r\n        this._context = context;\r\n        this._settings = settings;\r\n        this._tuna = new Tuna(context);\r\n        this._preGain = this._context.createGain();\r\n        this._preGain.gain.value = this._settings.preGain;\r\n        this._postGain = this._context.createGain();\r\n        this._postGain.gain.value = this._settings.postGain;\r\n        if (this._settings.effects.length > 0) {\r\n            let currentEffect = this.IEffectToEffectObject(this._settings.effects[0]);\r\n            this._chainNodes.push(currentEffect);\r\n            this._preGain.connect(currentEffect);\r\n            for (let i = 1; i < this._settings.effects.length; i++) {\r\n                currentEffect = this.IEffectToEffectObject(this._settings.effects[i]);\r\n                this._chainNodes[i - 1].connect(currentEffect);\r\n                this._chainNodes.push(currentEffect);\r\n            }\r\n            this._chainNodes[this._chainNodes.length - 1].connect(this._postGain);\r\n        }\r\n        else {\r\n            this._preGain.connect(this._postGain);\r\n        }\r\n    }\r\n    get input() {\r\n        return this._preGain;\r\n    }\r\n    get effectCount() {\r\n        return this._chainNodes.length;\r\n    }\r\n    get effects() {\r\n        return this._settings.effects;\r\n    }\r\n    get effectNodes() {\r\n        return this._chainNodes;\r\n    }\r\n    get chainName() {\r\n        return this._settings.chainName;\r\n    }\r\n    set chainName(value) {\r\n        this._settings.chainName = value;\r\n    }\r\n    get preGain() {\r\n        return this._preGain.gain.value;\r\n    }\r\n    set preGain(value) {\r\n        this._preGain.gain.value = value;\r\n    }\r\n    get postGain() {\r\n        return this._postGain.gain.value;\r\n    }\r\n    set postGain(value) {\r\n        this._preGain.gain.value = value;\r\n    }\r\n    destroy() {\r\n        this._preGain.disconnect();\r\n        for (let i = 0; i < this._chainNodes.length; i++) {\r\n            this._chainNodes[i].disconnect();\r\n        }\r\n        this._postGain.disconnect();\r\n    }\r\n    connect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._postGain.connect(node);\r\n        }\r\n        else {\r\n            this._postGain.connect(node.input);\r\n        }\r\n    }\r\n    disconnect(node) {\r\n        if (node instanceof AudioNode) {\r\n            this._postGain.disconnect(node);\r\n        }\r\n        else {\r\n            this._postGain.disconnect(node.input);\r\n        }\r\n    }\r\n    disconnectAll() {\r\n        this._postGain.disconnect();\r\n    }\r\n    addEffect(index, effect) {\r\n        if (index < 0 || index > this._chainNodes.length) {\r\n            throw new RangeError((\"Index out of range:\" + index.toString()));\r\n        }\r\n        let effectObject = this.IEffectToEffectObject(effect);\r\n        this._connectEffect(index, effectObject);\r\n        this._settings.effects.splice(index, 0, effect);\r\n    }\r\n    removeEffect(index) {\r\n        if (index >= 0 && index < this._chainNodes.length) {\r\n            this._disconnectEffect(index);\r\n            this._settings.effects.splice(index, 1);\r\n        }\r\n        else {\r\n            throw new RangeError(\"Index out of range\");\r\n        }\r\n    }\r\n    moveEffect(index, newIndex) {\r\n        index = Math.max(Math.min(this.effectCount, index), 0);\r\n        newIndex = Math.max(Math.min(this.effectCount, newIndex), 0);\r\n        if (index != newIndex) {\r\n            let effect = this._disconnectEffect(index);\r\n            this._connectEffect(newIndex, effect);\r\n            let temp = this._settings.effects[index];\r\n            this._settings.effects.splice(index, 1);\r\n            this._settings.effects.splice(newIndex, 0, temp);\r\n        }\r\n    }\r\n    getDelayTime() {\r\n        let longestDelay = 0;\r\n        this._settings.effects.forEach((effect) => {\r\n            let thisEffectDelay = 0;\r\n            if (effect.effectType == \"Delay\") {\r\n                let feedback = effect.properties.find(property => property.propertyName == \"feedback\").value;\r\n                let delayTime = effect.properties.find(property => property.propertyName == \"delayTime\").value / 1000;\r\n                thisEffectDelay = Math.log(0.005) / Math.log(feedback) * delayTime;\r\n            }\r\n            else if (effect.effectType == \"PingPongDelay\") {\r\n                let feedback = effect.properties.find(property => property.propertyName == \"feedback\").value;\r\n                let l = effect.properties.find(property => property.propertyName == \"delayTimeLeft\").value / 1000;\r\n                let r = effect.properties.find(property => property.propertyName == \"delayTimeRight\").value / 1000;\r\n                thisEffectDelay = Math.log(0.005) / Math.log(feedback) * Math.max(l + r);\r\n            }\r\n            else if (effect.effectType == \"Convolver\") {\r\n                thisEffectDelay = 3;\r\n            }\r\n            longestDelay += thisEffectDelay;\r\n        });\r\n        return longestDelay;\r\n    }\r\n    serialise() {\r\n        return this._settings;\r\n    }\r\n    static createDefaults() {\r\n        return {\r\n            \"chainName\": \"\",\r\n            \"effects\": [],\r\n            \"preGain\": 1,\r\n            \"postGain\": 1,\r\n            \"connections\": [\"Context\"]\r\n        };\r\n    }\r\n    IEffectToEffectObject(effect) {\r\n        let p = this._convertPropertyToObject(effect.properties);\r\n        switch (effect.effectType) {\r\n            case \"Chorus\":\r\n                return new this._tuna.Chorus(p);\r\n            case \"Delay\":\r\n                return new this._tuna.Delay(p);\r\n            case \"Overdrive\":\r\n                return new this._tuna.Overdrive(p);\r\n            case \"Compressor\":\r\n                return new this._tuna.Compressor(p);\r\n            case \"Convolver\":\r\n                return new this._tuna.Convolver(p);\r\n            case \"Filter\":\r\n                return new this._tuna.Filter(p);\r\n            case \"Cabinet\":\r\n                return new this._tuna.Cabinet(p);\r\n            case \"Tremolo\":\r\n                return new this._tuna.Tremolo(p);\r\n            case \"WahWah\":\r\n                return new this._tuna.WahWah(p);\r\n            case \"Phaser\":\r\n                return new this._tuna.Phaser(p);\r\n            case \"Bitcrusher\":\r\n                return new this._tuna.Bitcrusher(p);\r\n            case \"Moog\":\r\n                return new this._tuna.MoogFilter(p);\r\n            case \"PingPongDelay\":\r\n                return new this._tuna.PingPongDelay(p);\r\n            case \"Panner\":\r\n                return new this._tuna.Panner(p);\r\n            case \"Gain\":\r\n                return new this._tuna.Gain(p);\r\n            default:\r\n                throw new Error(\"Invalid effect name.\");\r\n        }\r\n    }\r\n    _convertPropertyToObject(properties) {\r\n        let newObj = {};\r\n        properties.forEach((prop) => {\r\n            newObj[prop.propertyName] = prop.value;\r\n        });\r\n        return newObj;\r\n    }\r\n    _connectEffect(index, effect) {\r\n        if (index < 0 || index > this._chainNodes.length) {\r\n            throw new Error(\"Invalid index to disconnect effect.\");\r\n        }\r\n        if (index > 0) {\r\n            this._chainNodes[index - 1].disconnect();\r\n            this._chainNodes[index - 1].connect(effect);\r\n        }\r\n        else {\r\n            this._preGain.disconnect();\r\n            this._preGain.connect(effect);\r\n        }\r\n        if (index === this._chainNodes.length) {\r\n            effect.connect(this._postGain);\r\n            this._chainNodes.push(effect);\r\n        }\r\n        else {\r\n            effect.connect(this._chainNodes[index]);\r\n            this._chainNodes.splice(index, 0, effect);\r\n        }\r\n    }\r\n    _disconnectEffect(index) {\r\n        if (index < 0 || index >= this._chainNodes.length || this._chainNodes.length === 0) {\r\n            throw new Error(\"Invalid index to disconnect effect.\");\r\n        }\r\n        this._chainNodes[index].disconnect();\r\n        let node = null;\r\n        if (index > 0) {\r\n            node = this._chainNodes[index - 1];\r\n        }\r\n        else {\r\n            node = this._preGain;\r\n        }\r\n        node.disconnect();\r\n        if (index === this._chainNodes.length - 1) {\r\n            node.connect(this._postGain);\r\n        }\r\n        else {\r\n            node.connect(this._chainNodes[index + 1]);\r\n        }\r\n        return this._chainNodes.splice(index, 1)[0];\r\n    }\r\n    static Chorus() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Chorus\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"rate\", value: 1.5, editable: true, step: 0.01, min: 0.01, max: 8 },\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.4, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"depth\", value: 0.7, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"delay\", value: 0.0045, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Delay() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Delay\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.45, editable: true, step: 0.01, min: 0, max: 0.999 },\r\n                { type: \"number\", displayName: \"Delay Time\", propertyName: \"delayTime\", value: 100, editable: true, step: 1, min: 1, max: 10000 },\r\n                { type: \"number\", displayName: \"Wet Level\", propertyName: \"wetLevel\", value: 0.5, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Dry Level\", propertyName: \"dryLevel\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"cutoff\", value: 20000, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Phaser() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Phaser\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"rate\", value: 0.1, editable: true, step: 0.01, min: 0, max: 8 },\r\n                { type: \"number\", propertyName: \"depth\", value: 0.6, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.7, editable: true, step: 0.01, min: 0, max: 0.999 },\r\n                { type: \"number\", displayName: \"Stereo Phase\", propertyName: \"stereoPhase\", value: 40, editable: true, step: 1, min: 0, max: 180 },\r\n                { type: \"number\", displayName: \"Base Modulation Frequency\", propertyName: \"baseModulationFrequency\", value: 700, editable: true, step: 1, min: 500, max: 1500 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Overdrive() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Overdrive\",\r\n            properties: [\r\n                { type: \"number\", displayName: \"Output Gain\", propertyName: \"outputGain\", value: 0, editable: true, step: 1, min: -42, max: 0 },\r\n                { type: \"number\", propertyName: \"drive\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Curve Amount\", propertyName: \"curveAmount\", value: 0.725, editable: true, step: 0.01, min: 0, max: 0.99 },\r\n                { type: \"number\", displayName: \"Algorithm Index\", propertyName: \"algorithmIndex\", value: 0, editable: true, step: 1, min: 0, max: 5 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Compressor() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Compressor\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"threshold\", value: -20, editable: true, step: 1, min: -100, max: 0 },\r\n                { type: \"number\", displayName: \"Makeup Gain\", propertyName: \"makeupGain\", value: 1, editable: true, step: 1, min: 0, max: 200 },\r\n                { type: \"number\", propertyName: \"attack\", value: 1, editable: true, step: 1, min: 0, max: 1000 },\r\n                { type: \"number\", propertyName: \"release\", value: 250, editable: true, step: 1, min: 0, max: 3000 },\r\n                { type: \"number\", propertyName: \"ratio\", value: 4, editable: true, step: 1, min: 1, max: 20 },\r\n                { type: \"number\", propertyName: \"knee\", value: 5, editable: true, step: 1, min: 0, max: 40 },\r\n                { type: \"boolean\", displayName: \"Auto Makeup\", propertyName: \"automakeup\", value: false, editable: true },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Convolver() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Convolver\",\r\n            properties: [\r\n                { type: \"number\", displayName: \"High Cut\", propertyName: \"highCut\", value: 22050, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"number\", displayName: \"Low Cut\", propertyName: \"lowCut\", value: 20, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"number\", displayName: \"Wet Level\", propertyName: \"wetLevel\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Dry Level\", propertyName: \"dryLevel\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"level\", value: 0.7, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"string\", propertyName: \"impulse\", value: \"/dependencies/impulses/impulse_rev.wav\", editable: false },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Filter() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Filter\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"frequency\", value: 22050, editable: true, step: 1, min: 20, max: 22050 },\r\n                { type: \"number\", propertyName: \"Q\", value: 1, editable: true, step: 0.001, min: 0.001, max: 100 },\r\n                { type: \"number\", propertyName: \"gain\", value: 0, editable: true, step: 1, min: -40, max: 40 },\r\n                { type: \"list\", displayName: \"Filter Type\", propertyName: \"filterType\", value: \"lowpass\", editable: true, options: [\"lowpass\", \"highpass\", \"bandpass\", \"lowshelf\", \"highshelf\", \"peaking\", \"notch\", \"allpass\"] },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Cabinet() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Cabinet\",\r\n            properties: [\r\n                { type: \"number\", displayName: \"Makeup Gain\", propertyName: \"makeupGain\", value: 1, editable: true, step: 0.1, min: 0, max: 20 },\r\n                { type: \"string\", displayName: \"Impulse Path\", propertyName: \"impulsePath\", value: \"/dependencies/impulses/impulse_guitar.wav\", editable: false },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Tremolo() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Tremolo\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"intensity\", value: 1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"rate\", value: 5, editable: true, step: 0.001, min: 0.001, max: 8 },\r\n                { type: \"number\", propertyName: \"stereoPhase\", value: 0, editable: true, step: 1, min: 0, max: 180 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static WahWah() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"WahWah\",\r\n            properties: [\r\n                { type: \"boolean\", displayName: \"Auto\", propertyName: \"automode\", value: true, editable: true },\r\n                { type: \"number\", displayName: \"Base Frequency\", propertyName: \"baseFrequency\", value: 0.5, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Excursion Octaves\", propertyName: \"excursionOctaves\", value: 2, editable: true, step: 1, min: 1, max: 6 },\r\n                { type: \"number\", propertyName: \"sweep\", value: 0.2, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"resonance\", value: 10, editable: true, step: 1, min: 1, max: 100 },\r\n                { type: \"number\", propertyName: \"sensitivity\", value: 0.5, editable: true, step: 0.01, min: -1, max: 1 },\r\n                { type: \"boolean\", propertyName: \"bypass\", value: false, editable: true }\r\n            ]\r\n        };\r\n    }\r\n    static Bitcrusher() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Bitcrusher\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"bits\", value: 4, editable: true, step: 1, min: 1, max: 16 },\r\n                { type: \"number\", displayName: \"Normal Frequency\", propertyName: \"normFreq\", value: 0.1, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Buffer Size\", propertyName: \"bufferSize\", value: 4096, editable: true, step: 1, min: 256, max: 16384 },\r\n            ]\r\n        };\r\n    }\r\n    static Moog() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Moog\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"cutoff\", value: 0.065, editable: true, step: 0.001, min: 0, max: 1 },\r\n                { type: \"number\", propertyName: \"resonance\", value: 3.5, editable: true, step: 0.01, min: 0, max: 4 },\r\n                { type: \"number\", displayName: \"Buffer Size\", propertyName: \"bufferSize\", value: 4096, editable: true, step: 1, min: 256, max: 16384 },\r\n            ]\r\n        };\r\n    }\r\n    static PingPongDelay() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"PingPongDelay\",\r\n            properties: [\r\n                { type: \"number\", propertyName: \"wetLevel\", value: 1.5, editable: true, step: 0.01, min: 0.01, max: 8 },\r\n                { type: \"number\", propertyName: \"feedback\", value: 0.4, editable: true, step: 0.01, min: 0, max: 1 },\r\n                { type: \"number\", displayName: \"Delay Time (Left)\", propertyName: \"delayTimeLeft\", value: 200, editable: true, step: 1, min: 1, max: 10000 },\r\n                { type: \"number\", displayName: \"Delay Time (Right)\", propertyName: \"delayTimeRight\", value: 400, editable: true, step: 1, min: 1, max: 10000 },\r\n            ]\r\n        };\r\n    }\r\n    static Panner() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Panner\",\r\n            properties: [{ type: \"number\", propertyName: \"pan\", value: 0, editable: true, step: 0.01, min: -1, max: 1 }]\r\n        };\r\n    }\r\n    static Gain() {\r\n        return {\r\n            id: uuid(),\r\n            effectType: \"Gain\",\r\n            properties: [{ type: \"number\", propertyName: \"gain\", value: 1, editable: true, step: 0.01, min: 0, max: 2 }]\r\n        };\r\n    }\r\n}\r\nEffectsChain.possibleEffects = new Map([[\"Chorus\", EffectsChain.Chorus],\r\n    [\"Delay\", EffectsChain.Delay],\r\n    [\"Ping Pong Delay\", EffectsChain.PingPongDelay],\r\n    [\"Overdrive\", EffectsChain.Overdrive],\r\n    [\"Gain\", EffectsChain.Gain],\r\n    [\"Compressor\", EffectsChain.Compressor],\r\n    [\"Pan\", EffectsChain.Panner],\r\n    [\"Convolver Reverb\", EffectsChain.Convolver],\r\n    [\"Tremolo\", EffectsChain.Tremolo],\r\n    [\"Filter\", EffectsChain.Filter],\r\n    [\"Bitcrusher\", EffectsChain.Bitcrusher],\r\n    [\"Phaser\", EffectsChain.Phaser],\r\n    [\"Wah\", EffectsChain.WahWah],\r\n    [\"Moog Filter\", EffectsChain.Moog],\r\n    [\"Cabinet Emulator\", EffectsChain.Cabinet]]);\r\n//# sourceMappingURL=EffectsChain.js.map","import { EffectsChain } from \"../Nodes/EffectsChain.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nexport class ConnectionManager {\r\n    constructor(context) {\r\n        this.effectsDeserialised = new SimpleEvent();\r\n        this._context = context;\r\n        this._outputGain = this._context.createGain();\r\n        this._outputGain.connect(context.destination);\r\n        this._bus = new EffectsChain(context);\r\n        this._bus.chainName = \"Bus\";\r\n        this._possibleConnections = { \"Context\": this._outputGain, \"Bus\": this._bus };\r\n        this._possibleConnectionStrings = [\"Context\", \"Bus\"];\r\n        this._currentConnections = {};\r\n        this._chains = [];\r\n        this.createConnections(this._bus, [\"Context\"]);\r\n    }\r\n    get possibleConnections() {\r\n        return this._possibleConnections;\r\n    }\r\n    get possibleConnectionStrings() {\r\n        return this._possibleConnectionStrings;\r\n    }\r\n    get outputGain() {\r\n        return this._outputGain;\r\n    }\r\n    get bus() {\r\n        return this._bus;\r\n    }\r\n    get chains() {\r\n        return this._chains;\r\n    }\r\n    getConnections(object) {\r\n        if (object.id in this._currentConnections) {\r\n            return this._currentConnections[object.id];\r\n        }\r\n        else {\r\n            throw new Error(\"Object not found\");\r\n        }\r\n    }\r\n    createConnections(object, connections) {\r\n        if (object.id in this._currentConnections) {\r\n            object.disconnectAll();\r\n        }\r\n        for (let i = 0; i < connections.length; i++) {\r\n            if (connections[i] in this._possibleConnections) {\r\n                object.connect(this._possibleConnections[connections[i]]);\r\n            }\r\n            else {\r\n                throw new Error(\"Invalid connection name: \" + connections[i]);\r\n            }\r\n        }\r\n        this._currentConnections[object.id] = connections;\r\n    }\r\n    addConnection(object, connection) {\r\n        if (connection in this._possibleConnections) {\r\n            if (object.id in this._currentConnections) {\r\n                if (this._currentConnections[object.id].indexOf(connection) == -1) {\r\n                    this._currentConnections[object.id].push(connection);\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                this._currentConnections[object.id] = [connection];\r\n            }\r\n            object.connect(this._possibleConnections[connection]);\r\n        }\r\n        else {\r\n            throw new Error(\"Invalid connection name: \" + connection);\r\n        }\r\n    }\r\n    removeConnection(object, connection) {\r\n        if (object.id in this._currentConnections) {\r\n            let index = this._currentConnections[object.id].indexOf(connection);\r\n            if (index != -1) {\r\n                object.disconnect(this._possibleConnections[connection]);\r\n                this._currentConnections[object.id].splice(index, 1);\r\n            }\r\n            else {\r\n                throw new Error(\"Object does not have this connection\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Object does not have any connections.\");\r\n        }\r\n    }\r\n    removeAllConnections(object) {\r\n        object.disconnectAll();\r\n        delete this._currentConnections[object.id];\r\n    }\r\n    addChain(settings) {\r\n        let object = new EffectsChain(this._context, settings);\r\n        if (settings === undefined) {\r\n            let chainNo = 0;\r\n            while ((\"Chain \" + chainNo) in this._possibleConnections) {\r\n                chainNo++;\r\n            }\r\n            ;\r\n            let name = \"Chain \" + chainNo.toString();\r\n            object.chainName = name;\r\n            this.createConnections(object, EffectsChain.createDefaults().connections);\r\n        }\r\n        else {\r\n            this.createConnections(object, settings.connections);\r\n        }\r\n        this._possibleConnectionStrings.push(object.chainName);\r\n        this._possibleConnections[object.chainName] = object;\r\n        this._chains.push(object);\r\n        return object;\r\n    }\r\n    removeChain(name) {\r\n        if (name.startsWith(\"Chain \") && name in this._possibleConnections) {\r\n            let index = this._chains.indexOf(this._possibleConnections[name]);\r\n            this._chains.splice(index, 1);\r\n            delete this._possibleConnections[name];\r\n            this._possibleConnectionStrings.splice(this._possibleConnectionStrings.indexOf(name), 1);\r\n        }\r\n        else {\r\n            throw new Error(\"Object not in ConnectionManager\");\r\n        }\r\n    }\r\n    getChain(name) {\r\n        if (name == \"Bus\") {\r\n            return this._bus;\r\n        }\r\n        else {\r\n            let chain = this._chains.find((value) => { value.chainName === name; });\r\n            if (chain !== undefined) {\r\n                return chain;\r\n            }\r\n            else {\r\n                throw new Error(\"Invalid chain name\");\r\n            }\r\n        }\r\n    }\r\n    getChainDelayTime(name) {\r\n        let chain = this.getChain(name);\r\n        let delayTime = chain.getDelayTime();\r\n        if (\"bus\" in this._currentConnections[chain.id]) {\r\n            delayTime += this._bus.getDelayTime();\r\n        }\r\n        return delayTime;\r\n    }\r\n    serialiseChains() {\r\n        let serialisedChains = [];\r\n        this.chains.concat(this.bus).forEach(chain => {\r\n            let chainSettings = chain.serialise();\r\n            if (chain.id in this._currentConnections) {\r\n                chainSettings.connections = this._currentConnections[chain.id];\r\n            }\r\n            else {\r\n                chainSettings.connections = [\"Context\"];\r\n            }\r\n            serialisedChains.push(chainSettings);\r\n        });\r\n        return serialisedChains;\r\n    }\r\n    deserialiseChains(newChains) {\r\n        this._possibleConnectionStrings = [\"Context\"];\r\n        this._possibleConnections = { \"Context\": this._outputGain };\r\n        for (let i = 0; i < this._chains.length; i++) {\r\n            delete this._possibleConnections[this._chains[i].chainName];\r\n            this._possibleConnectionStrings.splice(this._possibleConnectionStrings.indexOf(this._chains[i].chainName), 1);\r\n            this._chains[i].destroy();\r\n        }\r\n        this._chains = [];\r\n        newChains.forEach(chain => {\r\n            if (chain.chainName === \"Bus\") {\r\n                this._bus = new EffectsChain(this._context, chain);\r\n                this._possibleConnectionStrings.push(\"Bus\");\r\n                this._possibleConnections[chain.chainName] = this._bus;\r\n                this.createConnections(this._bus, chain.connections);\r\n            }\r\n            else {\r\n                this.addChain(chain);\r\n            }\r\n        });\r\n        this.effectsDeserialised.emit();\r\n    }\r\n}\r\n//# sourceMappingURL=ConnectionManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport SongMetadata from \"./SongMetadata.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nimport { OscillatorTrack } from \"../Tracks/OscillatorTrack.js\";\r\nimport { SoundFileTrack } from \"../Tracks/SoundFileTrack.js\";\r\nimport { ConnectionManager } from \"./ConnectionManager.js\";\r\nimport { setContext } from \"../../../dependencies/tuna.js\";\r\nexport class SongManager {\r\n    constructor(context) {\r\n        this.lookaheadTime = 0.125;\r\n        this._playing = false;\r\n        this._startTime = 0;\r\n        this._quarterNotePosition = 0;\r\n        this.playingIntervalIDs = null;\r\n        this.metadata = new SongMetadata();\r\n        this.context = (context === undefined) ? new AudioContext() : context;\r\n        this.connectionManager = new ConnectionManager(this.context);\r\n        this.scheduleEvent = new SimpleEvent();\r\n        this.playingChangedEvent = new SimpleEvent();\r\n        this.quarterNotePositionChangedEvent = new SimpleEvent();\r\n        this._tracks = [];\r\n        this._boundQuarterNoteUpdateFunction = this.quarterNoteUpdateFunction.bind(this);\r\n    }\r\n    get playing() {\r\n        return this._playing;\r\n    }\r\n    get quarterNotePosition() {\r\n        return this._quarterNotePosition;\r\n    }\r\n    set quarterNotePosition(value) {\r\n        this._internalQuarterNotePosition = value;\r\n        this._startTime = this.context.currentTime - this.metadata.positionQuarterNoteToSeconds(this._quarterNotePosition);\r\n        this._scheduleStop();\r\n        if (this._playing) {\r\n            this._tracks.forEach(element => {\r\n                element.start(this._quarterNotePosition);\r\n            });\r\n        }\r\n    }\r\n    set _internalQuarterNotePosition(value) {\r\n        this._quarterNotePosition = value;\r\n        this.quarterNotePositionChangedEvent.emit(value);\r\n    }\r\n    get tracks() {\r\n        return this._tracks;\r\n    }\r\n    addOscillatorTrack(settings) {\r\n        let newTrack = new OscillatorTrack(this.metadata, this.context, this.scheduleEvent, this.connectionManager, settings);\r\n        this._tracks.push(newTrack);\r\n        return newTrack;\r\n    }\r\n    addSoundFileTrack(settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let newTrack = yield SoundFileTrack.create(this.metadata, this.context, this.scheduleEvent, this.connectionManager, settings);\r\n            this._tracks.push(newTrack);\r\n            return newTrack;\r\n        });\r\n    }\r\n    removeTrack(track) {\r\n        let index = this._tracks.indexOf(track);\r\n        if (index != -1) {\r\n            this._tracks.splice(index, 1);\r\n        }\r\n        track.destroy();\r\n    }\r\n    start(startPosition = this.quarterNotePosition) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.context.state === \"suspended\") {\r\n                yield this.context.resume();\r\n            }\r\n            this._playing = true;\r\n            this.playingChangedEvent.emit(this._playing);\r\n            this.quarterNotePosition = startPosition;\r\n            if (startPosition == 0) {\r\n                this._startTime = this.context.currentTime;\r\n            }\r\n            else {\r\n                this._startTime = this.context.currentTime - this.metadata.positionQuarterNoteToSeconds(startPosition);\r\n            }\r\n            this.connectionManager.outputGain.gain.setTargetAtTime(0.9999, this.context.currentTime, 0.03);\r\n            this.playingIntervalIDs = setInterval(() => { this.scheduleNotes(); }, 50);\r\n            requestAnimationFrame(this._boundQuarterNoteUpdateFunction);\r\n            this._tracks.forEach(element => {\r\n                element.start(this._quarterNotePosition);\r\n            });\r\n            this._scheduleStop();\r\n        });\r\n    }\r\n    stop() {\r\n        this._playing = false;\r\n        this.playingChangedEvent.emit(this._playing);\r\n        this.connectionManager.outputGain.gain.setTargetAtTime(0.0001, this.context.currentTime, 0.03);\r\n        this._startSongLength = null;\r\n        clearInterval(this.playingIntervalIDs);\r\n        this._tracks.forEach(element => {\r\n            element.stop();\r\n        });\r\n    }\r\n    stopToBeginning() {\r\n        this.stop();\r\n        this.quarterNotePosition = 0;\r\n    }\r\n    serialise() {\r\n        let serialisedTracks = [];\r\n        this._tracks.forEach(track => {\r\n            let trackSettings = track.serialise();\r\n            serialisedTracks.push(trackSettings);\r\n        });\r\n        let serialisedChains = this.connectionManager.serialiseChains();\r\n        return {\r\n            \"fileType\": \"SequencerSongSettings\",\r\n            \"version\": SongManager.saveFileVersion,\r\n            \"metadataEvents\": this.metadata.serialise(),\r\n            \"tracks\": serialisedTracks,\r\n            \"chains\": serialisedChains\r\n        };\r\n    }\r\n    deserialise(settings) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (settings.version != SongManager.saveFileVersion) {\r\n                console.log(\"WARNING: Save file is an old version, loading may not function correctly.\");\r\n            }\r\n            this._tracks.forEach(track => { track.destroy(); });\r\n            this._tracks = [];\r\n            this.connectionManager.deserialiseChains(settings.chains);\r\n            this.metadata.deserialise(settings.metadataEvents);\r\n            for (let i = 0; i < settings.tracks.length; i++) {\r\n                let track = settings.tracks[i];\r\n                switch (track.source.type) {\r\n                    case \"oscillator\":\r\n                        this.addOscillatorTrack(track);\r\n                        break;\r\n                    case \"soundFile\":\r\n                        yield this.addSoundFileTrack(track);\r\n                        break;\r\n                    default:\r\n                        throw new Error(\"Invalid track type.\");\r\n                        break;\r\n                }\r\n            }\r\n            ;\r\n        });\r\n    }\r\n    destroy() {\r\n        this.scheduleEvent.removeAllListeners();\r\n        this.playingChangedEvent.removeAllListeners();\r\n    }\r\n    saveToWAV() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let length = this.getPlaybackLength();\r\n            if (length > 0) {\r\n                let song = this.serialise();\r\n                let offlineManager = new OfflineSongManager(length + 0.1);\r\n                yield offlineManager.deserialise(song);\r\n                let result = yield offlineManager.saveToWAV();\r\n                setContext(this.context);\r\n                return result;\r\n            }\r\n            else {\r\n                throw new Error(\"Song Length must be greater than 0 to save to WAV.\");\r\n            }\r\n        });\r\n    }\r\n    getPlaybackLength() {\r\n        let longestEvent = 0;\r\n        let cachedEffectLengths = {};\r\n        this._tracks.forEach(track => {\r\n            let playbackTime = this.metadata.positionQuarterNoteToSeconds(track.timeline.playbackTime);\r\n            let connection = this.connectionManager.getConnections(track.audioSource)[0];\r\n            if (connection != \"Context\") {\r\n                if (connection in cachedEffectLengths) {\r\n                    playbackTime += cachedEffectLengths[connection];\r\n                }\r\n                else {\r\n                    let chainDelayTime = this.connectionManager.getChainDelayTime(connection);\r\n                    playbackTime += chainDelayTime;\r\n                    cachedEffectLengths[connection] = chainDelayTime;\r\n                }\r\n            }\r\n            if (playbackTime > longestEvent) {\r\n                longestEvent = playbackTime;\r\n            }\r\n        });\r\n        return (longestEvent > 0 ? longestEvent + 0.01 : 0);\r\n    }\r\n    scheduleNotes() {\r\n        let quarterNoteTime = this.quarterNotePosition + ((this.lookaheadTime / this.metadata.getSecondsPerBeat(this.quarterNotePosition))\r\n            / this.metadata.getQuarterNoteMultiplier(this.quarterNotePosition));\r\n        this.scheduleEvent.emit(quarterNoteTime);\r\n    }\r\n    quarterNoteUpdateFunction() {\r\n        if (this.playing) {\r\n            let timeSinceStart = this.context.currentTime - this._startTime;\r\n            this._internalQuarterNotePosition = this.metadata.positionSecondsToQuarterNote(timeSinceStart);\r\n            if (this._startSongLength && timeSinceStart > this._startSongLength) {\r\n                this.stopToBeginning();\r\n            }\r\n            requestAnimationFrame(this._boundQuarterNoteUpdateFunction);\r\n        }\r\n    }\r\n    _scheduleStop() {\r\n        let length = this.getPlaybackLength();\r\n        if (length > 0) {\r\n            this._startSongLength = length;\r\n        }\r\n        else {\r\n            this._startSongLength = null;\r\n        }\r\n    }\r\n}\r\nSongManager.saveFileVersion = \"1.0.0\";\r\nexport class OfflineSongManager extends SongManager {\r\n    constructor(length) {\r\n        super(new OfflineAudioContext(2, length * 44100, 44100));\r\n    }\r\n    saveToWAV() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._tracks.forEach(track => {\r\n                track.scheduleAllEvents();\r\n            });\r\n            console.log(\"Starting AudioBuffer render\");\r\n            let audioBuffer = yield this.context.startRendering();\r\n            console.log(\"Finished AudioBuffer render\");\r\n            const [left, right] = [audioBuffer.getChannelData(0), audioBuffer.getChannelData(1)];\r\n            const interleaved = new Float32Array(left.length * 2);\r\n            for (let src = 0, dst = 0; src < left.length; src++, dst += 2) {\r\n                interleaved[dst] = left[src];\r\n                interleaved[dst + 1] = right[src];\r\n            }\r\n            ;\r\n            const wavBytes = getWavBytes(interleaved.buffer, {\r\n                isFloat: true,\r\n                numChannels: 2,\r\n                sampleRate: 44100,\r\n            });\r\n            return new Blob([wavBytes], { type: \"audio/wav\" });\r\n        });\r\n    }\r\n}\r\nfunction getWavBytes(buffer, options) {\r\n    const type = options.isFloat ? Float32Array : Uint16Array;\r\n    const numFrames = buffer.byteLength / type.BYTES_PER_ELEMENT;\r\n    const headerBytes = getWavHeader(Object.assign({}, options, { numFrames }));\r\n    const wavBytes = new Uint8Array(headerBytes.length + buffer.byteLength);\r\n    wavBytes.set(headerBytes, 0);\r\n    wavBytes.set(new Uint8Array(buffer), headerBytes.length);\r\n    return wavBytes;\r\n}\r\nfunction getWavHeader(options) {\r\n    const numFrames = options.numFrames;\r\n    const numChannels = options.numChannels || 2;\r\n    const sampleRate = options.sampleRate || 44100;\r\n    const bytesPerSample = options.isFloat ? 4 : 2;\r\n    const format = options.isFloat ? 3 : 1;\r\n    const blockAlign = numChannels * bytesPerSample;\r\n    const byteRate = sampleRate * blockAlign;\r\n    const dataSize = numFrames * blockAlign;\r\n    const buffer = new ArrayBuffer(44);\r\n    const dv = new DataView(buffer);\r\n    let p = 0;\r\n    function writeString(s) {\r\n        for (let i = 0; i < s.length; i++) {\r\n            dv.setUint8(p + i, s.charCodeAt(i));\r\n        }\r\n        p += s.length;\r\n    }\r\n    function writeUint32(d) {\r\n        dv.setUint32(p, d, true);\r\n        p += 4;\r\n    }\r\n    function writeUint16(d) {\r\n        dv.setUint16(p, d, true);\r\n        p += 2;\r\n    }\r\n    writeString('RIFF');\r\n    writeUint32(dataSize + 36);\r\n    writeString('WAVE');\r\n    writeString('fmt ');\r\n    writeUint32(16);\r\n    writeUint16(format);\r\n    writeUint16(numChannels);\r\n    writeUint32(sampleRate);\r\n    writeUint32(byteRate);\r\n    writeUint16(blockAlign);\r\n    writeUint16(bytesPerSample * 8);\r\n    writeString('data');\r\n    writeUint32(dataSize);\r\n    return new Uint8Array(buffer);\r\n}\r\n//# sourceMappingURL=SongManager.js.map","export class NavigationView {\r\n    constructor() {\r\n        this._viewStack = [];\r\n    }\r\n    get viewDepth() {\r\n        return this._viewStack.length;\r\n    }\r\n    get currentElement() {\r\n        return this._viewStack[this._viewStack.length - 1];\r\n    }\r\n    setStageRenderer(view, renderer) {\r\n        this.controlledStage = view;\r\n        this.renderer = renderer;\r\n        this.controlledStage.removeChildren(0, this.controlledStage.children.length);\r\n    }\r\n    setDefaultElement(element) {\r\n        if (this._viewStack.length == 0) {\r\n            this.controlledStage.addChild(element);\r\n            this._viewStack.push(element);\r\n        }\r\n        else {\r\n            this._viewStack.splice(0, 1, element);\r\n        }\r\n    }\r\n    show(element) {\r\n        if (this._viewStack.length > 0) {\r\n            this.controlledStage.removeChild(this.currentElement);\r\n        }\r\n        this._viewStack.push(element);\r\n        this.controlledStage.addChild(this.currentElement);\r\n    }\r\n    back() {\r\n        if (this._viewStack.length <= 1) {\r\n            throw new Error(\"Cannot bring view stack below 1 element.\");\r\n        }\r\n        this.controlledStage.removeChild(this.currentElement);\r\n        let removed = this._viewStack.pop();\r\n        removed.destroy();\r\n        this.controlledStage.addChild(this.currentElement);\r\n        this.currentElement.resize(this.renderer.width, this.renderer.height);\r\n    }\r\n    passWheelEvent(event, canvasX, canvasY) {\r\n        if (this.currentElement != undefined) {\r\n            this.currentElement.mouseWheelHandler(event, canvasX, canvasY);\r\n        }\r\n    }\r\n}\r\nconst navigationView = new NavigationView();\r\nexport { navigationView };\r\n//# sourceMappingURL=NavigationView.js.map","export class UIColors {\r\n}\r\nUIColors.bgColor = 0x303030;\r\nUIColors.fgColor = 0x5F5F5F;\r\nUIColors.timelineMarkerColor = 0xEEEEEE;\r\nUIColors.metadataEventColor = 0x0075ff;\r\nUIColors.trackEventColor = 0x319999;\r\nUIColors.trackEventSelectedColor = 0x004545;\r\nUIColors.trackEventHoveredColor = 0x097272;\r\nUIColors.trackEventDeleteColor = 0xFF0000;\r\nUIColors.trackEventHighlightColor = 0x54b7b7;\r\nexport class UIFonts {\r\n}\r\nUIFonts.trackFont = {\r\n    fontFamily: \"Arial\",\r\n    fontSize: 15,\r\n    fill: 0xFFFFFF\r\n};\r\nexport class UIPositioning {\r\n}\r\nUIPositioning.timelineHeaderHeight = 40;\r\nUIPositioning.sequencerSidebarWidth = 100;\r\nUIPositioning.timelineSidebarWidth = 200;\r\n//# sourceMappingURL=UITheme.js.map","import { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nexport class UITrack {\r\n    constructor(name, startY, height, track) {\r\n        this.name = name;\r\n        this.startY = startY;\r\n        this.height = height;\r\n        this.track = track;\r\n    }\r\n    destroy() {\r\n        this.track.destroy();\r\n    }\r\n    serialise() {\r\n        return {\r\n            type: \"base\",\r\n            name: this.name,\r\n            startY: this.startY,\r\n            height: this.height,\r\n            modelTrackID: this.track.id\r\n        };\r\n    }\r\n}\r\nexport class NoteUITrack extends UITrack {\r\n    constructor(settings, baseTrack) {\r\n        super(settings.name, settings.startY, settings.height, baseTrack);\r\n        if (settings.noteGroups != undefined) {\r\n            this._noteGroups = settings.noteGroups;\r\n        }\r\n        else {\r\n            this._noteGroups = [];\r\n        }\r\n        this.noteGroupsChanged = new SimpleEvent();\r\n    }\r\n    get noteGroups() {\r\n        return this._noteGroups;\r\n    }\r\n    serialise() {\r\n        let base = super.serialise();\r\n        return Object.assign(Object.assign({}, base), { type: \"oscillator\", noteGroups: this._noteGroups });\r\n    }\r\n    getNoteGroupsStartingBetweenTime(startTime, endTime) {\r\n        let noteGroupsInRange = [];\r\n        for (let i = 0; i < this._noteGroups.length; i++) {\r\n            let noteGroup = this._noteGroups[i];\r\n            if (noteGroup[0] >= startTime && noteGroup[0] <= endTime) {\r\n                noteGroupsInRange.push(noteGroup);\r\n            }\r\n            else if (noteGroup[0] > endTime) {\r\n                break;\r\n            }\r\n        }\r\n        return noteGroupsInRange;\r\n    }\r\n    getNoteGroupsWithinTime(startTime, endTime) {\r\n        let noteGroupsToReturn = [];\r\n        for (let i = 0; i < this._noteGroups.length; i++) {\r\n            let noteGroup = this._noteGroups[i];\r\n            if (noteGroup[1] > startTime && noteGroup[0] < endTime) {\r\n                noteGroupsToReturn.push(noteGroup);\r\n            }\r\n            else if (noteGroup[0] > endTime) {\r\n                break;\r\n            }\r\n        }\r\n        return noteGroupsToReturn;\r\n    }\r\n    getNoteGroupIndex(noteGroup) {\r\n        for (let i = 0; i < this._noteGroups.length; i++) {\r\n            if (noteGroup[0] == this._noteGroups[i][0] && noteGroup[1] == this._noteGroups[i][1]) {\r\n                return i;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    addNoteGroup(startTime, endTime) {\r\n        if (startTime < 0 || endTime < 0) {\r\n            throw new RangeError(\"StartTime and EndTime must both be greater than 0.\");\r\n        }\r\n        if (startTime > endTime) {\r\n            throw new RangeError(\"StartTime cannot be greater than endTime\");\r\n        }\r\n        this.noteGroupsChanged.emit();\r\n        if (this._noteGroups.length === 0) {\r\n            this._noteGroups.push([startTime, endTime]);\r\n            return 0;\r\n        }\r\n        else {\r\n            if (endTime <= this._noteGroups[0][0]) {\r\n                this._noteGroups.splice(0, 0, [startTime, endTime]);\r\n                return 0;\r\n            }\r\n            else if (startTime >= this._noteGroups[this._noteGroups.length - 1][1]) {\r\n                this._noteGroups.push([startTime, endTime]);\r\n                return this._noteGroups.length - 1;\r\n            }\r\n            for (let i = 0; i < this._noteGroups.length - 1; i++) {\r\n                if (startTime >= this._noteGroups[i][1] && endTime <= this._noteGroups[i + 1][0]) {\r\n                    this._noteGroups.splice(i + 1, 0, [startTime, endTime]);\r\n                    return i;\r\n                }\r\n            }\r\n            throw new RangeError(\"Region invalid, likely collides with other existing region.\");\r\n        }\r\n    }\r\n    removeNoteGroup(startTime) {\r\n        let left = 0;\r\n        let right = this._noteGroups.length - 1;\r\n        let mid = 0;\r\n        while (left <= right) {\r\n            mid = Math.floor((left + right) / 2);\r\n            if (startTime - this._noteGroups[mid][0] === 0) {\r\n                this._noteGroups.splice(mid, 1);\r\n                this.noteGroupsChanged.emit();\r\n                return;\r\n            }\r\n            else if (startTime - this._noteGroups[mid][0] > 0) {\r\n                left = mid + 1;\r\n            }\r\n            else {\r\n                right = mid - 1;\r\n            }\r\n        }\r\n        throw new RangeError(\"Element with given startTime does not exist.\");\r\n    }\r\n    updateNoteGroups(noteEvent) {\r\n        if (this._noteGroups.length == 0) {\r\n            this.addNoteGroup(noteEvent.startPosition, noteEvent.endPosition);\r\n            return;\r\n        }\r\n        let noteGroups = this.getNoteGroupsWithinTime(noteEvent.startPosition, noteEvent.endPosition);\r\n        let chosenNoteGroup = null;\r\n        if (noteGroups.length > 1) {\r\n            chosenNoteGroup = [noteGroups[0][0], noteGroups[noteGroups.length - 1][1]];\r\n            noteGroups.forEach(noteGroup => {\r\n                this.removeNoteGroup(noteGroup[0]);\r\n            });\r\n            this.addNoteGroup(chosenNoteGroup[0], chosenNoteGroup[1]);\r\n        }\r\n        else if (noteGroups.length == 1) {\r\n            chosenNoteGroup = noteGroups[0];\r\n        }\r\n        else {\r\n            if (this.noteGroups[0][0] > noteEvent.endPosition) {\r\n                chosenNoteGroup = this.noteGroups[0];\r\n            }\r\n            else {\r\n                let index = 1;\r\n                while (index < this.noteGroups.length && this.noteGroups[index][1] < noteEvent.startPosition) {\r\n                    index++;\r\n                }\r\n                if (index == this.noteGroups.length) {\r\n                    chosenNoteGroup = this.noteGroups[index - 1];\r\n                }\r\n                else {\r\n                    if (Math.abs(this.noteGroups[index - 1][1] - noteEvent.endPosition) <= Math.abs(this.noteGroups[index][0] - noteEvent.startPosition)) {\r\n                        chosenNoteGroup = this.noteGroups[index - 1];\r\n                    }\r\n                    else {\r\n                        chosenNoteGroup = this.noteGroups[index];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        let newNoteGroup = chosenNoteGroup;\r\n        if (newNoteGroup[0] > noteEvent.startPosition) {\r\n            newNoteGroup[0] = noteEvent.startPosition;\r\n        }\r\n        if (newNoteGroup[1] < noteEvent.endPosition) {\r\n            newNoteGroup[1] = noteEvent.endPosition;\r\n        }\r\n        if (newNoteGroup != chosenNoteGroup) {\r\n            this.removeNoteGroup(chosenNoteGroup[0]);\r\n            this.addNoteGroup(newNoteGroup[0], newNoteGroup[1]);\r\n            this.noteGroupsChanged.emit();\r\n        }\r\n        else {\r\n            this.checkNoteGroupBoundaries(this.getNoteGroupIndex(chosenNoteGroup));\r\n        }\r\n    }\r\n    checkNoteGroupBoundaries(index) {\r\n        let notes = this.getNoteGroupNotes(index);\r\n        if (notes.length == 0) {\r\n            this.removeNoteGroup(this._noteGroups[index][0]);\r\n            return;\r\n        }\r\n        let max = notes[0].endPosition;\r\n        for (let i = 1; i < notes.length; i++) {\r\n            max = Math.max(max, notes[i].endPosition);\r\n        }\r\n        this._noteGroups[index][0] = notes[0].startPosition;\r\n        this._noteGroups[index][1] = max;\r\n        this.noteGroupsChanged.emit();\r\n    }\r\n    getNoteGroupNotes(index) {\r\n        let noteGroup = this._noteGroups[index];\r\n        return this.track.timeline.getEventsBetweenTimes(noteGroup[0], noteGroup[1]);\r\n    }\r\n    addEvent(startPosition, pitch, duration) {\r\n        let event = this.track.addNote(startPosition, pitch, duration);\r\n        this.updateNoteGroups(event);\r\n        return event;\r\n    }\r\n    editEvent(event, startPosition, pitch, duration) {\r\n        event.pitchString = pitch;\r\n        this.track.timeline.editEvent(this.track.timeline.getIndexOfEvent(event), startPosition, duration);\r\n        this.updateNoteGroups(event);\r\n    }\r\n    removeEvent(event) {\r\n        let noteGroupIndex = this.getNoteGroupIndex(this.getNoteGroupsWithinTime(event.startPosition, event.endPosition)[0]);\r\n        this.track.removeNote(event);\r\n        this.checkNoteGroupBoundaries(noteGroupIndex);\r\n    }\r\n    destroy() {\r\n        this.noteGroupsChanged.removeAllListeners();\r\n        super.destroy();\r\n    }\r\n}\r\nexport class SoundFileUITrack extends UITrack {\r\n    constructor(settings, track) {\r\n        super(settings.name, settings.startY, settings.height, track);\r\n        this.displayActualWidth = true;\r\n        this.displayActualWidth = settings.displayActualWidth;\r\n    }\r\n    get eventDuration() {\r\n        return this.track.soundFileDuration;\r\n    }\r\n    serialise() {\r\n        let base = super.serialise();\r\n        return Object.assign(Object.assign({}, base), { type: \"soundFile\", displayActualWidth: this.displayActualWidth });\r\n    }\r\n    getOneShotsBetweenTime(startTime, endTime) {\r\n        return this.track.timeline.getEventsBetweenTimes(startTime, endTime);\r\n    }\r\n}\r\n//# sourceMappingURL=UITrack.js.map","export var EventSnapType;\r\n(function (EventSnapType) {\r\n    EventSnapType[EventSnapType[\"Beat\"] = 0] = \"Beat\";\r\n    EventSnapType[EventSnapType[\"HalfBeat\"] = 1] = \"HalfBeat\";\r\n    EventSnapType[EventSnapType[\"QuarterBeat\"] = 2] = \"QuarterBeat\";\r\n    EventSnapType[EventSnapType[\"EighthBeat\"] = 3] = \"EighthBeat\";\r\n    EventSnapType[EventSnapType[\"None\"] = 4] = \"None\";\r\n})(EventSnapType || (EventSnapType = {}));\r\nexport var TimelineMode;\r\n(function (TimelineMode) {\r\n    TimelineMode[TimelineMode[\"Playback\"] = 0] = \"Playback\";\r\n    TimelineMode[TimelineMode[\"Edit\"] = 1] = \"Edit\";\r\n})(TimelineMode || (TimelineMode = {}));\r\nexport var MouseClickType;\r\n(function (MouseClickType) {\r\n    MouseClickType[MouseClickType[\"LeftClick\"] = 0] = \"LeftClick\";\r\n    MouseClickType[MouseClickType[\"RightClick\"] = 1] = \"RightClick\";\r\n    MouseClickType[MouseClickType[\"MiddleClick\"] = 2] = \"MiddleClick\";\r\n    MouseClickType[MouseClickType[\"None\"] = 3] = \"None\";\r\n})(MouseClickType || (MouseClickType = {}));\r\nexport var NoteLength;\r\n(function (NoteLength) {\r\n    NoteLength[NoteLength[\"Whole\"] = 0] = \"Whole\";\r\n    NoteLength[NoteLength[\"Half\"] = 1] = \"Half\";\r\n    NoteLength[NoteLength[\"Quarter\"] = 2] = \"Quarter\";\r\n    NoteLength[NoteLength[\"Eighth\"] = 3] = \"Eighth\";\r\n    NoteLength[NoteLength[\"Sixteenth\"] = 4] = \"Sixteenth\";\r\n    NoteLength[NoteLength[\"ThirtySecond\"] = 5] = \"ThirtySecond\";\r\n})(NoteLength || (NoteLength = {}));\r\n//# sourceMappingURL=Enums.js.map","import * as PIXI from \"pixi.js\";\r\nimport { MouseClickType } from \"../Settings/Enums\";\r\nimport { PointHelper } from \"../../HelperModules/PointHelper\";\r\nexport class InteractiveContainer extends PIXI.Container {\r\n    constructor() {\r\n        super();\r\n        this.mouseIsOver = false;\r\n        this.interactive = true;\r\n        this.on(\"pointerdown\", this.pointerDownHandler.bind(this));\r\n        this.on(\"pointermove\", this.pointerMoveHandler.bind(this));\r\n        this.on(\"pointerup\", this.pointerUpHandler.bind(this));\r\n        this.on(\"pointerupoutside\", this.pointerUpHandler.bind(this));\r\n        this.on(\"pointerover\", this.pointerOverHandler.bind(this));\r\n        this.on(\"pointerout\", this.pointerOutHandler.bind(this));\r\n    }\r\n    pointerOverHandler(event) {\r\n        this.mouseIsOver = true;\r\n    }\r\n    pointerOutHandler(event) {\r\n        this.mouseIsOver = false;\r\n    }\r\n}\r\nexport class MouseTypeContainer extends InteractiveContainer {\r\n    pointerDownHandler(event) {\r\n        if (!this.mouseIsOver) {\r\n            return;\r\n        }\r\n        switch (event.data.button) {\r\n            case 0:\r\n                this._mouseClickType = MouseClickType.LeftClick;\r\n                break;\r\n            case 1:\r\n                this._mouseClickType = MouseClickType.MiddleClick;\r\n                break;\r\n            case 2:\r\n                this._mouseClickType = MouseClickType.RightClick;\r\n                break;\r\n            default:\r\n                this._mouseClickType = MouseClickType.None;\r\n                return;\r\n        }\r\n        this._startPointerPosition = event.data.getLocalPosition(this.parent);\r\n    }\r\n    pointerMoveHandler(event) {\r\n        return;\r\n    }\r\n    pointerUpHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.None || this._mouseClickType == undefined) {\r\n            return;\r\n        }\r\n        else {\r\n            if (PointHelper.distanceSquared(event.data.getLocalPosition(this.parent), this._startPointerPosition) < 10) {\r\n                this.pointerUpClickHandler(event);\r\n            }\r\n            else {\r\n                this.pointerUpDragHandler(event);\r\n            }\r\n        }\r\n        this._mouseClickType = MouseClickType.None;\r\n        this._startPointerPosition = undefined;\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        return;\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        return;\r\n    }\r\n}\r\n//# sourceMappingURL=InteractiveContainer.js.map","export class PointHelper {\r\n    static distance(a, b) {\r\n        let x = a.x - b.x;\r\n        let y = a.y - b.y;\r\n        return Math.sqrt(x * x + y * y);\r\n    }\r\n    static distanceSquared(a, b) {\r\n        let x = a.x - b.x;\r\n        let y = a.y - b.y;\r\n        return x * x + y * y;\r\n    }\r\n}\r\n//# sourceMappingURL=PointHelper.js.map","export class ObjectPool {\r\n    constructor() {\r\n        this._availableObjects = [];\r\n    }\r\n    get objectCount() {\r\n        return this._availableObjects.length;\r\n    }\r\n    getObject() {\r\n        if (this._availableObjects.length > 0) {\r\n            return this._availableObjects.pop();\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    returnObject(instance) {\r\n        this._availableObjects.push(instance);\r\n    }\r\n}\r\n//# sourceMappingURL=ObjectPool.js.map","import * as React from \"react\";\r\nimport InputRange from \"react-input-range\";\r\nexport class Slider extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentValue: this.props.value\r\n        };\r\n    }\r\n    render() {\r\n        if (this.props.onRelease) {\r\n            return React.createElement(InputRange, { classNames: Slider.classNames, minValue: this.props.min, maxValue: this.props.max, step: this.props.step, value: this.state.currentValue, onChange: (value) => this.setState({ currentValue: value }), onChangeComplete: this.props.onChange });\r\n        }\r\n        else {\r\n            return React.createElement(InputRange, { classNames: Slider.classNames, minValue: this.props.min, maxValue: this.props.max, step: this.props.step, value: this.props.value, onChange: this.props.onChange });\r\n        }\r\n    }\r\n}\r\nSlider.classNames = {\r\n    activeTrack: \"sliderTrackActive\",\r\n    disabledInputRange: \"sliderDisabled\",\r\n    inputRange: \"slider\",\r\n    labelContainer: \"sliderLabelContainer\",\r\n    maxLabel: \"sliderMaxLabel\",\r\n    minLabel: \"sliderMinLabel\",\r\n    slider: \"sliderHandle\",\r\n    sliderContainer: \"sliderHandleContainer\",\r\n    track: \"sliderTrack\",\r\n    valueLabel: \"sliderValueLabel\"\r\n};\r\nexport class FileInput extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"input\", { className: this.props.className, type: \"file\", onChange: (event) => this.props.onChange(event.target.files), accept: this.props.accept });\r\n    }\r\n}\r\nexport class IconFileInput extends React.PureComponent {\r\n    handleClick() {\r\n        this._inputRef.click();\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", null,\r\n            React.createElement(\"button\", { className: this.props.className, title: this.props.title, onClick: this.handleClick.bind(this) },\r\n                React.createElement(\"i\", { className: this.props.iconName })),\r\n            React.createElement(\"input\", { style: { position: \"absolute\", zIndex: -1, opacity: 0 }, type: \"file\", ref: (ref) => { this._inputRef = ref; }, onChange: (event) => this.props.onChange(event.target.files), accept: this.props.accept }));\r\n    }\r\n}\r\nexport class LabelledCheckbox extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className, onClick: () => { this.props.onChange(!this.props.state); } },\r\n            React.createElement(\"p\", null, this.props.label),\r\n            React.createElement(\"input\", { type: \"checkbox\", name: this.props.label, checked: this.props.state, onChange: (event) => { this.props.onChange(event.target.checked); } }));\r\n    }\r\n}\r\nexport class FAButton extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"button\", { title: this.props.title, className: this.props.className, onClick: () => { this.props.onClick(); }, disabled: this.props.disabled },\r\n            React.createElement(\"i\", { className: this.props.iconName }));\r\n    }\r\n}\r\nexport class Dropdown extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dropdownVisible: false\r\n        };\r\n    }\r\n    _handleDropdownClick() {\r\n        this.setState({ dropdownVisible: !this.state.dropdownVisible });\r\n    }\r\n    render() {\r\n        const objDivClasses = \"dropdown\" + (this.props.optionsDivClassName == undefined ? \"\" : \" \" + this.props.optionsDivClassName);\r\n        return React.createElement(\"div\", null,\r\n            React.createElement(FAButton, { className: this.props.buttonClassName, title: this.props.title, iconName: this.props.iconName, onClick: () => { this._handleDropdownClick(); } }),\r\n            this.state.dropdownVisible && React.createElement(ClickOutsideWatcher, { callback: () => this.setState({ dropdownVisible: false }) },\r\n                React.createElement(\"div\", { className: objDivClasses }, this.props.optionTitles.map((title, index) => {\r\n                    return React.createElement(DropdownItem, { key: index, index: index, className: this.props.optionClassName, title: title, callback: (index) => { this._handleDropdownClick(); this.props.optionClickCallback(index); } });\r\n                }))));\r\n    }\r\n}\r\nexport class DropdownItem extends React.Component {\r\n    render() {\r\n        const className = \"dropdownItem buttonColorAnim\" + (this.props.className == undefined ? \"\" : \" \" + this.props.className);\r\n        return React.createElement(\"button\", { className: className, onClick: () => { this.props.callback(this.props.index); } }, this.props.title);\r\n    }\r\n}\r\nexport class BoxSelect extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this._selectOptionClicked = this._selectOptionClicked.bind(this);\r\n        this.state = {\r\n            selectVisible: false,\r\n        };\r\n        this._selectButton = React.createRef();\r\n    }\r\n    _selectOptionClicked(index) {\r\n        this.props.selectedCallback(index, this.props.options[index]);\r\n        this.setState({ selectVisible: false });\r\n    }\r\n    render() {\r\n        const buttonClassName = \"boxSelectButton\" + (this.props.selectButtonClassName ? \" \" + this.props.selectButtonClassName : \"\");\r\n        return React.createElement(\"div\", { className: this.props.className, style: { display: \"flex\", flexDirection: \"column\", alignItems: \"center\", position: \"relative\" } },\r\n            React.createElement(\"div\", null,\r\n                React.createElement(\"button\", { className: (this.props.mainButtonClassName ? this.props.mainButtonClassName : \"mainBoxSelectButton\"), title: this.props.title, ref: this._selectButton, onClick: () => { this.setState({ selectVisible: !this.state.selectVisible }); } }, this.props.selected !== undefined ? this.props.options[this.props.selected] : (this.props.boxSelectTitle ? this.props.boxSelectTitle : this.props.children))),\r\n            this.state.selectVisible && React.createElement(ClickOutsideWatcher, { className: \"boxSelectWatcher\", callback: () => { this.setState({ selectVisible: false }); } },\r\n                React.createElement(BoxSelectOverlay, { buttonClassName: buttonClassName, selectButton: this._selectButton, options: this.props.options, selectOptionClickedCallback: this._selectOptionClicked })));\r\n    }\r\n}\r\nclass BoxSelectOverlay extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            renderAbove: false,\r\n        };\r\n        this._overlayContainer = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        let bottom = this._overlayContainer.current.getBoundingClientRect().bottom;\r\n        if (bottom > window.innerHeight) {\r\n            this.setState({ renderAbove: true });\r\n        }\r\n    }\r\n    render() {\r\n        const overlayClassName = \"boxSelectOverlay\" + (this.props.className ? \" \" + this.props.className : \"\");\r\n        let options = this.props.options.map((value, index) => {\r\n            return React.createElement(\"button\", { className: this.props.buttonClassName, key: index, onClick: () => { this.props.selectOptionClickedCallback(index); } }, value);\r\n        });\r\n        let currentButton = this.props.selectButton.current;\r\n        if (!this.state.renderAbove) {\r\n            return React.createElement(\"div\", { className: \"boxSelectOverlayContainer\", ref: this._overlayContainer, style: { top: currentButton.offsetHeight + 1 } },\r\n                React.createElement(\"div\", { className: \"boxSelectOverlayArrow top\" }),\r\n                React.createElement(\"div\", { className: overlayClassName }, options));\r\n        }\r\n        else {\r\n            return React.createElement(\"div\", { className: \"boxSelectOverlayContainer\", ref: this._overlayContainer, style: { top: -this._overlayContainer.current.offsetHeight - 1 } },\r\n                React.createElement(\"div\", { className: overlayClassName }, options),\r\n                React.createElement(\"div\", { className: \"boxSelectOverlayArrow bottom\" }));\r\n        }\r\n    }\r\n}\r\nexport class SelectionGroup extends React.Component {\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className }, this.props.buttonContents.map((value, index) => {\r\n            let selected = false;\r\n            if (index === this.props.selectedButton) {\r\n                selected = true;\r\n            }\r\n            let title = undefined;\r\n            if (this.props.buttonTitles && this.props.buttonTitles.length > index) {\r\n                title = this.props.buttonTitles[index];\r\n            }\r\n            return React.createElement(SelectionButton, { key: index, title: title, className: this.props.buttonClassName, disabled: this.props.disabled, selected: selected, content: value, onClick: () => { this.props.onButtonClick(index); } });\r\n        }));\r\n    }\r\n}\r\nclass SelectionButton extends React.Component {\r\n    render() {\r\n        const classes = \"selectionButton\" + (this.props.selected ? \" selected\" : \"\") + (this.props.className != null ? \" \" + this.props.className : \"\");\r\n        return React.createElement(\"button\", { className: classes, title: this.props.title, onClick: () => { this.props.onClick(); }, disabled: this.props.disabled }, this.props.content);\r\n    }\r\n}\r\nexport class ClickOutsideWatcher extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._childRef = React.createRef();\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleClick(e) {\r\n        if (this._childRef && e.target instanceof Element && !this._childRef.current.contains(e.target)) {\r\n            this.props.callback();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        document.addEventListener(\"pointerdown\", this.handleClick);\r\n    }\r\n    componentWillUnmount() {\r\n        document.removeEventListener(\"pointerdown\", this.handleClick);\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className, ref: this._childRef },\r\n            this.props.children,\r\n            \" \");\r\n    }\r\n}\r\n//# sourceMappingURL=BasicElements.js.map","import * as React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { ClickOutsideWatcher, FAButton } from \"./BasicElements\";\r\nconst modalRoot = document.getElementById(\"root\");\r\nexport class BackgroundModal extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this._modalRootChild = document.createElement(\"div\");\r\n        this._modalRootChild.className = \"fullScreen modal\";\r\n    }\r\n    componentDidMount() {\r\n        modalRoot.appendChild(this._modalRootChild);\r\n    }\r\n    componentWillUnmount() {\r\n        this._modalRootChild.className += \" hide\";\r\n        setTimeout(() => { modalRoot.removeChild(this._modalRootChild); }, 500);\r\n    }\r\n    render() {\r\n        if (this.props.outsideClick) {\r\n            return createPortal(React.createElement(ClickOutsideWatcher, { callback: this.props.outsideClick }, this.props.children), this._modalRootChild);\r\n        }\r\n        else {\r\n            return createPortal(this.props.children, this._modalRootChild);\r\n        }\r\n    }\r\n}\r\nfunction LoadingSpinner(props) {\r\n    return React.createElement(\"div\", { className: \"loadDetails\" },\r\n        React.createElement(\"p\", { className: \"loadTitle\" }, props.title),\r\n        React.createElement(\"div\", { className: \"sequencerSpinner\" },\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD5D\"),\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD5E\"),\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD5F\"),\r\n            React.createElement(\"span\", null, \"\\uD834\\uDD60\")));\r\n}\r\nexport function LoadingSpinnerModal(props) {\r\n    return React.createElement(BackgroundModal, null,\r\n        React.createElement(LoadingSpinner, Object.assign({}, props)));\r\n}\r\nfunction ErrorBox(props) {\r\n    return React.createElement(\"div\", null,\r\n        React.createElement(FAButton, { className: \"errorModalClose buttonAnim\", iconName: \"fa fa-close\", onClick: props.onClose }),\r\n        React.createElement(\"div\", { className: \"errorModal\" },\r\n            React.createElement(\"div\", { className: \"errorModalTitle\" },\r\n                React.createElement(\"i\", { className: \"fa fa-exclamation-circle\" })),\r\n            React.createElement(\"p\", { className: \"errorModalContent\" }, props.error)));\r\n}\r\nexport class ErrorModal extends React.Component {\r\n    render() {\r\n        return React.createElement(BackgroundModal, null,\r\n            React.createElement(ErrorBox, Object.assign({}, this.props)));\r\n    }\r\n}\r\nexport class LoadingErrorModal extends React.Component {\r\n    render() {\r\n        return React.createElement(BackgroundModal, { outsideClick: (!this.props.loading ? this.props.onClose : undefined) }, this.props.loading ? React.createElement(LoadingSpinner, { title: this.props.title }) : React.createElement(ErrorBox, { error: this.props.title, onClose: this.props.onClose }));\r\n    }\r\n}\r\n//# sourceMappingURL=Modal.js.map","import * as React from \"react\";\r\nimport { BoxSelect } from \"../SharedReact/BasicElements\";\r\nimport { ErrorModal } from \"../SharedReact/Modal\";\r\nexport class MetadataEditBox extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            numerator: this.props.numerator.toString(),\r\n            denominator: this.props.denominator,\r\n            bpm: this.props.bpm.toString(),\r\n            modalShown: false, errorString: \"\"\r\n        };\r\n        this.handleNumeratorChange = this.handleNumeratorChange.bind(this);\r\n        this.handleNumeratorBlur = this.handleNumeratorBlur.bind(this);\r\n        this.handleDenominatorChange = this.handleDenominatorChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n    handleNumeratorChange(value) {\r\n        this.setState({ numerator: value });\r\n    }\r\n    handleNumeratorBlur(value) {\r\n        let newNumerator = parseInt(value, 10);\r\n        if (newNumerator === NaN || newNumerator <= 0 || newNumerator > 32) {\r\n            this.setState({ numerator: this.props.numerator, modalShown: true, errorString: \"Invalid numerator value - please enter a number between 1 and 32.\" });\r\n        }\r\n        else {\r\n            this.setState({ numerator: newNumerator });\r\n        }\r\n    }\r\n    handleDenominatorChange(value) {\r\n        let intValue = parseInt(value, 10);\r\n        this.setState({ denominator: intValue });\r\n    }\r\n    handleBPMChange(value) {\r\n        this.setState({ bpm: value });\r\n    }\r\n    handleBPMBlur(value) {\r\n        let newBpm = parseInt(value, 10);\r\n        if (newBpm === NaN || newBpm <= 0 || newBpm > 300) {\r\n            this.setState({ bpm: this.props.bpm, modalShown: true, errorString: \"Invalid BPM value - please enter a number between 1 and 300.\" });\r\n        }\r\n        else {\r\n            this.setState({ bpm: newBpm });\r\n        }\r\n    }\r\n    handleSubmit() {\r\n        if (!this.state.modalShown) {\r\n            let newNumerator = parseInt(this.state.numerator);\r\n            let newBpm = parseInt(this.state.bpm);\r\n            this.props.onSubmit(newNumerator, this.state.denominator, newBpm);\r\n        }\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"metadataDiv\" },\r\n            React.createElement(\"div\", { className: \"boxSelectOverlayArrow top\" }),\r\n            React.createElement(\"div\", { className: \"metadataInnerDiv\" },\r\n                React.createElement(\"div\", { className: \"metadataProperty\" },\r\n                    React.createElement(\"p\", null, \"Time Signature:\"),\r\n                    React.createElement(TimeSignatureEditBox, { numerator: this.state.numerator, onNumeratorBlur: (value) => { this.handleNumeratorBlur(value); }, onNumeratorChange: this.handleNumeratorChange, denominator: this.state.denominator, onDenominatorChange: this.handleDenominatorChange })),\r\n                React.createElement(\"div\", { className: \"metadataProperty\" },\r\n                    React.createElement(\"p\", null, \"BPM:\"),\r\n                    React.createElement(\"input\", { className: \"metadataBPM\", type: \"text\", size: 2, value: this.state.bpm, pattern: \"[0-9]*\", onBlur: (event) => { this.handleBPMBlur(event.target.value); }, onChange: (event) => { this.handleBPMChange(event.target.value); } })),\r\n                React.createElement(\"button\", { className: \"metadataSubmit\", onClick: this.handleSubmit }, \"Submit\")),\r\n            this.state.modalShown && React.createElement(ErrorModal, { error: this.state.errorString, onClose: () => this.setState({ modalShown: false }) }));\r\n    }\r\n}\r\nclass TimeSignatureEditBox extends React.Component {\r\n    render() {\r\n        var containerStyle = { display: \"inline-block\" };\r\n        return React.createElement(\"div\", { className: \"metadataTimeSignature\", style: containerStyle },\r\n            React.createElement(\"input\", { className: \"metadataNumerator\", type: \"text\", value: this.props.numerator, onBlur: (event) => { this.props.onNumeratorBlur(event.target.value); }, onChange: (event) => { this.props.onNumeratorChange(event.target.value); } }),\r\n            React.createElement(\"div\", { className: \"metadataDivider\" }),\r\n            React.createElement(BoxSelect, { mainButtonClassName: \"metadataDenominator buttonAnim\", boxSelectTitle: this.props.denominator.toString(), options: TimeSignatureEditBox.timeSignatureStrings, selectedCallback: (value) => { this.props.onDenominatorChange(TimeSignatureEditBox.timeSignatureNumbers[value]); } }));\r\n    }\r\n}\r\nTimeSignatureEditBox.timeSignatureStrings = [\"2\", \"4\", \"8\", \"16\", \"32\"];\r\nTimeSignatureEditBox.timeSignatureNumbers = [2, 4, 8, 16, 32];\r\n//# sourceMappingURL=MetadataEditBox.js.map","import * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer\";\r\nimport { MetadataEvent } from \"../../Model/Notation/SongEvents\";\r\nimport { MouseClickType } from \"../Settings/Enums\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme\";\r\nimport { MetadataEditBox } from \"./MetadataEditBox\";\r\nimport { ClickOutsideWatcher } from \"../SharedReact/BasicElements\";\r\nexport class MetadataTimelineEvent extends MouseTypeContainer {\r\n    constructor(timeline) {\r\n        super();\r\n        this.timeline = timeline;\r\n        this._eventEdited = this._eventEdited.bind(this);\r\n        this._unmountEditDiv = this._unmountEditDiv.bind(this);\r\n        this._graphics = new PIXI.Graphics();\r\n        this._graphics.beginFill(UIColors.metadataEventColor).drawRect(0, 0, 4, UIPositioning.timelineHeaderHeight).endFill();\r\n        this.addChild(this._graphics);\r\n        this._editDiv = document.createElement(\"div\");\r\n        this._editDiv.style.position = \"absolute\";\r\n        this._editDiv.style.top = UIPositioning.timelineHeaderHeight.toString() + \"px\";\r\n        this._editDivMounted = false;\r\n    }\r\n    get active() {\r\n        return this._active;\r\n    }\r\n    set active(value) {\r\n        this._active = value;\r\n        if (value) {\r\n            this.alpha = 1;\r\n        }\r\n        else {\r\n            this.alpha = 0.4;\r\n        }\r\n    }\r\n    initialise(quarterNotePosition, active) {\r\n        this.active = active;\r\n        let closestEvent = this.timeline.metadata.events[this.timeline.metadata.events.binarySearch(quarterNotePosition, true)];\r\n        if (active) {\r\n            this.event = closestEvent;\r\n            this.alpha = 1;\r\n        }\r\n        else {\r\n            this.event = new MetadataEvent(quarterNotePosition, closestEvent.bpm, closestEvent.timeSignature);\r\n        }\r\n    }\r\n    pointerOverHandler(event) {\r\n        super.pointerOverHandler(event);\r\n        if (!this.active) {\r\n            this.alpha = 0.7;\r\n        }\r\n    }\r\n    pointerOutHandler(event) {\r\n        super.pointerOutHandler(event);\r\n        if (!this.active) {\r\n            this.alpha = 0.4;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            if (!this.active) {\r\n                this.active = true;\r\n                this.event = this.timeline.metadata.addMetadataEvent(this.event.startPosition, this.event.bpm, this.event.timeSignature);\r\n            }\r\n            this._editDiv.style.left = (this.getGlobalPosition().x + 2).toString() + \"px\";\r\n            this._mountEditDiv();\r\n        }\r\n        else if (this.active && this._mouseClickType == MouseClickType.RightClick && this.event.startPosition != 0) {\r\n            this.active = false;\r\n            this.timeline.metadata.removeMetadataEvent(this.event.startPosition);\r\n            this._unmountEditDiv();\r\n            let oldStartPosition = this.event.startPosition;\r\n            let closestEvent = this.timeline.metadata.events[this.timeline.metadata.events.binarySearch(this.event.startPosition, true)];\r\n            this.event = new MetadataEvent(this.event.startPosition, closestEvent.bpm, closestEvent.timeSignature);\r\n            this.timeline.regenerateAroundPosition(this.timeline.metadata.positionQuarterNoteToBars(oldStartPosition));\r\n        }\r\n    }\r\n    setVisible(value) {\r\n        this.visible = value;\r\n        if (!value) {\r\n            this._unmountEditDiv();\r\n        }\r\n    }\r\n    destroy() {\r\n        this._unmountEditDiv();\r\n        this._editDiv = null;\r\n        super.destroy();\r\n    }\r\n    _eventEdited(timeSigNumerator, timeSigDenominator, bpm) {\r\n        this.event = this.timeline.metadata.addMetadataEvent(this.event.startPosition, bpm, [timeSigNumerator, timeSigDenominator]);\r\n        this._unmountEditDiv();\r\n        this.timeline.regenerateAroundPosition(this.timeline.metadata.positionQuarterNoteToBars(this.event.startPosition));\r\n    }\r\n    _mountEditDiv() {\r\n        if (!this._editDivMounted) {\r\n            document.getElementById(\"applicationContainer\").appendChild(this._editDiv);\r\n            this._editDivMounted = true;\r\n            render(React.createElement(ClickOutsideWatcher, { callback: this._unmountEditDiv },\r\n                React.createElement(MetadataEditBox, { numerator: this.event.timeSignature[0], denominator: this.event.timeSignature[1], bpm: this.event.bpm, onSubmit: this._eventEdited })), this._editDiv);\r\n        }\r\n    }\r\n    _unmountEditDiv() {\r\n        if (this._editDivMounted) {\r\n            unmountComponentAtNode(this._editDiv);\r\n            document.getElementById(\"applicationContainer\").removeChild(this._editDiv);\r\n            this._editDivMounted = false;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=MetadataTimelineEvent.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIFonts, UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { MetadataTimelineEvent } from \"./MetadataTimelineEvent.js\";\r\nexport class BarHeader extends PIXI.Container {\r\n    constructor(timeline) {\r\n        super();\r\n        this._headerText = new PIXI.Text(\"\", UIFonts.trackFont);\r\n        this._headerText.x = 15;\r\n        this._headerText.y = 11;\r\n        this._headerGraphics = new PIXI.Graphics();\r\n        this._metadataTimelineEvent = new MetadataTimelineEvent(timeline);\r\n        this.addChild(this._headerGraphics, this._headerText, this._metadataTimelineEvent);\r\n    }\r\n    initialise(x, width, barNumber, metadataEventPosition, metadataEventActive) {\r\n        this.setX(x);\r\n        this._headerGraphics.clear();\r\n        this._headerGraphics.beginFill(UIColors.bgColor)\r\n            .drawRect(1, 0, width, UIPositioning.timelineHeaderHeight)\r\n            .endFill()\r\n            .beginFill(UIColors.fgColor)\r\n            .drawRect(1, 0, 2, UIPositioning.timelineHeaderHeight)\r\n            .drawRect(1, UIPositioning.timelineHeaderHeight, width, 2)\r\n            .endFill();\r\n        this._headerText.text = (barNumber + 1).toString();\r\n        this._metadataTimelineEvent.initialise(metadataEventPosition, metadataEventActive);\r\n        return this;\r\n    }\r\n    setX(value) {\r\n        this.x = value;\r\n    }\r\n    setVisible(value) {\r\n        this.visible = value;\r\n        this._metadataTimelineEvent.setVisible(value);\r\n    }\r\n}\r\n//# sourceMappingURL=ScrollableBarHeader.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIColors } from \"../Settings/UITheme.js\";\r\nimport { BarHeader } from \"./ScrollableBarHeader.js\";\r\nexport class ScrollableBar extends PIXI.Container {\r\n    constructor(headerContainer, timeline) {\r\n        super();\r\n        this._graphics = new PIXI.Graphics();\r\n        this.addChild(this._graphics);\r\n        this._header = new BarHeader(timeline);\r\n        headerContainer.addChild(this._header);\r\n    }\r\n    get leftBound() {\r\n        return this.x;\r\n    }\r\n    get rightBound() {\r\n        return this.x + this.width;\r\n    }\r\n    get barNumber() {\r\n        return this._barNumber;\r\n    }\r\n    get numberOfBeats() {\r\n        return this._numberOfBeats;\r\n    }\r\n    get verticalScrollPosition() {\r\n        return this._verticalScrollPosition;\r\n    }\r\n    set verticalScrollPosition(value) {\r\n        this._verticalScrollPosition = value;\r\n        this._graphics.y = this._verticalScrollPosition;\r\n    }\r\n    resize(height) {\r\n        this._graphics.clear();\r\n        this._graphics.beginFill(UIColors.fgColor);\r\n        this._graphics.drawRect(1, 0, 2, height);\r\n        for (let i = 1; i < this._numberOfBeats + 1; i++) {\r\n            this._graphics.drawRect(this._beatWidth * i, 0, 1, height);\r\n        }\r\n        this._graphics.endFill();\r\n    }\r\n    setX(value) {\r\n        this.x = value;\r\n        this._header.setX(value);\r\n    }\r\n    initialise(x, height, barNumber, numberOfBeats, beatWidth, metadataEventPosition, metadataEventActive, leftSide = true) {\r\n        if (leftSide) {\r\n            this.x = x;\r\n        }\r\n        else {\r\n            this.x = x - beatWidth * numberOfBeats;\r\n        }\r\n        this._barNumber = barNumber;\r\n        this._numberOfBeats = numberOfBeats;\r\n        this._beatWidth = beatWidth;\r\n        this.resize(height);\r\n        this._header.initialise(this.x, numberOfBeats * this._beatWidth, this.barNumber, metadataEventPosition, metadataEventActive);\r\n        return this;\r\n    }\r\n    setVisible(value) {\r\n        this.visible = value;\r\n        this._header.visible = value;\r\n    }\r\n}\r\n//# sourceMappingURL=ScrollableBar.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIColors } from \"../Settings/UITheme.js\";\r\nexport class TimelineMarker extends PIXI.Graphics {\r\n    constructor() {\r\n        super();\r\n    }\r\n    redraw(x, y, width, height) {\r\n        this.clear();\r\n        this.beginFill(UIColors.timelineMarkerColor)\r\n            .drawPolygon([new PIXI.Point(x, y), new PIXI.Point(x - 4, y - 4), new PIXI.Point(x + width + 5, y - 4), new PIXI.Point(x + width, y)])\r\n            .drawRect(x, y, width, height)\r\n            .endFill();\r\n    }\r\n}\r\n//# sourceMappingURL=TimelineMarker.js.map","import { SimpleEvent } from \"../../HelperModules/SimpleEvent\";\r\nimport { EventSnapType, NoteLength } from \"./Enums\";\r\nexport class EditType {\r\n    constructor() {\r\n        this.snapType = EventSnapType.Beat;\r\n        this.noteLength = NoteLength.Quarter;\r\n        this._noteLengthDisabled = true;\r\n        this.noteLengthDisabledChange = new SimpleEvent();\r\n        this.markerCenteredChanged = new SimpleEvent();\r\n    }\r\n    get noteLengthDisabled() {\r\n        return this._noteLengthDisabled;\r\n    }\r\n    set noteLengthDisabled(value) {\r\n        this._noteLengthDisabled = value;\r\n        this.noteLengthDisabledChange.emit(value);\r\n    }\r\n    get markerCentered() {\r\n        return this._markerCentered;\r\n    }\r\n    set markerCentered(value) {\r\n        this._markerCentered = value;\r\n        this.markerCenteredChanged.emit(value);\r\n    }\r\n}\r\nexport const editType = new EditType();\r\n//# sourceMappingURL=EditType.js.map","import * as PIXI from \"pixi.js\";\r\nimport { ObjectPool } from \"../../HelperModules/ObjectPool.js\";\r\nimport { ScrollableBar } from \"./ScrollableBar.js\";\r\nimport { MouseClickType, TimelineMode, EventSnapType } from \"../Settings/Enums.js\";\r\nimport { TimelineMarker } from \"./TimelineMarker.js\";\r\nimport { UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nimport { editType } from \"../Settings/EditType.js\";\r\nexport class ScrollableTimeline extends MouseTypeContainer {\r\n    constructor(startX, endX, startY, endY, songManager) {\r\n        super();\r\n        this.timelineMode = TimelineMode.Edit;\r\n        this._zoomScale = 1;\r\n        this._verticalScrollPosition = 0;\r\n        this._mouseClickType = MouseClickType.None;\r\n        this._selected = [];\r\n        this.startX = startX;\r\n        this.startY = startY;\r\n        this.endX = endX;\r\n        this.endY = endY;\r\n        this.songManager = songManager;\r\n        this._onScreen = true;\r\n        this.timelineViewChange = new SimpleEvent();\r\n        this._scrollObjects = [];\r\n        this._barPool = new ObjectPool();\r\n        this._maskGraphics = new PIXI.Graphics();\r\n        this.mask = this._maskGraphics;\r\n        this._maskGraphics.beginFill(0xFFFFFF).drawRect(this.startX, this.startY, this.endX, this.endY).endFill();\r\n        this._interactivityRect = new PIXI.Graphics();\r\n        this.addChild(this._interactivityRect);\r\n        this.resizeInteractiveArea(endX, endY);\r\n        this._barContainer = new PIXI.Container();\r\n        this._headerContainer = new PIXI.Container();\r\n        this._metadataEventContainer = new PIXI.Container();\r\n        this._eventContainer = new PIXI.Container();\r\n        this._timelineMarker = new TimelineMarker();\r\n        this.addChild(this._barContainer, this._eventContainer, this._headerContainer, this._metadataEventContainer, this._timelineMarker);\r\n        this._timelineMarkerAnim = this._timelineMarkerAnim.bind(this);\r\n        this._playingStateChanged = this._playingStateChanged.bind(this);\r\n        this._repositionTimelineMarker = this._repositionTimelineMarker.bind(this);\r\n        this.songManager.playingChangedEvent.addListener(this._playingStateChanged);\r\n    }\r\n    get dragType() {\r\n        return editType.snapType;\r\n    }\r\n    get metadata() {\r\n        return this.songManager.metadata;\r\n    }\r\n    get beatWidth() {\r\n        return ScrollableTimeline.beatWidth * this._zoomScale;\r\n    }\r\n    resize(width, height) {\r\n        this.resizeInteractiveArea(width, height);\r\n        this._maskGraphics.clear().beginFill(0xFFFFFF).drawRect(this.startX, this.startY, width, height).endFill();\r\n        this.endX = Math.max(width, this.startX + 1);\r\n        this.endY = Math.max(height, this.startY + 1);\r\n        let barHeight = Math.max(this.contentHeight, this.endY);\r\n        for (let i = 0; i < this._barContainer.children.length; i++) {\r\n            let bar = this._barContainer.children[i];\r\n            bar.resize(barHeight);\r\n        }\r\n        let rightSideOffset = this.x + this._scrollObjects[this._scrollObjects.length - 1].rightBound - this.endX;\r\n        while (rightSideOffset < 100) {\r\n            let lastBar = this._scrollObjects[this._scrollObjects.length - 1];\r\n            let bar = this._initialiseScrollableBar(lastBar.rightBound, lastBar.barNumber + 1, true);\r\n            this._scrollObjects.push(bar);\r\n            rightSideOffset = this.x + this._scrollObjects[this._scrollObjects.length - 1].rightBound - this.endX;\r\n        }\r\n        while (rightSideOffset > 800 && this._scrollObjects.length > 1) {\r\n            let bar = this._scrollObjects.pop();\r\n            this._returnScrollableBar(bar);\r\n            rightSideOffset = this.x + this._scrollObjects[this._scrollObjects.length - 1].rightBound - this.endX;\r\n        }\r\n    }\r\n    resizeInteractiveArea(width, height) {\r\n        this._interactivityRect.clear();\r\n        this._interactivityRect.beginFill(0x000000, 1.0);\r\n        this._interactivityRect.drawRect(0, 0, width, height);\r\n        this._interactivityRect.endFill();\r\n        this._interactivityRect.alpha = 0.0;\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        if (this._mouseClickType == MouseClickType.None) {\r\n            return;\r\n        }\r\n        else if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.timelineViewChange.emit();\r\n        }\r\n        this._startPointerPosition = event.data.getLocalPosition(this.parent);\r\n        this._startXPosition = this.x;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.RightClick && this.timelineMode == TimelineMode.Edit) {\r\n        }\r\n        else if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            let moveDelta = event.data.getLocalPosition(this.parent).x - this._startPointerPosition.x;\r\n            this.x = this._startXPosition + moveDelta;\r\n            if (this._scrollObjects[0].barNumber === 0 && this.x + this._scrollObjects[0].leftBound > this.startX) {\r\n                this.x = -this._scrollObjects[0].leftBound + this.startX;\r\n            }\r\n            let anchor = this.x - this.endX;\r\n            let rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].rightBound;\r\n            while (rightSideOffset < 100) {\r\n                let lastBar = this._scrollObjects[this._scrollObjects.length - 1];\r\n                let bar = this._initialiseScrollableBar(lastBar.rightBound, lastBar.barNumber + 1, true);\r\n                this._scrollObjects.push(bar);\r\n                rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].rightBound;\r\n            }\r\n            rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].leftBound;\r\n            while (rightSideOffset > 800) {\r\n                let bar = this._scrollObjects.pop();\r\n                this._returnScrollableBar(bar);\r\n                rightSideOffset = anchor + this._scrollObjects[this._scrollObjects.length - 1].leftBound;\r\n            }\r\n            anchor = this.startX - this.x;\r\n            let leftSideOffset = anchor - this._scrollObjects[0].leftBound;\r\n            while (leftSideOffset < 100 && this._scrollObjects[0].barNumber != 0) {\r\n                let firstBar = this._scrollObjects[0];\r\n                let bar = this._initialiseScrollableBar(firstBar.leftBound, firstBar.barNumber - 1, false);\r\n                this._scrollObjects.splice(0, 0, bar);\r\n                leftSideOffset = anchor - this._scrollObjects[0].leftBound;\r\n            }\r\n            leftSideOffset = anchor - this._scrollObjects[0].rightBound;\r\n            while (leftSideOffset > 800) {\r\n                let bar = this._scrollObjects.splice(0, 1)[0];\r\n                this._returnScrollableBar(bar);\r\n                leftSideOffset = anchor - this._scrollObjects[0].rightBound;\r\n            }\r\n        }\r\n    }\r\n    pointerUpHandler(event) {\r\n        super.pointerUpHandler(event);\r\n        this._startXPosition = undefined;\r\n        this._startPointerPosition = undefined;\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.x = this._startXPosition;\r\n            if ((this.timelineMode == TimelineMode.Playback || this._startPointerPosition.y < UIPositioning.timelineHeaderHeight) && this._startPointerPosition.x > this.startX) {\r\n                let [barPosition, beatPosition, numberOfBeats] = this._getBarFromStageCoordinates(this._startPointerPosition.x);\r\n                barPosition += beatPosition / numberOfBeats;\r\n                this.songManager.quarterNotePosition = this.metadata.positionBarsToQuarterNote(barPosition);\r\n            }\r\n        }\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this._offsetChildren(-this.x);\r\n            this.x = 0;\r\n            if (editType.markerCentered) {\r\n                editType.markerCentered = false;\r\n            }\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        let stageX = event.clientX - canvasX;\r\n        let stageY = event.clientY - canvasY;\r\n        if (stageX < this.startX || stageX > this.endX || stageY < 0 || stageY > this.endY) {\r\n            return;\r\n        }\r\n        this.timelineViewChange.emit();\r\n        let [barPosition, beatPosition, numBeats] = this._getBarFromStageCoordinates(stageX);\r\n        barPosition += beatPosition / numBeats;\r\n        this._zoomScale = Math.max(0.5, Math.min(5.0, this._zoomScale - event.deltaY / 1000));\r\n        this._regenerateTimeline(this._scrollObjects[0].barNumber, Math.floor(barPosition));\r\n        let offset = this._getStageCoordinatesFromBar(barPosition) - stageX;\r\n        if (this._scrollObjects[0].barNumber === 0 && this._scrollObjects[0].leftBound - offset > this.startX) {\r\n            offset = this.startX - this._scrollObjects[0].leftBound;\r\n        }\r\n        this._offsetChildren(offset);\r\n    }\r\n    updateVerticalScroll(value) {\r\n        this._scrollObjects.forEach(bar => {\r\n            bar.verticalScrollPosition = value;\r\n        });\r\n        this._eventContainer.y = value;\r\n        this._verticalScrollPosition = value;\r\n    }\r\n    regenerateAroundPosition(barPosition) {\r\n        let startBarPosition = this._getStageCoordinatesFromBar(barPosition);\r\n        if (startBarPosition === -1) {\r\n            this._regenerateTimeline(Math.floor(barPosition));\r\n        }\r\n        else {\r\n            this._regenerateTimeline(this._scrollObjects[0].barNumber, Math.floor(barPosition));\r\n            let offset = this._getStageCoordinatesFromBar(barPosition) - startBarPosition;\r\n            if (this._scrollObjects[0].barNumber === 0 && this._scrollObjects[0].leftBound - offset > this.startX) {\r\n                offset = this.startX - this._scrollObjects[0].leftBound;\r\n            }\r\n            this._offsetChildren(offset);\r\n        }\r\n    }\r\n    addedHandler() {\r\n        this._onScreen = true;\r\n        this.regenerateAroundPosition(this._scrollObjects[0].barNumber);\r\n        this._playingStateChanged(this.songManager.playing);\r\n    }\r\n    removedHandler() {\r\n        this._onScreen = false;\r\n        this._playingStateChanged(false);\r\n        this._mouseClickType = MouseClickType.None;\r\n    }\r\n    destroy() {\r\n        this.songManager.playingChangedEvent.removeListener(this._playingStateChanged);\r\n        super.destroy({ children: true });\r\n    }\r\n    _getBarFromStageCoordinates(stageX) {\r\n        for (let i = 0; i < this._scrollObjects.length; i++) {\r\n            if (this._scrollObjects[i].leftBound <= stageX && this._scrollObjects[i].rightBound > stageX) {\r\n                return [this._scrollObjects[i].barNumber, ((stageX - this._scrollObjects[i].leftBound) / this.beatWidth), this._scrollObjects[i].numberOfBeats];\r\n            }\r\n        }\r\n    }\r\n    _getStageCoordinatesFromBar(barNumber) {\r\n        for (let i = 0; i < this._scrollObjects.length; i++) {\r\n            if (this._scrollObjects[i].barNumber === Math.floor(barNumber)) {\r\n                return this._scrollObjects[i].leftBound + ((barNumber % 1) * this._scrollObjects[i].numberOfBeats * this.beatWidth);\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    _offsetChildren(pixelOffset) {\r\n        this._scrollObjects.forEach(child => {\r\n            child.setX(child.x - pixelOffset);\r\n        });\r\n        for (let i = 0; i < this._eventContainer.children.length; i++) {\r\n            this._eventContainer.children[i].x -= pixelOffset;\r\n        }\r\n        for (let i = 0; i < this._metadataEventContainer.children.length; i++) {\r\n            this._metadataEventContainer.children[i].x -= pixelOffset;\r\n        }\r\n        this._checkBarsFillScreen();\r\n        this._repositionTimelineMarker(this.songManager.quarterNotePosition);\r\n    }\r\n    _regenerateTimeline(fromBar, toBar) {\r\n        let currentBar = fromBar;\r\n        while (this._scrollObjects.length > 0) {\r\n            this._returnScrollableBar(this._scrollObjects[0]);\r\n            this._scrollObjects.splice(0, 1);\r\n        }\r\n        let currentXPosition = this.startX;\r\n        let generatedABar = false;\r\n        while (currentXPosition < this.endX || !generatedABar) {\r\n            generatedABar = true;\r\n            let bar = this._initialiseScrollableBar(currentXPosition, currentBar, true);\r\n            this._scrollObjects.push(bar);\r\n            currentBar++;\r\n            currentXPosition = bar.rightBound;\r\n        }\r\n        if (toBar != undefined) {\r\n            while (currentBar <= toBar) {\r\n                let bar = this._initialiseScrollableBar(currentXPosition, currentBar, true);\r\n                this._scrollObjects.push(bar);\r\n                currentBar++;\r\n                currentXPosition = bar.rightBound;\r\n            }\r\n        }\r\n        if (this._eventContainer.children.length == 0) {\r\n            this._initialiseTrackTimelineEvents();\r\n        }\r\n        else {\r\n            for (let i = 0; i < this._eventContainer.children.length; i++) {\r\n                let event = this._eventContainer.children[i];\r\n                event.reinitialise();\r\n            }\r\n        }\r\n        this._redrawTimelineMarker();\r\n    }\r\n    _checkBarsFillScreen() {\r\n        while (this._scrollObjects[0].leftBound > this.startX && this._scrollObjects[0].barNumber != 0) {\r\n            let bar = this._initialiseScrollableBar(this._scrollObjects[0].leftBound, this._scrollObjects[0].barNumber - 1, false);\r\n            this._scrollObjects.splice(0, 0, bar);\r\n        }\r\n        while (this._scrollObjects[this._scrollObjects.length - 1].rightBound < this.endX) {\r\n            let bar = this._initialiseScrollableBar(this._scrollObjects[this._scrollObjects.length - 1].rightBound, this._scrollObjects[this._scrollObjects.length - 1].barNumber + 1, true);\r\n            this._scrollObjects.push(bar);\r\n        }\r\n    }\r\n    _scrollToPosition(barPosition) {\r\n        let barNumber = Math.floor(barPosition);\r\n        this._regenerateTimeline(barNumber);\r\n        let scrollAmount = this.metadata.getTimeSignature(barPosition)[0] * (barPosition % 1) * this.beatWidth;\r\n        this._offsetChildren(scrollAmount);\r\n    }\r\n    _initialiseScrollableBar(xPosition, barNumber, leftSide) {\r\n        let bar = null;\r\n        if (this._barPool.objectCount > 0) {\r\n            bar = this._barPool.getObject();\r\n            bar.setVisible(true);\r\n        }\r\n        else {\r\n            bar = new ScrollableBar(this._headerContainer, this);\r\n            this._barContainer.addChild(bar);\r\n        }\r\n        let quarterNotePosition = this.metadata.positionBarsToQuarterNote(barNumber);\r\n        let numberOfBeats = this.metadata.getTimeSignature(quarterNotePosition)[0];\r\n        let metadataEventActive = !(this.metadata.events.binarySearch(quarterNotePosition) == -1);\r\n        bar.initialise(xPosition, Math.max(this.contentHeight, this.endY), barNumber, numberOfBeats, this.beatWidth, quarterNotePosition, metadataEventActive, leftSide);\r\n        bar.verticalScrollPosition = this._verticalScrollPosition;\r\n        return bar;\r\n    }\r\n    _returnScrollableBar(instance) {\r\n        instance.setVisible(false);\r\n        this._barPool.returnObject(instance);\r\n    }\r\n    snapCoordinateToDragType(value) {\r\n        return value - this.getPixelOffsetFromDragType(value);\r\n    }\r\n    getPixelOffsetFromDragType(value) {\r\n        switch (this.dragType) {\r\n            case EventSnapType.Beat:\r\n                return (value % this.beatWidth);\r\n            case EventSnapType.HalfBeat:\r\n                return (value % (this.beatWidth / 2));\r\n            case EventSnapType.QuarterBeat:\r\n                return (value % (this.beatWidth / 4));\r\n            case EventSnapType.EighthBeat:\r\n                return (value % (this.beatWidth / 8));\r\n            case EventSnapType.None:\r\n                return 0;\r\n        }\r\n    }\r\n    snapBeatToDragType(value) {\r\n        switch (this.dragType) {\r\n            case EventSnapType.None:\r\n                break;\r\n            case EventSnapType.Beat:\r\n                value = value - (value % 1);\r\n                break;\r\n            case EventSnapType.HalfBeat:\r\n                value *= 2;\r\n                value = (value - (value % 1)) / 2;\r\n                break;\r\n            case EventSnapType.QuarterBeat:\r\n                value *= 4;\r\n                value = (value - (value % 1)) / 4;\r\n                break;\r\n            case EventSnapType.EighthBeat:\r\n                value *= 8;\r\n                value = (value - (value % 1)) / 8;\r\n                break;\r\n        }\r\n        return value;\r\n    }\r\n    getTimelineEventXWidth(startPosition, endPosition) {\r\n        let x = this.getTimelineEventX(startPosition);\r\n        let width = (this.metadata.positionQuarterNoteToBeats(endPosition) - this.metadata.positionQuarterNoteToBeats(startPosition)) * this.beatWidth;\r\n        return [x, width];\r\n    }\r\n    getTimelineEventX(position) {\r\n        return (this.metadata.positionQuarterNoteToBeats(position) - this.metadata.positionQuarterNoteToBeats(this.metadata.positionBarsToQuarterNote(this._scrollObjects[0].barNumber))) * this.beatWidth + this._scrollObjects[0].leftBound;\r\n    }\r\n    _playingStateChanged(value) {\r\n        if (value == true && this._onScreen) {\r\n            this.timelineMode = TimelineMode.Playback;\r\n            requestAnimationFrame(this._timelineMarkerAnim);\r\n        }\r\n        else {\r\n            this.timelineMode = TimelineMode.Edit;\r\n            if (!this.songManager.quarterNotePositionChangedEvent.hasListener(this._repositionTimelineMarker)) {\r\n                this.songManager.quarterNotePositionChangedEvent.addListener(this._repositionTimelineMarker);\r\n            }\r\n        }\r\n    }\r\n    _timelineMarkerAnim() {\r\n        this._repositionTimelineMarker(this.songManager.quarterNotePosition);\r\n        if (this.songManager.playing == true) {\r\n            try {\r\n                if (editType.markerCentered && (this._timelineMarker.x > this.endX || this._timelineMarker.x < this.startX)) {\r\n                    let barPosition = this.metadata.positionQuarterNoteToBars(this.songManager.quarterNotePosition);\r\n                    this._scrollToPosition(barPosition);\r\n                }\r\n                requestAnimationFrame(this._timelineMarkerAnim);\r\n            }\r\n            catch (e) {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    _redrawTimelineMarker() {\r\n        this._timelineMarker.redraw(0, UIPositioning.timelineHeaderHeight, 2, this.endY);\r\n        this._repositionTimelineMarker(this.songManager.quarterNotePosition);\r\n    }\r\n    _repositionTimelineMarker(position) {\r\n        if (this._onScreen) {\r\n            this._timelineMarker.x = Math.round(this.getTimelineEventX(position));\r\n        }\r\n    }\r\n}\r\nScrollableTimeline.beatWidth = 50;\r\n//# sourceMappingURL=ScrollableTimeline.js.map","import * as PIXI from \"pixi.js\";\r\nimport { MouseTypeContainer } from \"../Shared/InteractiveContainer.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nexport class NoteGroupMarker extends PIXI.Container {\r\n    constructor(timeline) {\r\n        super();\r\n        this.timeline = timeline;\r\n        this.y = UIPositioning.timelineHeaderHeight - NoteGroupMarker.triangleSize;\r\n        this._leftHandle = new NoteGroupHandle();\r\n        this._rightHandle = new NoteGroupHandle();\r\n        this._graphics = new PIXI.Graphics();\r\n        this.addChild(this._graphics, this._leftHandle, this._rightHandle);\r\n    }\r\n    reinitialise(noteGroup, y) {\r\n        this.noteGroup = noteGroup;\r\n        if (y != undefined) {\r\n            this.y = y;\r\n        }\r\n        let [x, width] = this.timeline.getTimelineEventXWidth(this.noteGroup[0], this.noteGroup[1]);\r\n        this.x = x + 1;\r\n        this.redraw(width);\r\n    }\r\n    redraw(width) {\r\n        let triangleSize = NoteGroupMarker.triangleSize;\r\n        this._graphics.clear()\r\n            .beginFill(UIColors.trackEventColor)\r\n            .drawRect(0, triangleSize - NoteGroupMarker.lineHeight, width, NoteGroupMarker.lineHeight)\r\n            .moveTo(0, 0).lineTo(0, triangleSize).lineTo(triangleSize, triangleSize).lineTo(0, 0)\r\n            .moveTo(width, 0).lineTo(width, triangleSize).lineTo(width - triangleSize, triangleSize).lineTo(width, 0)\r\n            .endFill();\r\n    }\r\n}\r\nNoteGroupMarker.triangleSize = 10;\r\nNoteGroupMarker.lineHeight = 4;\r\nclass NoteGroupHandle extends MouseTypeContainer {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\n//# sourceMappingURL=NoteGroupMarker.js.map","export class MouseState {\r\n    constructor() {\r\n        this.buttons = 0;\r\n        document.addEventListener(\"pointerdown\", this._pointerDownHandler.bind(this));\r\n        document.addEventListener(\"pointerup\", this._pointerUpHandler.bind(this));\r\n    }\r\n    _pointerDownHandler() {\r\n        this.buttons = 1;\r\n    }\r\n    _pointerUpHandler() {\r\n        this.buttons = 0;\r\n    }\r\n}\r\nexport const mouseState = new MouseState();\r\n//# sourceMappingURL=MouseState.js.map","import * as PIXI from \"pixi.js\";\r\nimport { ScrollableTimeline } from \"../Shared/ScrollableTimeline.js\";\r\nimport { TimelineMode, MouseClickType, NoteLength } from \"../Settings/Enums.js\";\r\nimport { NoteTimelineEvent } from \"../Shared/TrackTimelineEvent.js\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { NoteGroupMarker } from \"./NoteGroupMarker.js\";\r\nimport { ObjectPool } from \"../../HelperModules/ObjectPool.js\";\r\nimport { editType } from \"../Settings/EditType.js\";\r\nimport { mouseState } from \"../Shared/MouseState.js\";\r\nexport class SequencerTimeline extends ScrollableTimeline {\r\n    constructor(startX, endX, endY, contentHeight, songManager, track, startFrom) {\r\n        super(startX, endX, 0, endY, songManager);\r\n        this.timelineMode = TimelineMode.Edit;\r\n        this.track = track;\r\n        this._contentHeight = contentHeight;\r\n        this._initialiseNoteGroups = this._initialiseNoteGroups.bind(this);\r\n        this.track.noteGroupsChanged.addListener(this._initialiseNoteGroups);\r\n        this._noteGroupContainer = new PIXI.Container();\r\n        this._noteGroupPool = new ObjectPool();\r\n        this._newEventGraphics = new PIXI.Graphics();\r\n        this.addChildAt(this._newEventGraphics, this.children.length - 3);\r\n        this.addChildAt(this._noteGroupContainer, this.children.length - 1);\r\n        this._regenerateTimeline(startFrom);\r\n    }\r\n    get noteLength() {\r\n        return editType.noteLength;\r\n    }\r\n    get contentHeight() {\r\n        return this._contentHeight;\r\n    }\r\n    get offsetContentHeight() {\r\n        return this.contentHeight - SequencerTimeline.noteHeight;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        this._newEventGraphics.visible = false;\r\n        super.pointerMoveHandler(event);\r\n        if (this.timelineMode == TimelineMode.Edit && mouseState.buttons === 0) {\r\n            this._newEventData = undefined;\r\n            let mousePos = event.data.getLocalPosition(this.parent);\r\n            if (mousePos.x < this.startX || mousePos.x > this.endX || mousePos.y < (this.startY + UIPositioning.timelineHeaderHeight) || mousePos.y > this.endY) {\r\n                return;\r\n            }\r\n            let y = mousePos.y - this._verticalScrollPosition;\r\n            y = y - (y % 20);\r\n            let noteString = NoteHelper.noteNumberToNoteString(Math.max(0, (this.offsetContentHeight - y) / SequencerTimeline.noteHeight));\r\n            let [barPosition, beatPosition, numBeats] = this._getBarFromStageCoordinates(mousePos.x);\r\n            beatPosition = this.snapBeatToDragType(beatPosition);\r\n            barPosition += beatPosition / numBeats;\r\n            let startPosition = this.metadata.positionBarsToQuarterNote(barPosition);\r\n            let length = SequencerTimeline.noteLengthDict[this.noteLength];\r\n            let noteData = { pitchString: noteString, startPosition: startPosition, duration: length };\r\n            let events = this.track.track.timeline.getEventsBetweenTimes(startPosition, startPosition + length);\r\n            for (let i = 0; i < events.length; i++) {\r\n                if (events[i].pitchString === noteData.pitchString) {\r\n                    return;\r\n                }\r\n            }\r\n            let x = this._getStageCoordinatesFromBar(barPosition);\r\n            y += this._verticalScrollPosition;\r\n            let width = (this.metadata.positionQuarterNoteToBeats(startPosition + length) - this.metadata.positionQuarterNoteToBeats(startPosition)) * this.beatWidth;\r\n            this._newEventGraphics.clear()\r\n                .beginFill(UIColors.trackEventColor)\r\n                .drawRect(x, y + 1, width, SequencerTimeline.noteHeight - 1)\r\n                .endFill()\r\n                .beginHole()\r\n                .drawRect(x + 2, y + 3, width - 4, SequencerTimeline.noteHeight - 5)\r\n                .endHole();\r\n            this._newEventData = noteData;\r\n            this._newEventGraphics.visible = true;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        super.pointerUpClickHandler(event);\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.timelineMode == TimelineMode.Edit && this._newEventData != undefined) {\r\n            let noteEvent = this.track.addEvent(this._newEventData.startPosition, this._newEventData.pitchString, this._newEventData.duration);\r\n            this._initialiseNoteGroups();\r\n            this._initialiseNote(noteEvent);\r\n            this._newEventData = undefined;\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        this._newEventGraphics.visible = false;\r\n        super.mouseWheelHandler(event, canvasX, canvasY);\r\n    }\r\n    addedHandler() {\r\n        super.addedHandler();\r\n        editType.noteLengthDisabled = false;\r\n    }\r\n    destroy() {\r\n        this.track.noteGroupsChanged.removeListener(this._initialiseNoteGroups);\r\n        super.destroy();\r\n    }\r\n    _regenerateTimeline(fromBar, toBar) {\r\n        super._regenerateTimeline(fromBar, toBar);\r\n        this._initialiseNoteGroups();\r\n    }\r\n    _offsetChildren(pixelOffset) {\r\n        super._offsetChildren(pixelOffset);\r\n        this._noteGroupContainer.children.forEach(child => {\r\n            child.x -= pixelOffset;\r\n        });\r\n    }\r\n    _initialiseTrackTimelineEvents() {\r\n        let notes = this.track.track.timeline.events;\r\n        notes.forEach(note => {\r\n            this._initialiseNote(note);\r\n        });\r\n    }\r\n    _initialiseNote(note) {\r\n        let y = this.offsetContentHeight - NoteHelper.noteStringToNoteNumber(note.pitchString) * SequencerTimeline.noteHeight;\r\n        let timelineEvent = new NoteTimelineEvent(this, this.track, note, y, SequencerTimeline.noteHeight - 1);\r\n        timelineEvent.borderHeight = 1;\r\n        this._eventContainer.addChild(timelineEvent);\r\n        return timelineEvent;\r\n    }\r\n    _initialiseNoteGroups() {\r\n        this._noteGroupContainer.children.forEach(noteGroupMarker => {\r\n            noteGroupMarker.visible = false;\r\n            this._noteGroupPool.returnObject(noteGroupMarker);\r\n        });\r\n        this.track.noteGroups.forEach(noteGroup => {\r\n            let marker = this._noteGroupPool.getObject();\r\n            if (marker == null) {\r\n                marker = new NoteGroupMarker(this);\r\n                this._noteGroupContainer.addChild(marker);\r\n            }\r\n            marker.visible = true;\r\n            marker.reinitialise(noteGroup);\r\n        });\r\n    }\r\n}\r\nSequencerTimeline.noteHeight = 20;\r\nSequencerTimeline.noteLengthDict = {\r\n    [NoteLength.Whole]: 4,\r\n    [NoteLength.Half]: 2,\r\n    [NoteLength.Quarter]: 1,\r\n    [NoteLength.Eighth]: 0.5,\r\n    [NoteLength.Sixteenth]: 0.25,\r\n    [NoteLength.ThirtySecond]: 0.125\r\n};\r\n//# sourceMappingURL=SequencerTimeline.js.map","import * as PIXI from \"pixi.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper.js\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer.js\";\r\nimport { MouseClickType, TimelineMode } from \"../Settings/Enums.js\";\r\nimport { SequencerTimeline } from \"../Sequencer/SequencerTimeline.js\";\r\nexport class TrackTimelineEvent extends MouseTypeContainer {\r\n    constructor(timeline, track, x, width, y, height) {\r\n        super();\r\n        this.borderLeft = 1;\r\n        this.borderRight = 2;\r\n        this.borderHeight = 2;\r\n        this.paddingHeight = 2;\r\n        this.selectedBorderWidth = 3;\r\n        this._hovered = false;\r\n        this._opacity = 1;\r\n        this._hoveredColor = UIColors.trackEventHoveredColor;\r\n        this.timeline = timeline;\r\n        this.track = track;\r\n        this._contentGraphics = new PIXI.Graphics();\r\n        this._selectedGraphics = new PIXI.Graphics();\r\n        this._selectedGraphics.zIndex = 1;\r\n        this.addChild(this._contentGraphics, this._selectedGraphics);\r\n        this.x = x + this.borderLeft;\r\n        this.assignedWidth = Math.max(width - this.borderRight, 5);\r\n        this.assignedHeight = height - this.borderHeight;\r\n        this.y = y + this.borderHeight;\r\n    }\r\n    reinitialise(y, height) {\r\n        let [x, width] = this.timeline.getTimelineEventXWidth(this.eventStartPosition, this.eventStartPosition + this.eventDuration);\r\n        this.x = x + this.borderLeft;\r\n        this.assignedWidth = Math.max(width - this.borderRight, 5);\r\n        if (y != undefined) {\r\n            this.y = y;\r\n        }\r\n        if (height != undefined) {\r\n            this.assignedHeight = height;\r\n        }\r\n        this.redraw();\r\n    }\r\n    get leftBound() {\r\n        return this.x;\r\n    }\r\n    get rightBound() {\r\n        return this.x + this.width;\r\n    }\r\n    get hovered() {\r\n        return this._hovered;\r\n    }\r\n    set hovered(value) {\r\n        this._hovered = value;\r\n        this.redrawSelected();\r\n    }\r\n    get hoveredColor() {\r\n        return this._hoveredColor;\r\n    }\r\n    set hoveredColor(value) {\r\n        if (value == null) {\r\n            value = UIColors.trackEventHoveredColor;\r\n        }\r\n        this._hoveredColor = value;\r\n        this.redrawSelected();\r\n    }\r\n    get opacity() {\r\n        return this._opacity;\r\n    }\r\n    set opacity(value) {\r\n        if (value < 0 || value > 1) {\r\n            throw new RangeError(\"Opacity must be between 0 and 1.\");\r\n        }\r\n        this._opacity = value;\r\n        this.redraw();\r\n    }\r\n    destroy() {\r\n        super.destroy({ children: true });\r\n    }\r\n    redraw() {\r\n        this._contentGraphics.clear();\r\n        this._contentGraphics.beginFill(UIColors.trackEventColor, this._opacity)\r\n            .drawRect(0, 0, this.assignedWidth, this.assignedHeight)\r\n            .endFill();\r\n        this.redrawSelected();\r\n    }\r\n    redrawSelected() {\r\n        this._selectedGraphics.clear();\r\n        if (this.hovered) {\r\n            this._selectedGraphics.beginFill(this._hoveredColor, this.opacity)\r\n                .drawRect(0, 0, this.assignedWidth, this.assignedHeight)\r\n                .endFill()\r\n                .beginHole()\r\n                .drawRect(this.selectedBorderWidth, this.selectedBorderWidth, this.assignedWidth - this.selectedBorderWidth * 2, this.assignedHeight - this.selectedBorderWidth * 2)\r\n                .endHole();\r\n        }\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        if (this._mouseClickType == MouseClickType.None || !(this.timeline.timelineMode == TimelineMode.Edit)) {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.hoveredColor = UIColors.trackEventSelectedColor;\r\n        }\r\n        else if (this._mouseClickType == MouseClickType.RightClick) {\r\n            this.hoveredColor = UIColors.trackEventDeleteColor;\r\n        }\r\n        this._startXPosition = this.x;\r\n        this._startYPosition = this.y;\r\n        this._startPointerPosition = event.data.getLocalPosition(this.parent);\r\n        this._snappedStartPointerPosition = this._startPointerPosition.clone();\r\n        this._snappedStartPointerPosition.x = this.timeline.snapCoordinateToDragType(this._snappedStartPointerPosition.x);\r\n    }\r\n    pointerMoveHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.timeline.timelineMode == TimelineMode.Edit) {\r\n            event.stopPropagation();\r\n            let moveDelta = this.timeline.snapCoordinateToDragType(event.data.getLocalPosition(this.parent).x) - this._snappedStartPointerPosition.x;\r\n            let newEventStart = this.timeline.metadata.positionQuarterNoteToBeats(this.eventStartPosition) + (moveDelta / this.timeline.beatWidth);\r\n            if (newEventStart < 0) {\r\n                moveDelta -= newEventStart * this.timeline.beatWidth;\r\n            }\r\n            this.x = this._startXPosition + moveDelta;\r\n        }\r\n    }\r\n    pointerUpHandler(event) {\r\n        super.pointerUpHandler(event);\r\n        if (!this._destroyed) {\r\n            this.hoveredColor = UIColors.trackEventHoveredColor;\r\n            this._startXPosition = undefined;\r\n            this._startYPosition = undefined;\r\n            this._startPointerPosition = undefined;\r\n            this._snappedStartPointerPosition = undefined;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        event.stopPropagation();\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            this.x = this._startXPosition;\r\n            this.clickHandler();\r\n        }\r\n        else if (this.timeline.timelineMode == TimelineMode.Edit && this._mouseClickType == MouseClickType.RightClick) {\r\n            this.deleteEvent();\r\n        }\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        if (this.timeline.timelineMode == TimelineMode.Edit) {\r\n            if (this._mouseClickType == MouseClickType.LeftClick) {\r\n                let point = event.data.getLocalPosition(this.parent);\r\n                let moveX = this.timeline.snapCoordinateToDragType(point.x) - this._snappedStartPointerPosition.x;\r\n                let moveY = point.y - this._snappedStartPointerPosition.y;\r\n                let newEventStart = this.timeline.metadata.positionQuarterNoteToBeats(this.eventStartPosition) + (moveX / this.timeline.beatWidth);\r\n                if (newEventStart < 0) {\r\n                    moveX -= newEventStart * this.timeline.beatWidth;\r\n                }\r\n                let dragDistance = new PIXI.Point(moveX, moveY);\r\n                this.dragHandler(dragDistance);\r\n            }\r\n            else if (this._mouseClickType == MouseClickType.RightClick && this.mouseIsOver) {\r\n                this.deleteEvent();\r\n            }\r\n        }\r\n    }\r\n    pointerOverHandler(event) {\r\n        super.pointerOverHandler(event);\r\n        this._hovered = true;\r\n        this.redrawSelected();\r\n    }\r\n    pointerOutHandler(event) {\r\n        super.pointerOutHandler(event);\r\n        this._hovered = false;\r\n        this.redrawSelected();\r\n    }\r\n    deleteEvent() {\r\n        this.destroy();\r\n    }\r\n}\r\nexport class NoteGroupTimelineEvent extends TrackTimelineEvent {\r\n    constructor(timeline, track, noteGroup, clickCallback) {\r\n        let [x, width] = timeline.getTimelineEventXWidth(noteGroup[0], noteGroup[1]);\r\n        let y = track.startY;\r\n        let height = track.height;\r\n        super(timeline, track, x, width, y, height);\r\n        this._noteGroup = noteGroup;\r\n        this._clickCallback = clickCallback;\r\n        this.redraw();\r\n    }\r\n    get noteGroup() {\r\n        return this._noteGroup;\r\n    }\r\n    get eventStartPosition() {\r\n        return this._noteGroup[0];\r\n    }\r\n    get eventDuration() {\r\n        return this._noteGroup[1] - this._noteGroup[0];\r\n    }\r\n    redraw() {\r\n        super.redraw();\r\n        this._notes = this.track.track.timeline.getEventsBetweenTimes(this._noteGroup[0], this._noteGroup[1]);\r\n        this.setNotes(this._notes, this.track.track.highestPitch, this.track.track.lowestPitch, this._noteGroup);\r\n    }\r\n    setNotes(notes, highestNote, lowestNote, noteGroup) {\r\n        let noteRange = NoteHelper.distanceBetweenNotes(highestNote, lowestNote) + 1;\r\n        let metadata = this.timeline.metadata;\r\n        let start = metadata.positionQuarterNoteToBeats(noteGroup[0]);\r\n        let end = metadata.positionQuarterNoteToBeats(noteGroup[1]);\r\n        let noteHeight = (this.track.height - this.paddingHeight * 2) / noteRange;\r\n        let positionMap = position => {\r\n            return (metadata.positionQuarterNoteToBeats(position) - start) / (end - start);\r\n        };\r\n        this._contentGraphics.beginFill(UIColors.trackEventHighlightColor, this._opacity);\r\n        notes.forEach(note => {\r\n            let startX = positionMap(note.startPosition) * this.assignedWidth;\r\n            let endX = positionMap(note.endPosition) * this.assignedWidth;\r\n            this._contentGraphics.drawRect(startX, NoteHelper.distanceBetweenNotes(highestNote, note.pitchString) * noteHeight + this.paddingHeight + NoteGroupTimelineEvent.noteMarginHeight, endX - startX - 2, noteHeight - NoteGroupTimelineEvent.noteMarginHeight * 2);\r\n        });\r\n        this._contentGraphics.endFill();\r\n    }\r\n    dragHandler(dragDistance) {\r\n        let metadata = this.timeline.metadata;\r\n        let noteGroup = Object.assign([], this._noteGroup);\r\n        let beatChange = dragDistance.x / this.timeline.beatWidth;\r\n        noteGroup[0] = metadata.positionBeatsToQuarterNote(metadata.positionQuarterNoteToBeats(noteGroup[0]) + beatChange);\r\n        let quarterNoteChange = noteGroup[0] - this._noteGroup[0];\r\n        noteGroup[1] = noteGroup[1] + quarterNoteChange;\r\n        let groups = this.track.getNoteGroupsWithinTime(noteGroup[0], noteGroup[1]);\r\n        let timePeriodClear = true;\r\n        for (let i = 0; i < groups.length; i++) {\r\n            if (!(groups[i][0] == this._noteGroup[0] && groups[i][1] == this._noteGroup[1])) {\r\n                timePeriodClear = false;\r\n                break;\r\n            }\r\n        }\r\n        if (!timePeriodClear) {\r\n            this.x = this._startXPosition;\r\n        }\r\n        else {\r\n            this._notes.forEach(note => {\r\n                this.track.track.timeline.removeEvent(note);\r\n                note.startPosition = note.startPosition + quarterNoteChange;\r\n                this.track.track.timeline.addEvent(note);\r\n            });\r\n            this.track.removeNoteGroup(this._noteGroup[0]);\r\n            this.track.addNoteGroup(noteGroup[0], noteGroup[1]);\r\n            this._noteGroup = noteGroup;\r\n            this.reinitialise();\r\n        }\r\n    }\r\n    deleteEvent() {\r\n        this._notes.forEach(note => {\r\n            this.track.track.removeNote(note);\r\n        });\r\n        delete this._notes;\r\n        this.track.removeNoteGroup(this.noteGroup[0]);\r\n        super.deleteEvent();\r\n    }\r\n    clickHandler() {\r\n        this._clickCallback(this.track, this.eventStartPosition);\r\n    }\r\n}\r\nNoteGroupTimelineEvent.noteMarginHeight = 2;\r\nexport class OneShotTimelineEvent extends TrackTimelineEvent {\r\n    constructor(timeline, track, event) {\r\n        let [x, width] = timeline.getTimelineEventXWidth(event.startPosition, event.endPosition);\r\n        if (!track.displayActualWidth) {\r\n            width = 0;\r\n        }\r\n        super(timeline, track, x, width, track.startY, track.height);\r\n        this.event = event;\r\n        this._modelEventRemoved = this._modelEventRemoved.bind(this);\r\n        this.event.removed.addListener(this._modelEventRemoved);\r\n        this.redraw();\r\n    }\r\n    get eventStartPosition() {\r\n        return this.event.startPosition;\r\n    }\r\n    get eventDuration() {\r\n        if (this.track.displayActualWidth) {\r\n            return this.event.duration;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    destroy() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.destroy();\r\n    }\r\n    deleteEvent() {\r\n        this.track.track.timeline.removeEvent(this.event);\r\n        super.deleteEvent();\r\n    }\r\n    _modelEventRemoved() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.deleteEvent();\r\n    }\r\n    dragHandler(dragDistance) {\r\n        let beatChange = dragDistance.x / this.timeline.beatWidth;\r\n        let newStartPosition = this.timeline.metadata.positionBeatsToQuarterNote(this.timeline.metadata.positionQuarterNoteToBeats(this.event.startPosition) + beatChange);\r\n        let eventsInPeriod = this.track.track.timeline.getEventsBetweenTimes(newStartPosition, newStartPosition + this.event.duration);\r\n        let timePeriodClear = true;\r\n        for (let i = 0; i < eventsInPeriod.length; i++) {\r\n            if (eventsInPeriod[i] != this.event) {\r\n                timePeriodClear = false;\r\n                break;\r\n            }\r\n        }\r\n        if (!timePeriodClear) {\r\n            this.x = this._startXPosition;\r\n        }\r\n        else {\r\n            let eventIndex = this.track.track.timeline.getIndexOfEvent(this.event);\r\n            this.track.track.timeline.editEvent(eventIndex, newStartPosition);\r\n            this.reinitialise();\r\n        }\r\n    }\r\n    clickHandler() {\r\n    }\r\n}\r\nexport class NoteTimelineEvent extends TrackTimelineEvent {\r\n    constructor(timeline, track, event, y, height) {\r\n        let [x, width] = timeline.getTimelineEventXWidth(event.startPosition, event.endPosition);\r\n        super(timeline, track, x, width, y, height);\r\n        this.event = event;\r\n        this._modelEventRemoved = this._modelEventRemoved.bind(this);\r\n        this.event.removed.addListener(this._modelEventRemoved);\r\n        this.redraw();\r\n    }\r\n    get eventStartPosition() {\r\n        return this.event.startPosition;\r\n    }\r\n    get eventDuration() {\r\n        return this.event.duration;\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        this._snappedStartPointerPosition.y = this._snappedStartPointerPosition.y - (this._snappedStartPointerPosition.y % SequencerTimeline.noteHeight) + SequencerTimeline.noteHeight;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        super.pointerMoveHandler(event);\r\n        if (this._mouseClickType == MouseClickType.LeftClick) {\r\n            let moveDelta = event.data.getLocalPosition(this.parent).y - this._snappedStartPointerPosition.y;\r\n            let oldNoteNumber = NoteHelper.noteStringToNoteNumber(this.event.pitchString);\r\n            let noteYPosition = Math.min(this.timeline.offsetContentHeight - UIPositioning.timelineHeaderHeight, Math.max(0, oldNoteNumber * SequencerTimeline.noteHeight - moveDelta));\r\n            this._lastNoteNumber = Math.floor(noteYPosition / SequencerTimeline.noteHeight);\r\n            this.y = this._startYPosition - (this._lastNoteNumber - oldNoteNumber) * SequencerTimeline.noteHeight;\r\n        }\r\n    }\r\n    destroy() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.destroy();\r\n    }\r\n    deleteEvent() {\r\n        this.track.removeEvent(this.event);\r\n        super.deleteEvent();\r\n    }\r\n    _modelEventRemoved() {\r\n        this.event.removed.removeListener(this._modelEventRemoved);\r\n        super.deleteEvent();\r\n    }\r\n    dragHandler(dragDistance) {\r\n        let beatChange = dragDistance.x / this.timeline.beatWidth;\r\n        let newNotePitch = NoteHelper.noteNumberToNoteString(this._lastNoteNumber);\r\n        let newStartPosition = this.timeline.metadata.positionBeatsToQuarterNote(this.timeline.metadata.positionQuarterNoteToBeats(this.event.startPosition) + beatChange);\r\n        let eventsInPeriod = this.track.track.timeline.getEventsBetweenTimes(newStartPosition, newStartPosition + this.event.duration);\r\n        let timePeriodClear = true;\r\n        for (let i = 0; i < eventsInPeriod.length; i++) {\r\n            if (eventsInPeriod[i] != this.event && eventsInPeriod[i].pitchString == newNotePitch) {\r\n                timePeriodClear = false;\r\n                break;\r\n            }\r\n        }\r\n        if (!timePeriodClear) {\r\n            this.x = this._startXPosition;\r\n            this.y = this._startYPosition;\r\n        }\r\n        else {\r\n            this.track.editEvent(this.event, newStartPosition, newNotePitch);\r\n            this.reinitialise();\r\n        }\r\n    }\r\n    clickHandler() {\r\n    }\r\n}\r\n//# sourceMappingURL=TrackTimelineEvent.js.map","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","import * as Redux from \"redux\";\r\nimport { UIPositioning } from \"../Settings/UITheme\";\r\nconst ADD_TRACK = \"ADD_TRACK\";\r\nconst REMOVE_TRACK = \"REMOVE_TRACK\";\r\nconst SET_TRACKS = \"SET_TRACKS\";\r\nconst EDIT_ATTRIBUTE = \"EDIT_ATTRIBUTE\";\r\nconst initialState = {\r\n    tracks: []\r\n};\r\nfunction UITrackReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case ADD_TRACK:\r\n            return {\r\n                tracks: [...state.tracks, action.track]\r\n            };\r\n        case REMOVE_TRACK:\r\n            let newTracks = state.tracks.filter((t, index) => index != action.index);\r\n            if (newTracks.length > 0) {\r\n                newTracks[0].startY = UIPositioning.timelineHeaderHeight;\r\n                for (let i = 1; i < newTracks.length; i++) {\r\n                    newTracks[i].startY = newTracks[i - 1].startY + newTracks[i - 1].height;\r\n                }\r\n            }\r\n            return { tracks: newTracks };\r\n        case SET_TRACKS:\r\n            return { tracks: action.tracks };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport const UITrackStore = Redux.createStore(UITrackReducer);\r\n//# sourceMappingURL=UITrackStore.js.map","import * as PIXI from \"pixi.js\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack.js\";\r\nimport { NoteGroupTimelineEvent, OneShotTimelineEvent } from \"../Shared/TrackTimelineEvent.js\";\r\nimport { UIColors } from \"../Settings/UITheme.js\";\r\nimport { ScrollableTimeline } from \"../Shared/ScrollableTimeline.js\";\r\nimport { TimelineMode, MouseClickType } from \"../Settings/Enums.js\";\r\nimport { editType } from \"../Settings/EditType.js\";\r\nimport { UITrackStore } from \"../ReactUI/UITrackStore.js\";\r\nimport { mouseState } from \"../Shared/MouseState.js\";\r\nexport class SongTimeline extends ScrollableTimeline {\r\n    constructor(startX, endX, endY, songManager, showSequencerCallback) {\r\n        super(startX, endX, 0, endY, songManager);\r\n        this.songManager = songManager;\r\n        this._noteGroupTimelineEvents = [];\r\n        this._showSequencerCallback = showSequencerCallback;\r\n        this._newEventGraphics = new PIXI.Graphics();\r\n        this.addChildAt(this._newEventGraphics, this.children.length - 3);\r\n        this._regenerateTimeline(0);\r\n        this._UITrackUpdateHandler = this._UITrackUpdateHandler.bind(this);\r\n        this._cleanupListener = UITrackStore.subscribe(this._UITrackUpdateHandler);\r\n    }\r\n    get contentHeight() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length == 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return tracks[tracks.length - 1].startY + tracks[tracks.length - 1].height;\r\n        }\r\n    }\r\n    destroy() {\r\n        this._cleanupListener();\r\n        super.destroy();\r\n    }\r\n    pointerMoveHandler(event) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this._newEventGraphics.visible = false;\r\n        super.pointerMoveHandler(event);\r\n        if (this.timelineMode == TimelineMode.Edit && mouseState.buttons === 0) {\r\n            this._newEventData = undefined;\r\n            let mousePos = event.data.getLocalPosition(this.parent);\r\n            mousePos.y -= this._newEventGraphics.y;\r\n            for (let i = 0; i < tracks.length; i++) {\r\n                if (tracks[i].startY + this._verticalScrollPosition < mousePos.y && tracks[i].startY + tracks[i].height + this._verticalScrollPosition > mousePos.y) {\r\n                    let track = tracks[i];\r\n                    if (mousePos.x < this.startX || mousePos.x > this.endX) {\r\n                        return;\r\n                    }\r\n                    let [barPosition, beatPosition, numBeats] = this._getBarFromStageCoordinates(mousePos.x);\r\n                    beatPosition = this.snapBeatToDragType(beatPosition);\r\n                    barPosition += beatPosition / numBeats;\r\n                    let startPosition = this.metadata.positionBarsToQuarterNote(barPosition);\r\n                    let endPosition = startPosition;\r\n                    let x = this._getStageCoordinatesFromBar(barPosition);\r\n                    let y = track.startY + this._verticalScrollPosition;\r\n                    let width = 0;\r\n                    let height = track.height;\r\n                    if (track instanceof NoteUITrack) {\r\n                        endPosition = startPosition + 4;\r\n                        if (track.getNoteGroupsWithinTime(startPosition, endPosition).length > 0) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    else if (track instanceof SoundFileUITrack) {\r\n                        endPosition = startPosition + track.eventDuration;\r\n                        let existingEvents = track.getOneShotsBetweenTime(startPosition, endPosition);\r\n                        if (!track.track.allowOverlaps && existingEvents.length > 0) {\r\n                            return;\r\n                        }\r\n                        else {\r\n                            if (existingEvents.length == 1 && existingEvents[0].startPosition == startPosition && existingEvents[0].endPosition == endPosition) {\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    width = (this.metadata.positionQuarterNoteToBeats(endPosition) - this.metadata.positionQuarterNoteToBeats(startPosition)) * this.beatWidth;\r\n                    width = Math.max(width, 5);\r\n                    this._newEventGraphics.clear();\r\n                    this._newEventGraphics.beginFill(UIColors.trackEventColor)\r\n                        .drawRect(x, y + 2, width, height - 2)\r\n                        .endFill()\r\n                        .beginHole()\r\n                        .drawRect(x + 2, y + 4, width - 4, height - 6)\r\n                        .endHole();\r\n                    this._newEventGraphics.visible = true;\r\n                    this._newEventData = { track: track, startPosition: startPosition };\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._newEventGraphics.visible = false;\r\n        }\r\n    }\r\n    pointerUpClickHandler(event) {\r\n        super.pointerUpClickHandler(event);\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.timelineMode == TimelineMode.Edit && this._newEventData != undefined) {\r\n            let track = this._newEventData.track;\r\n            let startPosition = this._newEventData.startPosition;\r\n            if (track instanceof NoteUITrack) {\r\n                track.addNoteGroup(startPosition, startPosition + 4);\r\n                this._initialiseNoteGroup([startPosition, startPosition + 4], track);\r\n            }\r\n            else if (track instanceof SoundFileUITrack) {\r\n                let event = track.track.addOneShot(startPosition);\r\n                this._initialiseOneShotTimelineEvent(event, track);\r\n            }\r\n            this._newEventData = undefined;\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        this._newEventGraphics.visible = false;\r\n        super.mouseWheelHandler(event, canvasX, canvasY);\r\n    }\r\n    regenerateTracks() {\r\n        while (this._eventContainer.children[0]) {\r\n            let timelineEvent = this._eventContainer.children[0];\r\n            timelineEvent.destroy();\r\n        }\r\n        this._noteGroupTimelineEvents = [];\r\n        this._initialiseTrackTimelineEvents();\r\n    }\r\n    reinitialiseTrack(track) {\r\n        for (let i = 0; i < this._eventContainer.children.length; i++) {\r\n            let timelineEvent = this._eventContainer.children[i];\r\n            if (timelineEvent.track === track) {\r\n                timelineEvent.reinitialise();\r\n            }\r\n        }\r\n    }\r\n    regenerateNoteGroups() {\r\n        this._noteGroupTimelineEvents.forEach(timelineEvent => {\r\n            timelineEvent.destroy();\r\n        });\r\n        this._noteGroupTimelineEvents = [];\r\n        UITrackStore.getState().tracks.forEach(track => {\r\n            if (track instanceof NoteUITrack) {\r\n                track.noteGroups.forEach(noteGroup => {\r\n                    this._initialiseNoteGroup(noteGroup, track);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    addedHandler() {\r\n        this.regenerateNoteGroups();\r\n        editType.noteLengthDisabled = true;\r\n        super.addedHandler();\r\n    }\r\n    _initialiseTrackTimelineEvents() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        for (let i = 0; i < tracks.length; i++) {\r\n            let track = tracks[i];\r\n            if (track instanceof NoteUITrack) {\r\n                track.noteGroups.forEach(group => {\r\n                    this._initialiseNoteGroup(group, track);\r\n                });\r\n            }\r\n            else if (track instanceof SoundFileUITrack) {\r\n                track.track.timeline.events.forEach(event => {\r\n                    this._initialiseOneShotTimelineEvent(event, track);\r\n                });\r\n            }\r\n        }\r\n        ;\r\n    }\r\n    _initialiseNoteGroup(noteGroup, track) {\r\n        let event = new NoteGroupTimelineEvent(this, track, noteGroup, this._showSequencerCallback);\r\n        this._eventContainer.addChild(event);\r\n        this._noteGroupTimelineEvents.push(event);\r\n        return event;\r\n    }\r\n    _initialiseOneShotTimelineEvent(event, track) {\r\n        let timelineEvent = new OneShotTimelineEvent(this, track, event);\r\n        this._eventContainer.addChild(timelineEvent);\r\n        return timelineEvent;\r\n    }\r\n    _UITrackUpdateHandler() {\r\n        let barHeight = Math.max(this.contentHeight, this.endY);\r\n        for (let i = 0; i < this._barContainer.children.length; i++) {\r\n            let bar = this._barContainer.children[i];\r\n            bar.resize(barHeight);\r\n        }\r\n        this.regenerateTracks();\r\n    }\r\n}\r\n//# sourceMappingURL=SongTimeline.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack.js\";\r\nimport { UIColors, UIPositioning } from \"../Settings/UITheme.js\";\r\nimport { BoxSelect, ClickOutsideWatcher, FAButton, IconFileInput, LabelledCheckbox, Slider } from \"../SharedReact/BasicElements.js\";\r\nimport { SimpleEvent } from \"../../HelperModules/SimpleEvent.js\";\r\nimport { UITrackStore } from \"../ReactUI/UITrackStore.js\";\r\nimport { LoadingErrorModal } from \"../SharedReact/Modal.js\";\r\nconst modalRoot = document.getElementById(\"root\");\r\nexport class TrackList extends PIXI.Container {\r\n    constructor(sidebarWidth, width, height, songManager) {\r\n        super();\r\n        this._verticalScroll = 0;\r\n        this.songManager = songManager;\r\n        this._sidebarWidth = sidebarWidth;\r\n        this.trackEdited = new SimpleEvent();\r\n        this._gainChanged = this._gainChanged.bind(this);\r\n        this._nameChanged = this._nameChanged.bind(this);\r\n        this._soundFileChanged = this._soundFileChanged.bind(this);\r\n        this._allowOverlapChanged = this._allowOverlapChanged.bind(this);\r\n        this._displayActualWidthChanged = this._displayActualWidthChanged.bind(this);\r\n        this._updateSoundFile = this._updateSoundFile.bind(this);\r\n        this._deleteTrack = this._deleteTrack.bind(this);\r\n        this._connectionChanged = this._connectionChanged.bind(this);\r\n        this.drawTracks = this.drawTracks.bind(this);\r\n        this._envelopeEnabledChanged = this._envelopeEnabledChanged.bind(this);\r\n        this._envelopeAttackChanged = this._envelopeAttackChanged.bind(this);\r\n        this._envelopeReleaseChanged = this._envelopeReleaseChanged.bind(this);\r\n        this._oscillatorTypeChanged = this._oscillatorTypeChanged.bind(this);\r\n        this._trackListGraphics = new PIXI.Graphics();\r\n        this._trackLineGraphics = new PIXI.Graphics();\r\n        this.addChild(this._trackListGraphics, this._trackLineGraphics);\r\n        this._trackSettingsContainer = document.createElement(\"div\");\r\n        this._trackSettingsContainer.style.position = \"absolute\";\r\n        this._trackSettingsContainer.style.width = this._sidebarWidth.toString() + \"px\";\r\n        this._trackSettingsContainer.style.overflow = \"hidden\";\r\n        document.getElementById(\"applicationContainer\").appendChild(this._trackSettingsContainer);\r\n        this.resize(width, height);\r\n        this._cleanupListener = UITrackStore.subscribe(this.drawTracks);\r\n    }\r\n    resize(width, height) {\r\n        this.endX = width;\r\n        this.endY = height;\r\n        this._trackListGraphics.clear().beginFill(UIColors.bgColor)\r\n            .drawRect(0, 0, this._sidebarWidth, this.endY)\r\n            .endFill();\r\n        this._trackListGraphics.beginFill(UIColors.fgColor)\r\n            .drawRect(this._sidebarWidth - 2, 0, 3, this.endY)\r\n            .drawRect(0, UIPositioning.timelineHeaderHeight, this._sidebarWidth, 2)\r\n            .endFill();\r\n        this.drawTracks();\r\n    }\r\n    updateVerticalScroll(value) {\r\n        this._trackLineGraphics.y = value;\r\n        this._verticalScroll = value;\r\n        this._rerenderList();\r\n    }\r\n    destroy() {\r\n        unmountComponentAtNode(this._trackSettingsContainer);\r\n        this._cleanupListener();\r\n        super.destroy({ children: true });\r\n    }\r\n    addedHandler() {\r\n        this._trackSettingsContainer.style.removeProperty(\"display\");\r\n    }\r\n    removedHandler() {\r\n        this._trackSettingsContainer.style.display = \"none\";\r\n    }\r\n    drawTracks() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this._trackLineGraphics.clear();\r\n        if (tracks.length > 0) {\r\n            this._trackLineGraphics.beginFill(UIColors.fgColor);\r\n            tracks.forEach(track => {\r\n                this._trackLineGraphics.drawRect(0, track.startY + track.height, this.endX, 2);\r\n            });\r\n            this._trackLineGraphics.endFill();\r\n            this._trackLineGraphics.mask = new PIXI.Graphics().beginFill(0xFFFFFF).drawRect(0, UIPositioning.timelineHeaderHeight, this.endX, this.endY).endFill();\r\n            this._trackSettingsContainer.style.top = tracks[0].startY.toString() + \"px\";\r\n            this._trackSettingsContainer.style.height = (this.endY - tracks[0].startY).toString() + \"px\";\r\n            this._rerenderList();\r\n        }\r\n        else {\r\n            unmountComponentAtNode(this._trackSettingsContainer);\r\n        }\r\n    }\r\n    _nameChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        tracks[index].name = value;\r\n        this._rerenderList();\r\n    }\r\n    _gainChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        tracks[index].track.audioSource.masterGain = value;\r\n        this._rerenderList();\r\n    }\r\n    _soundFileChanged(index, files) {\r\n        let modalDiv = document.createElement(\"div\");\r\n        modalRoot.appendChild(modalDiv);\r\n        render(React.createElement(LoadingErrorModal, { loading: true, title: \"Loading Sound File...\", onClose: () => { unmountComponentAtNode(modalDiv); } }), modalDiv);\r\n        let file = files[0];\r\n        const objecturl = URL.createObjectURL(file);\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', objecturl, true);\r\n        xhr.responseType = 'blob';\r\n        let onloadFunc = this._updateSoundFile;\r\n        xhr.onload = function (e) {\r\n            if (this.status == 200) {\r\n                onloadFunc(index, this.response);\r\n                unmountComponentAtNode(modalDiv);\r\n                modalRoot.removeChild(modalDiv);\r\n            }\r\n            else {\r\n                render(React.createElement(LoadingErrorModal, { loading: false, title: \"Unknown error. Please try again.\", onClose: () => { unmountComponentAtNode(modalDiv); modalRoot.removeChild(modalDiv); } }), modalDiv);\r\n            }\r\n        };\r\n        xhr.send();\r\n    }\r\n    _updateSoundFile(index, blob) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let tracks = UITrackStore.getState().tracks;\r\n            let soundFileTrack = tracks[index].track;\r\n            yield soundFileTrack.setSoundFile(blob);\r\n            this.trackEdited.emit(index);\r\n        });\r\n    }\r\n    _allowOverlapChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        let soundFileTrack = tracks[index].track;\r\n        soundFileTrack.allowOverlaps = value;\r\n        this._rerenderList();\r\n    }\r\n    _displayActualWidthChanged(index, value) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        let soundFileTrack = tracks[index];\r\n        soundFileTrack.displayActualWidth = value;\r\n        this.trackEdited.emit(index);\r\n        this._rerenderList();\r\n    }\r\n    _connectionChanged(index, connectionIndex) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        tracks[index].track.connectTo(tracks[index].track.possibleConnections[connectionIndex]);\r\n        this._rerenderList();\r\n    }\r\n    _deleteTrack(index) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this.songManager.removeTrack(tracks[index].track);\r\n        UITrackStore.dispatch({ type: \"REMOVE_TRACK\", index: index });\r\n    }\r\n    _oscillatorTypeChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            track.track.audioSource.oscillatorType = value.toLowerCase();\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _envelopeEnabledChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            track.track.audioSource.envelopeEnabled = value;\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _envelopeAttackChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            value = Math.max(0, Math.min(4, value));\r\n            track.track.audioSource.envelope.attack = value;\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _envelopeReleaseChanged(index, value) {\r\n        let track = UITrackStore.getState().tracks[index];\r\n        if (track instanceof NoteUITrack) {\r\n            value = Math.max(0, Math.min(4, value));\r\n            track.track.audioSource.envelope.release = value;\r\n            this._rerenderList();\r\n        }\r\n    }\r\n    _rerenderList() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length > 0) {\r\n            render(React.createElement(TrackSettingsList, { tracks: tracks, possibleConnections: this.songManager.connectionManager.possibleConnectionStrings, onNameChange: this._nameChanged, onGainChange: this._gainChanged, onSoundFileUpdate: this._soundFileChanged, onAllowOverlapChange: this._allowOverlapChanged, onDisplayActualWidthChange: this._displayActualWidthChanged, onDeleteTrack: this._deleteTrack, onConnectionChanged: this._connectionChanged, width: this._sidebarWidth, verticalScroll: this._verticalScroll, onOscillatorTypeChanged: this._oscillatorTypeChanged, onEnvelopeEnabledChanged: this._envelopeEnabledChanged, onEnvelopeAttackChanged: this._envelopeAttackChanged, onEnvelopeReleaseChanged: this._envelopeReleaseChanged }), this._trackSettingsContainer);\r\n        }\r\n    }\r\n}\r\nclass TrackSettingsList extends React.Component {\r\n    render() {\r\n        return (React.createElement(\"div\", { style: { position: \"absolute\", top: this.props.verticalScroll.toString() + \"px\" } }, this.props.tracks.map((track, index) => {\r\n            if (track instanceof SoundFileUITrack) {\r\n                return React.createElement(SoundFileTrackSettingsBox, { key: index, index: index, name: track.name, onNameChange: this.props.onNameChange, gain: track.track.audioSource.masterGain, onGainChange: this.props.onGainChange, deleteTrack: this.props.onDeleteTrack, width: this.props.width, height: track.height, soundFileChange: this.props.onSoundFileUpdate, displayActualWidth: track.displayActualWidth, displayActualWidthChange: this.props.onDisplayActualWidthChange, allowOverlap: track.track.allowOverlaps, allowOverlapChange: this.props.onAllowOverlapChange, connection: track.track.connection, connectionOptions: this.props.possibleConnections, connectionChanged: this.props.onConnectionChanged });\r\n            }\r\n            else if (track instanceof NoteUITrack) {\r\n                let instrument = track.track.audioSource;\r\n                let oscillatorProps = {\r\n                    enabled: instrument.envelopeEnabled,\r\n                    enabledChanged: this.props.onEnvelopeEnabledChanged,\r\n                    attack: instrument.envelope.attack,\r\n                    attackChanged: this.props.onEnvelopeAttackChanged,\r\n                    release: instrument.envelope.release,\r\n                    releaseChanged: this.props.onEnvelopeReleaseChanged\r\n                };\r\n                return React.createElement(OscillatorTrackSettingsBox, { key: index, index: index, name: track.name, onNameChange: this.props.onNameChange, gain: track.track.audioSource.masterGain, onGainChange: this.props.onGainChange, deleteTrack: this.props.onDeleteTrack, width: this.props.width, height: track.height, oscillatorType: capitalise(track.track.audioSource.oscillatorType), oscillatorTypeChanged: this.props.onOscillatorTypeChanged, envelopeSettings: oscillatorProps, connection: track.track.connection, connectionOptions: this.props.possibleConnections, connectionChanged: this.props.onConnectionChanged });\r\n            }\r\n        })));\r\n    }\r\n}\r\nclass SoundFileTrackSettingsBox extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleNameChange = this.handleNameChange.bind(this);\r\n        this.handleGainChange = this.handleGainChange.bind(this);\r\n        this.handleConnectionChanged = this.handleConnectionChanged.bind(this);\r\n    }\r\n    handleNameChange(value) {\r\n        this.props.onNameChange(this.props.index, value);\r\n    }\r\n    handleGainChange(value) {\r\n        this.props.onGainChange(this.props.index, value);\r\n    }\r\n    handleConnectionChanged(index) {\r\n        this.props.connectionChanged(this.props.index, index);\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { style: { position: \"relative\" } },\r\n            React.createElement(FAButton, { className: \"trackSettingsDeleteButton buttonColorAnim\", title: \"Delete Track\", iconName: \"fa fa-close\", onClick: () => { this.props.deleteTrack(this.props.index); } }),\r\n            React.createElement(\"div\", { className: \"trackSettingsDiv\", style: { width: this.props.width, height: this.props.height } },\r\n                React.createElement(\"input\", { className: \"trackSettingsName\", type: \"text\", value: this.props.name, size: Math.max(1, this.props.name.length), onChange: (event) => { this.handleNameChange(event.target.value); } }),\r\n                React.createElement(Slider, { min: 0, max: 1, step: 0.01, value: this.props.gain, onChange: this.handleGainChange }),\r\n                React.createElement(IconFileInput, { className: \"trackSettingsIconInput buttonColorAnim\", title: \"Set Sound File\", iconName: \"fa fa-music\", onChange: (files) => { this.props.soundFileChange(this.props.index, files); }, accept: \"audio/*\" }),\r\n                React.createElement(LabelledCheckbox, { className: \"trackSettingsInteractable pointer\", label: \"Display Actual Width:\", state: this.props.displayActualWidth, onChange: (value) => { this.props.displayActualWidthChange(this.props.index, value); } }),\r\n                React.createElement(LabelledCheckbox, { className: \"trackSettingsInteractable pointer\", label: \"Allow Overlaps:\", state: this.props.allowOverlap, onChange: (value) => { this.props.allowOverlapChange(this.props.index, value); } }),\r\n                React.createElement(BoxSelect, { className: \"trackSettingsBoxSelect\", boxSelectTitle: this.props.connection, options: this.props.connectionOptions, selectedCallback: this.handleConnectionChanged })));\r\n    }\r\n}\r\nclass OscillatorTrackSettingsBox extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleNameChange = this.handleNameChange.bind(this);\r\n        this.handleGainChange = this.handleGainChange.bind(this);\r\n        this.handleConnectionChanged = this.handleConnectionChanged.bind(this);\r\n    }\r\n    handleNameChange(value) {\r\n        this.props.onNameChange(this.props.index, value);\r\n    }\r\n    handleGainChange(value) {\r\n        this.props.onGainChange(this.props.index, value);\r\n    }\r\n    handleConnectionChanged(index) {\r\n        this.props.connectionChanged(this.props.index, index);\r\n    }\r\n    render() {\r\n        let es = this.props.envelopeSettings;\r\n        return React.createElement(\"div\", { style: { position: \"relative\" } },\r\n            React.createElement(FAButton, { className: \"trackSettingsDeleteButton buttonColorAnim\", title: \"Delete Effect\", iconName: \"fa fa-close\", onClick: () => { this.props.deleteTrack(this.props.index); } }),\r\n            React.createElement(\"div\", { className: \"trackSettingsDiv\", style: { width: this.props.width, height: this.props.height } },\r\n                React.createElement(\"input\", { className: \"trackSettingsName\", type: \"text\", value: this.props.name, size: Math.max(1, this.props.name.length), onChange: (event) => { this.handleNameChange(event.target.value); } }),\r\n                React.createElement(Slider, { min: 0, max: 1, step: 0.01, value: this.props.gain, onChange: this.handleGainChange }),\r\n                React.createElement(\"div\", { className: \"trackSettingsInteractable\" },\r\n                    React.createElement(\"p\", null, \"Type:\"),\r\n                    React.createElement(BoxSelect, { boxSelectTitle: this.props.oscillatorType, options: OscillatorTrackSettingsBox.oscillatorOptions, selectedCallback: (value) => { this.props.oscillatorTypeChanged(this.props.index, OscillatorTrackSettingsBox.oscillatorOptions[value]); } })),\r\n                React.createElement(OscillatorEnvelope, { enabled: es.enabled, enabledChanged: (value) => { es.enabledChanged(this.props.index, value); }, attack: es.attack, attackChanged: (value) => { es.attackChanged(this.props.index, value); }, release: es.release, releaseChanged: (value) => { es.releaseChanged(this.props.index, value); } }),\r\n                React.createElement(BoxSelect, { className: \"trackSettingsBoxSelect\", boxSelectTitle: this.props.connection, options: this.props.connectionOptions, selectedCallback: this.handleConnectionChanged })));\r\n    }\r\n}\r\nOscillatorTrackSettingsBox.oscillatorOptions = [\"Sine\", \"Square\", \"Sawtooth\", \"Triangle\"];\r\nclass OscillatorEnvelope extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            detailsVisible: false\r\n        };\r\n        this._openCloseButton = React.createRef();\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"oscillatorEnvelopeContainer\" },\r\n            React.createElement(\"button\", { className: \"mainBoxSelectButton\", ref: this._openCloseButton, onClick: () => { this.setState({ detailsVisible: !this.state.detailsVisible }); } }, \"Envelope Settings\"),\r\n            this.state.detailsVisible && React.createElement(ClickOutsideWatcher, { callback: () => this.setState({ detailsVisible: false }) },\r\n                React.createElement(OscillatorEnvelopeDetails, Object.assign({}, this.props, { mainButton: this._openCloseButton }))));\r\n    }\r\n}\r\nclass OscillatorEnvelopeDetails extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lastAttackValue: \"\",\r\n            lastReleaseValue: \"\"\r\n        };\r\n    }\r\n    render() {\r\n        let disabled = !this.props.enabled;\r\n        return React.createElement(\"div\", { className: \"envelopeOverlayOuterContainer\", style: { left: this.props.mainButton.current.offsetWidth + 2 } },\r\n            React.createElement(\"div\", { className: \"envelopeOverlayInnerContainer\" },\r\n                React.createElement(\"div\", { className: \"boxSelectOverlayArrow left\" }),\r\n                React.createElement(\"div\", { className: \"boxSelectOverlay envelopeOverlayContent\" },\r\n                    React.createElement(\"div\", { className: \"effectProperty\" },\r\n                        React.createElement(\"p\", null, \"Enabled:\"),\r\n                        React.createElement(\"input\", { type: \"checkbox\", checked: this.props.enabled, onChange: (event) => { this.props.enabledChanged(event.target.checked); } })),\r\n                    React.createElement(\"div\", { className: \"effectProperty\" },\r\n                        React.createElement(\"p\", null, \"Attack:\"),\r\n                        React.createElement(\"input\", { type: \"number\", step: \"0.01\", value: (parseFloat(this.state.lastAttackValue) === this.props.attack ? this.state.lastAttackValue : this.props.attack.toString()), onChange: (event) => { this.setState({ lastAttackValue: event.target.value }); this.props.attackChanged(event.target.value); }, disabled: disabled })),\r\n                    React.createElement(\"div\", { className: \"effectProperty\" },\r\n                        React.createElement(\"p\", null, \"Release:\"),\r\n                        React.createElement(\"input\", { type: \"number\", step: \"0.01\", value: (parseFloat(this.state.lastReleaseValue) === this.props.release ? this.state.lastReleaseValue : this.props.release.toString()), onChange: (event) => { this.setState({ lastReleaseValue: event.target.value }); this.props.releaseChanged(event.target.value); }, disabled: disabled })))));\r\n    }\r\n}\r\nfunction capitalise(s) {\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n//# sourceMappingURL=TrackList.js.map","import * as PIXI from \"pixi.js\";\r\nimport { MouseTypeContainer } from \"./InteractiveContainer\";\r\nimport { MouseClickType } from \"../Settings/Enums\";\r\nimport { UIPositioning } from \"../Settings/UITheme\";\r\nexport class VerticalScrollView extends MouseTypeContainer {\r\n    constructor(width, height) {\r\n        super();\r\n        this.scrollingEnabled = true;\r\n        this._sidebarPosition = UIPositioning.sequencerSidebarWidth;\r\n        this._verticalScrollPosition = 0;\r\n        this._interactivityRect = new PIXI.Graphics();\r\n        this.addChild(this._interactivityRect);\r\n        this.endX = width;\r\n        this.endY = height;\r\n        this.resizeInteractiveArea(width, height);\r\n        this.on(\"added\", this.addedHandler);\r\n        this.on(\"removed\", this.removedHandler);\r\n    }\r\n    resize(width, height) {\r\n        this.endX = width;\r\n        this.endY = height;\r\n        this.resizeInteractiveArea(width, height);\r\n        this.timeline.resize(width, height);\r\n    }\r\n    get verticalScrollPosition() {\r\n        return this._verticalScrollPosition;\r\n    }\r\n    set verticalScrollPosition(value) {\r\n        let oldVSP = this._verticalScrollPosition;\r\n        this._verticalScrollPosition = Math.min(0, Math.max(-this.contentHeight + this.endY - 2, value));\r\n        if (oldVSP != this._verticalScrollPosition) {\r\n            this.updateVerticalScroll(this._verticalScrollPosition);\r\n        }\r\n    }\r\n    resizeInteractiveArea(width, height) {\r\n        this._interactivityRect.clear();\r\n        this._interactivityRect.beginFill(0x000000, 1.0);\r\n        this._interactivityRect.drawRect(0, 0, width, height);\r\n        this._interactivityRect.endFill();\r\n        this._interactivityRect.alpha = 0.0;\r\n    }\r\n    pointerDownHandler(event) {\r\n        super.pointerDownHandler(event);\r\n        if (this._mouseClickType == MouseClickType.None) {\r\n            return;\r\n        }\r\n        this._startPointerPosition = event.data.getLocalPosition(this);\r\n        this._startVerticalScrollPosition = this._verticalScrollPosition;\r\n    }\r\n    pointerMoveHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.scrollingEnabled) {\r\n            this.verticalScrollPosition = event.data.getLocalPosition(this).y - this._startPointerPosition.y + this._startVerticalScrollPosition;\r\n        }\r\n    }\r\n    pointerUpHandler(event) {\r\n        super.pointerUpHandler(event);\r\n        this._startPointerPosition = undefined;\r\n        this._startVerticalScrollPosition = undefined;\r\n    }\r\n    pointerUpDragHandler(event) {\r\n        if (this._mouseClickType == MouseClickType.LeftClick && this.scrollingEnabled) {\r\n            this.verticalScrollPosition = event.data.getLocalPosition(this).y - this._startPointerPosition.y + this._startVerticalScrollPosition;\r\n        }\r\n    }\r\n    mouseWheelHandler(event, canvasX, canvasY) {\r\n        this.timeline.mouseWheelHandler(event, canvasX, canvasY);\r\n    }\r\n    addedHandler() {\r\n        this.timeline.addedHandler();\r\n    }\r\n    removedHandler() {\r\n        this.timeline.removedHandler();\r\n    }\r\n    destroy() {\r\n        super.destroy({ children: true });\r\n    }\r\n}\r\n//# sourceMappingURL=VerticalScrollView.js.map","import * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { SequencerTimeline } from \"./SequencerTimeline\";\r\nimport { UIColors, UIFonts, UIPositioning } from \"../Settings/UITheme\";\r\nimport { VerticalScrollView } from \"../Shared/VerticalScrollView\";\r\nimport NoteHelper from \"../../HelperModules/NoteHelper\";\r\nimport { FAButton } from \"../SharedReact/BasicElements\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nexport class SequencerView extends VerticalScrollView {\r\n    constructor(width, height, track, songManager, startFrom) {\r\n        super(width, height);\r\n        this.timeline = new SequencerTimeline(this._sidebarPosition, width, height, this.contentHeight, songManager, track, startFrom);\r\n        this._sidebarUI = new PIXI.Graphics().beginFill(UIColors.bgColor).drawRect(0, 0, this._sidebarPosition, height).endFill();\r\n        this._sidebarUI.beginFill(UIColors.fgColor)\r\n            .drawRect(0, UIPositioning.timelineHeaderHeight, this._sidebarPosition, 2)\r\n            .drawRect(this._sidebarPosition - 4, 0, 4, height)\r\n            .endFill();\r\n        this._noteList = new SequencerNotes(this._sidebarPosition, width, height, SequencerView.numNotes);\r\n        this.addChild(this._sidebarUI, this._noteList, this.timeline);\r\n        this._backButtonContainer = document.createElement(\"div\");\r\n        Object.assign(this._backButtonContainer.style, {\r\n            position: \"absolute\",\r\n            top: \"5px\",\r\n            left: \"5px\"\r\n        });\r\n        document.getElementById(\"applicationContainer\").appendChild(this._backButtonContainer);\r\n        render(React.createElement(FAButton, { iconName: \"fa fa-arrow-left\", onClick: () => { navigationView.back(); } }), this._backButtonContainer);\r\n    }\r\n    get contentHeight() {\r\n        return SequencerTimeline.noteHeight * SequencerView.numNotes;\r\n    }\r\n    resize(width, height) {\r\n        super.resize(width, height);\r\n        this._sidebarUI.clear();\r\n        this._sidebarUI.beginFill(UIColors.bgColor).drawRect(0, 0, this._sidebarPosition, height).endFill();\r\n        this._sidebarUI.beginFill(UIColors.fgColor).drawRect(this._sidebarPosition - 4, 0, 4, height).endFill();\r\n        this._noteList.resize(width, height);\r\n    }\r\n    destroy() {\r\n        unmountComponentAtNode(this._backButtonContainer);\r\n        document.getElementById(\"applicationContainer\").removeChild(this._backButtonContainer);\r\n        super.destroy();\r\n    }\r\n    updateVerticalScroll(value) {\r\n        value = Math.min(0, value);\r\n        this.timeline.updateVerticalScroll(value);\r\n        this._noteList.y = value;\r\n    }\r\n}\r\nSequencerView.numNotes = 99;\r\nclass SequencerNotes extends PIXI.Container {\r\n    constructor(width, screenWidth, screenHeight, numNotes) {\r\n        super();\r\n        this._numNotes = numNotes - 2;\r\n        this._horizontalLines = new PIXI.Graphics();\r\n        this._horizontalLines.y = UIPositioning.timelineHeaderHeight;\r\n        for (let i = 0; i < this._numNotes; i++) {\r\n            let height = i * SequencerTimeline.noteHeight;\r\n            let text = new PIXI.Text(NoteHelper.noteNumberToNoteString(this._numNotes - 1 - i), UIFonts.trackFont);\r\n            text.x = width / 2 - text.width / 2;\r\n            text.y = UIPositioning.timelineHeaderHeight + height + SequencerTimeline.noteHeight / 2 - text.height / 2 + 1;\r\n            this.addChild(text);\r\n        }\r\n        this.addChild(this._horizontalLines);\r\n        this.resize(screenWidth, screenHeight);\r\n    }\r\n    resize(width, height) {\r\n        this._horizontalLines.beginFill(UIColors.fgColor);\r\n        for (let i = 0; i < this._numNotes; i++) {\r\n            let currentHeight = i * SequencerTimeline.noteHeight;\r\n            this._horizontalLines.drawRect(0, currentHeight, width, 1);\r\n        }\r\n        this._horizontalLines.endFill();\r\n        this.mask = new PIXI.Graphics().beginFill(0xFFFFFF).drawRect(0, UIPositioning.timelineHeaderHeight, width, height).endFill();\r\n    }\r\n}\r\n//# sourceMappingURL=SequencerView.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from \"react\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport { SongTimeline } from \"./SongTimeline\";\r\nimport { TrackList } from \"./TrackList.js\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack.js\";\r\nimport { VerticalScrollView } from \"../Shared/VerticalScrollView.js\";\r\nimport { UIPositioning } from \"../Settings/UITheme\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nimport { SequencerView } from \"../Sequencer/SequencerView\";\r\nimport { Dropdown } from \"../SharedReact/BasicElements\";\r\nimport { UITrackStore } from \"../ReactUI/UITrackStore\";\r\nexport class TimelineView extends VerticalScrollView {\r\n    constructor(width, height, songManager) {\r\n        super(width, height);\r\n        this._sidebarPosition = UIPositioning.timelineSidebarWidth;\r\n        this._songManager = songManager;\r\n        this.interactive = true;\r\n        this.showSequencer = this.showSequencer.bind(this);\r\n        this.addedHandler = this.addedHandler.bind(this);\r\n        this.removedHandler = this.removedHandler.bind(this);\r\n        this._trackEdited = this._trackEdited.bind(this);\r\n        this._UITrackUpdateHandler = this._UITrackUpdateHandler.bind(this);\r\n        this.on(\"added\", this.addedHandler);\r\n        this.on(\"removed\", this.removedHandler);\r\n        this.trackList = new TrackList(this._sidebarPosition, width, height, songManager);\r\n        this.trackList.trackEdited.addListener(this._trackEdited);\r\n        this.addChild(this.trackList);\r\n        this.timeline = new SongTimeline(this._sidebarPosition, width, height, songManager, this.showSequencer);\r\n        this.addChild(this.timeline);\r\n        this._newTrackDropdownContainer = document.createElement(\"div\");\r\n        document.getElementById(\"applicationContainer\").appendChild(this._newTrackDropdownContainer);\r\n        Object.assign(this._newTrackDropdownContainer.style, {\r\n            position: \"absolute\",\r\n            top: \"5px\",\r\n            left: \"5px\"\r\n        });\r\n        this._renderNewTrackObject();\r\n        this._cleanupListener = UITrackStore.subscribe(this._UITrackUpdateHandler);\r\n    }\r\n    get contentHeight() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length == 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return tracks[tracks.length - 1].startY + tracks[tracks.length - 1].height;\r\n        }\r\n    }\r\n    resize(width, height) {\r\n        super.resize(width, height);\r\n        this.trackList.resize(width, height);\r\n    }\r\n    destroy() {\r\n        unmountComponentAtNode(this._newTrackDropdownContainer);\r\n        document.getElementById(\"applicationContainer\").removeChild(this._newTrackDropdownContainer);\r\n        this.removeAllListeners();\r\n        this._cleanupListener();\r\n        super.destroy();\r\n    }\r\n    showSequencer(track, startPosition) {\r\n        let sequencerView = new SequencerView(this.endX, this.endY, track, this._songManager, Math.floor(this.timeline.metadata.positionQuarterNoteToBars(startPosition)));\r\n        navigationView.show(sequencerView);\r\n    }\r\n    addedHandler() {\r\n        super.addedHandler();\r\n        this.trackList.addedHandler();\r\n        this._renderNewTrackObject();\r\n    }\r\n    removedHandler() {\r\n        super.removedHandler();\r\n        this.trackList.removedHandler();\r\n        unmountComponentAtNode(this._newTrackDropdownContainer);\r\n    }\r\n    addOscillatorTrack() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        let track = this._songManager.addOscillatorTrack();\r\n        let startY = this.contentHeight != 0 ? this.contentHeight : UIPositioning.timelineHeaderHeight;\r\n        let settings = { name: \"Track \" + (tracks.length + 1).toString(), startY: startY, height: 250, modelTrackID: track.id, noteGroups: [] };\r\n        UITrackStore.dispatch({ type: \"ADD_TRACK\", track: new NoteUITrack(settings, track) });\r\n    }\r\n    addSoundFileTrack() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let tracks = UITrackStore.getState().tracks;\r\n            let track = yield this._songManager.addSoundFileTrack();\r\n            let startY = this.contentHeight != 0 ? this.contentHeight : UIPositioning.timelineHeaderHeight;\r\n            let settings = { type: \"soundFile\", name: (\"Track \" + (tracks.length + 1).toString()), startY: startY, height: 250, displayActualWidth: true, modelTrackID: track.id };\r\n            UITrackStore.dispatch({ type: \"ADD_TRACK\", track: new SoundFileUITrack(settings, track) });\r\n        });\r\n    }\r\n    updateVerticalScroll(value) {\r\n        value = Math.min(0, value);\r\n        this.timeline.updateVerticalScroll(value);\r\n        this.trackList.updateVerticalScroll(value);\r\n    }\r\n    _trackEdited(index) {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        this.timeline.reinitialiseTrack(tracks[index]);\r\n    }\r\n    _UITrackUpdateHandler() {\r\n        let tracks = UITrackStore.getState().tracks;\r\n        if (tracks.length > 0) {\r\n            let lastTrack = tracks[tracks.length - 1];\r\n            let endHeight = lastTrack.startY + lastTrack.height + this.verticalScrollPosition;\r\n            if (endHeight < this.endY) {\r\n                this.verticalScrollPosition += (this.endY - endHeight);\r\n            }\r\n        }\r\n        else {\r\n            this.verticalScrollPosition = 0;\r\n        }\r\n        this._renderNewTrackObject();\r\n    }\r\n    _renderNewTrackObject() {\r\n        let buttonClassName = \"addTrackButton\";\r\n        if (UITrackStore.getState().tracks.length == 0) {\r\n            buttonClassName += \" highlight\";\r\n        }\r\n        render(React.createElement(Dropdown, { title: \"New Track\", iconName: \"fa fa-plus\", optionTitles: [\"New Oscillator Track\", \"New Sound File Track\"], buttonClassName: buttonClassName, optionsDivClassName: \"addTrackOptionsDiv\", optionClassName: \"addTrackItem\", optionClickCallback: (index) => __awaiter(this, void 0, void 0, function* () {\r\n                if (index == 0) {\r\n                    this.addOscillatorTrack();\r\n                }\r\n                else if (index == 1) {\r\n                    yield this.addSoundFileTrack();\r\n                }\r\n            }) }), this._newTrackDropdownContainer);\r\n    }\r\n}\r\n//# sourceMappingURL=TimelineView.js.map","import * as React from \"react\";\r\nimport { editType } from \"../Settings/EditType\";\r\nimport { SelectionGroup } from \"../SharedReact/BasicElements\";\r\nexport class EditPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._snapTypeChanged = this._snapTypeChanged.bind(this);\r\n        this._lengthTypeChanged = this._lengthTypeChanged.bind(this);\r\n        this._lengthEnabledChanged = this._lengthEnabledChanged.bind(this);\r\n        this.state = {\r\n            selectedSnapButton: editType.snapType,\r\n            selectedLengthButton: editType.noteLength,\r\n            lengthEnabled: editType.noteLengthDisabled\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        editType.noteLengthDisabledChange.addListener(this._lengthEnabledChanged);\r\n    }\r\n    componentWillUnmount() {\r\n        editType.noteLengthDisabledChange.removeListener(this._lengthEnabledChanged);\r\n    }\r\n    _snapTypeChanged(index) {\r\n        this.setState({ selectedSnapButton: index });\r\n        editType.snapType = index;\r\n    }\r\n    _lengthTypeChanged(index) {\r\n        this.setState({ selectedLengthButton: index });\r\n        editType.noteLength = index;\r\n    }\r\n    _lengthEnabledChanged(value) {\r\n        this.setState({ lengthEnabled: value });\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"editPanel\" },\r\n            React.createElement(\"div\", { className: \"selectionGroup\" },\r\n                React.createElement(\"p\", { className: \"selectionGroupTitle\" }, \"Snap Type:\"),\r\n                React.createElement(SelectionGroup, { className: \"snapTypeGroup\", buttonClassName: \"panelButton buttonAnim\", disabled: false, selectedButton: this.state.selectedSnapButton, buttonContents: [\"1\", React.createElement(Fraction, { n: 1, d: 2 }), React.createElement(Fraction, { n: 1, d: 4 }), React.createElement(Fraction, { n: 1, d: 8 }), React.createElement(\"p\", null, \"\\u2716\")], buttonTitles: [\"Snap to Whole Beat\", \"Snap To Half Beat\", \"Snap To Quarter Beat\", \"Snap to Eighth Beat\", \"No Snapping\"], onButtonClick: this._snapTypeChanged })),\r\n            React.createElement(\"div\", { className: \"selectionGroup\" },\r\n                React.createElement(\"p\", { className: \"selectionGroupTitle\" }, \"Note Length:\"),\r\n                React.createElement(SelectionGroup, { className: \"lengthTypeGroup\", buttonClassName: \"panelButton buttonAnim noteButton\", disabled: this.state.lengthEnabled, selectedButton: this.state.selectedLengthButton, buttonContents: [React.createElement(\"span\", null, \"\\uD834\\uDD5D\"), React.createElement(\"span\", null, \"\\uD834\\uDD5E\"), React.createElement(\"span\", null, \"\\uD834\\uDD5F\"), React.createElement(\"span\", null, \"\\uD834\\uDD60\"), React.createElement(\"span\", null, \"\\uD834\\uDD61\"), React.createElement(\"span\", null, \"\\uD834\\uDD62\")], buttonTitles: [\"Whole Note\", \"Half Note\", \"Quarter Note\", \"8th Note\", \"16th Note\", \"32nd Note\"], onButtonClick: this._lengthTypeChanged })));\r\n    }\r\n}\r\nclass Fraction extends React.PureComponent {\r\n    render() {\r\n        return React.createElement(\"p\", { style: { fontFamily: \"Arial, Helvetica, sans-serif\" } },\r\n            React.createElement(\"sup\", null, this.props.n),\r\n            \"\\u2044\",\r\n            React.createElement(\"sub\", null, this.props.d));\r\n    }\r\n}\r\n//# sourceMappingURL=EditPanel.js.map","import * as React from \"react\";\r\nimport { editType } from \"../Settings/EditType\";\r\nimport { FAButton } from \"../SharedReact/BasicElements\";\r\nexport class PlaybackPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._markerCenteredChanged = this._markerCenteredChanged.bind(this);\r\n        this._playingStateChanged = this._playingStateChanged.bind(this);\r\n        editType.markerCenteredChanged.addListener(this._markerCenteredChanged);\r\n        this.state = {\r\n            playing: this.props.songManager.playing,\r\n            markerCentred: editType.markerCentered,\r\n        };\r\n    }\r\n    _playingStateChanged(value) {\r\n        this.setState({ playing: value });\r\n    }\r\n    _markerCenteredChanged(value) {\r\n        this.setState({ markerCentred: value });\r\n    }\r\n    componentDidMount() {\r\n        this.props.songManager.playingChangedEvent.addListener(this._playingStateChanged);\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.songManager.playingChangedEvent.removeListener(this._playingStateChanged);\r\n    }\r\n    render() {\r\n        let c = \"panelButton buttonAnim\";\r\n        return React.createElement(\"div\", { className: \"playbackPanel\" },\r\n            React.createElement(\"div\", { className: \"playbackButtons\" },\r\n                React.createElement(PlayPauseButton, { className: c, playing: this.state.playing, playFunction: () => { this.props.songManager.start(); }, pauseFunction: () => { this.props.songManager.stop(); } }),\r\n                React.createElement(FAButton, { className: c, title: \"Stop\", iconName: \"fa fa-stop\", onClick: () => { this.props.songManager.stopToBeginning(); this.setState({ playing: this.props.songManager.playing }); } })),\r\n            React.createElement(\"button\", { className: \"recentreButton buttonAnim\", onClick: () => { editType.markerCentered = true; }, style: { visibility: ((!this.state.markerCentred && this.props.songManager.playing) ? \"visible\" : \"hidden\") } }, \"Recentre Marker\"));\r\n    }\r\n}\r\nclass PlayPauseButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        let icon = null;\r\n        let func = null;\r\n        let title = \"\";\r\n        if (this.props.playing) {\r\n            title = \"Pause\";\r\n            icon = \"fa fa-pause\";\r\n            func = this.props.pauseFunction;\r\n        }\r\n        else {\r\n            title = \"Play\";\r\n            icon = \"fa fa-play\";\r\n            func = this.props.playFunction;\r\n        }\r\n        return React.createElement(FAButton, { title: title, className: this.props.className, iconName: icon, onClick: func });\r\n    }\r\n}\r\n//# sourceMappingURL=PlaybackPanel.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = ReactBeautifulDnd;","import * as React from \"react\";\r\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\r\nimport { EffectsChain } from \"../../Model/Nodes/EffectsChain\";\r\nimport { BoxSelect, FAButton, Slider } from \"../SharedReact/BasicElements\";\r\nexport class EffectsChainPanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._deserialiseFunction = () => { this.forceUpdate(); };\r\n        this._effectChanged = this._effectChanged.bind(this);\r\n        this._effectRemoved = this._effectRemoved.bind(this);\r\n        this._newEffect = this._newEffect.bind(this);\r\n        this._moveEffect = this._moveEffect.bind(this);\r\n        this._selectedChainChanged = this._selectedChainChanged.bind(this);\r\n        this._deleteCurrentChain = this._deleteCurrentChain.bind(this);\r\n        this._preGainChanged = this._preGainChanged.bind(this);\r\n        this._postGainChanged = this._postGainChanged.bind(this);\r\n        this._connectionChanged = this._connectionChanged.bind(this);\r\n        this.state = {\r\n            currentChainNumber: 0,\r\n            hidden: false\r\n        };\r\n    }\r\n    get currentChain() {\r\n        if (this.state.currentChainNumber === 0) {\r\n            return this.props.connectionManager.bus;\r\n        }\r\n        return this.props.connectionManager.chains[this.state.currentChainNumber - 1];\r\n    }\r\n    get chainsAndBus() {\r\n        return [this.props.connectionManager.bus].concat(this.props.connectionManager.chains);\r\n    }\r\n    _newEffect(newEffectIndex) {\r\n        this.currentChain.addEffect(this.currentChain.effects.length, EffectsChain.possibleEffects.get(EffectsChainInfo.effectTitles[newEffectIndex])());\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _effectChanged(effectIndex, propertyIndex, value) {\r\n        let property = this.currentChain.effects[effectIndex].properties[propertyIndex];\r\n        property.value = value;\r\n        this.currentChain.effectNodes[effectIndex][property.propertyName] = value;\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _effectRemoved(index) {\r\n        this.currentChain.removeEffect(index);\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _moveEffect(oldIndex, newIndex) {\r\n        this.currentChain.moveEffect(oldIndex, newIndex);\r\n        this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n    }\r\n    _hidePanel() {\r\n        this.setState({ hidden: !this.state.hidden }, () => {\r\n            if (this.state.hidden) {\r\n                this.props.hideShowCallback();\r\n            }\r\n            else {\r\n                setTimeout(() => { this.props.hideShowCallback(); }, 500);\r\n            }\r\n        });\r\n    }\r\n    _selectedChainChanged(index) {\r\n        if (index > this.props.connectionManager.chains.length) {\r\n            this.props.connectionManager.addChain();\r\n        }\r\n        this.setState({ currentChainNumber: index });\r\n    }\r\n    _deleteCurrentChain() {\r\n        this.props.connectionManager.removeChain(this.currentChain.chainName);\r\n        this.setState({ currentChainNumber: 0 });\r\n    }\r\n    _preGainChanged(value) {\r\n        this.currentChain.preGain = value;\r\n    }\r\n    _postGainChanged(value) {\r\n        this.currentChain.postGain = value;\r\n    }\r\n    _connectionChanged(index, value) {\r\n        let curChain = this.currentChain;\r\n        if (curChain !== this.props.connectionManager.bus && this.props.connectionManager.getConnections(curChain)[0] != value) {\r\n            console.log(this.props.connectionManager.getConnections(curChain)[0]);\r\n            this.props.connectionManager.removeAllConnections(curChain);\r\n            this.props.connectionManager.addConnection(curChain, value);\r\n            this.setState({ currentChainNumber: this.state.currentChainNumber });\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.props.connectionManager.effectsDeserialised.addListener(this._deserialiseFunction);\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.connectionManager.effectsDeserialised.removeListener(this._deserialiseFunction);\r\n    }\r\n    render() {\r\n        let options = this.chainsAndBus.map(value => { return value.chainName; });\r\n        options.push(\"New Chain...\");\r\n        let curChain = this.currentChain;\r\n        return React.createElement(\"div\", { className: \"effectsChainPanel\" + (this.state.hidden ? \" hidden\" : \"\") },\r\n            React.createElement(FAButton, { title: this.state.hidden ? \"Show Effects\" : \"Hide Effects\", className: \"effectsChainHideShowButton\", iconName: this.state.hidden ? \"fa fa-caret-left\" : \"fa fa-caret-right\", onClick: () => { this._hidePanel(); } }),\r\n            React.createElement(\"div\", { className: \"effectsChainContent\" },\r\n                React.createElement(\"div\", { className: \"effectsChainPanelTitle\" },\r\n                    React.createElement(BoxSelect, { title: \"New Chain\", mainButtonClassName: \"effectsChainTitleButton\", selectButtonClassName: \"effectsChainSelectButton\", selected: this.state.currentChainNumber, options: options, selectedCallback: this._selectedChainChanged }),\r\n                    React.createElement(FAButton, { title: \"Delete Chain\", className: \"effectsChainButton buttonColorAnim size title\", iconName: \"fa fa-close\", onClick: this._deleteCurrentChain, disabled: curChain.chainName === \"Bus\" })),\r\n                React.createElement(EffectsChainInfo, { effectsChain: curChain.effects, moveEffect: this._moveEffect, effectPropertyChanged: this._effectChanged, newEffect: this._newEffect, effectRemoved: this._effectRemoved, preGainValue: curChain.preGain, preGainValueChanged: this._preGainChanged, postGainValue: curChain.postGain, postGainValueChanged: this._postGainChanged, connection: this.props.connectionManager.getConnections(curChain)[0], connectionOptions: (curChain === this.props.connectionManager.bus ? [\"Context\"] : [\"Context\", \"Bus\"]), connectionChangedCallback: this._connectionChanged })));\r\n    }\r\n}\r\nclass EffectsChainInfo extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._onDragEnd = this._onDragEnd.bind(this);\r\n    }\r\n    _onDragEnd(result) {\r\n        if (!result.destination || result.source.index == result.destination.index) {\r\n            return;\r\n        }\r\n        this.props.moveEffect(result.source.index, result.destination.index);\r\n    }\r\n    render() {\r\n        let effects = this.props.effectsChain.map((effect, index) => {\r\n            return React.createElement(ChainEffect, Object.assign({ key: effect.id, effectIndex: index }, effect, { onPropertyChange: this.props.effectPropertyChanged, onDelete: this.props.effectRemoved }));\r\n        });\r\n        return React.createElement(\"div\", { className: \"effectsList\" },\r\n            React.createElement(\"div\", { className: \"effectsListDivider\", style: { marginTop: \"0px\" } }),\r\n            React.createElement(\"div\", { className: \"effectProperty range\" },\r\n                React.createElement(\"p\", { className: \"effectTitleText\" }, \"Input Gain:\"),\r\n                React.createElement(Slider, { value: this.props.preGainValue, min: 0, max: 1, step: 0.01, onRelease: true, onChange: this.props.preGainValueChanged })),\r\n            React.createElement(\"div\", { className: \"effectProperty range \" },\r\n                React.createElement(\"p\", { className: \"effectTitleText\" }, \"Output Gain:\"),\r\n                React.createElement(Slider, { value: this.props.postGainValue, min: 0, max: 1, step: 0.01, onRelease: true, onChange: this.props.postGainValueChanged })),\r\n            React.createElement(\"div\", { className: \"effectProperty list\" },\r\n                React.createElement(\"p\", { className: \"effectTitleText\" }, \"Output:\"),\r\n                React.createElement(BoxSelect, { mainButtonClassName: \"\", boxSelectTitle: this.props.connection, options: this.props.connectionOptions, selectedCallback: this.props.connectionChangedCallback })),\r\n            React.createElement(\"div\", { className: \"effectsListDivider\" }),\r\n            React.createElement(\"p\", { className: \"effectTitleText\" }, \"Effects:\"),\r\n            React.createElement(DragDropContext, { onDragEnd: this._onDragEnd },\r\n                React.createElement(Droppable, { droppableId: \"effectsList\" }, (provided, snapshot) => (React.createElement(\"div\", Object.assign({ className: \"effectsListDroppable effectsListElement\" + (snapshot.isDraggingOver ? \" dragging\" : \"\"), ref: provided.innerRef }, provided.droppableProps),\r\n                    effects,\r\n                    provided.placeholder)))),\r\n            React.createElement(BoxSelect, { mainButtonClassName: \"effectsChainButton buttonColorAnim dropdownButton\", title: \"New Effect\", options: EffectsChainInfo.effectTitles, selectedCallback: this.props.newEffect },\r\n                React.createElement(\"i\", { className: \"fa fa-plus\" })));\r\n    }\r\n}\r\nEffectsChainInfo.effectTitles = Array.from(EffectsChain.possibleEffects.keys());\r\nclass ChainEffect extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            collapsed: true\r\n        };\r\n        this._contentRef = React.createRef();\r\n    }\r\n    render() {\r\n        return React.createElement(Draggable, { draggableId: this.props.id, index: this.props.effectIndex }, (provided, snapshot) => (React.createElement(\"div\", Object.assign({ className: \"chainEffect\" + (snapshot.isDragging ? \" dragging\" : \"\"), ref: provided.innerRef }, provided.draggableProps),\r\n            React.createElement(\"div\", Object.assign({ className: \"chainEffectTitle\" }, provided.dragHandleProps),\r\n                React.createElement(FAButton, { className: \"effectsChainButton buttonColorAnim size\", title: this.state.collapsed ? \"Expand\" : \"Collapse\", iconName: \"fa \" + (this.state.collapsed ? \"fa-chevron-right\" : \"fa-chevron-down\"), onClick: () => this.setState({ collapsed: !this.state.collapsed }) }),\r\n                React.createElement(\"p\", { className: \"effectTitleText\", style: { marginRight: \"5px\" } }, this.props.effectType),\r\n                React.createElement(FAButton, { className: \"effectsChainButton buttonColorAnim size\", title: \"Delete Effect\", iconName: \"fa fa-close\", onClick: () => { this.props.onDelete(this.props.effectIndex); } })),\r\n            React.createElement(\"div\", { ref: this._contentRef, className: \"effectContent\", style: { maxHeight: (this.state.collapsed ? undefined : (this._contentRef.current ? this._contentRef.current.scrollHeight + \"px\" : \"initial\")) } }, this.props.properties.map((property, index) => {\r\n                if (property.editable) {\r\n                    switch (property.type) {\r\n                        case \"number\":\r\n                            if (property.hasOwnProperty(\"min\")) {\r\n                                return React.createElement(RangeEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                            }\r\n                            else {\r\n                                return React.createElement(NumberEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                            }\r\n                        case \"string\":\r\n                            return React.createElement(StringEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                        case \"boolean\":\r\n                            return React.createElement(BooleanEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                        case \"list\":\r\n                            return React.createElement(ListEffectProperty, Object.assign({ key: index, effectIndex: this.props.effectIndex, propertyIndex: index }, property, { onChange: this.props.onPropertyChange }));\r\n                        default:\r\n                            console.log(\"Unknown property type: \" + property.type);\r\n                            return null;\r\n                    }\r\n                }\r\n            })))));\r\n    }\r\n}\r\nfunction capitalise(s) {\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\nclass NumberEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty number\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(\"input\", { type: \"number\", name: nameToUse, value: this.props.value, step: this.props.step, onChange: (event) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, event.target.value); } }));\r\n    }\r\n}\r\nclass RangeEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty range\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(Slider, { onRelease: true, min: this.props.min, max: this.props.max, step: this.props.step, value: this.props.value, onChange: (value) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, value); } }));\r\n    }\r\n}\r\nclass StringEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty string\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(\"input\", { type: \"text\", name: nameToUse, value: this.props.value, onChange: (event) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, event.target.value); } }));\r\n    }\r\n}\r\nclass BooleanEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty boolean\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(\"input\", { type: \"checkbox\", name: nameToUse, checked: this.props.value, onChange: (event) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, event.target.checked); } }));\r\n    }\r\n}\r\nclass ListEffectProperty extends React.PureComponent {\r\n    render() {\r\n        let nameToUse = capitalise(this.props.displayName ? this.props.displayName : this.props.propertyName) + \":\";\r\n        return React.createElement(\"div\", { className: \"effectProperty list\" },\r\n            React.createElement(\"p\", null, nameToUse),\r\n            React.createElement(BoxSelect, { selected: this.props.options.indexOf(this.props.value), options: this.props.options, selectedCallback: (newIndex) => { this.props.onChange(this.props.effectIndex, this.props.propertyIndex, this.props.options[newIndex]); } }));\r\n    }\r\n}\r\n//# sourceMappingURL=EffectsChainPanel.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as React from \"react\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nimport { NoteUITrack, SoundFileUITrack } from \"../Shared/UITrack\";\r\nimport { FAButton } from \"../SharedReact/BasicElements\";\r\nimport { LoadingErrorModal } from \"../SharedReact/Modal\";\r\nimport { UITrackStore } from \"./UITrackStore\";\r\nexport class SerialisePanel extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._modalCloseFunc = () => { this.setState({ modalShown: false }); };\r\n        this.state = {\r\n            modalShown: false,\r\n            modalLoading: true,\r\n            modalText: \"\"\r\n        };\r\n        this._serialise = this._serialise.bind(this);\r\n        this._deserialise = this._deserialise.bind(this);\r\n        this._getFile = this._getFile.bind(this);\r\n        this._saveToWAV = this._saveToWAV.bind(this);\r\n        this._inputRef = React.createRef();\r\n    }\r\n    _serialise() {\r\n        this.setState({ modalShown: true, modalLoading: true, modalText: \"Saving to File...\" });\r\n        let tracks = UITrackStore.getState().tracks.map(t => t.serialise());\r\n        let modelSettings = this.props.songManager.serialise();\r\n        let songSettings = Object.assign(Object.assign({}, modelSettings), { UITracks: tracks });\r\n        let outputString = JSON.stringify(songSettings);\r\n        let a = document.createElement(\"a\");\r\n        let file = new Blob([outputString], { type: \"application/web-sequencer\" });\r\n        a.href = URL.createObjectURL(file);\r\n        a.download = new Date().toLocaleDateString() + \".sqn\";\r\n        a.click();\r\n        this.setState({ modalShown: false });\r\n    }\r\n    _deserialise() {\r\n        this._inputRef.current.click();\r\n    }\r\n    _getFile(event) {\r\n        this.setState({ modalShown: true, modalLoading: true, modalText: \"Loading File...\" });\r\n        const file = event.target.files[0];\r\n        if (!file) {\r\n            this.setState({ modalLoading: false, modalText: \"Invalid File\" });\r\n            return;\r\n        }\r\n        else {\r\n            let reader = new FileReader();\r\n            reader.onloadend = () => __awaiter(this, void 0, void 0, function* () {\r\n                let parsed = JSON.parse(reader.result);\r\n                if (!(typeof parsed === 'object' && parsed.hasOwnProperty(\"fileType\") && parsed.fileType == \"SequencerSongSettings\")) {\r\n                    console.log(\"Invalid file type.\");\r\n                    return;\r\n                }\r\n                yield this.props.songManager.deserialise(parsed);\r\n                let UITracks = [];\r\n                for (let i = 0; i < parsed.UITracks.length; i++) {\r\n                    let track = parsed.UITracks[i];\r\n                    let baseTrack = this.props.songManager.tracks.find(modelTrack => modelTrack.id == track.modelTrackID);\r\n                    if (baseTrack == undefined) {\r\n                        console.log(\"UITrack with missing ID found: \", track);\r\n                        continue;\r\n                    }\r\n                    switch (track.type) {\r\n                        case \"oscillator\":\r\n                            UITracks.push(new NoteUITrack(track, baseTrack));\r\n                            break;\r\n                        case \"soundFile\":\r\n                            UITracks.push(new SoundFileUITrack(track, baseTrack));\r\n                            break;\r\n                        default:\r\n                            console.log(\"Invalid track type: \", track.type);\r\n                            break;\r\n                    }\r\n                }\r\n                UITrackStore.dispatch({ type: \"SET_TRACKS\", tracks: UITracks });\r\n                while (navigationView.viewDepth > 1) {\r\n                    navigationView.back();\r\n                }\r\n                this.setState({ modalShown: false });\r\n            });\r\n            reader.readAsText(file);\r\n        }\r\n    }\r\n    _saveToWAV() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.setState({ modalShown: true, modalLoading: true, modalText: \"Generating WAV...\" });\r\n            let file = null;\r\n            try {\r\n                file = yield this.props.songManager.saveToWAV();\r\n            }\r\n            catch (_a) {\r\n                this.setState({ modalLoading: false, modalText: \"Please add events to the song before saving.\" });\r\n                return;\r\n            }\r\n            let a = document.createElement(\"a\");\r\n            a.href = URL.createObjectURL(file);\r\n            a.download = new Date().toLocaleDateString() + \".wav\";\r\n            a.click();\r\n            this.setState({ modalShown: false, modalText: \"\" });\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        this._inputRef.current.addEventListener(\"change\", this._getFile);\r\n    }\r\n    componentWillUnmount() {\r\n        this._inputRef.current.removeEventListener(\"change\", this._getFile);\r\n    }\r\n    render() {\r\n        let c = \"panelButton buttonAnim\";\r\n        return React.createElement(\"div\", { className: \"serialisePanel\" },\r\n            React.createElement(FAButton, { className: c, title: \"Save File\", iconName: \"fa fa-save\", onClick: this._serialise }),\r\n            React.createElement(FAButton, { className: c, title: \"Open File\", iconName: \"fa fa-folder-open\", onClick: this._deserialise }),\r\n            React.createElement(FAButton, { className: c, title: \"Download as WAV\", iconName: \"fa fa-music\", onClick: this._saveToWAV }),\r\n            this.state.modalShown && React.createElement(LoadingErrorModal, { loading: this.state.modalLoading, title: this.state.modalText, onClose: this._modalCloseFunc }),\r\n            React.createElement(\"input\", { type: \"file\", ref: this._inputRef, accept: \".sqn\", style: { position: \"absolute\", top: \"-9999px\" } }));\r\n    }\r\n}\r\n//# sourceMappingURL=SerialisePanel.js.map","import * as PIXI from \"pixi.js\";\r\nimport * as React from \"react\";\r\nimport { SongManager } from \"../../Model/SongManagement/SongManager\";\r\nimport { navigationView } from \"../Shared/NavigationView\";\r\nimport { UIColors } from \"../Settings/UITheme\";\r\nimport { TimelineView } from \"../Timeline/TimelineView\";\r\nimport { EditPanel } from \"./EditPanel\";\r\nimport { PlaybackPanel } from \"./PlaybackPanel\";\r\nimport { EffectsChainPanel } from \"./EffectsChainPanel\";\r\nimport { SerialisePanel } from \"./SerialisePanel\";\r\nexport class SequencerApp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this._hideShowCallback = () => { this._timelineRef.current.resizePIXIApp(); };\r\n        this.state = {\r\n            songManager: new SongManager(),\r\n        };\r\n        this._timelineRef = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        this.props.hideLoader();\r\n    }\r\n    componentWillUnmount() {\r\n        this.state.songManager.destroy();\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: \"fullScreen\" },\r\n            React.createElement(\"div\", { style: { position: \"relative\", width: \"100%\", height: \"100%\" } },\r\n                React.createElement(\"div\", { className: \"sequencerAppTopBar\" },\r\n                    React.createElement(PlaybackPanel, { songManager: this.state.songManager }),\r\n                    React.createElement(EditPanel, null),\r\n                    React.createElement(SerialisePanel, { songManager: this.state.songManager })),\r\n                React.createElement(\"div\", { className: \"sequencerAppMainPanel\" },\r\n                    React.createElement(PIXITimeline, { ref: this._timelineRef, className: \"sequencerAppMainPanelLeft\", songManager: this.state.songManager }),\r\n                    React.createElement(EffectsChainPanel, { connectionManager: this.state.songManager.connectionManager, hideShowCallback: this._hideShowCallback }))));\r\n    }\r\n}\r\nexport class PIXITimeline extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            pixiApp: null,\r\n        };\r\n        PIXI.settings.ROUND_PIXELS = true;\r\n        this._pixiContainer = React.createRef();\r\n        this.resizePIXIApp = this.resizePIXIApp.bind(this);\r\n    }\r\n    resizePIXIApp() {\r\n        const parent = this.state.pixiApp.view.parentElement;\r\n        this.state.pixiApp.renderer.resize(parent.clientWidth, parent.clientHeight);\r\n        navigationView.currentElement.resize(parent.clientWidth, parent.clientHeight);\r\n        this.state.pixiApp.render();\r\n    }\r\n    componentDidMount() {\r\n        let app = new PIXI.Application();\r\n        app.view.setAttribute(\"oncontextmenu\", \"return false;\");\r\n        app.view.addEventListener(\"mousedown\", function (e) { e.preventDefault(); });\r\n        app.renderer.backgroundColor = UIColors.bgColor;\r\n        this._pixiContainer.current.appendChild(app.view);\r\n        window.addEventListener(\"resize\", this.resizePIXIApp);\r\n        const parent = app.view.parentElement;\r\n        app.renderer.resize(parent.clientWidth, parent.clientHeight);\r\n        let timeline = new TimelineView(app.renderer.width, app.renderer.height, this.props.songManager);\r\n        app.view.addEventListener(\"wheel\", event => navigationView.passWheelEvent(event, app.renderer.view.getBoundingClientRect().left, app.renderer.view.getBoundingClientRect().top));\r\n        navigationView.setStageRenderer(app.stage, app.renderer);\r\n        navigationView.show(timeline);\r\n        this.setState({ pixiApp: app }, this.resizePIXIApp);\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"resize\", this.resizePIXIApp);\r\n        if (this.state.pixiApp != undefined) {\r\n            this.state.pixiApp.destroy(true);\r\n        }\r\n    }\r\n    render() {\r\n        return React.createElement(\"div\", { className: this.props.className },\r\n            React.createElement(\"div\", { id: \"applicationContainer\", ref: this._pixiContainer }));\r\n    }\r\n}\r\n//# sourceMappingURL=SequencerApp.js.map","import * as React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { SequencerApp } from \"./View/ReactUI/SequencerApp\";\r\nlet loaderDiv = document.getElementById(\"loader\");\r\nlet hideLoader = () => {\r\n    loaderDiv.className += \" hide\";\r\n    setTimeout(() => { loaderDiv.parentElement.removeChild(loaderDiv); }, 500);\r\n};\r\ndocument.title = \"WebSequencer\";\r\nrender(React.createElement(SequencerApp, { hideLoader: hideLoader }), document.getElementById('root'));\r\n//# sourceMappingURL=app.js.map"],"sourceRoot":""}